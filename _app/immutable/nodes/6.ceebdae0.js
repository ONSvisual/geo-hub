import{s as le,e as M,i as h,d as p,a as P,c as B,I as se,l as E,f as G,m as N,g as H,h as z,j as I,C as D,n as j,k as ne,D as Q,B as fe}from"../chunks/scheduler.0afccbf5.js";import{S as oe,i as ie,a as c,t as m,c as O,b,d as v,m as k,e as w,g as V}from"../chunks/index.bcdabb8d.js";import{e as U}from"../chunks/Table.svelte_svelte_type_style_lang.7216bae0.js";import{b as S}from"../chunks/paths.f00833cf.js";import{a as $e,B as ce,T as ue,g as pe,S as me,b as _e}from"../chunks/Icon.58b7d2dc.js";import{a as de}from"../chunks/AnalyticsBanner.ea81b067.js";import{C as ge,a as J,M as he,b as be,c as W}from"../chunks/MapTooltip.svelte_svelte_type_style_lang.15dec27d.js";import{N as ve,a as ke}from"../chunks/NavSections.c703c5e0.js";import{g as C,a as X,c as Y}from"../chunks/index.c6f66d7c.js";import{S as we,A as Ce}from"../chunks/AreaList.493b88f1.js";import{m as L,c as Se}from"../chunks/utils.33ec0114.js";function Z(f,t,l){const e=f.slice();return e[9]=t[l],e}function x(f){let t,l,e,a,r,s,n,i;return t=new ce({props:{links:[{label:"Home",href:"/",refresh:!0},{label:"Explore local statistics",href:`${S}/`},...[...f[1].parents].reverse().map(f[5]),{label:C(f[1]),href:`${S}/${L(f[1].areacd)}`},{label:"Data"}],background:"#eaeaea"}}),e=new ue({props:{title:C(f[1])+" data",background:"#eaeaea",$$slots:{default:[Ne]},$$scope:{ctx:f}}}),r=new ge({props:{marginTop:!0,$$slots:{default:[ye]},$$scope:{ctx:f}}}),n=new ve({props:{contentsLabel:"Data for this area",$$slots:{default:[Me]},$$scope:{ctx:f}}}),{c(){b(t.$$.fragment),l=P(),b(e.$$.fragment),a=P(),b(r.$$.fragment),s=P(),b(n.$$.fragment)},l(o){v(t.$$.fragment,o),l=B(o),v(e.$$.fragment,o),a=B(o),v(r.$$.fragment,o),s=B(o),v(n.$$.fragment,o)},m(o,$){k(t,o,$),h(o,l,$),k(e,o,$),h(o,a,$),k(r,o,$),h(o,s,$),k(n,o,$),i=!0},p(o,$){const u={};$&2&&(u.links=[{label:"Home",href:"/",refresh:!0},{label:"Explore local statistics",href:`${S}/`},...[...o[1].parents].reverse().map(o[5]),{label:C(o[1]),href:`${S}/${L(o[1].areacd)}`},{label:"Data"}]),t.$set(u);const _={};$&2&&(_.title=C(o[1])+" data"),$&4098&&(_.$$scope={dirty:$,ctx:o}),e.$set(_);const T={};$&4110&&(T.$$scope={dirty:$,ctx:o}),r.$set(T);const A={};$&4097&&(A.$$scope={dirty:$,ctx:o}),n.$set(A)},i(o){i||(c(t.$$.fragment,o),c(e.$$.fragment,o),c(r.$$.fragment,o),c(n.$$.fragment,o),i=!0)},o(o){m(t.$$.fragment,o),m(e.$$.fragment,o),m(r.$$.fragment,o),m(n.$$.fragment,o),i=!1},d(o){o&&(p(l),p(a),p(s)),w(t,o),w(e,o),w(r,o),w(n,o)}}}function ee(f){let t,l;return t=new me({props:{$$slots:{default:[Ee]},$$scope:{ctx:f}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&4098&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){l||(c(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function Ee(f){let t,l,e=C(f[1],"the")+"",a,r,s,n=f[1].areacd+"",i,o;return{c(){t=E(`Localised data, insights and trends for
    `),l=G("a"),a=E(e),s=E(`
    (`),i=E(n),o=E(")."),this.h()},l($){t=N($,`Localised data, insights and trends for
    `),l=H($,"A",{href:!0});var u=z(l);a=N(u,e),u.forEach(p),s=N($,`
    (`),i=N($,n),o=N($,")."),this.h()},h(){I(l,"href",r=S+"/"+L(f[1].areacd))},m($,u){h($,t,u),h($,l,u),D(l,a),h($,s,u),h($,i,u),h($,o,u)},p($,u){u&2&&e!==(e=C($[1],"the")+"")&&j(a,e),u&2&&r!==(r=S+"/"+L($[1].areacd))&&I(l,"href",r),u&2&&n!==(n=$[1].areacd+"")&&j(i,n)},d($){$&&(p(t),p(l),p(s),p(i),p(o))}}}function Ne(f){let t,l,e=f[1].areacd!=="K02000001"&&ee(f);return{c(){e&&e.c(),t=M()},l(a){e&&e.l(a),t=M()},m(a,r){e&&e.m(a,r),h(a,t,r),l=!0},p(a,r){a[1].areacd!=="K02000001"?e?(e.p(a,r),r&2&&c(e,1)):(e=ee(a),e.c(),c(e,1),e.m(t.parentNode,t)):e&&(V(),m(e,1,1,()=>{e=null}),O())},i(a){l||(c(e),l=!0)},o(a){m(e),l=!1},d(a){a&&p(t),e&&e.d(a)}}}function Pe(f){let t,l,e,a;return t=new W({props:{id:"boundary-fill",type:"fill",paint:{"fill-color":"rgb(17,140,123)","fill-opacity":.2}}}),e=new W({props:{id:"boundary-line",type:"line",paint:{"line-color":"rgb(17,140,123)","line-width":2}}}),{c(){b(t.$$.fragment),l=P(),b(e.$$.fragment)},l(r){v(t.$$.fragment,r),l=B(r),v(e.$$.fragment,r)},m(r,s){k(t,r,s),h(r,l,s),k(e,r,s),a=!0},p:Q,i(r){a||(c(t.$$.fragment,r),c(e.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),a=!1},d(r){r&&p(l),w(t,r),w(e,r)}}}function Be(f){let t,l;return t=new be({props:{id:"boundary",type:"geojson",data:f[2],$$slots:{default:[Pe]},$$scope:{ctx:f}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&4&&(r.data=e[2]),a&4096&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){l||(c(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function te(f){let t,l;return t=new he({props:{style:S+"/data/mapstyle.json",location:{bounds:f[1].bounds},interactive:!1,options:{fitBoundsOptions:{padding:20}},$$slots:{default:[Be]},$$scope:{ctx:f}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&2&&(r.location={bounds:e[1].bounds}),a&4100&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){l||(c(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function De(f){let t,l=f[2],e,a=te(f);return{c(){t=G("div"),a.c(),this.h()},l(r){t=H(r,"DIV",{});var s=z(t);a.l(s),s.forEach(p),this.h()},h(){ne(t,"height","200px")},m(r,s){h(r,t,s),a.m(t,null),e=!0},p(r,s){s&4&&le(l,l=r[2])?(V(),m(a,1,1,Q),O(),a=te(r),a.c(),c(a,1),a.m(t,null)):a.p(r,s)},i(r){e||(c(a),e=!0)},o(r){m(a),e=!1},d(r){r&&p(t),a.d(r)}}}function Le(f){let t;return{c(){t=E("Read more")},l(l){t=N(l,"Read more")},m(l,e){h(l,t,e)},d(l){l&&p(t)}}}function Te(f){let t,l=C(f[1])+"",e,a,r=X(f[1].typenm)+"",s,n,i=C(f[1].parents[0],"in","prefix")+"",o,$,u,_=C(f[1].parents[0])+"",T,A,F,q,K,y;return K=new _e({props:{variant:"secondary",icon:"arrow",iconPosition:"after",href:S+"/"+L(f[1].areacd),small:!0,$$slots:{default:[Le]},$$scope:{ctx:f}}}),{c(){t=G("p"),e=E(l),a=E(" is "),s=E(r),n=P(),o=E(i),$=P(),u=G("a"),T=E(_),F=E("."),q=P(),b(K.$$.fragment),this.h()},l(d){t=H(d,"P",{});var g=z(t);e=N(g,l),a=N(g," is "),s=N(g,r),n=B(g),o=N(g,i),$=B(g),u=H(g,"A",{href:!0,"data-sveltekit-noscroll":!0});var R=z(u);T=N(R,_),R.forEach(p),F=N(g,"."),g.forEach(p),q=B(d),v(K.$$.fragment,d),this.h()},h(){I(u,"href",A=S+"/"+L(f[1].parents[0].areacd)+"data/"),I(u,"data-sveltekit-noscroll","")},m(d,g){h(d,t,g),D(t,e),D(t,a),D(t,s),D(t,n),D(t,o),D(t,$),D(t,u),D(u,T),D(t,F),h(d,q,g),k(K,d,g),y=!0},p(d,g){(!y||g&2)&&l!==(l=C(d[1])+"")&&j(e,l),(!y||g&2)&&r!==(r=X(d[1].typenm)+"")&&j(s,r),(!y||g&2)&&i!==(i=C(d[1].parents[0],"in","prefix")+"")&&j(o,i),(!y||g&2)&&_!==(_=C(d[1].parents[0])+"")&&j(T,_),(!y||g&2&&A!==(A=S+"/"+L(d[1].parents[0].areacd)+"data/"))&&I(u,"href",A);const R={};g&2&&(R.href=S+"/"+L(d[1].areacd)),g&4096&&(R.$$scope={dirty:g,ctx:d}),K.$set(R)},i(d){y||(c(K.$$.fragment,d),y=!0)},o(d){m(K.$$.fragment,d),y=!1},d(d){d&&(p(t),p(q)),w(K,d)}}}function ae(f){let t,l;return t=new Ce({props:{postcode:f[3]}}),t.$on("clear",f[6]),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&8&&(r.postcode=e[3]),t.$set(r)},i(e){l||(c(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function Ae(f){let t,l,e,a;t=new we({props:{id:"search",mode:"search",idKey:"areacd",labelKey:"areanm",groupKey:"group",label:"Type a place name or postcode",placeholder:"Eg. Titchfield or PO15 5RR",autoClear:!0}}),t.$on("select",f[4]);let r=f[3]&&ae(f);return{c(){b(t.$$.fragment),l=P(),r&&r.c(),e=M()},l(s){v(t.$$.fragment,s),l=B(s),r&&r.l(s),e=M()},m(s,n){k(t,s,n),h(s,l,n),r&&r.m(s,n),h(s,e,n),a=!0},p(s,n){s[3]?r?(r.p(s,n),n&8&&c(r,1)):(r=ae(s),r.c(),c(r,1),r.m(e.parentNode,e)):r&&(V(),m(r,1,1,()=>{r=null}),O())},i(s){a||(c(t.$$.fragment,s),c(r),a=!0)},o(s){m(t.$$.fragment,s),m(r),a=!1},d(s){s&&(p(l),p(e)),w(t,s),r&&r.d(s)}}}function ye(f){let t,l,e,a,r,s;return t=new J({props:{noBackground:!0,$$slots:{default:[De]},$$scope:{ctx:f}}}),e=new J({props:{title:"About this area",$$slots:{default:[Te]},$$scope:{ctx:f}}}),r=new J({props:{title:"Data for other areas",$$slots:{default:[Ae]},$$scope:{ctx:f}}}),{c(){b(t.$$.fragment),l=P(),b(e.$$.fragment),a=P(),b(r.$$.fragment)},l(n){v(t.$$.fragment,n),l=B(n),v(e.$$.fragment,n),a=B(n),v(r.$$.fragment,n)},m(n,i){k(t,n,i),h(n,l,i),k(e,n,i),h(n,a,i),k(r,n,i),s=!0},p(n,i){const o={};i&4102&&(o.$$scope={dirty:i,ctx:n}),t.$set(o);const $={};i&4098&&($.$$scope={dirty:i,ctx:n}),e.$set($);const u={};i&4104&&(u.$$scope={dirty:i,ctx:n}),r.$set(u)},i(n){s||(c(t.$$.fragment,n),c(e.$$.fragment,n),c(r.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),m(e.$$.fragment,n),m(r.$$.fragment,n),s=!1},d(n){n&&(p(l),p(a)),w(t,n),w(e,n),w(r,n)}}}function Ke(f){let t,l="Placeholder",e;return{c(){t=G("div"),t.textContent=l,e=P(),this.h()},l(a){t=H(a,"DIV",{class:!0,"data-svelte-h":!0}),fe(t)!=="svelte-g07403"&&(t.textContent=l),e=B(a),this.h()},h(){I(t,"class","section-placeholder")},m(a,r){h(a,t,r),h(a,e,r)},p:Q,d(a){a&&(p(t),p(e))}}}function re(f){let t,l;return t=new ke({props:{title:Y(f[9]),$$slots:{default:[Ke]},$$scope:{ctx:f}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&1&&(r.title=Y(e[9])),a&4096&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){l||(c(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function Me(f){let t,l,e=U(["Population",...f[0].topics,"Explore charts","Get the data"]),a=[];for(let s=0;s<e.length;s+=1)a[s]=re(Z(f,e,s));const r=s=>m(a[s],1,1,()=>{a[s]=null});return{c(){for(let s=0;s<a.length;s+=1)a[s].c();t=M()},l(s){for(let n=0;n<a.length;n+=1)a[n].l(s);t=M()},m(s,n){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(s,n);h(s,t,n),l=!0},p(s,n){if(n&1){e=U(["Population",...s[0].topics,"Explore charts","Get the data"]);let i;for(i=0;i<e.length;i+=1){const o=Z(s,e,i);a[i]?(a[i].p(o,n),c(a[i],1)):(a[i]=re(o),a[i].c(),c(a[i],1),a[i].m(t.parentNode,t))}for(V(),i=e.length;i<a.length;i+=1)r(i);O()}},i(s){if(!l){for(let n=0;n<e.length;n+=1)c(a[n]);l=!0}},o(s){a=a.filter(Boolean);for(let n=0;n<a.length;n+=1)m(a[n]);l=!1},d(s){s&&p(t),se(a,s)}}}function Re(f){let t,l,e=f[1]&&x(f);return{c(){e&&e.c(),t=M()},l(a){e&&e.l(a),t=M()},m(a,r){e&&e.m(a,r),h(a,t,r),l=!0},p(a,[r]){a[1]?e?(e.p(a,r),r&2&&c(e,1)):(e=x(a),e.c(),c(e,1),e.m(t.parentNode,t)):e&&(V(),m(e,1,1,()=>{e=null}),O())},i(a){l||(c(e),l=!0)},o(a){m(e),l=!1},d(a){a&&p(t),e&&e.d(a)}}}function je(f,t,l){let{data:e}=t,{place:a,type:r,geometry:s}=e,n;function i(_,T={},A="search"){_.detail.type==="postcode"?l(3,n=_.detail):(l(3,n=null),de({event:A==="map"?"mapSelect":"searchSelect",areaCode:_.detail.areacd,areaName:_.detail.areanm,areaType:Se[_.detail.areacd.slice(0,3)].label}),pe(`${S}/${L(_.detail.areacd)}data`,T))}function o(){l(1,a=e.place),r=e.type,l(2,s=e.geometry)}$e(o);const $=_=>({label:C(_),href:`${S}/${L(_.areacd)}`}),u=()=>l(3,n=null);return f.$$set=_=>{"data"in _&&l(0,e=_.data)},[e,a,s,n,i,$,u]}class We extends oe{constructor(t){super(),ie(this,t,je,Re,le,{data:0})}}export{We as component};
