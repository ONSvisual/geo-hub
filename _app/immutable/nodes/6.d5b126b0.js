import{s as le,e as M,i as h,d as p,a as B,c as P,I as se,l as E,f as G,m as N,g as H,h as z,j as I,C as D,n as j,k as ne,D as Q,B as oe}from"../chunks/scheduler.0afccbf5.js";import{S as fe,i as ie,a as u,t as m,c as O,b,d as v,m as k,e as w,g as V}from"../chunks/index.bcdabb8d.js";import{e as U}from"../chunks/Table.svelte_svelte_type_style_lang.7cd8d823.js";import{b as S}from"../chunks/paths.7ca237ea.js";import{a as $e,g as ue,B as ce,S as pe,A as me}from"../chunks/AreaList.def0e685.js";import{a as _e}from"../chunks/AnalyticsBanner.7ac93080.js";import{B as de,T as ge,S as he}from"../chunks/Subhead.04da03d5.js";import{C as be,a as J,M as ve,b as ke,c as W}from"../chunks/MapTooltip.svelte_svelte_type_style_lang.1ff5bb02.js";import{N as we,a as Ce}from"../chunks/NavSections.9bb4a617.js";import"../chunks/index.6ae84391.js";import{e as C,m as L,d as Se,o as X,c as Y}from"../chunks/utils.91336a02.js";function Z(o,t,l){const e=o.slice();return e[9]=t[l],e}function x(o){let t,l,e,a,r,s,n,i;return t=new de({props:{links:[{label:"Home",href:"/",refresh:!0},{label:"Explore local statistics",href:`${S}/`},...[...o[1].parents].reverse().map(o[5]),{label:C(o[1]),href:`${S}/${L(o[1].areacd)}`},{label:"Data"}],background:"#eaeaea"}}),e=new ge({props:{title:C(o[1])+" data",background:"#eaeaea",$$slots:{default:[Ne]},$$scope:{ctx:o}}}),r=new be({props:{marginTop:!0,$$slots:{default:[Ae]},$$scope:{ctx:o}}}),n=new we({props:{contentsLabel:"Data for this area",$$slots:{default:[Me]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment),l=B(),b(e.$$.fragment),a=B(),b(r.$$.fragment),s=B(),b(n.$$.fragment)},l(f){v(t.$$.fragment,f),l=P(f),v(e.$$.fragment,f),a=P(f),v(r.$$.fragment,f),s=P(f),v(n.$$.fragment,f)},m(f,$){k(t,f,$),h(f,l,$),k(e,f,$),h(f,a,$),k(r,f,$),h(f,s,$),k(n,f,$),i=!0},p(f,$){const c={};$&2&&(c.links=[{label:"Home",href:"/",refresh:!0},{label:"Explore local statistics",href:`${S}/`},...[...f[1].parents].reverse().map(f[5]),{label:C(f[1]),href:`${S}/${L(f[1].areacd)}`},{label:"Data"}]),t.$set(c);const _={};$&2&&(_.title=C(f[1])+" data"),$&4098&&(_.$$scope={dirty:$,ctx:f}),e.$set(_);const T={};$&4110&&(T.$$scope={dirty:$,ctx:f}),r.$set(T);const y={};$&4097&&(y.$$scope={dirty:$,ctx:f}),n.$set(y)},i(f){i||(u(t.$$.fragment,f),u(e.$$.fragment,f),u(r.$$.fragment,f),u(n.$$.fragment,f),i=!0)},o(f){m(t.$$.fragment,f),m(e.$$.fragment,f),m(r.$$.fragment,f),m(n.$$.fragment,f),i=!1},d(f){f&&(p(l),p(a),p(s)),w(t,f),w(e,f),w(r,f),w(n,f)}}}function ee(o){let t,l;return t=new he({props:{$$slots:{default:[Ee]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&4098&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function Ee(o){let t,l,e=C(o[1],"the")+"",a,r,s,n=o[1].areacd+"",i,f;return{c(){t=E(`Localised data, insights and trends for
    `),l=G("a"),a=E(e),s=E(`
    (`),i=E(n),f=E(")."),this.h()},l($){t=N($,`Localised data, insights and trends for
    `),l=H($,"A",{href:!0});var c=z(l);a=N(c,e),c.forEach(p),s=N($,`
    (`),i=N($,n),f=N($,")."),this.h()},h(){I(l,"href",r=S+"/"+L(o[1].areacd))},m($,c){h($,t,c),h($,l,c),D(l,a),h($,s,c),h($,i,c),h($,f,c)},p($,c){c&2&&e!==(e=C($[1],"the")+"")&&j(a,e),c&2&&r!==(r=S+"/"+L($[1].areacd))&&I(l,"href",r),c&2&&n!==(n=$[1].areacd+"")&&j(i,n)},d($){$&&(p(t),p(l),p(s),p(i),p(f))}}}function Ne(o){let t,l,e=o[1].areacd!=="K02000001"&&ee(o);return{c(){e&&e.c(),t=M()},l(a){e&&e.l(a),t=M()},m(a,r){e&&e.m(a,r),h(a,t,r),l=!0},p(a,r){a[1].areacd!=="K02000001"?e?(e.p(a,r),r&2&&u(e,1)):(e=ee(a),e.c(),u(e,1),e.m(t.parentNode,t)):e&&(V(),m(e,1,1,()=>{e=null}),O())},i(a){l||(u(e),l=!0)},o(a){m(e),l=!1},d(a){a&&p(t),e&&e.d(a)}}}function Be(o){let t,l,e,a;return t=new W({props:{id:"boundary-fill",type:"fill",paint:{"fill-color":"rgb(17,140,123)","fill-opacity":.2}}}),e=new W({props:{id:"boundary-line",type:"line",paint:{"line-color":"rgb(17,140,123)","line-width":2}}}),{c(){b(t.$$.fragment),l=B(),b(e.$$.fragment)},l(r){v(t.$$.fragment,r),l=P(r),v(e.$$.fragment,r)},m(r,s){k(t,r,s),h(r,l,s),k(e,r,s),a=!0},p:Q,i(r){a||(u(t.$$.fragment,r),u(e.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),a=!1},d(r){r&&p(l),w(t,r),w(e,r)}}}function Pe(o){let t,l;return t=new ke({props:{id:"boundary",type:"geojson",data:o[2],$$slots:{default:[Be]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&4&&(r.data=e[2]),a&4096&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function te(o){let t,l;return t=new ve({props:{style:S+"/data/mapstyle.json",location:{bounds:o[1].bounds},interactive:!1,options:{fitBoundsOptions:{padding:20}},$$slots:{default:[Pe]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&2&&(r.location={bounds:e[1].bounds}),a&4100&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function De(o){let t,l=o[2],e,a=te(o);return{c(){t=G("div"),a.c(),this.h()},l(r){t=H(r,"DIV",{});var s=z(t);a.l(s),s.forEach(p),this.h()},h(){ne(t,"height","200px")},m(r,s){h(r,t,s),a.m(t,null),e=!0},p(r,s){s&4&&le(l,l=r[2])?(V(),m(a,1,1,Q),O(),a=te(r),a.c(),u(a,1),a.m(t,null)):a.p(r,s)},i(r){e||(u(a),e=!0)},o(r){m(a),e=!1},d(r){r&&p(t),a.d(r)}}}function Le(o){let t;return{c(){t=E("Read more")},l(l){t=N(l,"Read more")},m(l,e){h(l,t,e)},d(l){l&&p(t)}}}function Te(o){let t,l=C(o[1])+"",e,a,r=X(o[1].typenm)+"",s,n,i=C(o[1].parents[0],"in","prefix")+"",f,$,c,_=C(o[1].parents[0])+"",T,y,F,q,K,A;return K=new ce({props:{variant:"secondary",icon:"arrow",iconPosition:"after",href:S+"/"+L(o[1].areacd),small:!0,$$slots:{default:[Le]},$$scope:{ctx:o}}}),{c(){t=G("p"),e=E(l),a=E(" is "),s=E(r),n=B(),f=E(i),$=B(),c=G("a"),T=E(_),F=E("."),q=B(),b(K.$$.fragment),this.h()},l(d){t=H(d,"P",{});var g=z(t);e=N(g,l),a=N(g," is "),s=N(g,r),n=P(g),f=N(g,i),$=P(g),c=H(g,"A",{href:!0,"data-sveltekit-noscroll":!0});var R=z(c);T=N(R,_),R.forEach(p),F=N(g,"."),g.forEach(p),q=P(d),v(K.$$.fragment,d),this.h()},h(){I(c,"href",y=S+"/"+L(o[1].parents[0].areacd)+"data/"),I(c,"data-sveltekit-noscroll","")},m(d,g){h(d,t,g),D(t,e),D(t,a),D(t,s),D(t,n),D(t,f),D(t,$),D(t,c),D(c,T),D(t,F),h(d,q,g),k(K,d,g),A=!0},p(d,g){(!A||g&2)&&l!==(l=C(d[1])+"")&&j(e,l),(!A||g&2)&&r!==(r=X(d[1].typenm)+"")&&j(s,r),(!A||g&2)&&i!==(i=C(d[1].parents[0],"in","prefix")+"")&&j(f,i),(!A||g&2)&&_!==(_=C(d[1].parents[0])+"")&&j(T,_),(!A||g&2&&y!==(y=S+"/"+L(d[1].parents[0].areacd)+"data/"))&&I(c,"href",y);const R={};g&2&&(R.href=S+"/"+L(d[1].areacd)),g&4096&&(R.$$scope={dirty:g,ctx:d}),K.$set(R)},i(d){A||(u(K.$$.fragment,d),A=!0)},o(d){m(K.$$.fragment,d),A=!1},d(d){d&&(p(t),p(q)),w(K,d)}}}function ae(o){let t,l;return t=new me({props:{postcode:o[3]}}),t.$on("clear",o[6]),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&8&&(r.postcode=e[3]),t.$set(r)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function ye(o){let t,l,e,a;t=new pe({props:{id:"search",mode:"search",idKey:"areacd",labelKey:"areanm",groupKey:"group",label:"Type an area name or postcode",placeholder:"Eg. Titchfield or PO15 5RR",autoClear:!0}}),t.$on("select",o[4]);let r=o[3]&&ae(o);return{c(){b(t.$$.fragment),l=B(),r&&r.c(),e=M()},l(s){v(t.$$.fragment,s),l=P(s),r&&r.l(s),e=M()},m(s,n){k(t,s,n),h(s,l,n),r&&r.m(s,n),h(s,e,n),a=!0},p(s,n){s[3]?r?(r.p(s,n),n&8&&u(r,1)):(r=ae(s),r.c(),u(r,1),r.m(e.parentNode,e)):r&&(V(),m(r,1,1,()=>{r=null}),O())},i(s){a||(u(t.$$.fragment,s),u(r),a=!0)},o(s){m(t.$$.fragment,s),m(r),a=!1},d(s){s&&(p(l),p(e)),w(t,s),r&&r.d(s)}}}function Ae(o){let t,l,e,a,r,s;return t=new J({props:{noBackground:!0,$$slots:{default:[De]},$$scope:{ctx:o}}}),e=new J({props:{title:"About this area",$$slots:{default:[Te]},$$scope:{ctx:o}}}),r=new J({props:{title:"Data for other areas",$$slots:{default:[ye]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment),l=B(),b(e.$$.fragment),a=B(),b(r.$$.fragment)},l(n){v(t.$$.fragment,n),l=P(n),v(e.$$.fragment,n),a=P(n),v(r.$$.fragment,n)},m(n,i){k(t,n,i),h(n,l,i),k(e,n,i),h(n,a,i),k(r,n,i),s=!0},p(n,i){const f={};i&4102&&(f.$$scope={dirty:i,ctx:n}),t.$set(f);const $={};i&4098&&($.$$scope={dirty:i,ctx:n}),e.$set($);const c={};i&4104&&(c.$$scope={dirty:i,ctx:n}),r.$set(c)},i(n){s||(u(t.$$.fragment,n),u(e.$$.fragment,n),u(r.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),m(e.$$.fragment,n),m(r.$$.fragment,n),s=!1},d(n){n&&(p(l),p(a)),w(t,n),w(e,n),w(r,n)}}}function Ke(o){let t,l="Placeholder",e;return{c(){t=G("div"),t.textContent=l,e=B(),this.h()},l(a){t=H(a,"DIV",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-g07403"&&(t.textContent=l),e=P(a),this.h()},h(){I(t,"class","section-placeholder")},m(a,r){h(a,t,r),h(a,e,r)},p:Q,d(a){a&&(p(t),p(e))}}}function re(o){let t,l;return t=new Ce({props:{title:Y(o[9]),$$slots:{default:[Ke]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){k(t,e,a),l=!0},p(e,a){const r={};a&1&&(r.title=Y(e[9])),a&4096&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){l||(u(t.$$.fragment,e),l=!0)},o(e){m(t.$$.fragment,e),l=!1},d(e){w(t,e)}}}function Me(o){let t,l,e=U(["Population",...o[0].topics,"Explore charts","Get the data"]),a=[];for(let s=0;s<e.length;s+=1)a[s]=re(Z(o,e,s));const r=s=>m(a[s],1,1,()=>{a[s]=null});return{c(){for(let s=0;s<a.length;s+=1)a[s].c();t=M()},l(s){for(let n=0;n<a.length;n+=1)a[n].l(s);t=M()},m(s,n){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(s,n);h(s,t,n),l=!0},p(s,n){if(n&1){e=U(["Population",...s[0].topics,"Explore charts","Get the data"]);let i;for(i=0;i<e.length;i+=1){const f=Z(s,e,i);a[i]?(a[i].p(f,n),u(a[i],1)):(a[i]=re(f),a[i].c(),u(a[i],1),a[i].m(t.parentNode,t))}for(V(),i=e.length;i<a.length;i+=1)r(i);O()}},i(s){if(!l){for(let n=0;n<e.length;n+=1)u(a[n]);l=!0}},o(s){a=a.filter(Boolean);for(let n=0;n<a.length;n+=1)m(a[n]);l=!1},d(s){s&&p(t),se(a,s)}}}function Re(o){let t,l,e=o[1]&&x(o);return{c(){e&&e.c(),t=M()},l(a){e&&e.l(a),t=M()},m(a,r){e&&e.m(a,r),h(a,t,r),l=!0},p(a,[r]){a[1]?e?(e.p(a,r),r&2&&u(e,1)):(e=x(a),e.c(),u(e,1),e.m(t.parentNode,t)):e&&(V(),m(e,1,1,()=>{e=null}),O())},i(a){l||(u(e),l=!0)},o(a){m(e),l=!1},d(a){a&&p(t),e&&e.d(a)}}}function je(o,t,l){let{data:e}=t,{place:a,type:r,geometry:s}=e,n;function i(_,T={},y="search"){_.detail.type==="postcode"?l(3,n=_.detail):(l(3,n=null),_e({event:y==="map"?"mapSelect":"searchSelect",areaCode:_.detail.areacd,areaName:_.detail.areanm,areaType:Se[_.detail.areacd.slice(0,3)].label}),ue(`${S}/${L(_.detail.areacd)}data`,T))}function f(){l(1,a=e.place),r=e.type,l(2,s=e.geometry)}$e(f);const $=_=>({label:C(_),href:`${S}/${L(_.areacd)}`}),c=()=>l(3,n=null);return o.$$set=_=>{"data"in _&&l(0,e=_.data)},o.$$.update=()=>{o.$$.dirty&1&&console.log(e)},[e,a,s,n,i,$,c]}class We extends fe{constructor(t){super(),ie(this,t,je,Re,le,{data:0})}}export{We as component};
