import{S as de,i as pe,s as fe,e as re,b as M,D as K,h as E,Q as me,o as he,k as w,l as C,m as S,n as k,C as p,q as O,r as I,G as J,u as ye,a as U,c as V,H as ne,J as ve}from"./index.7c0f8463.js";import{p as ae}from"./stores.1493d171.js";var oe={},B={},F=34,P=10,H=13;function ue(t){return new Function("d","return {"+t.map(function(r,e){return JSON.stringify(r)+": d["+e+'] || ""'}).join(",")+"}")}function ge(t,r){var e=ue(t);return function(a,n){return r(e(a),n,t)}}function se(t){var r=Object.create(null),e=[];return t.forEach(function(a){for(var n in a)n in r||e.push(r[n]=n)}),e}function j(t,r){var e=t+"",a=e.length;return a<r?new Array(r-a+1).join(0)+e:e}function be(t){return t<0?"-"+j(-t,6):t>9999?"+"+j(t,6):j(t,4)}function ke(t){var r=t.getUTCHours(),e=t.getUTCMinutes(),a=t.getUTCSeconds(),n=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":be(t.getUTCFullYear())+"-"+j(t.getUTCMonth()+1,2)+"-"+j(t.getUTCDate(),2)+(n?"T"+j(r,2)+":"+j(e,2)+":"+j(a,2)+"."+j(n,3)+"Z":a?"T"+j(r,2)+":"+j(e,2)+":"+j(a,2)+"Z":e||r?"T"+j(r,2)+":"+j(e,2)+"Z":"")}function Ee(t){var r=new RegExp('["'+t+`
\r]`),e=t.charCodeAt(0);function a(o,i){var f,m,h=n(o,function(u,b){if(f)return f(u,b-1);m=u,f=i?ge(u,i):ue(u)});return h.columns=m||[],h}function n(o,i){var f=[],m=o.length,h=0,u=0,b,A=m<=0,y=!1;o.charCodeAt(m-1)===P&&--m,o.charCodeAt(m-1)===H&&--m;function N(){if(A)return B;if(y)return y=!1,oe;var W,T=h,z;if(o.charCodeAt(T)===F){for(;h++<m&&o.charCodeAt(h)!==F||o.charCodeAt(++h)===F;);return(W=h)>=m?A=!0:(z=o.charCodeAt(h++))===P?y=!0:z===H&&(y=!0,o.charCodeAt(h)===P&&++h),o.slice(T+1,W-1).replace(/""/g,'"')}for(;h<m;){if((z=o.charCodeAt(W=h++))===P)y=!0;else if(z===H)y=!0,o.charCodeAt(h)===P&&++h;else if(z!==e)continue;return o.slice(T,W)}return A=!0,o.slice(T,m)}for(;(b=N())!==B;){for(var _=[];b!==oe&&b!==B;)_.push(b),b=N();i&&(_=i(_,u++))==null||f.push(_)}return f}function s(o,i){return o.map(function(f){return i.map(function(m){return l(f[m])}).join(t)})}function c(o,i){return i==null&&(i=se(o)),[i.map(l).join(t)].concat(s(o,i)).join(`
`)}function d(o,i){return i==null&&(i=se(o)),s(o,i).join(`
`)}function g(o){return o.map(v).join(`
`)}function v(o){return o.map(l).join(t)}function l(o){return o==null?"":o instanceof Date?ke(o):r.test(o+="")?'"'+o.replace(/"/g,'""')+'"':o}return{parse:a,parseRows:n,format:c,formatBody:d,formatRows:g,formatRow:v,formatValue:l}}var _e=Ee(","),we=_e.parse;function Ce(t){for(var r in t){var e=t[r].trim(),a,n;if(!e)e=null;else if(e==="true")e=!0;else if(e==="false")e=!1;else if(e==="NaN")e=NaN;else if(!isNaN(a=+e))e=a;else if(n=e.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Se&&n[4]&&!n[7]&&(e=e.replace(/-/g,"/").replace(/T/," ")),e=new Date(e);else continue;t[r]=e}return t}const Se=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ae(t){return t}function Te(t){if(t==null)return Ae;var r,e,a=t.scale[0],n=t.scale[1],s=t.translate[0],c=t.translate[1];return function(d,g){g||(r=e=0);var v=2,l=d.length,o=new Array(l);for(o[0]=(r+=d[0])*a+s,o[1]=(e+=d[1])*n+c;v<l;)o[v]=d[v],++v;return o}}function We(t,r){for(var e,a=t.length,n=a-r;n<--a;)e=t[n],t[n++]=t[a],t[a]=e}function je(t,r){return typeof r=="string"&&(r=t.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(e){return ie(t,e)})}:ie(t,r)}function ie(t,r){var e=r.id,a=r.bbox,n=r.properties==null?{}:r.properties,s=Ne(t,r);return e==null&&a==null?{type:"Feature",properties:n,geometry:s}:a==null?{type:"Feature",id:e,properties:n,geometry:s}:{type:"Feature",id:e,bbox:a,properties:n,geometry:s}}function Ne(t,r){var e=Te(t.transform),a=t.arcs;function n(l,o){o.length&&o.pop();for(var i=a[l<0?~l:l],f=0,m=i.length;f<m;++f)o.push(e(i[f],f));l<0&&We(o,m)}function s(l){return e(l)}function c(l){for(var o=[],i=0,f=l.length;i<f;++i)n(l[i],o);return o.length<2&&o.push(o[0]),o}function d(l){for(var o=c(l);o.length<4;)o.push(o[0]);return o}function g(l){return l.map(d)}function v(l){var o=l.type,i;switch(o){case"GeometryCollection":return{type:o,geometries:l.geometries.map(v)};case"Point":i=s(l.coordinates);break;case"MultiPoint":i=l.coordinates.map(s);break;case"LineString":i=c(l.arcs);break;case"MultiLineString":i=l.arcs.map(c);break;case"Polygon":i=g(l.arcs);break;case"MultiPolygon":i=l.arcs.map(g);break;default:return null}return{type:o,coordinates:i}}return v(r)}const Fe="https://www.ons.gov.uk/visualisations/areas",Oe="https://ons-dp-prod-cdn.s3.eu-west-2.amazonaws.com/maptiles/ap-geos/v2",Ie={W04:{label:"community",plural:"communities",childGroup:!0},E06:{label:"unitary authority",plural:"unitary authorities"},W06:{label:"unitary authority",plural:"unitary authorities",childGroup:!0},E07:{label:"non-metropolitan district",plural:"non-metropolitan districts",childGroup:!0},E08:{label:"metropolitan district",plural:"metropolitan districts"},E09:{label:"borough",plural:"boroughs",childGroup:!0},E10:{label:"county",plural:"counties"},E11:{label:"metropolitan county",plural:"metropolital counties"},S12:{label:"council area",plural:"council areas",childGroup:!0},N09:{label:"local government district",plural:"local government districts",childGroup:!0}},He=["E00","W00","E01","W01","E02","W02","E04","W04","E05","W05"],ze=[{id:"uk",type:"geojson"},{id:"ctry",type:"geojson"},{id:"rgn",type:"geojson"},{id:"la",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2023/authorities-all/v1/boundaries/{z}/{x}/{y}.pbf",layer:"boundaries",minzoom:4},{id:"wpc",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2010/wpc/v2/boundaries/{z}/{x}/{y}.pbf",layer:"boundaries",minzoom:4},{id:"sener",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2022/sen/v1/boundaries/{z}/{x}/{y}.pbf",layer:"region"},{id:"senc",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2022/sen/v1/boundaries/{z}/{x}/{y}.pbf",layer:"constituency"},{id:"wd",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2022/wd/v1/boundaries/{z}/{x}/{y}.pbf",layer:"wd",minzoom:6},{id:"par",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2022/par/v1/boundaries/{z}/{x}/{y}.pbf",layer:"par",minzoom:6},{id:"msoa",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2021/msoa/v2/boundaries/{z}/{x}/{y}.pbf",layer:"msoa",minzoom:6},{id:"lsoa",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2021/lsoa/v2/boundaries/{z}/{x}/{y}.pbf",layer:"lsoa",minzoom:7},{id:"oa",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2021/oa/v2/boundaries/{z}/{x}/{y}.pbf",layer:"oa",minzoom:8}],Y=t=>t.map(r=>["!",["in",r,["get","areacd"]]]),G=[{key:"uk",codes:["K02"],source:"uk"},{key:"ctry",codes:["E92","S92","N92","W92"],pcio:"country",label:"country",plural:"countries",source:"ctry"},{key:"rgn",codes:["E12"],pcio:"region",label:"region",plural:"regions",source:"rgn"},{key:"cauth",codes:["E06","E09","E10","E47","N09","S12","W06"],label:"upper-tier/combined authority",plural:"upper-tier/combined authorities",source:"la",filter:["all",...Y(["E07","E08"]),["!",["==",["get","cauth"],"true"]]]},{key:"utla",codes:["E06","E08","E09","E10","N09","S12","W06"],pcio:"admin_county",label:"upper-tier/unitary authority",plural:"upper-tier/unitary authorities",source:"la",filter:["all",...Y(["E07","E47"])]},{key:"ltla",codes:["E06","E07","E08","E09","N09","S12","W06"],pcio:"admin_district",label:"lower-tier/unitary authority",plural:"lower-tier/unitary authorities",source:"la",filter:["all",...Y(["E10","E47"])]},{key:"wpc",codes:["E14","N06","S14","W07"],pcio:"parliamentary_constituency",label:"parliamentary constituency",plural:"parliamentary constituencies",source:"wpc"},{key:"sener",codes:["W10"],label:"Senedd electoral region",plural:"Senedd electoral regions",source:"sener"},{key:"senc",codes:["W09"],label:"Senedd constituency",plural:"Senedd constituencies",source:"senc"},{key:"wd",codes:["E05","W05"],pcio:"admin_ward",label:"ward",plural:"wards",source:"wd"},{key:"par",codes:["E04","W04"],pcio:"parish",label:"parish",plural:"parishes",source:"par"},{key:"msoa",codes:["E02","W02"],pcio:"msoa",label:"MSOA",plural:"MSOAs",source:"msoa"},{key:"lsoa",codes:["E01","W01"],pcio:"lsoa",label:"LSOA",plural:"LSOAs",source:"lsoa"},{key:"oa",codes:["E00","W00"],label:"output area",plural:"output areas",source:"oa"}],Ye=ze.map(t=>({...t,layers:G.filter(r=>r.source===t.id)})),x=(()=>{let t={};return G.forEach(r=>r.codes.forEach(e=>{t[e]={...r};const a=Ie[e];a!=null&&a.childGroup&&(t[e].label=a.label,t[e].plural=a.plural)})),t})();(()=>{let t={};return G.forEach(r=>t[r.key]=r),t})();async function Ke(t,r=window.fetch){let a=await(await r(t)).text(),n=we(a,Ce),s=n.columns.filter(c=>{n[0][c]&&String(n[0][c]).includes("|")});return n.forEach((c,d)=>{s.forEach(g=>{c[g]=c[g].split("|")})}),n}function De(t){let r=Array.from(new Set(t.sort((n,s)=>n.localeCompare(s)).map(n=>x[n]))).filter((n,s,c)=>c.map(d=>d.key).indexOf(n.key)===s);const e=["cauth","utla","ltla"].filter(n=>r.map(s=>s.key).includes(n));e.length>1&&(r=r.filter(n=>!e.slice(1).includes(n.key)));const a=G.map(n=>n.key);return r.sort((n,s)=>a.indexOf(n.key)-a.indexOf(s.key))}async function Je(t,r=window.fetch){try{let e=t.slice(0,3),n=await(await r(`${Oe}/${e}/${t}.json`)).json();return n.properties.childTypes=De(n.properties.child_typecds),{place:n.properties,type:x[e],geometry:n.properties.end?n.geometry:null}}catch(e){return console.debug(e),{place:null,type:null}}}function Pe(t,r=null){let e=t.hclnm?t.hclnm:t.areanm?t.areanm:t.areacd,a=e.startsWith("Isle"),n=["E12000001","E12000002","E12000004","E12000005","E12000006","E12000008","E12000009","E09000001","E07000035"].includes(t.areacd)||e.startsWith("Vale of");return e=e.replace("&","and").replace(", City of","").replace(", County of",""),["in","the"].includes(r)&&(a||n)&&(e="the "+e),r==="in"&&(a?e="on "+e:e="in "+e),e}function le(t,r){var a;const e=[...r.parents];["E","W"].includes(r.areacd[0])&&e.push({areacd:"K04000001",areanm:"England and Wales"});for(const n of e){let s=n.areacd.slice(0,3);if(t.includes(s))return n.groupcd=(a=x[s])!=null&&a.key?x[s].key:"ew",n}return null}function Ze(t,r){let e=[],a=[];return t.forEach(n=>{let s=le(n.geocodes,r);n.geocodes.includes(r.typecd)?e.push({...n,place:r}):s&&a.push({...n,place:le(n.geocodes,r)})}),[...e,...a]}function qe(t,r){let e=t,a=t.match(new RegExp(/\{(.*?)\}/g));return Array.isArray(a)&&a.forEach(n=>{if(n.includes("name")){let s=n.slice(1,-1).split(",")[1];e=e.replace(n,`<strong>${Pe(r,s)}</strong>`)}else e=e.replace(n,r[n.slice(1,-1)])}),e}function Qe(t){return t==="output area"?t="Output Area":t==="lower layer super output area"?t="Lower layer Super Output Area (LSOA)":t==="middle layer super output area"&&(t="Middle layer Super Output Area (MSOA)"),!t.startsWith("unit")&&["a","e","i","o","u"].includes(t[0].toLowerCase())?"an "+t:"a "+t}function Xe(t){return["K02","E92","N92","S92","W92","E10","E12","E47","E06","E07","E08","E09","N09","S12","W06","E14","N06","S14","W07"].includes(t.slice(0,3))?t+"/":"area/?code="+t}function $e(t,r){return t.children.filter(e=>r.codes.includes(e.areacd.slice(0,3)))}function et(t,r){return je(t,r)}function tt(t){return t[0].toUpperCase()+t.slice(1)}function ce(t){let r,e;function a(c,d){return c[1]?Le:Re}let n=a(t),s=n(t);return{c(){r=w("section"),e=w("form"),s.c(),this.h()},l(c){r=C(c,"SECTION",{});var d=S(r);e=C(d,"FORM",{id:!0,class:!0,"aria-label":!0});var g=S(e);s.l(g),g.forEach(E),d.forEach(E),this.h()},h(){k(e,"id","global-cookie-message"),k(e,"class","cookies-banner clearfix svelte-nl7vav"),k(e,"aria-label","cookie banner")},m(c,d){M(c,r,d),p(r,e),s.m(e,null)},p(c,d){n===(n=a(c))&&s?s.p(c,d):(s.d(1),s=n(c),s&&(s.c(),s.m(e,null)))},d(c){c&&E(r),s.d()}}}function Le(t){let r,e,a,n,s,c,d,g,v,l,o,i,f,m,h;return{c(){r=w("div"),e=w("div"),a=w("div"),n=w("div"),s=w("p"),c=O("You’ve accepted "),d=O(t[2]),g=O(` cookies. You can
              `),v=w("a"),l=O("change your cookie settings"),o=O(`
              at any time.
              `),i=w("button"),f=O("Hide"),this.h()},l(u){r=C(u,"DIV",{});var b=S(r);e=C(b,"DIV",{class:!0});var A=S(e);a=C(A,"DIV",{class:!0});var y=S(a);n=C(y,"DIV",{class:!0});var N=S(n);s=C(N,"P",{class:!0});var _=S(s);c=I(_,"You’ve accepted "),d=I(_,t[2]),g=I(_,` cookies. You can
              `),v=C(_,"A",{href:!0,class:!0});var W=S(v);l=I(W,"change your cookie settings"),W.forEach(E),o=I(_,`
              at any time.
              `),i=C(_,"BUTTON",{type:!0,class:!0});var T=S(i);f=I(T,"Hide"),T.forEach(E),_.forEach(E),N.forEach(E),y.forEach(E),A.forEach(E),b.forEach(E),this.h()},h(){k(v,"href","/cookies"),k(v,"class","svelte-nl7vav"),k(i,"type","button"),k(i,"class","cookies-banner__button--hide svelte-nl7vav"),k(s,"class","cookies-banner__confirmation-message svelte-nl7vav"),k(n,"class","cookies-banner__message font-size--18 svelte-nl7vav"),k(a,"class","col svelte-nl7vav"),k(e,"class","cookies-banner__wrapper wrapper svelte-nl7vav")},m(u,b){M(u,r,b),p(r,e),p(e,a),p(a,n),p(n,s),p(s,c),p(s,d),p(s,g),p(s,v),p(v,l),p(s,o),p(s,i),p(i,f),m||(h=J(i,"click",t[9]),m=!0)},p(u,b){b&4&&ye(d,u[2])},d(u){u&&E(r),m=!1,h()}}}function Re(t){let r,e,a,n,s,c,d,g,v,l,o,i,f,m,h,u,b,A,y,N,_,W;return{c(){r=w("div"),e=w("div"),a=w("div"),n=w("h1"),s=O("Tell us whether you accept cookies"),c=U(),d=w("p"),g=O(`We would like to
            use cookies to collect anonymous information
            about how you use this prototype.`),v=U(),l=w("p"),o=O("We use this information to improve our services."),i=U(),f=w("div"),m=w("div"),h=w("button"),u=O("Accept cookies"),b=U(),A=w("div"),y=w("button"),N=O("Reject cookies"),this.h()},l(T){r=C(T,"DIV",{class:!0});var z=S(r);e=C(z,"DIV",{});var L=S(e);a=C(L,"DIV",{class:!0});var D=S(a);n=C(D,"H1",{class:!0});var Z=S(n);s=I(Z,"Tell us whether you accept cookies"),Z.forEach(E),c=V(D),d=C(D,"P",{class:!0});var q=S(d);g=I(q,`We would like to
            use cookies to collect anonymous information
            about how you use this prototype.`),q.forEach(E),v=V(D),l=C(D,"P",{class:!0});var Q=S(l);o=I(Q,"We use this information to improve our services."),Q.forEach(E),D.forEach(E),i=V(L),f=C(L,"DIV",{class:!0});var R=S(f);m=C(R,"DIV",{class:!0});var X=S(m);h=C(X,"BUTTON",{class:!0,"data-gtm-accept-cookies":!0,type:!0});var $=S(h);u=I($,"Accept cookies"),$.forEach(E),X.forEach(E),b=V(R),A=C(R,"DIV",{class:!0});var ee=S(A);y=C(ee,"BUTTON",{class:!0,"data-gtm-accept-cookies":!0});var te=S(y);N=I(te,"Reject cookies"),te.forEach(E),ee.forEach(E),R.forEach(E),L.forEach(E),z.forEach(E),this.h()},h(){k(n,"class","cookies-banner__heading font-size--h3 svelte-nl7vav"),k(d,"class","cookies-banner__body svelte-nl7vav"),k(l,"class","cookies-banner__body svelte-nl7vav"),k(a,"class","cookies-banner__message font-size--18 svelte-nl7vav"),k(h,"class","btn btn--full-width btn--primary btn--focus margin-right--2 font-weight-700 font-size--17 text-wrap svelte-nl7vav"),k(h,"data-gtm-accept-cookies","true"),k(h,"type","submit"),k(m,"class","cookies-banner__button cookies-banner__button--accept svelte-nl7vav"),k(y,"class","btn btn--full-width btn--secondary btn--focus font-weight-700 font-size--17 text-wrap svelte-nl7vav"),k(y,"data-gtm-accept-cookies","true"),k(A,"class","cookies-banner__button svelte-nl7vav"),k(f,"class","cookies-banner__buttons svelte-nl7vav"),k(r,"class","cookies-banner__wrapper wrapper svelte-nl7vav")},m(T,z){M(T,r,z),p(r,e),p(e,a),p(a,n),p(n,s),p(a,c),p(a,d),p(d,g),p(a,v),p(a,l),p(l,o),p(e,i),p(e,f),p(f,m),p(m,h),p(h,u),p(f,b),p(f,A),p(A,y),p(y,N),_||(W=[J(h,"click",ne(t[7])),J(y,"click",ne(t[8]))],_=!0)},p:K,d(T){T&&E(r),_=!1,ve(W)}}}function Ue(t){let r,e=t[0]&&ce(t);return{c(){e&&e.c(),r=re()},l(a){e&&e.l(a),r=re()},m(a,n){e&&e.m(a,n),M(a,r,n)},p(a,[n]){a[0]?e?e.p(a,n):(e=ce(a),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},i:K,o:K,d(a){e&&e.d(a),a&&E(r)}}}function rt(t){window.dataLayer&&window.dataLayer.push(t)}function Ve(){return-1<document.cookie.indexOf("cookies_preferences_set=true")}function xe(){var t=document.cookie.match(new RegExp("(^|;) ?cookies_policy=([^;]*)(;|$)"));if(t){var r=decodeURIComponent(t[2]),e=JSON.parse(r);return e.usage}return!1}function Me(t,r,e){let a;me(t,ae,u=>e(12,a=u));let{analyticsId:n}=r,{analyticsProps:s={}}=r,{usageCookies:c=!1}=r,d,g=!1,v=!1,l="";function o(u){let b=31536e3,A=window.location.hostname,y=!0,N=`%7B%22essential%22%3Atrue%2C%22usage%22%3A${u=="all"?"true":"false"}%7D`,_="/";document.cookie=`cookies_preferences_set=${y};max-age=${b};domain=${A};path=${_};`,document.cookie=`cookies_policy=${N};max-age=${b};domain=${A};path=${_};`,e(2,l=u=="all"?"all":"only essential"),u=="all"&&e(4,c=!0),e(1,v=!0),u=="all"&&i()}function i(){console.log("initialising analytics"),window.dataLayer=[{analyticsOptOut:!1,"gtm.whitelist":["google","hjtc","lcl"],"gtm.blacklist":["customScripts","sp","adm","awct","k","d","j"],...s}],ae&&a.url.href,function(u,b,A,y,N){u[y]=u[y]||[],u[y].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var _=b.head,W=b.createElement(A),T=y!="dataLayer"?"&l="+y:"";W.async=!0,W.src="https://www.googletagmanager.com/gtm.js?id="+N+T,_.appendChild(W)}(window,document,"script","dataLayer",n)}he(()=>{d=!0,e(0,g=!Ve()),e(4,c=xe()),c&&d&&i()});const f=()=>o("all"),m=()=>o("reject"),h=()=>e(0,g=!1);return t.$$set=u=>{"analyticsId"in u&&e(5,n=u.analyticsId),"analyticsProps"in u&&e(6,s=u.analyticsProps),"usageCookies"in u&&e(4,c=u.usageCookies)},[g,v,l,o,c,n,s,f,m,h]}class nt extends de{constructor(r){super(),pe(this,r,Me,Ue,fe,{analyticsId:5,analyticsProps:6,usageCookies:4})}}export{nt as A,Fe as a,rt as b,x as c,Je as d,Pe as e,tt as f,Ke as g,Qe as h,Ze as i,Ye as j,et as k,$e as l,Xe as m,He as n,G as o,qe as p,Ie as q};
