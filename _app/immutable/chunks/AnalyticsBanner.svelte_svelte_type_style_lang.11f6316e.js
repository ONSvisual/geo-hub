var me={},ee={},te=34,F=10,re=13;function Te(t){return new Function("d","return {"+t.map(function(n,a){return JSON.stringify(n)+": d["+a+'] || ""'}).join(",")+"}")}function Ue(t,n){var a=Te(t);return function(i,e){return n(a(i),e,t)}}function ye(t){var n=Object.create(null),a=[];return t.forEach(function(i){for(var e in i)e in n||a.push(n[e]=e)}),a}function v(t,n){var a=t+"",i=a.length;return i<n?new Array(n-i+1).join(0)+a:a}function We(t){return t<0?"-"+v(-t,6):t>9999?"+"+v(t,6):v(t,4)}function je(t){var n=t.getUTCHours(),a=t.getUTCMinutes(),i=t.getUTCSeconds(),e=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":We(t.getUTCFullYear())+"-"+v(t.getUTCMonth()+1,2)+"-"+v(t.getUTCDate(),2)+(e?"T"+v(n,2)+":"+v(a,2)+":"+v(i,2)+"."+v(e,3)+"Z":i?"T"+v(n,2)+":"+v(a,2)+":"+v(i,2)+"Z":a||n?"T"+v(n,2)+":"+v(a,2)+"Z":"")}function Ge(t){var n=new RegExp('["'+t+`
\r]`),a=t.charCodeAt(0);function i(l,f){var m,p,y=e(l,function(E,M){if(m)return m(E,M-1);p=E,m=f?Ue(E,f):Te(E)});return y.columns=p||[],y}function e(l,f){var m=[],p=l.length,y=0,E=0,M,A=p<=0,k=!1;l.charCodeAt(p-1)===F&&--p,l.charCodeAt(p-1)===re&&--p;function O(){if(A)return ee;if(k)return k=!1,me;var N,R=y,x;if(l.charCodeAt(R)===te){for(;y++<p&&l.charCodeAt(y)!==te||l.charCodeAt(++y)===te;);return(N=y)>=p?A=!0:(x=l.charCodeAt(y++))===F?k=!0:x===re&&(k=!0,l.charCodeAt(y)===F&&++y),l.slice(R+1,N-1).replace(/""/g,'"')}for(;y<p;){if((x=l.charCodeAt(N=y++))===F)k=!0;else if(x===re)k=!0,l.charCodeAt(y)===F&&++y;else if(x!==a)continue;return l.slice(R,N)}return A=!0,l.slice(R,p)}for(;(M=O())!==ee;){for(var w=[];M!==me&&M!==ee;)w.push(M),M=O();f&&(w=f(w,E++))==null||m.push(w)}return m}function o(l,f){return l.map(function(m){return f.map(function(p){return d(m[p])}).join(t)})}function _(l,f){return f==null&&(f=ye(l)),[f.map(d).join(t)].concat(o(l,f)).join(`
`)}function s(l,f){return f==null&&(f=ye(l)),o(l,f).join(`
`)}function u(l){return l.map(c).join(`
`)}function c(l){return l.map(d).join(t)}function d(l){return l==null?"":l instanceof Date?je(l):n.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l}return{parse:i,parseRows:e,format:_,formatBody:s,formatRows:u,formatRow:c,formatValue:d}}var $e=Ge(","),Ve=$e.parse;function Xe(t){for(var n in t){var a=t[n].trim(),i,e;if(!a)a=null;else if(a==="true")a=!0;else if(a==="false")a=!1;else if(a==="NaN")a=NaN;else if(!isNaN(i=+a))a=i;else if(e=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Be&&e[4]&&!e[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a);else continue;t[n]=a}return t}const Be=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function qe(t){return t}function He(t){if(t==null)return qe;var n,a,i=t.scale[0],e=t.scale[1],o=t.translate[0],_=t.translate[1];return function(s,u){u||(n=a=0);var c=2,d=s.length,l=new Array(d);for(l[0]=(n+=s[0])*i+o,l[1]=(a+=s[1])*e+_;c<d;)l[c]=s[c],++c;return l}}function Ke(t,n){for(var a,i=t.length,e=i-n;e<--i;)a=t[e],t[e++]=t[i],t[i]=a}function Je(t,n){return typeof n=="string"&&(n=t.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(a){return ge(t,a)})}:ge(t,n)}function ge(t,n){var a=n.id,i=n.bbox,e=n.properties==null?{}:n.properties,o=Ye(t,n);return a==null&&i==null?{type:"Feature",properties:e,geometry:o}:i==null?{type:"Feature",id:a,properties:e,geometry:o}:{type:"Feature",id:a,bbox:i,properties:e,geometry:o}}function Ye(t,n){var a=He(t.transform),i=t.arcs;function e(d,l){l.length&&l.pop();for(var f=i[d<0?~d:d],m=0,p=f.length;m<p;++m)l.push(a(f[m],m));d<0&&Ke(l,p)}function o(d){return a(d)}function _(d){for(var l=[],f=0,m=d.length;f<m;++f)e(d[f],l);return l.length<2&&l.push(l[0]),l}function s(d){for(var l=_(d);l.length<4;)l.push(l[0]);return l}function u(d){return d.map(s)}function c(d){var l=d.type,f;switch(l){case"GeometryCollection":return{type:l,geometries:d.geometries.map(c)};case"Point":f=o(d.coordinates);break;case"MultiPoint":f=d.coordinates.map(o);break;case"LineString":f=_(d.arcs);break;case"MultiLineString":f=d.arcs.map(_);break;case"Polygon":f=u(d.arcs);break;case"MultiPolygon":f=d.arcs.map(u);break;default:return null}return{type:l,coordinates:f}}return c(n)}function Ze(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function H(t,n){if((a=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var a,i=t.slice(0,a);return[i.length>1?i[0]+i.slice(2):i,+t.slice(a+1)]}function Qe(t){return t=H(Math.abs(t)),t?t[1]:NaN}function et(t,n){return function(a,i){for(var e=a.length,o=[],_=0,s=t[0],u=0;e>0&&s>0&&(u+s+1>i&&(s=Math.max(1,i-u)),o.push(a.substring(e-=s,e+s)),!((u+=s+1)>i));)s=t[_=(_+1)%t.length];return o.reverse().join(n)}}function tt(t){return function(n){return n.replace(/[0-9]/g,function(a){return t[+a]})}}var rt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oe(t){if(!(n=rt.exec(t)))throw new Error("invalid format: "+t);var n;return new se({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}oe.prototype=se.prototype;function se(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}se.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nt(t){e:for(var n=t.length,a=1,i=-1,e;a<n;++a)switch(t[a]){case".":i=e=a;break;case"0":i===0&&(i=a),e=a;break;default:if(!+t[a])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(e+1):t}var Pe;function at(t,n){var a=H(t,n);if(!a)return t+"";var i=a[0],e=a[1],o=e-(Pe=Math.max(-8,Math.min(8,Math.floor(e/3)))*3)+1,_=i.length;return o===_?i:o>_?i+new Array(o-_+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+H(t,Math.max(0,n+o-1))[0]}function be(t,n){var a=H(t,n);if(!a)return t+"";var i=a[0],e=a[1];return e<0?"0."+new Array(-e).join("0")+i:i.length>e+1?i.slice(0,e+1)+"."+i.slice(e+1):i+new Array(e-i.length+2).join("0")}const we={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ze,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>be(t*100,n),r:be,s:at,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ke(t){return t}var ve=Array.prototype.map,Ee=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function it(t){var n=t.grouping===void 0||t.thousands===void 0?ke:et(ve.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",e=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?ke:tt(ve.call(t.numerals,String)),_=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(l){l=oe(l);var f=l.fill,m=l.align,p=l.sign,y=l.symbol,E=l.zero,M=l.width,A=l.comma,k=l.precision,O=l.trim,w=l.type;w==="n"?(A=!0,w="g"):we[w]||(k===void 0&&(k=12),O=!0,w="g"),(E||f==="0"&&m==="=")&&(E=!0,f="0",m="=");var N=y==="$"?a:y==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",R=y==="$"?i:/[%p]/.test(w)?_:"",x=we[w],Le=/[defgprs%]/.test(w);k=k===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function he(h){var T=N,S=R,I,pe,X;if(w==="c")S=x(h)+S,h="";else{h=+h;var B=h<0||1/h<0;if(h=isNaN(h)?u:x(Math.abs(h),k),O&&(h=nt(h)),B&&+h==0&&p!=="+"&&(B=!1),T=(B?p==="("?p:s:p==="-"||p==="("?"":p)+T,S=(w==="s"?Ee[8+Pe/3]:"")+S+(B&&p==="("?")":""),Le){for(I=-1,pe=h.length;++I<pe;)if(X=h.charCodeAt(I),48>X||X>57){S=(X===46?e+h.slice(I+1):h.slice(I))+S,h=h.slice(0,I);break}}}A&&!E&&(h=n(h,1/0));var q=T.length+h.length+S.length,C=q<M?new Array(M-q+1).join(f):"";switch(A&&E&&(h=n(C+h,C.length?M-S.length:1/0),C=""),m){case"<":h=T+h+S+C;break;case"=":h=T+C+h+S;break;case"^":h=C.slice(0,q=C.length>>1)+T+h+S+C.slice(q);break;default:h=C+T+h+S;break}return o(h)}return he.toString=function(){return l+""},he}function d(l,f){var m=c((l=oe(l),l.type="f",l)),p=Math.max(-8,Math.min(8,Math.floor(Qe(f)/3)))*3,y=Math.pow(10,-p),E=Ee[8+p/3];return function(M){return m(y*M)+E}}return{format:c,formatPrefix:d}}var ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ne={exports:{}};(function(){var t,n,a,i,e,o=[].slice;t="a",e="an",a={0:{8:{_:e},9:{_:e},"-":{1:{1:{_:e}},4:{" ":{_:t},_:e},6:{"-":{_:e}},8:{_:e}}},1:{1:{0:{_:t},1:{_:t},2:{_:t},3:{_:t},4:{_:t},5:{_:t},6:{_:t},7:{_:t},8:{_:t},9:{_:t},_:e,".":{4:{_:t}}},8:{0:{0:{_:e},1:{_:e},2:{_:e},3:{_:e},4:{_:e},5:{_:e},6:{_:e},7:{_:e},8:{_:e},9:{_:e},_:t},1:{"-":{_:t}," ":{_:t}},2:{"-":{_:t}," ":{_:t}},3:{"-":{_:t}," ":{_:t}},4:{"-":{_:t}," ":{_:t}},5:{"-":{_:t}," ":{_:t}},6:{"-":{_:t}," ":{_:t}},7:{"-":{_:t}," ":{_:t}},8:{"-":{_:t}," ":{_:t}},9:{"-":{_:t}," ":{_:t}},_:e}},8:{0:{0:{x:{_:t}}},9:{0:{_:t}},_:e,",":{1:{_:t}}},"`":{a:{_:e}},"£":{8:{_:e}},"∞":{_:e},a:{" ":{_:t},b:{o:{u:{t:{"-":{_:e}},_:t}}},g:{a:{i:{_:t}}},l:{"-":{I:{_:t}},g:{u:{_:t}},t:{h:{_:t}}},m:{o:{n:{_:t}}},n:{" ":{_:t},d:{a:{_:e},e:{_:e},r:{_:e},_:t},o:{t:{_:t}},y:{w:{_:t}}},p:{r:{e:{_:t}}},r:{e:{" ":{_:t},":":{_:t}},t:{í:{_:t}}},_:e},A:{$:{_:t},A:{A:{_:t}},n:{d:{a:{l:{u:{c:{_:t}}}}}},r:{m:{a:{t:{_:t}}}},s:{t:{u:{r:{i:{a:{s:{_:t}}}}}}},t:{h:{l:{e:{t:{i:{_:e}}},o:{_:e},_:t}}},U:{$:{_:t},D:{_:t},S:{C:{_:t}}},_:e},Á:{_:e},á:{";":{_:e}},à:{_:e},Ä:{_:e},ā:{_:e},Å:{_:e},æ:{_:e},Æ:{n:{_:t},_:e},D:{ú:{n:{_:t}}},e:{".":{g:{_:t}},a:{c:{h:{" ":{_:t}}}},i:{t:{h:{e:{r:{" ":{_:t},".":{_:t}}}}}},l:{"-":{_:t},l:{a:{_:t}}},m:{p:{e:{z:{_:t}}}},n:{o:{u:{g:{_:t}}}},u:{p:{" ":{_:e}},_:t},w:{_:t},x:{i:{s:{t:{s:{_:t}}}}},_:e},E:{m:{p:{e:{z:{_:t}}}},n:{a:{m:{_:t}}},s:{p:{a:{d:{_:e}},e:{_:e},o:{_:e},_:t}},u:{l:{_:e},_:t},U:{R:{_:t}},_:e},é:{g:{_:t},t:{a:{_:e},u:{_:e},_:t},_:e},É:{_:e},f:{"-":{_:e}," ":{_:e},"/":{_:e},M:{_:e},p:{_:e},t:{_:e}},F:{0:{_:e},1:{_:e},2:{_:e},3:{_:e},4:{_:e},5:{_:e},6:{_:e},9:{_:e},"'":{_:e},"-":{_:e}," ":{_:e},'"':{_:e},"#":{_:e},",":{_:e},".":{_:e},"/":{_:e},"”":{_:e},A:{C:{_:t},D:{_:t},I:{R:{_:t}},L:{_:t},M:{_:t},N:{_:t},P:{_:t},Q:{_:t},R:{_:t},S:{_:t},T:{_:t},_:e},B:{_:e},C:{_:e},c:{_:e},D:{_:e},E:{C:{_:e},I:{_:e}},F:{" ":{_:t},_:e},f:{_:e},h:{_:e},H:{_:e},I:{A:{T:{_:t},_:e},D:{" ":{_:e}},R:{" ":{_:e}},S:{" ":{_:e}}},K:{_:e},L:{C:{_:e},N:{_:e},P:{_:e}},M:{R:{_:t},_:e},O:{" ":{_:e},I:{" ":{_:e}}},P:{".":{_:t},"?":{_:t},C:{"?":{_:t}},_:e},R:{C:{_:e},S:{_:e}},S:{_:e},T:{S:{_:t},T:{_:t},_:e},U:{" ":{_:e},",":{_:e},".":{_:e}},V:{_:e},W:{D:{_:t},_:e},X:{_:e},Y:{_:e},σ:{_:e}},G:{h:{a:{e:{_:e},i:{_:e}}}},h:{"'":{_:e},"-":{U:{_:t},_:e}," ":{_:e},'"':{_:e},",":{_:e},C:{_:e},e:{i:{r:{a:{_:t},_:e}}},i:{m:{s:{_:e}},s:{t:{o:{r:{i:{c:{_:t}}}}}}},o:{m:{a:{_:e},m:{_:e}},n:{e:{y:{_:t}},k:{_:t},v:{_:t},_:e},r:{s:{" ":{_:e}}},u:{r:{_:e}}},t:{t:{p:{" ":{_:e}},_:t},_:e}},H:{1:{_:e},2:{_:e},3:{_:e},4:{_:e},5:{_:e},"'":{_:e},"-":{_:e}," ":{_:e},'"':{_:e},"&":{_:e},",":{_:e},".":{A:{_:t},_:e},"+":{_:e},a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:e}}}}}}}}}}}},B:{_:e},C:{_:e},D:{B:{_:t},_:e},e:{i:{r:{_:e}}},F:{_:e},G:{_:e},H:{_:e},I:{D:{_:t},G:{_:t},M:{_:t},P:{_:t},_:e},L:{A:{"-":{D:{_:t}}},_:e},M:{_:e},N:{_:e},o:{n:{d:{_:t},e:{s:{_:e},_:t},g:{_:t},k:{_:t},o:{l:{_:t}},_:e},u:{r:{_:e}}},O:{" ":{_:e},V:{_:e}},P:{_:e},Q:{_:e},R:{T:{_:t},_:e},S:{" ":{_:t},R:{_:t},T:{_:t},_:e},T:{P:{_:t},_:e},V:{_:e},W:{T:{_:e}}},i:{".":{e:{_:t}},b:{n:{_:t}},f:{" ":{_:t}},i:{_:t},n:{c:{l:{u:{d:{i:{_:t}}}}},d:{i:{c:{a:{t:{e:{s:{_:t}}}}}}},s:{t:{e:{a:{d:{"?":{_:e}},_:t}}}}},s:{" ":{_:t},".":{_:t}},t:{" ":{_:t}},u:{_:t},_:e},I:{"-":{A:{_:t},I:{_:t}},I:{I:{_:t}},l:{b:{_:t}},M:{H:{_:t}},m:{a:{m:{s:{_:t}}}},R:{"£":{_:t}},s:{l:{a:{m:{" ":{_:t},",":{_:t},".":{_:t}},n:{d:{s:{_:t}}}}}},_:e},İ:{_:e},J:{i:{a:{n:{_:t},_:e}}},k:{u:{" ":{_:e}}},l:{" ":{_:e},'"':{_:e},p:{_:e}},L:{1:{_:e},2:{_:e},3:{_:e},5:{_:e},"'":{A:{_:t},_:e},"-":{a:{_:t},_:e}," ":{_:e},'"':{_:e},"&":{_:e},",":{_:e},".":{_:e},"/":{_:e},a:{e:{_:e},o:{i:{g:{_:e}}}},A:{" ":{_:e},L:{_:e},P:{_:e}},B:{_:e},C:{_:e},D:{_:e},E:{A:{_:t},E:{_:t},G:{_:t},O:{_:t},P:{_:t},T:{_:t},_:e},F:{_:e},G:{_:e},H:{_:e},I:{R:{_:e}},L:{_:e},M:{X:{_:t},_:e},N:{_:e},o:{c:{h:{a:{_:e}}}},O:{E:{_:e}},P:{_:e},R:{_:e},S:{_:e},T:{_:e},U:{" ":{_:e}},V:{_:e},X:{_:e},Z:{_:e}},m:{"-":{_:e}," ":{_:e},'"':{_:e},"&":{_:e},a:{k:{e:{s:{" ":{_:e}}}}},b:{_:e},e:{i:{n:{_:e}},n:{t:{i:{o:{n:{s:{_:e}}}}}}},f:{_:e},p:{_:e},R:{_:e},t:{_:e}},M:{1:{9:{0:{_:e},_:t},_:e},2:{_:e},3:{_:e},4:{_:e},5:{_:e},6:{_:e},7:{_:e},8:{_:e},9:{_:e},"'":{_:e},"-":{t:{_:t},_:e}," ":{_:e},'"':{_:e},"&":{_:e},",":{_:e},".":{A:{".":{S:{_:t}}},_:e},"/":{_:e},A:{C:{_:t},D:{_:t},F:{_:t},G:{_:t},J:{_:t},L:{_:t},M:{_:t},N:{_:t},P:{_:t},R:{_:t},S:{_:t},T:{_:t},X:{_:t},Y:{_:t},_:e},B:{_:e},C:{_:e},D:{_:e},e:{"-":{_:e}},E:{d:{_:e},n:{_:e},P:{_:e}},F:{_:e},f:{_:e},G:{_:e},H:{_:e},h:{_:e},i:{e:{_:e}},I:{5:{_:e},6:{_:e}," ":{_:e},A:{_:e},T:{_:e}},K:{_:e},L:{_:e},M:{T:{_:t},_:e},N:{_:e},o:{U:{_:e}},O:{" ":{_:e},T:{" ":{_:e}},U:{_:e}},P:{_:e},R:{_:e},S:{_:e},s:{c:{_:e}},T:{R:{_:t},_:e},U:{V:{_:e}},V:{_:e},X:{_:e}},N:{4:{_:e},6:{_:e},"'":{_:e},"-":{a:{_:t},S:{_:t},_:e}," ":{_:e},'"':{_:e},",":{_:e},".":{Y:{_:t},_:e},"=":{_:e},"²":{_:e},a:{o:{_:e}},A:{" ":{_:e},A:{F:{_:t},_:e},I:{_:e},S:{L:{_:e}}},B:{_:e},C:{_:e},D:{_:e},E:{A:{_:e},H:{_:e},S:{" ":{_:e}}},F:{_:e},G:{_:e},H:{_:e},I:{C:{_:t},L:{_:t},M:{H:{_:e},_:t},N:{_:t},S:{_:t},_:e},J:{C:{_:e}},K:{_:e},L:{S:{_:t},_:e},M:{_:e},N:{R:{_:e},T:{_:e}},P:{O:{V:{"-":{_:e}},_:t},_:e},R:{J:{_:t},T:{_:t},_:e},S:{W:{_:t},_:e},T:{$:{_:t},_:e},U:{S:{_:e}},V:{_:e},v:{_:e},W:{A:{_:e}},X:{_:e},Y:{P:{_:e},U:{_:e}}},n:{"-":{_:e},"−":{_:e}," ":{_:e},'"':{_:e},"&":{_:e},",":{_:e},"+":{_:e},"×":{_:e},d:{a:{_:e}},p:{a:{_:e}},t:{_:e},V:{_:e},W:{_:e}},o:{b:{r:{_:t}},c:{c:{u:{r:{s:{_:t}}}},h:{o:{_:t}}},f:{" ":{_:t}},n:{"-":{_:e},"/":{_:e},b:{_:e},c:{o:{_:e}},d:{_:e},e:{r:{_:e}},g:{_:e},i:{_:e},l:{_:e},m:{_:e},o:{_:e},r:{_:e},s:{_:e},t:{_:e},u:{_:e},w:{_:e},y:{_:e},_:t},r:{" ":{_:t},",":{_:t}},u:{i:{_:t}},_:e},O:{b:{e:{r:{s:{t:{" ":{_:e},l:{_:e}},_:t}}}},l:{v:{_:t}},n:{e:{i:{_:e},_:t}},N:{E:{_:t}},o:{p:{_:t}},u:{i:{_:t}},_:e},Ó:{_:e},Ö:{_:e},ö:{_:e},Ō:{_:e},ō:{_:e},P:{h:{o:{b:{_:e},i:{_:e}}}},r:{"'":{_:e},"-":{_:e}," ":{_:e},'"':{_:e},"&":{_:e},".":{_:e},e:{f:{e:{r:{s:{_:e}}}}},f:{_:e},m:{_:e},s:{_:e}},R:{1:{0:{_:t},_:e},2:{_:e},3:{_:e},4:{_:e},5:{_:e},6:{_:e},"'":{_:e},"-":{_:e}," ":{_:e},'"':{_:e},"&":{_:e},",":{_:e},".":{C:{_:t},_:e},"/":{_:e},A:{" ":{_:e},F:{_:e}},B:{_:e},C:{_:e},D:{_:e},E:{" ":{_:e},R:{_:e}},F:{_:e},f:{_:e},G:{_:e},H:{S:{_:e}},I:{A:{_:e},C:{" ":{_:e}}},J:{_:e},K:{_:e},L:{" ":{_:t},_:e},M:{1:{_:t},_:e},N:{G:{_:t},_:e},O:{T:{_:e}},P:{_:e},Q:{_:e},R:{_:e},S:{" ":{_:t},")":{_:t},",":{_:t},".":{_:t},"?":{_:t},T:{_:t},_:e},T:{_:e},U:{_:e},V:{_:e},X:{_:e}},s:{"-":{_:e},'"':{_:e},")":{_:e},",":{_:e},".":{_:e},a:{y:{s:{_:e}}},i:{c:{h:{_:e}}},p:{3:{_:e},r:{o:{t:{_:e}}}},s:{h:{_:e}},t:{a:{t:{e:{s:{" ":{_:e},":":{_:e}}}}}},v:{a:{_:t},e:{_:t},_:e}},S:{1:{_:e},2:{_:e},3:{_:e},4:{_:e},5:{_:e},6:{_:e},"'":{_:e},"-":{_:e}," ":{_:e},'"':{_:e},"&":{W:{_:t},_:e},",":{_:e},".":{B:{_:e},M:{_:e},O:{_:e}},"”":{_:e},A:{"-":{1:{_:t},_:e}," ":{_:e},C:{D:{_:e}},E:{_:e},S:{E:{_:t},_:e},T:{" ":{_:e},B:{_:e}}},B:{_:e},C:{A:{" ":{_:e}},C:{_:e},M:{_:e},O:{" ":{_:e}},R:{A:{_:t},_:e},T:{_:e}},D:{_:e},E:{" ":{_:e},C:{O:{_:t},R:{_:t},_:e},I:{_:e},O:{_:e}},F:{_:e},G:{_:e},H:{2:{_:e},3:{_:e},"-":{_:e}},I:{" ":{_:e}},J:{_:e},K:{_:e},L:{A:{_:t},I:{_:t},O:{_:t},_:e},M:{A:{_:t},E:{" ":{_:e},_:t},I:{_:t},_:e},N:{A:{_:t},E:{_:t},O:{_:t},_:e},O:{"(":{_:e},A:{" ":{_:e},I:{_:e}},E:{_:e},I:{_:e},S:{_:e},V:{_:e}},P:{A:{C:{_:t},D:{_:t},M:{_:t},N:{_:t},R:{_:t}},E:{" ":{_:e},_:t},I:{C:{_:t}},O:{_:t},U:{_:t},_:e},R:{_:e},S:{_:e},T:{"-":{_:e},A:{" ":{_:e}},B:{_:e},C:{_:e},D:{_:e},F:{_:e},L:{_:e},M:{_:e},S:{_:e},V:{_:e}},u:{r:{a:{" ":{_:e}}}},U:{B:{_:t},L:{_:t},N:{_:t},P:{_:t},S:{_:t},_:e},V:{_:e},W:{F:{_:e},P:{_:e},R:{_:e}},X:{S:{_:t},_:e}},t:{"-":{S:{_:e}},S:{_:e}},T:{a:{v:{e:{s:{_:e}}}},à:{_:e}},u:{"-":{_:t}," ":{_:t},'"':{_:t},".":{_:t},b:{e:{_:e},_:t},f:{_:t},k:{a:{_:e},_:t},l:{u:{_:t}},m:{" ":{_:t}},n:{" ":{_:t},a:{" ":{_:t},n:{a:{_:e},n:{_:e},s:{_:e},t:{_:e},_:t},r:{y:{_:t}}},e:{" ":{_:t}},i:{c:{o:{r:{p:{_:e}}}},d:{i:{_:t},_:e},m:{o:{_:t},_:e},n:{_:e},v:{o:{_:e}},_:t},l:{e:{s:{_:t}}}},p:{o:{_:t}},r:{a:{_:t},e:{_:t},i:{_:t},l:{_:t},o:{_:t}},s:{"-":{_:e}," ":{_:e},h:{_:e},_:t},t:{m:{_:e},t:{_:e},_:t},v:{_:t},w:{_:t},_:e},U:{1:{_:e},"-":{B:{o:{_:t},_:e}},a:{_:e},b:{i:{_:t},_:e},D:{P:{"-":{_:e}}},d:{_:e},g:{l:{_:e}},h:{_:e},i:{_:e},l:{i:{_:t},_:e},m:{_:e},M:{N:{_:e}},n:{"-":{_:e},a:{n:{_:t},_:e},b:{_:e},c:{_:e},d:{_:e},e:{s:{_:t},_:e},f:{_:e},g:{_:e},h:{_:e},i:{d:{_:e},n:{_:e}},k:{_:e},l:{_:e},m:{_:e},n:{_:e},o:{_:e},p:{_:e},r:{_:e},s:{_:e},t:{e:{r:{s:{_:t}}},_:e},u:{_:e},w:{_:e}},p:{_:e},r:{a:{_:t},i:{_:t},u:{g:{u:{a:{y:{a:{n:{"-":{_:e}}}}}}},k:{_:e},_:t},_:e},s:{h:{_:e},t:{_:e}},t:{n:{_:e},o:{"-":{_:e}},r:{_:e},t:{_:e}},x:{_:e},z:{_:e}},ü:{_:e},Ü:{_:e},V:{I:{I:{_:e}}},x:{a:{_:t},e:{_:t},i:{_:t},o:{_:t},x:{_:t},y:{_:t},_:e},X:{a:{_:t},A:{_:t},e:{_:t},h:{_:t},i:{_:t},I:{V:{_:t},X:{_:t}},o:{_:t},u:{_:t},U:{_:t},V:{_:t},X:{" ":{_:e},_:t},y:{_:t},_:e},Y:{p:{_:e}},α:{_:e},ε:{_:e},ω:{_:e}},i=function(_,s,u){var c;return s==null&&(s=a),u==null&&(u="a"),_==null?u:(c=_.slice(0,1),s=s[c],c!=null&&s!=null?i(_.slice(1),s,s._||u):u)},n=function(){var _,s,u;return s=1<=arguments.length?o.call(arguments,0):[],u=function(){var c,d,l;for(l=[],c=0,d=s.length;c<d;c++)_=s[c],_!=null&&l.push(i(_)+" "+_);return l}(),s.length===1?u[0]:u},Ne.exports={find:i,articlize:n}}).call(ot);var Me=Ne.exports;it({decimal:".",thousands:",",grouping:[3],currency:["£",""]}).format;function _t(t,n=null,a="default"){t==="East"&&(t="East of England"),t=t.replace("&","and").replace(", City of","").replace(", County of","");let i="",e=t.toLowerCase(),o=e.startsWith("isle"),_=["united kingdom","north east","north west","east midlands","west midlands","east of england","south east","south west","derbyshire dales"].includes(e)||e.startsWith("city of")||e.startsWith("vale of");return["in","the","its"].includes(n)&&(o||_)&&(i="the "),n==="in"?o?i="on "+i:i="in "+i:n==="its"&&(t=t+(t.slice(-1)==="s"?"'":"'s")),a==="default"?i+t:i.slice(0,-1)}function st(t){const n=Object.keys(t),a=n.map(e=>e.toLowerCase());for(let e of["hclnm","areanm","name","label","areacd"]){let o=a.indexOf(e);if(o>-1)return n[o]}let i=a.find(e=>e.toLowerCase().slice(-2)==="nm");return i||n[0]}function Se(t,n=null,a="default"){const i=st(t);return _t(t[i],n,a)}function Vt(t){return t[0]?t[0].toUpperCase()+t.slice(1):t}const Xt=(t,n="default")=>n==="default"?`${Me.find(t)} ${t}`:Me.find(t);var lt={rgb2hsl:L,rgb2hsv:J,rgb2hwb:U,rgb2cmyk:W,rgb2keyword:j,rgb2xyz:le,rgb2lab:ue,rgb2lch:ut,hsl2rgb:Y,hsl2hsv:ct,hsl2hwb:dt,hsl2cmyk:ft,hsl2keyword:ht,hsv2rgb:Z,hsv2hsl:pt,hsv2hwb:mt,hsv2cmyk:yt,hsv2keyword:gt,hwb2rgb:G,hwb2hsl:bt,hwb2hsv:wt,hwb2cmyk:kt,hwb2keyword:vt,cmyk2rgb:$,cmyk2hsl:Et,cmyk2hsv:Mt,cmyk2hwb:St,cmyk2keyword:Ct,keyword2rgb:P,keyword2hsl:Pt,keyword2hsv:Nt,keyword2hwb:Rt,keyword2cmyk:It,keyword2lab:zt,keyword2xyz:Ot,xyz2rgb:Re,xyz2lab:Ie,xyz2lch:xt,lab2xyz:ce,lab2rgb:ze,lab2lch:de,lch2lab:fe,lch2xyz:At,lch2rgb:Tt};function L(t){var n=t[0]/255,a=t[1]/255,i=t[2]/255,e=Math.min(n,a,i),o=Math.max(n,a,i),_=o-e,s,u,c;return o==e?s=0:n==o?s=(a-i)/_:a==o?s=2+(i-n)/_:i==o&&(s=4+(n-a)/_),s=Math.min(s*60,360),s<0&&(s+=360),c=(e+o)/2,o==e?u=0:c<=.5?u=_/(o+e):u=_/(2-o-e),[s,u*100,c*100]}function J(t){var n=t[0],a=t[1],i=t[2],e=Math.min(n,a,i),o=Math.max(n,a,i),_=o-e,s,u,c;return o==0?u=0:u=_/o*1e3/10,o==e?s=0:n==o?s=(a-i)/_:a==o?s=2+(i-n)/_:i==o&&(s=4+(n-a)/_),s=Math.min(s*60,360),s<0&&(s+=360),c=o/255*1e3/10,[s,u,c]}function U(t){var n=t[0],a=t[1],o=t[2],i=L(t)[0],e=1/255*Math.min(n,Math.min(a,o)),o=1-1/255*Math.max(n,Math.max(a,o));return[i,e*100,o*100]}function W(t){var n=t[0]/255,a=t[1]/255,i=t[2]/255,e,o,_,s;return s=Math.min(1-n,1-a,1-i),e=(1-n-s)/(1-s)||0,o=(1-a-s)/(1-s)||0,_=(1-i-s)/(1-s)||0,[e*100,o*100,_*100,s*100]}function j(t){return Oe[JSON.stringify(t)]}function le(t){var n=t[0]/255,a=t[1]/255,i=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var e=n*.4124+a*.3576+i*.1805,o=n*.2126+a*.7152+i*.0722,_=n*.0193+a*.1192+i*.9505;return[e*100,o*100,_*100]}function ue(t){var n=le(t),a=n[0],i=n[1],e=n[2],o,_,s;return a/=95.047,i/=100,e/=108.883,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,o=116*i-16,_=500*(a-i),s=200*(i-e),[o,_,s]}function ut(t){return de(ue(t))}function Y(t){var n=t[0]/360,a=t[1]/100,i=t[2]/100,e,o,_,s,u;if(a==0)return u=i*255,[u,u,u];i<.5?o=i*(1+a):o=i+a-i*a,e=2*i-o,s=[0,0,0];for(var c=0;c<3;c++)_=n+1/3*-(c-1),_<0&&_++,_>1&&_--,6*_<1?u=e+(o-e)*6*_:2*_<1?u=o:3*_<2?u=e+(o-e)*(2/3-_)*6:u=e,s[c]=u*255;return s}function ct(t){var n=t[0],a=t[1]/100,i=t[2]/100,e,o;return i===0?[0,0,0]:(i*=2,a*=i<=1?i:2-i,o=(i+a)/2,e=2*a/(i+a),[n,e*100,o*100])}function dt(t){return U(Y(t))}function ft(t){return W(Y(t))}function ht(t){return j(Y(t))}function Z(t){var n=t[0]/60,a=t[1]/100,u=t[2]/100,i=Math.floor(n)%6,e=n-Math.floor(n),o=255*u*(1-a),_=255*u*(1-a*e),s=255*u*(1-a*(1-e)),u=255*u;switch(i){case 0:return[u,s,o];case 1:return[_,u,o];case 2:return[o,u,s];case 3:return[o,_,u];case 4:return[s,o,u];case 5:return[u,o,_]}}function pt(t){var n=t[0],a=t[1]/100,i=t[2]/100,e,o;return o=(2-a)*i,e=a*i,e/=o<=1?o:2-o,e=e||0,o/=2,[n,e*100,o*100]}function mt(t){return U(Z(t))}function yt(t){return W(Z(t))}function gt(t){return j(Z(t))}function G(t){var n=t[0]/360,a=t[1]/100,i=t[2]/100,e=a+i,o,_,s,u;switch(e>1&&(a/=e,i/=e),o=Math.floor(6*n),_=1-i,s=6*n-o,o&1&&(s=1-s),u=a+s*(_-a),o){default:case 6:case 0:r=_,g=u,b=a;break;case 1:r=u,g=_,b=a;break;case 2:r=a,g=_,b=u;break;case 3:r=a,g=u,b=_;break;case 4:r=u,g=a,b=_;break;case 5:r=_,g=a,b=u;break}return[r*255,g*255,b*255]}function bt(t){return L(G(t))}function wt(t){return J(G(t))}function kt(t){return W(G(t))}function vt(t){return j(G(t))}function $(t){var n=t[0]/100,a=t[1]/100,i=t[2]/100,e=t[3]/100,o,_,s;return o=1-Math.min(1,n*(1-e)+e),_=1-Math.min(1,a*(1-e)+e),s=1-Math.min(1,i*(1-e)+e),[o*255,_*255,s*255]}function Et(t){return L($(t))}function Mt(t){return J($(t))}function St(t){return U($(t))}function Ct(t){return j($(t))}function Re(t){var n=t[0]/100,a=t[1]/100,i=t[2]/100,e,o,_;return e=n*3.2406+a*-1.5372+i*-.4986,o=n*-.9689+a*1.8758+i*.0415,_=n*.0557+a*-.204+i*1.057,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:e=e*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,e=Math.min(Math.max(0,e),1),o=Math.min(Math.max(0,o),1),_=Math.min(Math.max(0,_),1),[e*255,o*255,_*255]}function Ie(t){var n=t[0],a=t[1],i=t[2],e,o,_;return n/=95.047,a/=100,i/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,e=116*a-16,o=500*(n-a),_=200*(a-i),[e,o,_]}function xt(t){return de(Ie(t))}function ce(t){var n=t[0],a=t[1],i=t[2],e,o,_,s;return n<=8?(o=n*100/903.3,s=7.787*(o/100)+16/116):(o=100*Math.pow((n+16)/116,3),s=Math.pow(o/100,1/3)),e=e/95.047<=.008856?e=95.047*(a/500+s-16/116)/7.787:95.047*Math.pow(a/500+s,3),_=_/108.883<=.008859?_=108.883*(s-i/200-16/116)/7.787:108.883*Math.pow(s-i/200,3),[e,o,_]}function de(t){var n=t[0],a=t[1],i=t[2],e,o,_;return e=Math.atan2(i,a),o=e*360/2/Math.PI,o<0&&(o+=360),_=Math.sqrt(a*a+i*i),[n,_,o]}function ze(t){return Re(ce(t))}function fe(t){var n=t[0],a=t[1],i=t[2],e,o,_;return _=i/360*2*Math.PI,e=a*Math.cos(_),o=a*Math.sin(_),[n,e,o]}function At(t){return ce(fe(t))}function Tt(t){return ze(fe(t))}function P(t){return _e[t]}function Pt(t){return L(P(t))}function Nt(t){return J(P(t))}function Rt(t){return U(P(t))}function It(t){return W(P(t))}function zt(t){return ue(P(t))}function Ot(t){return le(P(t))}var _e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Oe={};for(var Ce in _e)Oe[JSON.stringify(_e[Ce])]=Ce;var ne=lt,z=function(){return new V};for(var D in ne){z[D+"Raw"]=function(t){return function(n){return typeof n=="number"&&(n=Array.prototype.slice.call(arguments)),ne[t](n)}}(D);var xe=/(\w+)2(\w+)/.exec(D),ae=xe[1],Ft=xe[2];z[ae]=z[ae]||{},z[ae][Ft]=z[D]=function(t){return function(n){typeof n=="number"&&(n=Array.prototype.slice.call(arguments));var a=ne[t](n);if(typeof a=="string"||a===void 0)return a;for(var i=0;i<a.length;i++)a[i]=Math.round(a[i]);return a}}(D)}var V=function(){this.convs={}};V.prototype.routeSpace=function(t,n){var a=n[0];return a===void 0?this.getValues(t):(typeof a=="number"&&(a=Array.prototype.slice.call(n)),this.setValues(t,a))};V.prototype.setValues=function(t,n){return this.space=t,this.convs={},this.convs[t]=n,this};V.prototype.getValues=function(t){var n=this.convs[t];if(!n){var a=this.space,i=this.convs[a];n=z[a][t](i),this.convs[t]=n}return n};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){V.prototype[t]=function(n){return this.routeSpace(t,arguments)}});const Bt="https://local-statistics-dev.vercel.app",qt="https://www.ons.gov.uk/visualisations/areas",Dt="https://ons-dp-prod-cdn.s3.eu-west-2.amazonaws.com/maptiles/ap-geos/v2",Lt={W04:{label:"community",plural:"communities",childGroup:!0},E06:{label:"unitary authority",plural:"unitary authorities"},W06:{label:"unitary authority",plural:"unitary authorities",childGroup:!0},E07:{label:"non-metropolitan district",plural:"non-metropolitan districts",childGroup:!0},E08:{label:"metropolitan district",plural:"metropolitan districts"},E09:{label:"borough",plural:"boroughs",childGroup:!0},E10:{label:"county",plural:"counties"},E11:{label:"metropolitan county",plural:"metropolital counties"},S12:{label:"council area",plural:"council areas",childGroup:!0},N09:{label:"local government district",plural:"local government districts",childGroup:!0}},Ut=["E00","W00","E01","W01","E02","W02","E04","W04","E05","W05"],Wt=[{id:"uk",type:"geojson"},{id:"ctry",type:"geojson"},{id:"rgn",type:"geojson"},{id:"la",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2023/authorities-all/v1/boundaries/{z}/{x}/{y}.pbf",layer:"boundaries",minzoom:4},{id:"wpc",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2010/wpc/v2/boundaries/{z}/{x}/{y}.pbf",layer:"boundaries",minzoom:4},{id:"sener",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2022/sen/v1/boundaries/{z}/{x}/{y}.pbf",layer:"region"},{id:"senc",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2022/sen/v1/boundaries/{z}/{x}/{y}.pbf",layer:"constituency"},{id:"wd",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2023/wd/v1/boundaries/{z}/{x}/{y}.pbf",layer:"boundaries",minzoom:6},{id:"par",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2022/par/v1/boundaries/{z}/{x}/{y}.pbf",layer:"par",minzoom:6},{id:"msoa",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2021/msoa/v2/boundaries/{z}/{x}/{y}.pbf",layer:"msoa",minzoom:6},{id:"lsoa",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2021/lsoa/v2/boundaries/{z}/{x}/{y}.pbf",layer:"lsoa",minzoom:7},{id:"oa",type:"vector",url:"https://cdn.ons.gov.uk/maptiles/administrative/2021/oa/v2/boundaries/{z}/{x}/{y}.pbf",layer:"oa",minzoom:8}],ie=t=>t.map(n=>["!",["in",n,["get","areacd"]]]),Q=[{key:"uk",codes:["K02"],source:"uk"},{key:"ctry",codes:["E92","S92","N92","W92"],pcio:"country",label:"country",plural:"countries",source:"ctry"},{key:"rgn",codes:["E12"],pcio:"region",label:"region",plural:"regions",source:"rgn"},{key:"cauth",codes:["E06","E09","E10","E47","N09","S12","W06"],label:"upper-tier/combined authority",plural:"upper-tier/combined authorities",source:"la",filter:["all",...ie(["E07","E08"]),["!",["==",["get","cauth"],"true"]]]},{key:"utla",codes:["E06","E08","E09","E10","N09","S12","W06"],pcio:"admin_county",label:"upper-tier/unitary authority",plural:"upper-tier/unitary authorities",source:"la",filter:["all",...ie(["E07","E47"])]},{key:"ltla",codes:["E06","E07","E08","E09","N09","S12","W06"],pcio:"admin_district",label:"lower-tier/unitary authority",plural:"lower-tier/unitary authorities",source:"la",filter:["all",...ie(["E10","E47"])]},{key:"wpc",codes:["E14","N06","S14","W07"],pcio:"parliamentary_constituency",label:"parliamentary constituency",plural:"parliamentary constituencies",source:"wpc"},{key:"sener",codes:["W10"],label:"Senedd electoral region",plural:"Senedd electoral regions",source:"sener"},{key:"senc",codes:["W09"],label:"Senedd constituency",plural:"Senedd constituencies",source:"senc"},{key:"wd",codes:["E05","W05"],pcio:"admin_ward",label:"ward",plural:"wards",source:"wd"},{key:"par",codes:["E04","W04"],pcio:"parish",label:"parish",plural:"parishes",source:"par"},{key:"msoa",codes:["E02","W02"],pcio:"msoa",label:"MSOA",plural:"MSOAs",source:"msoa"},{key:"lsoa",codes:["E01","W01"],pcio:"lsoa",label:"LSOA",plural:"LSOAs",source:"lsoa"},{key:"oa",codes:["E00","W00"],label:"output area",plural:"output areas",source:"oa"}],Ht=Wt.map(t=>({...t,layers:Q.filter(n=>n.source===t.id)})),K=(()=>{let t={};return Q.forEach(n=>n.codes.forEach(a=>{t[a]={...n};const i=Lt[a];i!=null&&i.childGroup&&(t[a].label=i.label,t[a].plural=i.plural)})),t})();(()=>{let t={};return Q.forEach(n=>t[n.key]=n),t})();const Fe=(t,n=Xe)=>Ve(t.replace(/\uFEFF/,""),n),jt=t=>t.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");async function Kt(t,n=window.fetch){let i=await(await n(t)).text(),e=Fe(i),o=e.columns.filter(_=>{e[0][_]&&String(e[0][_]).includes("|")});return e.forEach((_,s)=>{o.forEach(u=>{_[u]=_[u].split("|")})}),e}function Gt(t){let n=Array.from(new Set(t.sort((e,o)=>e.localeCompare(o)).map(e=>K[e]))).filter((e,o,_)=>_.map(s=>s.key).indexOf(e.key)===o);const a=["cauth","utla","ltla"].filter(e=>n.map(o=>o.key).includes(e));a.length>1&&(n=n.filter(e=>!a.slice(1).includes(e.key)));const i=Q.map(e=>e.key);return n.sort((e,o)=>i.indexOf(e.key)-i.indexOf(o.key))}async function Jt(t,n=window.fetch){if(!t.match(/[EKNSW]\d{8}\b/))return{place:null,type:null,geometry:null};try{let a=t.slice(0,3),e=await(await n(`${Dt}/${a}/${t}.json`)).json();return e.properties.childTypes=Gt(e.properties.child_typecds),{place:e.properties,type:K[a],geometry:e.properties.end?e.geometry:null}}catch(a){return console.debug(a),{place:null,type:null,geometry:null}}}const De=(t,n)=>!n||(!t.start||n>t.start)&&(!t.end||n<=t.end);function Ae(t,n){var i;const a=[...n.parents];["E","W"].includes(n.areacd[0])&&a.push({areacd:"K04000001",areanm:"England and Wales"});for(const e of a){let o=e.areacd.slice(0,3);if(t.geocodes.includes(o)&&De(e,t.year))return e.groupcd=(i=K[o])!=null&&i.key?K[o].key:"ew",e}return null}function Yt(t,n){let a=[],i=[];return t.forEach(e=>{let o=Ae(e,n);e.geocodes.includes(n.typecd)&&De(n,e.year)?a.push({...e,place:n}):o&&i.push({...e,place:Ae(e,n)})}),[...a,...i]}function Zt(t,n){const a=o=>{const _=n[o];return o==="groupcd"&&_==="ltla"?"lad":_};let i=t,e=t.match(new RegExp(/\{(.*?)\}/g));return Array.isArray(e)&&e.forEach(o=>{if(o.includes("name")){let _=o.slice(1,-1).split(",")[1];i=i.replace(o,`${Se(n,_,"prefix")} <strong>${Se(n)}</strong>`)}else i=i.replace(o,a(o.slice(1,-1)))}),i}async function Qt(t,n=window.fetch){try{const a="https://beta.gss-data.org.uk/sparql",i=encodeURIComponent(`PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX qb: <http://purl.org/linked-data/cube#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX dcat: <http://www.w3.org/ns/dcat#>
PREFIX pmdcat: <http://publishmydata.com/pmdcat#>
PREFIX sdmx-d: <http://purl.org/linked-data/sdmx/2009/dimension#>
SELECT DISTINCT ?label ?topic ?description ?description_md ?uri 
WHERE {
  ?geo ?match <http://statistics.data.gov.uk/id/statistical-geography/${t}> .
  {
    {?geo_uri rdfs:subPropertyOf sdmx-d:refArea .}
    UNION {OPTIONAL {?geo_uri rdfs:label "Statistical Geography"@en . }}
  }
  ?obs rdf:type qb:Observation ;
  ?geo_uri ?geo ;
    qb:dataSet ?datasetUri .
  ?uri pmdcat:datasetContents ?datasetUri ;
    dcat:keyword "subnational"@en ;
    rdfs:label ?label ;
    rdfs:comment ?description ;
    pmdcat:markdownDescription ?description_md ;
    dcat:theme ?topicUri .
  ?topicUri rdfs:label ?topic .
  FILTER (?match in (skos:exactMatch, owl:sameAs))
}
ORDER BY ?label`),e=`${a}?query=${i}`,o=await(await n(e)).text(),_=Fe(o).filter(u=>u.topic!=="Climate Change").map(u=>{var d,l;const c=((l=(d=u.description_md.match(new RegExp("(?<=###\\sSource\\n\\n)(.*?)(?=\\n\\n)","s")))==null?void 0:d[0])==null?void 0:l.replace(/\(.*?\)|\[|\]/gm,""))||null;return console.log(u.label,c,u),u.sources=typeof c=="string"?c.match(new RegExp("(?<=:\\s)(.*?)(?=\\s$)","gm")):[],u});return _!=null&&_[0]?(_.sort((u,c)=>u.label.localeCompare(c.label)),{topics:Array.from(new Set(_.map(u=>u.topic))).sort((u,c)=>u.localeCompare(c)).map(u=>({key:jt(u),label:u})),datasets:_}):{topics:null,datasets:null}}catch(a){return console.debug(a),{topics:null,datasets:null}}}function er(t){return Ut.includes(t.slice(0,3))?"area/?code="+t:t+"/"}function tr(t,n){const a=n.key==="msoa"?"hclnm":n.key==="oa"?"areacd":"areanm";return t.children.filter(i=>n.codes.includes(i.areacd.slice(0,3))).sort((i,e)=>i[a].localeCompare(e[a]))}function rr(t,n){return Je(t,n)}function nr(t){return t[0].toUpperCase()+t.slice(1)}export{qt as a,K as b,Jt as c,ot as d,$t as e,Yt as f,Kt as g,Se as h,Qt as i,Vt as j,Xt as k,Ht as l,er as m,Ut as n,rr as o,Zt as p,tr as q,Bt as r,nr as s,Q as t,Lt as u};
