var F={},A={},R=34,j=10,U=13;function I(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function O(e,t){var n=I(e);return function(i,u){return t(n(i),u,e)}}function M(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var u in i)u in t||n.push(t[u]=u)}),n}function l(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function P(e){return e<0?"-"+l(-e,6):e>9999?"+"+l(e,6):l(e,4)}function S(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),u=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":P(e.getUTCFullYear())+"-"+l(e.getUTCMonth()+1,2)+"-"+l(e.getUTCDate(),2)+(u?"T"+l(t,2)+":"+l(n,2)+":"+l(i,2)+"."+l(u,3)+"Z":i?"T"+l(t,2)+":"+l(n,2)+":"+l(i,2)+"Z":n||t?"T"+l(t,2)+":"+l(n,2)+"Z":"")}function L(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(r,a){var f,c,s=u(r,function(y,m){if(f)return f(y,m-1);c=y,f=a?O(y,a):I(y)});return s.columns=c||[],s}function u(r,a){var f=[],c=r.length,s=0,y=0,m,E=c<=0,w=!1;r.charCodeAt(c-1)===j&&--c,r.charCodeAt(c-1)===U&&--c;function D(){if(E)return A;if(w)return w=!1,F;var b,v=s,T;if(r.charCodeAt(v)===R){for(;s++<c&&r.charCodeAt(s)!==R||r.charCodeAt(++s)===R;);return(b=s)>=c?E=!0:(T=r.charCodeAt(s++))===j?w=!0:T===U&&(w=!0,r.charCodeAt(s)===j&&++s),r.slice(v+1,b-1).replace(/""/g,'"')}for(;s<c;){if((T=r.charCodeAt(b=s++))===j)w=!0;else if(T===U)w=!0,r.charCodeAt(s)===j&&++s;else if(T!==n)continue;return r.slice(v,b)}return E=!0,r.slice(v,c)}for(;(m=D())!==A;){for(var N=[];m!==F&&m!==A;)N.push(m),m=D();a&&(N=a(N,y++))==null||f.push(N)}return f}function p(r,a){return r.map(function(f){return a.map(function(c){return o(f[c])}).join(e)})}function d(r,a){return a==null&&(a=M(r)),[a.map(o).join(e)].concat(p(r,a)).join(`
`)}function h(r,a){return a==null&&(a=M(r)),p(r,a).join(`
`)}function C(r){return r.map(g).join(`
`)}function g(r){return r.map(o).join(e)}function o(r){return r==null?"":r instanceof Date?S(r):t.test(r+="")?'"'+r.replace(/"/g,'""')+'"':r}return{parse:i,parseRows:u,format:d,formatBody:h,formatRows:C,formatRow:g,formatValue:o}}var Z=L(","),B=Z.parse;function G(e){for(var t in e){var n=e[t].trim(),i,u;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(u=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))H&&!!u[4]&&!u[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const H=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function J(e){return e}function V(e){if(e==null)return J;var t,n,i=e.scale[0],u=e.scale[1],p=e.translate[0],d=e.translate[1];return function(h,C){C||(t=n=0);var g=2,o=h.length,r=new Array(o);for(r[0]=(t+=h[0])*i+p,r[1]=(n+=h[1])*u+d;g<o;)r[g]=h[g],++g;return r}}function W(e,t){for(var n,i=e.length,u=i-t;u<--i;)n=e[u],e[u++]=e[i],e[i]=n}function Y(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return k(e,n)})}:k(e,t)}function k(e,t){var n=t.id,i=t.bbox,u=t.properties==null?{}:t.properties,p=$(e,t);return n==null&&i==null?{type:"Feature",properties:u,geometry:p}:i==null?{type:"Feature",id:n,properties:u,geometry:p}:{type:"Feature",id:n,bbox:i,properties:u,geometry:p}}function $(e,t){var n=V(e.transform),i=e.arcs;function u(o,r){r.length&&r.pop();for(var a=i[o<0?~o:o],f=0,c=a.length;f<c;++f)r.push(n(a[f],f));o<0&&W(r,c)}function p(o){return n(o)}function d(o){for(var r=[],a=0,f=o.length;a<f;++a)u(o[a],r);return r.length<2&&r.push(r[0]),r}function h(o){for(var r=d(o);r.length<4;)r.push(r[0]);return r}function C(o){return o.map(h)}function g(o){var r=o.type,a;switch(r){case"GeometryCollection":return{type:r,geometries:o.geometries.map(g)};case"Point":a=p(o.coordinates);break;case"MultiPoint":a=o.coordinates.map(p);break;case"LineString":a=d(o.arcs);break;case"MultiLineString":a=o.arcs.map(d);break;case"Polygon":a=C(o.arcs);break;case"MultiPolygon":a=o.arcs.map(C);break;default:return null}return{type:r,coordinates:a}}return g(t)}async function z(e,t=window.fetch){let i=await(await t(e)).text();return B(i,G)}function Q(e,t="default"){let n=e.hclnm?e.hclnm:e.areanm?e.areanm:e.areacd,i=n.startsWith("Isle"),u=e.areacd.slice(0,3)==="E12"&&!["E12000003","E12000007"].includes(e.areacd);return n=n.split(",")[0].replace("&","and"),["in","text"].includes(t)&&(i||u)&&(n="the "+n),t=="in"&&(i?n="on "+n:n="in "+n),n}function q(e,t){return Y(e,t)}function K(e){return e[0].toUpperCase()+e.slice(1)}export{Q as a,K as c,z as g,q as m};
