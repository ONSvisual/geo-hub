import{Y as Ss,S as Wi,i as Xi,s as Ki,k as Ye,l as Je,m as $e,h as ae,n as ue,b as Ge,G as Ne,H as Si,O as Ar,a as Et,c as Tt,q as Yt,r as Jt,u as xi,e as ti,N as yi,R as Ir,f as Oe,g as pi,t as Ke,d as mi,T as Er,U as Tr,V as kr,X as ws,v as Nt,w as ni,x as qt,y as Gt,p as Gi,Z as $l,_ as Fa,$ as bu,a0 as dd,a1 as fd,W as wu,K as un,M as ic,a2 as Ua,o as Na,a3 as pd,a4 as Tn,D as Ql,P as Rr,Q as Fr,a5 as yu,a6 as fp,a7 as pp,a8 as Su,a9 as J1,aa as Q1,ab as Iu,ac as md,L as mp,ad as Br,ae as is,af as gp,ag as _p,ah as hu,ai as gd,aj as Eu,ak as yp,I as $1,al as gr,am as vp,an as eh}from"../../../chunks/singletons-8e2d0d59.js";import{t as xp,b as th}from"../../../chunks/config-ce11cd2b.js";import{a as Qt,c as Oa,m as bp}from"../../../chunks/utils-4edf0aa6.js";Ss.disable_scroll_handling;const du=Ss.goto;Ss.invalidate;Ss.invalidateAll;Ss.prefetch;Ss.prefetch_routes;Ss.before_navigate;const wp=Ss.after_navigate,Sp="Topology",Ip=[[[45719,58280],[34,4],[150,-47],[99,-17],[86,0],[79,27],[38,-23],[131,-24],[32,15],[22,-26],[-26,-69],[33,-84],[-95,1],[-57,21],[-27,-21],[-63,-2],[-42,35],[16,38],[-24,34],[-79,32],[-153,11],[-55,-13],[-26,-28],[-68,-18],[-104,39],[-14,25],[-3,79],[-43,31],[-12,31],[125,-13],[46,-38]],[[56247,46943],[-5,-4]],[[56242,46939],[-1,-1]],[[56241,46938],[-15,-37],[-51,-31],[-43,-9],[-108,16],[-47,-31],[-49,-3],[-114,-65],[-134,-150],[2,-76],[-23,-24],[20,-61],[-21,-11],[-10,-77],[47,-72],[47,-43],[-46,-32],[-78,-1],[-107,13],[-88,20],[-14,38],[-36,21],[-134,-2],[-72,-27],[-215,-32],[-97,5],[-114,-28],[-89,-7],[-149,93],[-196,36],[-160,21],[-204,-9],[-130,-81],[-78,20],[-65,4],[-89,39],[-48,-18],[-31,20],[-103,33],[-90,-4],[-73,34],[-117,-11],[-56,-13],[-25,-54],[-41,-8],[-82,5],[-42,13],[-154,28],[-19,-17],[-150,24],[-96,-6],[-67,31],[-57,13],[-46,-10],[-141,6],[-46,20],[-192,31],[-73,-17],[5,-42],[-41,1],[-38,-45],[-144,-6],[34,-38],[-39,-41],[-2,-59],[-119,10],[-52,28],[-66,-7],[-67,-40],[11,-37],[-68,-31],[-34,-1],[-34,-36],[-29,25],[-56,-19],[-43,8],[-52,-51],[-58,-13],[-195,-67],[-2,69],[-25,16],[-110,-13],[-71,-54],[-82,63],[-23,72],[5,47],[41,19],[-107,79],[-36,-71],[-104,-12],[-34,19],[5,35],[-45,32],[-47,-8],[-31,-38],[21,-51],[-19,-63],[-79,-12],[-52,18],[-75,3],[36,60],[-52,13],[-107,44],[-36,35],[-54,30],[-46,54],[-56,15],[-107,-27],[-24,-17],[32,-40],[84,6],[42,-19],[10,-33],[-28,-37],[-1,-29],[37,-32],[-38,-31],[-24,-48],[44,-48],[50,-16],[-9,-23],[-67,-20],[10,-42],[36,-16],[26,-33],[-57,-26],[-106,35],[-11,28],[34,19],[8,38],[-60,47],[-6,49],[-45,25],[-79,-23],[-113,20],[-10,31],[61,33],[27,34],[-38,16],[-70,-21],[-49,-27],[-35,-60],[-34,-2],[2,75],[-52,21],[-107,-2],[-25,-41],[12,-49],[96,-23],[-19,-33],[-103,-10],[-130,20],[-54,33],[-30,51],[-11,54],[-78,18],[-103,34],[-37,42],[-64,37],[34,28],[-11,44],[-82,-17],[18,32],[62,27],[-19,36],[-125,-9],[-56,-16],[-24,16],[31,49],[-34,23],[-103,1],[-52,-35],[-83,-22],[-55,3],[-60,23],[64,23],[12,42],[-21,25],[-62,3],[-53,-13],[-77,-2],[-33,13],[13,49],[-29,42],[-74,10],[-69,-2],[-114,-19],[-59,19],[-146,13],[-117,33],[-55,23],[-32,-45],[-28,-73],[-41,2],[-17,-30],[-100,21],[-86,4],[-23,-15],[-106,11],[-26,25],[-61,5],[-64,-9],[-19,-51],[47,-14],[6,-63],[-13,-34],[15,-90],[-61,3],[-81,-141],[-27,-84],[-201,69],[-93,38],[-54,77],[-116,55],[-88,-47],[-96,-2],[-9,-45],[10,-53],[-31,-73],[17,-45],[-82,2],[-103,-40],[-158,-112],[-198,-49],[-151,-55],[-57,8],[-85,-39],[-45,9],[-84,-4],[-51,-17],[-96,-7],[-10,33],[-50,49],[-94,2],[-10,17],[-103,53],[-178,47],[-150,14],[-151,22],[15,84],[-99,-29],[-61,5],[-85,-41],[-35,-28],[-45,-12],[-107,-47],[-83,-11],[-71,-19],[-125,-12],[-23,-19],[-100,-2],[-235,-21],[-53,-30],[-94,-5],[-54,17]],[[42479,45934],[85,65],[27,73],[-75,179],[41,140],[-63,158],[-58,20],[33,73],[-12,34],[-99,35],[-152,-32],[-126,110],[6,80],[-365,134],[-163,91],[-86,80],[-336,140],[-43,157],[-161,198],[107,53],[31,6],[42,47],[40,5],[88,66],[48,23],[-36,122],[-93,24],[-11,33],[-131,-8],[-61,2],[-51,19],[-17,38],[-63,6],[-61,36],[-18,33],[-81,35],[11,43],[-30,79],[39,33],[52,6],[16,34],[-13,47],[30,7],[-11,49],[48,18],[13,23],[104,70],[-39,10],[-23,37],[10,39],[40,27],[0,94],[61,77],[-24,48],[7,42],[78,64],[48,15],[-18,62],[-22,30],[9,62],[-18,53],[-85,24],[-41,80],[-92,34],[-118,7],[-74,68],[-41,28],[-99,43],[-29,64],[-96,33],[-73,13],[-31,25],[-56,97],[-33,73],[-100,49],[-30,-56],[-81,-80],[-109,-32],[-83,-39],[-51,-6],[-35,-24],[-50,-12],[-51,27],[-83,-82],[-43,-22],[-88,-69],[-57,-20],[-88,-49],[-57,6],[-87,-19],[-102,-13],[-22,-13],[-74,-1],[-56,17],[-70,44],[-150,46],[-95,69],[-48,78],[-53,51],[-48,94],[9,20],[85,57],[-79,106],[-74,53],[-16,43],[-30,15],[-123,90],[10,12],[101,22],[180,90],[15,30],[73,93],[14,102],[64,9],[4,43],[57,2],[61,16],[-67,73],[-59,6],[-47,62],[-27,6],[-37,75],[29,99],[-30,17],[-70,8],[-81,23],[-91,4],[-58,78],[11,24],[87,5],[30,60],[28,22],[66,5],[59,47],[4,53],[52,99],[-58,20],[16,36],[-29,28],[16,49],[82,40],[63,8],[17,-12],[103,39],[22,32],[49,21],[104,1],[15,33],[151,15],[96,33],[96,1],[104,28],[0,37],[-148,129],[-42,11],[-15,54],[113,51],[-18,35],[-52,18],[45,83],[84,13],[-44,28],[-83,19],[-16,24],[-63,-10],[-96,-1],[-16,-41],[-124,2],[-18,-24],[-79,15],[-56,-5],[-50,-29],[-44,19],[-76,16],[45,44],[-57,31],[-27,1],[-17,43],[-41,13],[-42,-17],[-52,14],[-14,44],[-88,25],[-22,34],[9,52],[-62,29],[-20,69],[-45,36],[-95,13],[-57,17],[-44,-17],[-69,3],[-31,18],[-97,15],[-115,50],[-57,109],[-60,3],[-47,45],[-28,66],[-71,82],[89,71],[-31,40],[-124,113]],[[37283,53242],[24,7],[23,59],[39,30],[-21,33],[145,178],[20,19],[68,-17],[119,0],[68,12],[66,44],[-2,49],[34,82],[13,62],[124,24],[30,-16],[28,21],[-121,18],[-202,87],[33,28],[143,12],[-15,57],[49,19],[0,22],[96,64],[45,49],[40,21],[67,17],[82,43],[117,30],[52,25],[-3,39],[74,25],[30,43],[62,41],[-19,61],[86,-20],[73,38],[123,31],[57,-9],[74,29],[40,49],[44,21],[73,55],[-2,30],[34,19],[26,44],[77,53],[151,29],[59,-19],[63,4],[45,21],[123,39],[51,3],[101,-31],[28,17],[114,8],[70,-17],[71,-37],[11,-52],[68,-8],[141,17],[-1,13],[62,46],[86,37],[58,12],[35,25],[148,36],[11,27],[-72,43],[90,36],[72,45],[-47,20],[-11,30],[3,64],[-79,48],[31,38],[68,12],[-21,58],[32,17],[51,-19],[141,-12],[7,31],[166,50],[14,56],[107,24],[58,35],[41,-4],[33,36],[84,-10],[16,43],[68,-10],[113,3],[59,-12],[53,-26],[13,22],[67,7],[22,18],[155,44],[114,78],[19,73],[39,38],[-12,48],[52,29],[179,34],[-72,48],[-158,17],[-60,13],[-54,-3],[-55,66],[42,66],[-97,112],[-87,69],[-59,8],[-23,24],[22,100],[23,33],[-33,56],[-56,12],[-6,112],[16,40],[-86,79],[5,29],[-75,11],[-53,47],[-68,23],[-102,64],[-64,56],[-89,20],[-31,24],[-39,57],[43,57],[-8,69],[12,27],[-46,35],[-28,40],[-108,35],[-14,-10],[-88,94],[72,20],[3,64],[-112,-12],[-18,-15],[-65,12],[-71,46],[2,25],[74,16],[20,22],[9,49],[87,0],[57,29],[114,10],[97,-37],[161,-7],[133,19],[84,-14],[28,-32],[29,-5],[109,13],[32,30],[-38,26],[-71,13],[-53,29],[34,27],[105,48],[18,29],[52,21],[85,12],[14,26],[-26,53],[9,37],[95,50],[16,35],[35,24],[52,9],[67,79],[40,11],[18,31],[58,35],[100,16],[36,29],[-55,30],[-45,57],[35,42],[46,15],[73,7],[99,-4],[40,47],[-22,60],[12,33],[47,29],[53,11],[44,-6],[90,-28],[80,13],[-7,44],[43,54],[60,-9],[26,39],[-37,62],[25,27],[84,20],[58,1],[168,-23],[96,-6],[103,-21],[76,5],[96,24],[42,43],[24,54],[32,-15],[107,32],[67,-20],[22,-49],[71,-36],[93,3],[36,-56],[55,-47],[93,-54],[22,-38],[85,-35],[26,-51],[111,-58],[82,-57],[127,-61],[114,-39],[58,-30],[74,-13],[245,-64],[37,-14],[30,-51],[-49,-15],[23,-61],[34,-59],[-6,-30],[38,-47],[86,-140],[73,-58],[69,-21],[51,-58],[-5,-26],[51,-14],[56,-30],[126,-21],[56,-26],[65,11],[55,27],[11,30],[57,75],[37,24],[-14,58],[35,1],[60,-115],[71,-69],[71,-53],[101,-56],[32,-38],[-36,-28],[-78,-3],[-44,-31],[-63,-8],[-4,-39],[51,-38],[38,-44],[39,2],[52,37],[27,50],[71,11],[56,49],[109,-23],[48,7],[111,-52],[124,-26],[124,-37],[42,-47],[79,-33],[61,-41],[91,-80],[141,-41],[45,-3],[49,-53],[-43,-22],[9,-32],[44,-47],[47,-31],[23,-35],[50,-32],[0,-20],[47,-21],[-89,-20],[-20,-22],[-31,-78],[44,-64],[69,-60],[90,-59],[64,-18],[-70,-48],[1,-24],[43,-32],[-35,-73],[17,-33],[43,-38],[87,-9],[67,-32],[34,10],[4,-71],[-23,-23],[19,-35],[-8,-59],[43,-116],[-46,-37],[9,-37],[39,-18],[14,-59],[-64,-64],[61,-62],[89,-19],[9,-34],[-29,-44],[3,-35],[-17,-53],[31,-59],[-17,-31],[-77,-9],[-45,-30],[-42,-84],[-51,-25],[-61,-49],[-12,-27],[50,-164],[44,-96],[48,-62],[70,-67],[80,-58],[-22,-13],[-69,28],[-44,-24],[103,-32],[70,18],[125,-49],[28,-38],[92,-46],[24,-20],[-14,-60],[8,-37],[-82,-52],[-53,-80],[-65,-75],[-13,-56],[9,-105],[38,-102],[67,-116],[68,-79],[70,-61],[104,-50],[54,-48],[35,-17],[-21,-61],[24,-77],[55,-70],[105,-86],[63,-7],[-10,-38],[26,-99],[-57,8],[-36,-16],[-29,-43],[8,-51],[-71,-39],[-51,-103],[51,-106],[50,-61],[97,-92],[-93,21],[-37,64],[-124,-34],[-29,2],[-101,-56],[75,6],[85,21],[90,-7],[94,-43],[99,-36],[36,-41],[-18,-34],[11,-43],[-3,-80],[32,-57],[57,-70],[128,-97],[61,-8],[16,-53],[45,0],[21,-53],[39,-30],[47,-14],[-17,-76],[30,-68],[34,-47],[69,-60],[98,-39],[12,-37],[-19,-28],[53,-80],[87,-79],[8,-44],[-120,-8],[-30,-43],[-99,-26],[-26,-37],[-11,-47],[-69,-82],[-33,-12],[-153,6],[-102,-10],[-198,3],[-177,-7],[-101,-31],[-53,-61],[-20,-132],[-38,-24],[-133,-30],[-132,51],[-100,1],[-35,9],[-73,47],[-88,2],[-114,-30],[-122,-56],[-72,-21],[-118,1],[-80,11],[-114,26],[-252,18],[-73,22],[-22,16],[-91,28],[-84,-49],[-92,6],[-56,30],[-3,42],[-201,66],[-5,-9],[182,-61],[16,-53],[80,-29],[91,-6],[41,36],[83,-3],[71,-33],[112,-29],[28,7],[167,-21],[113,-25],[134,-25],[52,10],[145,44],[106,56],[105,20],[60,-7],[77,-50],[40,-9],[81,6],[55,-17],[68,-37],[36,-5],[46,19],[96,8],[29,16],[26,74],[9,80],[34,44],[91,34],[83,7],[317,-4],[37,7],[96,-23],[166,30],[93,100],[-3,45],[29,34],[123,27],[6,-17],[60,-29],[42,7],[69,-82],[77,-39],[55,-9],[9,-26],[48,6],[36,-27],[38,-7],[4,-52],[98,-60],[92,-24],[3,-19],[47,-52],[35,-72],[-38,-42],[9,-30],[-70,-54],[-43,-80],[4,-85],[38,-56],[-2,-52],[-36,1],[6,-42],[25,-5],[27,41],[40,-62],[28,-16],[22,-43],[-50,-25],[-43,-44],[18,-93],[57,-89],[-15,-18],[10,-47],[71,-87],[-8,-25],[28,-73],[95,-108],[54,-46],[31,-4],[29,-43],[-12,-18],[61,-87],[0,-28],[31,-54],[40,-44],[-4,-19],[28,-114],[-15,-36],[9,-47],[24,-36],[-12,-46],[78,-93],[3,-18],[92,-99],[70,-54],[189,-122],[0,-25],[80,-57],[93,-76],[156,-87],[86,-41],[225,-86],[245,-70],[26,-27],[-63,-33],[-54,19],[11,24],[-71,31],[-33,-20],[60,-46],[-75,-21],[-13,-112],[43,-67],[39,-32],[63,-103],[87,-71],[118,-61],[-47,-34],[12,-48],[-55,-56],[-151,-9],[-41,-23],[-83,-74],[-93,-10],[371,-3],[57,-18],[51,28],[33,-48],[-18,-74],[-52,-2],[-17,-54],[-178,-115],[-17,1],[-102,-77],[-45,-23],[-114,-11],[-106,26],[-71,8],[-54,18],[-70,35],[-23,29],[-120,-37],[-14,-16],[-35,-166],[19,-3],[37,161],[51,29],[57,-5],[85,-39],[88,-27],[54,-7],[37,-40],[74,14],[79,-4],[59,18],[79,40],[209,132],[120,65],[58,64],[9,87],[-25,50],[13,24],[122,2],[43,15],[-46,49],[-12,38],[12,58],[37,-20],[16,-35],[144,-75],[76,-34],[116,-37],[124,-29],[54,-4],[121,5],[201,-53],[80,-61],[65,-38],[138,-57],[211,-67],[324,-74],[83,-13],[110,17],[71,25],[87,-18],[76,-5],[66,-20],[30,-33],[45,-17],[77,-48],[40,-10],[29,-27],[138,2],[117,-20],[92,21],[99,2],[113,-22],[11,-10],[112,-28],[57,-39],[62,-7],[90,-26],[95,12],[60,-7]],[[43324,58979],[0,54],[-17,27],[16,118],[-24,30],[-1,46],[22,29],[91,10],[148,86],[96,-2],[70,28],[112,58],[47,-37],[-14,-32],[70,-23],[78,-79],[55,-34],[24,0],[85,-46],[5,-54],[20,-38],[44,-30],[20,-58],[-132,-25],[-7,20],[-98,70],[-86,-6],[-127,-37],[-20,-79],[-76,-31],[-91,-10],[-119,30],[-47,-2],[-144,17]],[[33354,33908],[-29,10]],[[33325,33918],[29,-10]],[[35134,38623],[72,-21],[-15,-35],[-64,29],[7,27]],[[35130,38624],[-16,-37],[-53,13],[39,35],[30,-11]],[[35231,38650],[-64,-34],[-18,28],[82,6]],[[35286,38659],[-18,-51],[-46,-8],[13,53],[51,6]],[[31660,42857],[-123,-27],[-3,-68],[82,-59],[57,-92],[8,-51],[-8,-48],[41,-44],[24,-134],[24,-71],[45,-37],[52,12],[87,-83],[-30,-22],[-6,-50],[13,-28],[68,-47],[56,7],[31,-11],[-4,-36],[33,-27],[-7,-26],[26,-43],[95,-33],[110,29],[64,37],[36,-31],[40,26],[-4,-55],[-18,-22],[-140,-12],[-83,-16],[-144,34],[-152,156],[-71,64],[-27,12],[-122,111],[-81,90],[-122,157],[-11,56],[-24,50],[-14,64],[-32,79],[-11,104],[52,61],[161,48],[32,-24]],[[42479,45934],[-4,29],[-69,5],[-47,-43],[-71,-83],[-31,-4],[-432,-4],[-31,17],[-54,2],[-54,18],[-104,-34],[-73,-13],[18,-43],[-150,-40],[-39,-5],[-86,9],[6,-66],[-71,-57],[-40,-7],[-45,-55],[1,-65],[21,-67],[-17,-33],[26,-24],[-7,-48],[39,-9],[58,-36],[38,-11],[-19,-41],[18,-32],[-53,-73],[-196,-6],[-91,-82],[-39,-10],[-46,-33],[-36,0],[-64,-42],[-83,-13],[-78,-33],[10,-47],[116,-35],[2,-17],[121,-47],[11,-55],[65,-27],[80,-4],[22,-37],[82,-38],[-52,-107],[-37,-23],[-43,-2],[26,-43],[-41,-36],[41,-32],[-38,-64],[63,-69],[-12,-29],[-50,-36],[86,-99],[-53,-104],[17,-27],[-30,-22],[-6,-95],[-28,-27],[-103,-47],[-122,-3],[-25,36],[-99,53],[-19,31],[-100,-16],[-7,-81],[-121,-9],[-117,2],[-41,-54],[-27,-84],[-84,11],[-234,-38],[-60,28],[-195,10],[-31,-46],[-97,-68],[-63,-130],[-314,-232],[-39,-12],[-72,-42],[-8,-25],[-54,-17],[-2,-53],[-44,-59],[-32,-17],[-65,11],[-42,-44],[-133,-2],[31,-31],[-5,-66],[-55,-30],[20,-105],[-33,-28],[14,-44],[41,-16],[61,-6],[83,-34],[-10,-27],[96,-58],[-19,-29],[37,-23],[103,-13],[-23,-29],[24,-46],[145,8],[32,-39],[121,-17],[78,-49],[57,5],[100,-88],[64,-13],[-13,-36],[16,-106],[-50,-62],[-15,-40],[10,-47],[107,-57],[80,2],[55,15],[126,-6],[69,-35],[33,25],[81,14],[89,6],[84,16],[24,-9],[75,19],[28,24],[103,15],[121,-84],[-7,-62],[34,-27],[-26,-26],[16,-49],[38,-28],[-8,-24],[117,-9],[24,-21],[36,-67],[-32,-6],[-95,17],[-13,-67],[12,-91],[125,-53],[39,23],[23,-13],[68,35],[81,-2],[46,-51],[47,-11],[94,-60],[34,-9],[-22,-40],[37,-15],[107,-13],[363,49],[58,20],[121,8],[68,-53],[-42,-13],[-43,-37],[33,-42],[28,3],[2,-62],[51,25],[62,15],[48,-22],[29,35],[50,15],[11,22],[46,-5],[24,-82],[23,-33],[78,-67],[28,-34],[-49,-75],[33,-51],[64,-11],[42,34],[76,-31],[12,-73],[32,14],[28,-17],[52,25],[99,-38],[18,26],[78,-18],[20,-30],[56,-16],[28,-46],[35,4],[52,-23],[33,-63],[-34,-45],[102,-137],[72,-27],[19,-31],[77,-43],[48,-51],[-19,-27],[66,-62],[19,-44],[58,-27],[67,-6],[162,-90],[10,-112],[-18,-94],[-143,-39],[-237,-70],[-72,-45],[-202,-84],[-140,-62],[-15,-12],[-14,-74],[44,-28],[-57,-30],[-59,-50],[14,-33],[37,-24],[12,-113],[-15,-50],[21,-35],[-50,-57],[-71,-32],[7,-39],[-29,-45],[-47,-31],[-76,11],[-9,-21],[-69,-19],[-28,-35],[-66,-48],[36,-36],[-23,-22],[52,-37],[10,-33],[33,-29],[-1,-81],[15,-15],[107,-31],[52,-23],[-30,-62],[36,-66],[35,-5],[14,38],[56,29],[64,-41],[23,-68],[73,-35],[40,-2],[171,15],[41,-24],[58,6],[27,22],[3,47],[37,6],[70,-8],[116,53],[106,9],[23,-35],[-60,-45],[27,-62],[74,-40],[77,-32],[14,-30],[-9,-40],[-39,-44],[-11,-55],[5,-45],[42,-27],[69,-20],[10,-20],[-19,-50],[41,-50],[4,-34],[34,-50],[82,-4],[53,14],[20,-43],[116,-74],[143,-158],[34,-25],[70,-26],[43,-42],[103,-24],[102,-61],[18,-28],[19,-71],[140,-60],[43,-30],[50,-17],[65,7],[33,-132]],[[45085,36736],[-46,-17],[-16,-37],[-66,-22],[-11,-78],[-33,-20],[100,-65],[-52,-45],[-135,-42],[-69,8],[-45,-20],[-88,-1],[-38,14],[-39,39],[-79,-52],[-12,-55],[17,-39],[-38,-73],[-69,-26],[-63,-42],[-15,-57],[8,-54],[76,-71],[-73,-23],[13,-63],[-81,-37],[2,-37],[-46,-10],[-72,-35],[24,-65],[-30,-2],[-51,42],[-55,-15],[-85,-85],[66,-48],[-40,-45],[70,-13],[30,-34],[31,8],[55,-17],[128,2],[-17,-60],[-78,-127],[-34,-41],[6,-61],[-85,-22],[-40,-63],[-91,-42],[-24,-29],[-55,-29],[70,-40],[53,30],[44,-12],[55,-40],[41,-138],[31,-18],[-54,-41],[-42,-18],[7,-77],[43,-10],[-25,-38],[15,-47],[66,-12],[22,-28],[-27,-43],[-1,-34],[-44,-67],[4,-210],[-10,-34],[19,-42],[20,-83],[-41,-69],[92,-53],[-16,-69],[22,-34],[87,-41],[91,-24],[28,-53],[42,-22],[-12,-36],[-88,-19],[-54,-26],[7,-72],[22,-22]],[[44307,33488],[2,-16],[-57,-44],[-14,-69],[-74,-76],[-84,-3],[-63,-35],[-49,5],[-72,36],[-98,3],[-81,-10],[-58,-49],[-1,-38],[-69,-31],[10,-46],[-93,-14],[-41,-30],[-64,-15],[-92,-5],[-35,24],[-110,-34],[-70,-5],[-67,11],[-44,52],[-47,-13],[-34,12],[-56,82],[-47,12],[-61,-71],[-2,-56],[31,-146],[-96,30],[-38,-4],[-8,-28],[-39,-36],[-44,-15],[-42,-32],[-43,-2],[-77,-54],[-64,-66],[-161,-144],[-87,-58],[-57,-58],[-54,-24],[-7,-38],[-109,-9],[-39,-18],[-11,-28],[-74,-67],[-70,15],[-25,-24],[-152,-40],[-74,-58],[-100,-11],[-60,-15],[-22,27],[-48,2],[-19,18],[-150,-18],[-53,-35],[-53,-11],[2,-26],[-30,-44],[-41,-22],[-55,-74],[-72,-42],[-51,31],[-30,-7],[-9,-35],[-175,-2],[-61,-19],[-21,-41],[8,-56],[-20,-44],[3,-67],[44,-42],[-44,-14],[67,-62],[70,-54],[-42,-40],[-63,-20],[1,-104],[-46,-15],[-57,-2],[-139,-23],[-1,-34],[-57,-29],[-80,6],[-49,-22],[-51,-5],[-65,9],[-3,-37],[15,-68],[-21,-28],[17,-39],[-84,12],[-73,-46],[-136,-20],[-65,-26],[-47,10],[-60,-37],[-30,13],[-36,50],[-40,26],[-73,7],[-75,-26],[-46,11],[-32,50],[-70,24],[-27,-83],[12,-71],[-5,-45],[-60,-50],[-2,-22],[-56,9],[-40,38],[-73,49],[-41,-1],[-54,23],[-17,32],[-41,20],[-48,-2],[-23,-20],[-47,7],[4,-35],[-50,-35],[-81,-4],[-29,36],[-86,41],[19,25],[-48,133],[-31,30],[-40,66],[-142,-17],[-63,58],[2,27],[-46,15],[-102,-32],[-17,15],[-79,0],[-53,-34],[-139,-45],[-93,-10],[-62,7],[-17,31],[-30,6],[-49,44],[-26,5],[-53,-50],[-120,-63],[-102,-8]],[[36913,31185],[-21,11],[-84,3],[-64,25],[-148,-11],[-31,14],[-9,39],[-44,33],[-90,0],[-38,-13],[-23,29],[-45,-20],[-35,14],[-82,-62],[-56,20],[-64,3],[-106,26],[-31,-11],[-40,11],[-70,43],[-57,85],[-6,71],[-29,34],[-37,13],[-38,-20],[-71,29],[-23,30],[5,57],[44,44],[4,43],[-110,33],[25,27],[-43,26],[54,27],[2,47],[-97,54],[68,20],[-38,31],[19,31],[-46,34],[-53,-14],[18,47],[-50,4],[15,39],[36,36],[-153,60],[-26,41],[-73,-8],[38,82],[36,-28],[62,82],[-55,-3],[11,53],[39,-1],[39,20],[23,70],[-5,35],[-96,-30],[-53,-48],[-64,-22],[-68,8],[-95,35],[-43,25],[-210,37],[-19,50],[-113,31],[-56,24],[-157,178],[-55,-18],[-27,33],[-66,15],[20,31],[77,19],[31,-23],[63,11],[43,34],[46,-9],[51,29],[147,43],[25,-18],[162,61],[68,57],[6,51]],[[34977,33174],[150,109],[-4,5],[-146,-107]],[[34977,33181],[-19,64],[-68,49],[-63,21],[-83,77],[-55,71],[-175,79],[-111,64],[-71,31],[-68,40],[-342,160],[-102,33],[-330,12],[-132,25]],[[33358,33907],[-37,13]],[[33321,33920],[-53,27]],[[33268,33947],[-3,1]],[[33265,33948],[-9,6]],[[33256,33954],[-1,1]],[[33255,33955],[-17,11]],[[33238,33966],[-1,1]],[[33237,33967],[-10,6]],[[33227,33973],[-1,1]],[[33226,33974],[-62,50]],[[33164,34024],[-55,48]],[[33109,34072],[-29,47],[5,59],[-82,13],[-25,47],[-54,18],[72,65],[-116,-24],[-15,21],[-55,3],[-32,96],[82,4],[38,22],[83,11],[-67,39],[-83,16],[24,38],[-42,66],[4,24],[55,15],[-70,37],[-102,81],[-64,36],[-80,30],[-69,54],[-75,76],[-45,24],[-48,6],[-109,101],[-52,24],[-4,80],[97,43],[131,83],[12,16],[83,32],[271,86],[23,10],[148,27],[200,62],[75,16],[171,83],[82,47],[130,40],[172,24],[18,11],[47,-31],[40,-88],[87,-127],[72,-67],[30,-82],[51,-79],[19,-130],[53,-87],[120,-108],[56,-8],[103,-88],[100,-113],[58,-106],[83,-84],[29,-6],[65,-63],[115,-80],[86,-29],[23,8],[63,-19],[55,-31],[43,-46],[53,1],[80,-14],[25,-24],[66,-19],[86,0],[96,19],[54,-8],[16,33],[128,29],[-69,37],[17,50],[107,14],[139,-10],[63,-12],[84,-30],[67,-41],[117,-23],[29,9],[244,125],[55,12],[35,23],[-12,35],[-63,52],[-35,53],[12,50],[63,94],[21,15],[105,18],[212,-8],[34,4],[100,51],[92,67],[65,0],[178,-22],[91,32],[21,96],[47,55],[72,12],[52,-18],[46,3],[24,18],[-7,37],[-50,-40],[-87,18],[-68,-25],[-36,-33],[-98,-132],[-48,2],[-141,48],[-67,5],[-88,-26],[-100,-44],[-96,-8],[-35,-22],[-7,-42],[-40,-3],[-45,19],[-63,9],[-116,-10],[-99,-40],[-72,-83],[-22,-49],[-7,-50],[-65,-39],[-91,-13],[-88,54],[-156,54],[-53,-1],[-120,-59],[-186,5],[-232,67],[-267,115],[-50,39],[-90,53],[-112,57],[-156,66],[-181,63],[-55,23],[-93,54],[-64,53],[-39,52],[-142,209],[-21,67],[-19,140],[-16,51],[-85,112],[-115,59],[-127,100],[37,28],[-41,62],[-42,41],[-55,73],[-44,44],[-59,126],[-34,131],[21,24],[-29,41],[-41,-27],[-165,62],[-34,33],[-67,30],[-27,41],[-35,25],[-19,80],[4,68],[20,75],[68,127],[102,135],[73,87],[33,27],[69,79],[91,144],[49,50],[65,32],[99,112],[55,40],[15,25],[127,72],[33,43],[38,17],[50,45],[25,54],[-31,13],[-48,-43],[-30,29],[-17,58],[17,34],[61,-3],[57,-19],[81,34],[63,42],[14,50],[70,5],[23,64],[78,18],[41,-1],[61,-24],[64,40],[-17,53],[69,13],[10,38],[-16,39],[47,44],[52,64],[226,14],[78,-33],[62,-36],[14,-35],[36,83],[109,27],[26,37],[83,21],[103,13],[109,-2],[46,38],[293,73],[179,41],[193,38],[82,6],[220,36],[-43,9],[-76,-15],[-186,-22],[-418,-91],[-343,-73],[-118,-9],[-63,-13],[-180,-21],[-225,-19],[-115,-1],[-240,15],[-103,13],[-114,-3],[-53,4],[-125,30],[-143,-3],[-75,18],[-135,52],[-69,40],[-32,-11],[-93,72],[-12,41],[-65,37],[-2,50],[-29,116],[-7,55],[2,101],[18,32],[7,71],[-12,115],[12,64],[-4,97],[23,178],[29,73],[32,133],[1,120],[10,24],[-12,129],[-24,106],[-2,97],[22,31],[38,20],[133,34],[56,-6],[166,30],[34,-12],[19,-39],[-17,-24],[-4,-91],[13,-150],[44,-66],[77,-57],[162,-49],[56,-34],[19,-33],[-39,-18],[-51,-2],[-12,-35],[26,-62],[48,-17],[89,14],[51,-17],[23,-35],[42,-36],[74,-26],[73,27],[-12,23],[-71,-28],[-63,32],[-29,45],[-47,27],[-111,10],[-7,37],[62,47],[-4,32],[-68,67],[-136,78],[-70,68],[-26,55],[23,54],[-30,4],[17,50],[-35,38],[-6,108],[32,42],[98,25],[167,54],[311,70],[131,35],[57,-8],[62,-23],[13,-45],[38,-17],[141,0],[69,14],[7,17],[95,35],[28,21],[-21,43],[-52,2],[-56,25],[27,26],[29,-24],[23,20],[74,-11],[87,70],[20,37],[-120,20],[-40,42],[-11,49],[70,32],[10,36],[-15,42],[25,29],[82,44],[77,28],[69,-25],[129,-1],[6,100],[27,71],[-9,68],[12,59],[-18,34],[-108,88],[-16,70],[-33,-37],[23,-40],[83,-78],[27,-45],[-11,-38],[-54,2],[47,-92],[-6,-32],[-34,-35],[-36,-15],[-131,-5],[-51,-15],[-27,11],[-75,-10],[-34,19],[-28,-54],[7,-63],[-48,-47],[-17,38],[-34,-22],[-84,-7],[-57,16],[-7,81],[-61,71],[13,81],[34,27],[-17,42],[-51,-9],[-26,34],[-71,30],[-12,45],[137,72],[11,55],[-7,30],[69,2],[19,12],[47,112],[38,24],[12,33],[47,-3],[53,32],[10,43],[88,-1],[106,44],[65,-5],[95,19],[77,55],[80,18],[38,26],[-21,41],[-41,15],[2,40],[24,31],[52,24],[68,10],[58,40],[0,24],[37,36],[38,5],[8,32],[45,48],[-7,53],[-51,-11],[-44,48],[-12,48],[-46,2],[-16,-47],[-75,54],[-86,48],[8,48],[51,11],[12,40],[-83,18],[-58,67],[24,45],[-12,59],[-55,44],[-93,34],[-159,44],[6,79],[71,14],[128,46],[81,36],[23,21],[79,3],[50,58],[93,37],[40,52],[42,29],[45,58],[-3,61],[19,22],[6,57],[-25,2],[-50,-72],[-8,-67],[-45,-45],[-27,-54],[-50,-27],[-53,-13],[-112,-14],[-26,4],[-75,-71],[-108,-11],[-61,-13],[-143,-12],[-59,-17],[-59,-55],[-50,-5],[-60,-46],[-7,-100],[-23,-31],[-59,-17],[-13,-37],[-67,-22],[58,-23],[-21,-55],[-70,-11],[-48,-57],[-4,-26],[-42,-19],[-117,12],[-110,-20],[-58,14],[-38,26],[-45,-17],[-32,12],[-126,-2],[-90,15],[-49,22],[-60,-14],[-28,59],[6,60],[56,48],[-8,19],[-92,-11],[-35,29],[-19,42],[-102,63],[-57,44],[-14,38],[-55,24],[96,19],[23,28],[58,7],[24,51],[-41,40],[-36,12],[-11,50],[-118,113],[-76,-17],[-35,2],[-24,65],[53,40],[54,2],[48,34],[-24,34],[-23,-45],[-83,8],[-62,-94],[-7,-102],[38,-30],[36,11],[109,-39],[20,-25],[-65,-42],[2,-42],[-55,-49],[-52,12],[-34,-17],[-18,-54],[16,-51],[-36,-15],[-51,-50],[34,-101],[-14,-22],[-7,-76],[-97,-29],[-72,-49],[-16,-37],[-44,-35],[-16,-57],[-95,-103],[-58,-30],[-72,-102],[-78,-24],[-52,-29],[-14,-30],[-81,-41],[-14,-33],[-228,-115],[-67,-39],[-37,-35],[-45,-1],[-27,-23],[-57,54],[-91,43],[13,32],[-23,56],[-63,49],[-206,-61],[-53,-33],[-63,-10],[-43,45],[-85,58],[-29,52],[6,36],[-34,40],[9,66],[-8,82],[6,50],[42,82],[-1,59],[25,50],[-78,20],[-42,-29],[-23,48],[-43,31],[-15,31],[31,43],[82,18],[162,-3],[69,14],[61,44],[20,73],[-13,47],[19,73],[26,31],[-2,87],[42,2],[30,62],[2,27],[55,16],[18,43],[48,46],[-50,7],[-23,88],[-94,87],[-17,41],[-66,80],[-34,1],[-67,35],[39,27],[-17,38],[-54,-72],[4,-37],[68,-29],[9,-33],[-27,-115],[-26,-30],[-35,5],[-1,-41],[-54,-50],[-79,-33],[-93,-64],[51,-60],[-5,-32],[46,-12],[48,-52],[-47,-22],[-31,-51],[-60,-43],[-21,11],[-63,-22],[-63,-2],[-70,23],[-47,39],[-59,-8],[-34,-47],[-103,-26],[-157,4],[-83,28],[-68,60],[-201,212],[-138,131],[-144,125],[-148,101],[-96,99],[-10,36],[-125,119],[-38,47],[11,33],[-28,61],[52,32],[15,44],[-1,77],[-15,49],[-73,146],[-2,39],[19,65],[89,62],[20,45],[34,-9],[-20,-37],[11,-27],[-23,-34],[33,-26],[96,-13],[75,45],[-2,16],[-121,-21],[-18,33],[6,59],[-14,27],[-53,29],[22,52],[-65,-22],[-63,27],[-42,-8],[-17,-29],[-43,6],[-52,39],[13,46],[-51,-19],[11,-45],[85,-43],[89,-12],[25,7],[33,-51],[-130,-68],[-49,14],[-70,68],[-186,144],[-109,106],[-27,86],[-19,25],[-161,148],[-129,85],[-104,90],[-99,71],[-163,131],[-133,90],[-83,41],[-6,24],[-61,57],[-81,51],[-39,70],[-80,62],[-30,40],[-104,66],[-44,21],[-87,-10],[-28,9],[-75,112],[-64,29],[-24,22],[-39,72],[13,35],[130,28],[28,21],[94,25],[74,74],[33,99],[36,68],[79,28],[8,73],[59,47],[15,62],[26,16],[-16,34],[-8,68],[10,46],[-12,40],[45,24],[25,49],[52,47],[-11,39],[36,55],[-26,75],[10,34],[-57,121],[9,41],[-13,74],[-19,52],[58,-29],[107,91],[2,43],[79,50],[56,65],[95,49],[119,70],[70,69],[49,80],[42,102],[7,65],[60,-16],[48,38],[28,46],[54,36],[114,46],[72,38],[107,44],[94,75],[106,66],[66,77],[26,102],[5,86],[-20,62],[-42,82],[-8,42],[33,65],[42,48],[35,73],[24,22],[101,136],[59,99],[44,165],[31,28],[16,40],[66,30],[71,46],[88,85],[109,82],[78,21],[136,59],[42,-25],[48,-60],[114,-21],[68,1],[67,-11],[107,-34],[102,-56],[49,-9],[33,-22],[-43,-72],[16,-14],[53,70],[-1,45],[-41,54],[-2,86],[133,-12],[39,21],[67,8],[46,30],[16,39],[-14,33],[2,49],[60,20],[96,-25],[60,1],[-1,21],[-109,3],[-43,21],[-119,-33],[-89,-104],[-28,-5],[-203,70],[-106,26],[-102,55],[-18,36],[13,25],[54,46],[95,38],[76,81],[63,43],[40,8],[86,-3],[74,10],[156,9],[84,19],[84,44],[18,18],[83,0],[111,22],[95,-9],[161,-38],[40,-51],[39,-25],[85,-13],[130,-31],[7,-28],[46,-28],[59,-10],[24,-23],[80,-12],[101,7],[81,-13],[92,3],[52,14],[58,32],[238,51],[51,25],[48,56],[140,14],[-34,39],[-117,-13],[-53,-14],[-31,-28],[-77,-40],[-62,4],[-38,-24],[-78,-1],[-72,-54],[-45,-13],[-84,16],[-64,80],[24,29],[-52,64],[118,61],[110,11],[91,51],[41,-6],[65,40],[7,49],[90,21],[24,14],[50,63],[71,37],[122,-16],[3,21],[-74,13],[-24,48],[57,16],[56,74],[-4,41],[-27,47],[64,40],[23,38],[-16,24],[23,30],[34,-7],[48,43],[-4,46],[48,59],[-47,32],[-36,-6],[-76,81],[-35,0],[-65,21],[25,33],[77,29],[220,-8],[211,-24],[415,-32],[32,53],[74,9],[42,26],[47,12],[-39,49],[26,49],[63,21],[79,-6],[59,24],[79,59],[17,-18],[108,-1],[30,10],[43,70],[-7,29],[73,-12],[30,41],[-11,47],[72,-3],[56,51],[6,60],[70,4],[16,12],[100,6],[56,59],[54,37],[9,44],[76,-10],[50,33],[9,22],[-58,41],[0,20],[70,52],[62,2],[65,-23],[160,27],[71,28],[48,1],[29,39],[119,42],[98,49],[63,10],[77,24],[49,40],[56,15],[28,34],[83,16],[102,30],[111,15],[108,132],[28,26]],[[58626,38257],[91,-6],[120,-29],[116,-21],[-5,-13],[-125,-23],[-78,16],[-134,54],[15,22]],[[64357,36607],[-56,-34],[-66,-24],[-128,-29],[-61,-2],[-39,-15],[-21,29],[-133,-15],[-68,-34],[-20,31],[-50,39],[-139,-3],[-45,-11],[-26,-27],[-54,-175],[-23,-92],[-38,1],[-107,-41],[-43,-40],[43,-36],[-180,-78],[49,-42],[171,-102],[36,-43],[-95,-42],[-189,-70],[-15,-20],[-82,-44],[-25,38],[-48,-16],[-43,1],[-23,48],[-103,2],[-47,58],[-54,90],[-19,18],[-7,54],[-23,51],[-69,-12],[-154,19],[-7,74],[-19,32],[-34,11],[-15,44],[-50,-10],[-81,29],[-82,-4],[31,87],[22,21],[-22,58],[32,36],[2,53],[-27,49],[-46,50],[-22,58],[30,42],[-93,9],[78,85],[172,164],[74,61],[-77,80],[-33,-15],[-61,15],[-61,-21],[-119,-15],[-57,55],[11,26],[-80,95],[-40,26],[-41,-24],[-78,25],[22,37],[-18,18],[-38,-13],[-49,45],[-22,-13],[-67,37],[-15,-8],[-114,77],[-59,55],[-33,-12],[-19,29],[-59,-9],[-27,38],[-77,-21],[46,-137],[33,-51],[-39,-16],[12,-31],[-75,-6],[-15,-44],[-112,-98],[-123,-174],[-100,-6],[-20,-19],[-84,0],[-65,25],[-255,12],[-205,23],[-109,17],[-93,107],[-104,-42],[-57,-65],[-73,-44],[-85,-13],[-48,-21],[-13,-70],[-60,-2],[-35,-29],[-71,-6],[-73,6],[-57,-58],[-46,-26],[198,8],[180,26],[208,53],[119,1],[30,-20],[3,-33],[55,-65],[75,13],[63,-37],[-14,-30],[33,-46],[-7,-43],[18,-26],[-104,-29],[-61,-7],[-57,-17],[-117,-14],[-50,-15],[-84,-7],[-92,13],[-142,-10],[-126,-41],[33,-13],[44,-73],[-79,-112],[24,-52],[126,-33],[19,-17],[-118,-25],[-165,-28],[-53,-14],[-74,-4],[-170,-40],[-220,-30],[-1,-13],[-142,-14],[-185,-12],[-150,-5],[-139,6],[-163,12],[31,39],[-82,75],[23,42],[-18,62],[23,14],[-21,40],[40,6],[44,96],[-1,31],[-24,81],[37,60],[-338,11],[-174,-14],[-60,21],[-72,12],[-88,4],[-39,-20],[-123,27],[-162,25],[-85,5]],[[56795,36551],[17,73],[-43,64],[3,49],[34,40],[-7,69],[-69,77],[-10,95],[10,46],[31,28],[71,34],[47,43],[9,30],[-19,33],[-59,50],[19,55],[58,69],[63,21],[84,-14],[89,8],[66,36],[11,37],[-25,41],[-70,44],[-36,61],[-4,121],[36,44],[82,41],[48,37],[39,56],[60,135],[-1,76],[-23,41],[-56,56],[-21,42],[38,31],[209,52],[121,22],[189,60],[80,10],[131,26],[70,8],[56,-26],[102,-99],[79,-51],[34,-8],[93,-54],[89,-29],[52,-38],[122,-45],[59,-11],[252,-1],[142,25],[61,29],[66,51],[97,43],[57,39],[47,11],[280,-9],[361,12],[227,35],[110,12],[168,37],[33,3],[217,43],[194,10],[118,19],[105,-12],[71,-31],[66,-50],[85,-95],[147,-181],[81,-74],[119,-69],[71,-87],[65,-56],[79,-57],[32,7],[73,-45],[-14,-23],[266,-118],[101,-39],[123,-60],[94,-66],[52,-16],[76,-66],[19,1],[172,-107],[182,-89],[100,-8],[40,-33],[71,68],[110,-16],[168,-102],[145,-77],[77,-75],[72,-53],[77,-20],[18,33],[188,-222],[36,-22],[7,-29]],[[56247,46943],[-5,-4]],[[56200,35904],[-73,20],[-130,24],[-535,67],[-18,-48],[-126,6],[-103,-2],[-40,-8],[-156,-8],[-40,52],[81,45],[99,37],[17,15],[-351,273],[-177,-181],[-236,-92],[-47,-5],[-44,-30],[27,-37],[-22,-66],[-81,-84],[-7,-41],[-32,-52],[-10,-49],[28,-19],[-94,-31],[-74,-10],[-18,-65],[-81,0],[-8,-18],[-73,7],[17,41],[-21,17],[-94,-12],[-43,-17],[-124,-27],[-109,23],[-54,4],[-71,-12],[13,-41],[-42,2],[-37,25],[-117,-68],[-95,-128],[-78,15],[9,-55],[-8,-39],[-69,3],[-64,-47],[-23,3],[6,-83],[-21,-40],[25,-27],[0,-33],[-36,-24],[-108,-19],[-15,-56],[12,-23],[47,7],[15,-27],[5,-55],[-132,-14],[-102,34],[-5,-63],[25,-16],[31,-50],[41,-3],[112,21],[28,-54],[-67,-7],[-32,-22],[-108,-50],[-45,-42],[-112,-36],[6,-43],[-59,-3],[-120,-21],[-20,-41],[-28,-2],[-58,-75],[-2,-30],[-93,13],[-62,-14],[-117,45],[-68,-25],[-61,-44],[-46,10],[-64,-9],[-98,36],[-37,4],[-18,33],[-45,14],[-23,-13],[-56,3],[-33,21],[-84,24],[-20,57],[18,31],[38,3],[15,31],[-85,45],[-20,18],[-132,17],[9,-39],[-23,-30],[-79,-18],[-7,20],[-54,16],[-5,-23],[-95,-109],[-95,30],[-146,-4],[-8,-35],[-90,11],[-25,12],[-65,-3],[-93,15],[-21,42],[8,56],[33,62],[-28,15],[-157,34],[-46,26],[-51,-50],[-48,-24],[-127,31],[-73,-13],[-21,9],[-78,-57],[-91,-9],[-18,-22],[51,-22],[14,-44],[-144,-47],[-73,21],[-78,-5],[-84,-21],[-76,-8],[-14,17],[-84,-15],[-68,-39],[-85,-1],[-62,-22],[-11,-37],[-86,-15],[-52,20],[-99,-12],[-50,11],[53,48],[-58,44],[-18,-22],[-34,12],[-57,-20],[-73,-11],[16,50],[-60,49],[-55,-33],[-87,-70],[-24,69],[-77,45],[-102,-44],[-88,-19],[-45,44],[59,46],[-5,32],[52,31],[0,20],[53,27],[47,52],[-2,16],[107,-6],[101,24],[10,9],[-251,50],[-100,12],[-50,41],[-273,80],[-60,27],[21,94],[83,86],[-12,81],[-134,1],[-49,38],[-88,49],[-127,-6],[-105,39],[20,56],[-9,42],[-101,42],[-93,-2],[-66,-29],[-52,37],[-47,13],[-52,43],[1,71],[-37,32],[-11,35],[60,59],[-34,93],[6,64],[-13,34],[-43,8],[-73,-13],[-90,12],[-21,21],[-57,14],[-18,42],[-28,25],[-99,7],[-108,53],[-4,56],[17,15],[-1,53],[45,9],[7,39],[-12,50],[-27,15],[-114,16],[96,51],[-128,7],[-59,13],[-32,85],[-44,16],[-82,-29],[-65,-7],[-39,48],[-49,15],[-60,38],[-29,37],[-39,13],[-72,43],[-52,11],[-69,-12],[-43,-33],[-71,-23],[-43,42],[-37,8],[-75,-2]],[[56241,46938],[103,7],[47,-22],[74,-51],[38,-7],[6,-50],[53,-26],[74,-3],[34,-14],[41,-64],[-18,-42],[69,-35],[112,2],[41,25],[48,-4],[88,35],[73,-33],[19,-38],[33,-7],[82,-57],[37,8],[63,-13],[65,-65],[27,-4],[-19,-68],[59,-43],[143,-42],[149,-19],[143,-38],[158,-12],[170,-29],[90,-43],[112,-22],[86,-53],[71,-109],[166,-70],[70,-67],[71,-18],[48,-26],[-8,-57],[-91,-46],[-14,-31],[18,-85],[80,-88],[187,-86],[98,-9],[28,12],[130,-89],[69,-20],[29,-38],[56,-46],[55,-72],[31,-54],[48,-36],[39,-88],[-9,-35],[21,-25],[55,-10],[59,-61],[23,-54],[-18,-44],[94,-16],[27,-63],[36,-14],[-46,-56],[29,-59],[12,-93],[35,-35],[64,-18],[-27,-57],[29,-60],[76,-47],[50,-8],[60,26],[23,-4],[23,-45],[-21,-22],[-58,2],[-35,-21],[-20,-42],[10,-30],[82,-78],[71,-36],[49,-5],[12,-32],[75,-58],[-18,-41],[66,-50],[120,-36],[118,17],[46,-45],[103,-25],[91,-31],[23,-39],[137,-21],[128,-33],[90,-31],[-1,-29],[-59,-65],[-20,-79],[23,-78],[58,-84],[58,-54],[81,-53],[180,-93],[182,-67],[110,-22],[37,0],[172,-25],[54,-3],[193,-39],[139,-66],[86,-14],[112,-51],[76,-26],[135,-25],[29,-18],[52,11],[16,-26],[49,0],[112,-48],[68,-21],[9,-50],[54,-4],[-20,-49],[-129,-49],[-130,-33],[-80,-8],[-41,13],[-47,-10],[-188,7],[-64,-17],[-181,-30],[-84,-46],[-114,-104],[-26,-35],[-38,2],[-62,-28],[-78,-91],[-38,-55],[-42,-96],[-27,-158],[-6,-107],[28,-184],[81,-193],[222,-407],[76,-122],[30,-59],[98,-119],[33,-77],[32,-51],[-7,-30],[35,-52],[95,-108],[112,-105],[25,-50],[127,-121],[92,-82],[111,-87],[165,-148],[32,-33],[111,-94],[31,-34],[113,-95],[79,-77],[136,-116],[140,-107],[167,-142],[138,-110],[126,-89],[147,-123],[48,-71],[176,-135],[136,-110],[171,-126],[234,-209],[66,-82],[47,-74],[56,-135],[68,-94],[4,-29],[49,-112],[-4,-91],[-90,-96],[-109,-66],[-155,-113],[-44,21],[81,35],[63,40],[58,52],[60,38],[24,-1],[46,31],[62,74],[-2,68],[-50,55],[-59,27],[-97,73],[-38,3],[-157,86],[-105,33],[-155,55],[-148,32],[-233,33],[-64,17],[-50,1],[-140,-49],[-146,-16],[-318,-64],[-123,-32],[-70,-11],[-42,-30],[-248,18],[-160,24],[-87,20],[-101,42],[-28,23],[-83,41],[-222,141],[-150,115],[-60,31],[-48,48],[-122,75],[-87,37],[-57,34],[3,33],[-75,64],[-83,34],[7,18],[-80,40],[-25,-17],[-52,-1],[-60,89],[9,35],[-21,31],[-62,29],[-20,57],[-69,-24],[-78,33],[-134,40],[-140,21],[-100,7],[-23,-19],[-65,11],[-252,-38],[-348,-96],[-186,-44],[-116,-21],[-11,9],[-171,-25],[-174,-39],[-158,-28],[-156,30],[-102,4],[-133,-8],[-486,-73],[-101,-4],[-78,8],[-151,54],[-212,130],[-122,19],[-149,13],[-107,-16],[-194,-39],[-239,-36],[-49,-23],[-118,-119],[-87,-35],[-63,-5],[-137,26],[-170,9],[-157,-13],[-225,-76],[-96,-9],[-61,24],[-80,46],[-103,24],[-45,2],[-100,-18],[-53,-18],[-69,-42],[-62,-54],[-105,-68],[-56,0],[-49,43],[-36,48],[-4,54],[57,20],[94,18],[53,29],[26,74],[-16,77],[-71,74],[-94,12],[-44,-16],[-97,-65],[-149,43],[-8,-18],[102,-37],[117,-11],[54,5],[31,22],[-3,46],[37,17],[40,-18],[32,-36],[29,-85],[0,-51],[-31,-31],[-123,-28],[-71,-45],[-3,-35],[-190,-31],[-602,-149],[0,-5],[607,151],[169,21],[121,-107],[61,-10],[39,8],[89,52],[83,69],[97,47],[76,20],[60,0],[69,-15],[146,-68],[94,-14],[81,13],[206,73],[157,10],[110,-8],[147,-27],[64,-31],[-18,-27],[1,-76],[46,-68],[61,-34],[-2,-42],[-75,-168],[-36,-41],[-109,-56],[-29,-45],[-1,-144],[54,-69],[63,-34],[22,-42],[-28,-29],[-92,-24],[-102,14],[-55,-10],[-47,-34],[-48,-58],[-18,-63],[77,-66],[5,-20],[-35,-48],[-112,-65],[-22,-49],[-5,-47],[18,-69],[72,-72],[5,-63],[-40,-55],[7,-42],[42,-69],[-48,-150],[-95,-104],[-128,0],[-35,-28],[-1,-36],[-52,-32],[-17,-25],[45,-77],[-18,-22],[-72,-2],[-38,-16],[-17,-37],[14,-89],[-26,-30],[-107,-62]],[[66869,29509],[-13,-25]],[[66856,29484],[13,25]],[[66856,29483],[-52,-95],[-91,-63],[77,-13],[-89,-35],[-69,-81],[271,-117],[-65,-12],[-182,-68],[-143,-45],[-54,-31],[-102,-39],[-56,-36],[-152,-74],[-19,-35],[-86,-34],[-142,25]],[[65902,28730],[199,241],[34,36],[57,100],[62,126],[95,327],[124,29],[97,-18],[64,0],[73,-26],[52,-34],[57,-5],[40,-23]],[[65346,30288],[-26,-15],[-24,-82],[-89,3],[-23,45],[5,57],[157,-8]],[[64810,30520],[24,-48],[-7,-58],[-64,-16],[-50,-25],[-47,2],[-66,-32],[-89,13],[88,49],[172,110],[39,5]],[[65499,31292],[-1,-22],[-40,-31],[-14,-31],[-38,-24],[-75,-74],[-77,-88],[-44,-20],[-18,26],[-79,-68],[1,-43],[-98,-80],[-66,-114],[13,-34],[-94,-23],[-116,-4],[-58,5],[-112,27],[-88,42],[-59,11],[-138,116],[-6,-11],[118,-100],[75,-27],[91,-42],[159,-30],[152,-2],[-16,-34],[-36,-24],[-137,-69],[-77,-23],[-8,-42],[-68,-74],[-68,-43],[53,-21],[17,25],[58,-4],[64,32],[49,-3],[50,25],[26,-4],[109,14],[31,-29],[39,-5],[34,-24],[64,-22],[1,-21],[71,-13],[33,5],[24,-107],[102,-5],[55,94],[118,-29],[100,-38],[56,-9],[19,-30],[33,3],[206,-53],[56,-31],[22,-27],[0,-39],[43,-86],[34,-41],[37,-9],[54,-41],[27,-65],[80,-96],[70,-44],[23,-32],[-32,-149],[-66,-245],[-99,-189],[-244,-295]],[[65894,28734],[-11,16],[-177,-18],[-84,9],[-111,3],[-39,-9],[-94,-55],[-29,-2],[-57,-29],[-123,5],[-42,-18],[-56,-49],[-130,9],[-121,29],[-88,-56],[-71,-30],[-38,-44],[17,-166],[-9,-59],[34,-18],[12,-39],[-16,-51],[-265,-162],[-528,-34],[-8,39],[-82,17],[-192,76],[-43,5],[-16,-32],[-92,1],[-57,-15],[-75,-38],[-26,-1],[-118,55],[-108,-42],[-44,-32],[-156,-78],[-65,-21],[-16,-34],[-389,91],[-104,-81],[-61,30],[-33,54],[-62,72],[-65,-14],[-57,4],[-119,-34],[-87,-32],[-224,-90],[-78,49],[-88,69],[-13,27],[-77,20],[-27,23],[-50,-9],[-28,12],[-127,29],[-105,16],[-97,-16],[-60,6],[-13,-59],[-90,-51],[-29,0],[-74,-36],[-70,8],[-111,-24],[-24,-22],[-52,4],[-66,-21],[-66,-7],[-43,-37],[-57,-15],[-75,3],[-76,-15],[-74,22],[-39,-8],[-53,15],[-34,25],[-119,20],[-3,-50],[-60,9],[-86,-3],[-82,-12],[6,-36],[-104,2],[-83,-52],[58,-76],[30,3],[83,-22],[33,-24],[25,-44],[0,-58],[-27,-36],[-59,1],[-14,-117],[-44,-6],[-4,-33],[-28,-20],[-21,-64],[-69,-36],[52,-52],[71,-17],[65,-63],[178,23],[133,27],[227,37],[50,-10],[46,-27],[-3,-86],[83,-43],[-24,-42],[-68,4],[-30,-30],[32,-33],[11,-41],[41,-16],[79,-11],[-4,-37],[24,-65],[-34,-64],[-54,-11],[-32,-28],[-3,-27],[49,-32],[82,-6],[97,-32],[129,-80],[64,-3],[28,-16],[105,-30],[39,7],[21,-32],[-51,-33],[-24,-41],[20,-38],[-17,-19],[48,-51],[45,-25],[26,-46],[-8,-67],[60,-22],[-72,-69],[-40,-19],[-20,-41],[-80,-56],[4,-40],[-40,-28],[-32,-69],[38,-19],[6,-33],[-65,-12],[-71,-25],[-74,-41],[-54,-40],[-56,-16],[-30,-28],[-162,-39],[-32,-65],[41,-15],[-167,-73],[-41,-81],[-92,-50],[-87,25],[-19,-34],[-115,6],[-16,-30],[-149,17],[-19,-26],[-75,22],[-17,-17],[74,-55],[-38,-23],[-76,-65],[12,-51],[57,-26],[50,-38],[107,-53],[-60,-75],[155,-25],[26,-58],[7,-65],[-9,-31],[-87,-32],[-22,-17],[-56,27],[-52,3],[-195,-12],[-102,-22],[-1,-47],[-237,-215],[-14,-26],[79,-76],[-1,-37],[30,-72],[-81,-43],[17,-45],[-23,-43],[-30,-13],[-71,5],[-47,17],[-110,-47],[-59,47],[-77,82],[-16,-12],[-72,56],[18,20],[-166,60],[-82,-3],[-90,-16],[-69,-20],[-44,-48],[-85,23],[-70,-12],[-68,-29],[82,-258],[24,-40],[4,-52],[54,-60],[-113,-64],[-99,-108],[-30,-20],[-72,-104],[6,-27]],[[57500,23301],[-53,11],[-112,2],[-95,-10],[-76,-20],[-70,-45],[-29,-6],[-74,-56],[-103,-31],[-54,-60],[-42,-23],[-59,-9],[-49,-34],[-71,6],[-59,-12],[-26,48],[-83,-22],[-44,-2],[-23,-53],[-74,-92],[-44,-29],[-47,21],[-29,37],[-79,-1],[7,-42],[-23,-43],[-73,-50],[-155,2],[38,-111],[-39,-13],[-37,15],[-24,-21],[-131,-14],[-22,24],[-125,-15],[-30,4],[-116,-52],[-1,-52],[-50,-68],[127,-7],[44,-43],[-13,-33],[46,-22],[-33,-33],[107,-21],[19,-44],[93,-16],[29,-66],[64,-26],[22,-25],[-8,-47],[35,-30],[-3,-28],[-67,-55],[-57,-8],[-54,17],[-68,-6],[-53,-32],[21,-22],[2,-42],[71,-22],[4,-23],[-65,-54],[-83,16],[-41,-44],[-14,-44],[-43,-74],[-55,-18],[-62,33],[-91,-40],[-77,-63],[-58,38],[-26,48],[-100,64],[-58,69],[1,64],[-18,45],[-47,42],[-13,30],[-37,31],[-1,45],[-27,12],[-7,69],[-68,46],[-76,-22],[-56,-45],[-27,-39],[-56,18],[-77,-14],[-32,-16],[-68,12],[-44,23],[-27,-6],[-77,8],[-16,-13],[-126,12],[-62,21],[-155,-19],[123,-34],[34,-44],[-48,-28],[-73,32],[-100,-32],[-48,-32],[-91,30],[-60,-16],[-36,-30],[-49,8],[-56,-60],[-139,-15],[-28,-28],[-47,-8],[-27,13],[-73,-10],[-86,-31],[-9,-34],[-69,-81],[-54,-92],[-8,-42],[73,-22],[89,-7],[-14,-48],[-39,-53],[-59,-22],[-31,-76],[-96,-3],[-76,-39],[-51,-9],[-72,12],[-106,-101],[-57,-16],[-106,-2],[-73,-42],[-89,10],[-103,20],[-125,11],[-96,32],[-23,17],[-58,-12],[-135,-42],[-93,21],[-142,-4],[-29,69],[50,36],[-24,17],[43,86],[33,20],[-27,34],[16,55],[-63,72],[-8,50],[-81,10],[17,35],[-36,93],[-69,61],[-52,8],[-55,43],[55,61],[-17,31],[13,37],[40,-1],[37,51],[-53,9],[35,49],[30,2],[-5,47],[-172,-5],[-29,12],[-13,68],[40,22],[88,25],[82,-8],[47,19],[80,-8],[64,16],[45,26],[65,12],[138,-23],[79,1],[-8,33],[-41,48],[-70,48],[-169,84],[-48,55],[-90,67],[-71,60],[-16,31],[-91,51],[-49,76],[-44,22],[-6,25],[-136,127]],[[50862,23036],[-4,38],[37,47],[58,48],[46,-4],[20,53],[31,38],[42,-7],[83,20],[194,2],[1,38],[70,-4],[27,10],[89,-4],[75,18],[-24,78],[1,30],[-36,74],[-101,32],[-54,39],[-37,103],[-45,52],[92,-6],[85,-28],[8,56],[80,39],[36,29],[78,15],[61,-11],[54,13],[22,40],[83,48],[88,59],[-11,48],[-40,48],[-2,58],[-23,69],[-42,30],[-61,10],[48,77],[81,79],[34,1],[53,48],[30,44],[-60,18],[-161,30],[-57,3],[-51,16],[-55,1],[-97,35],[-36,24],[-44,5],[29,57],[44,32],[73,18],[21,19],[73,16],[79,39],[59,0],[72,32],[122,-1],[58,28],[67,7],[32,-13],[58,25],[74,1],[42,18],[3,43],[26,8],[-301,347],[6,7],[-228,263],[-163,171],[-22,-4],[-149,142],[-358,304],[-142,102],[-306,113],[-34,16],[-314,117],[-72,24],[-348,129],[-38,34],[-99,31],[-303,111],[-48,11],[-387,114],[-202,61],[-1,30],[-37,30],[15,38],[-123,92],[-51,-2],[-66,35],[-71,12],[-45,21],[37,52],[0,79],[28,42],[-63,36],[-6,27],[-57,8],[4,87],[19,19],[-64,28],[53,23],[97,20],[27,25],[63,15],[42,59],[-22,24],[26,30],[-49,24],[12,31],[-67,94],[-132,59],[-31,53],[-78,-13],[-25,12],[-51,55],[-51,22],[25,70],[-38,38],[-61,24],[-70,-38],[-114,40],[-55,-12],[-23,-20],[-131,49],[-19,-22],[-42,2],[-61,-20],[-59,16],[1,82],[-20,4],[-30,55],[36,19],[-9,58],[-82,23],[-44,-5],[-64,13],[-23,26],[-161,-6],[-73,15],[-32,27],[66,43],[-19,27],[27,23],[-5,34],[39,70],[-31,21],[41,34],[48,11],[40,42],[-13,48],[31,38],[35,18],[86,16],[-7,75],[51,41],[33,0],[55,-41],[83,-12],[103,68],[112,-69],[77,54],[68,-40],[31,33],[-43,17],[20,37],[76,14],[63,70],[21,-12],[68,27],[-20,27],[10,39],[-35,27],[-116,56],[-53,9],[32,64],[42,43],[53,21],[90,6],[-28,44],[-80,45],[-77,56],[-76,17],[-29,-3],[-51,47],[-80,33],[-62,5],[-57,30],[-34,-5],[-127,10],[-61,16],[-55,28],[-91,3],[-123,27],[-58,-13],[-60,35],[-72,1],[-58,-11],[17,-30],[-63,-3],[-42,-24],[-19,35],[-40,-4],[-43,23],[-37,-3],[-12,29],[-64,-17],[-8,46],[-30,-17],[-10,54],[-70,29],[-60,14],[-42,-6],[-54,13],[-30,45],[-31,-14],[-34,16],[-44,-40],[-44,7],[-19,32],[-70,23],[-28,-32],[-68,-23],[-25,18],[-93,0],[-47,41],[-46,21],[-21,68],[17,36],[-58,63],[-58,18],[5,62],[-44,-4],[-2,58],[-17,23],[-47,-11],[-11,27],[24,48],[-8,34],[48,47],[22,2],[76,56],[40,-7],[-1,46],[57,2],[10,33],[-56,61],[54,30],[16,85],[-27,50],[18,39],[49,34],[166,15],[37,12],[-15,32],[97,31],[62,13],[16,41],[28,17],[68,16],[66,-5],[32,36],[52,2],[-31,53],[-4,42],[41,60],[37,30],[-54,32],[10,38],[55,36],[-25,42],[-3,59],[-60,22],[-22,29],[-105,-10],[-21,49],[-39,20],[6,48],[85,47],[-75,20],[-29,90],[-54,78],[28,27],[-34,28],[9,27],[-18,46],[93,17],[11,39],[-39,32],[27,30],[-43,26],[0,38],[-58,13],[-16,21],[-55,26],[-10,30],[-38,42],[-39,14],[-20,80],[-82,22],[-24,41],[10,33],[36,16],[10,70],[38,16],[-33,70],[-60,35],[-109,84],[10,23],[-73,41],[-45,8],[-87,62],[-161,70],[-31,30],[-42,16],[-87,12],[-61,27],[-85,7],[-75,-17],[-47,15],[-40,31],[-76,3],[-75,53],[-88,35],[-95,-4],[-79,21],[-43,56],[-14,68],[-158,-93],[-92,-33]],[[56200,35904],[-33,-21],[-37,-50],[-48,-43],[-88,-16],[-24,-19],[45,-82],[-17,-61],[90,-64],[52,-26],[94,-30],[27,-25],[39,-81],[105,-65],[6,-55],[-54,-37],[-68,-8],[-12,-17],[82,-28],[23,-52],[-66,-25],[-47,-58],[-3,-54],[106,-26],[41,27],[34,-1],[71,-75],[59,-16],[-43,-62],[9,-39],[60,-30],[-42,-81],[-49,-31],[61,-58],[78,5],[-18,-101],[17,-59],[52,-43],[-29,-99],[-56,-18],[-19,12],[-6,46],[-30,15],[-38,-17],[1,-44],[-52,-43],[-72,-46],[8,-12],[107,74],[24,37],[-1,32],[34,9],[27,-65],[80,12],[39,97],[-57,59],[-14,41],[6,71],[30,40],[-40,10],[-62,-6],[-60,51],[44,19],[20,45],[33,29],[-15,27],[-55,27],[9,53],[40,21],[-14,27],[-57,15],[-74,78],[-40,6],[-38,-31],[-93,15],[-2,51],[49,63],[100,25],[6,21],[-94,69],[68,32],[15,20],[-8,52],[-33,33],[-79,47],[-33,64],[6,48],[-43,-7],[-96,28],[-129,86],[17,60],[-45,82],[110,29],[43,38],[48,58],[147,88],[16,25],[-13,93],[23,36],[100,8],[17,48],[-38,48],[18,33],[51,33],[19,56],[47,6],[66,-8],[35,8],[90,99],[35,95]],[[64357,36607],[17,-21],[38,7],[104,-20],[-7,-26],[43,-23],[30,29],[2,46],[136,-50],[147,-10],[21,-35],[78,-21],[29,41],[53,-15],[-21,-51],[-29,-3],[35,-103],[89,-60],[86,4],[14,10],[83,-10],[-39,42],[0,66],[207,-59],[-8,-58],[41,-36],[21,-50],[53,-4],[37,30],[-29,73],[72,-26],[196,-154],[-12,-34],[31,-50],[58,-124],[42,-47],[0,-79],[95,-26],[85,-111],[23,-5],[45,-43],[5,-43],[26,-24],[58,-16],[4,-49],[43,-22],[62,-6],[42,-25],[-5,-39],[35,1],[29,-52],[-64,12],[3,-29],[75,-43],[10,-48],[66,-90],[87,-151],[107,-162],[81,-114],[32,-23],[153,-270],[49,-57],[142,-139],[74,-86],[39,-58],[68,-134],[102,-165],[37,-84],[-11,-38],[11,-85],[72,-126],[76,-166],[5,-58],[-34,-158],[-31,-210],[5,-116],[-11,-22],[-14,-113],[22,-84],[-11,-67],[-32,-38],[-49,-15],[-41,-141],[-35,-29],[-22,38],[-108,12],[-148,-77],[-51,-19],[-53,-33],[-68,-28],[-13,-18],[-119,-53],[-54,-60],[-106,-64],[-72,-30],[-32,-30],[-102,-52],[-78,-12],[-42,-32],[-119,-49],[-155,-37],[-59,-45],[-67,-7],[-14,-31],[-56,-32],[-54,-12],[-16,-23],[-136,-73],[-62,-17],[-22,-41],[-137,-95],[-41,-7]],[[50862,23036],[-20,-31],[-1,-63],[-42,-3],[-53,-56],[25,-83],[-93,-40],[20,-31],[-14,-29],[-60,11],[-71,-12],[-12,19],[-56,-20],[-56,-38],[-75,-34],[-28,9],[-78,-94],[26,-22],[91,2],[70,13],[38,-8],[4,-48],[52,-14],[68,-83],[-9,-17],[-122,-22],[-29,6],[-33,-36],[-77,-19],[-21,32],[-92,45],[-59,44],[-13,38],[-76,30],[-81,45],[-49,6],[-204,-30],[-40,8],[-46,-30],[43,-47],[20,-107],[-204,-5],[-65,39],[-32,3],[-28,-77],[-46,-23],[-9,-36],[-43,-15],[-44,-40],[36,-51],[-28,-23],[-57,-9],[-27,-23],[1,-53],[46,-54],[-24,-85],[-22,-28],[-17,-61],[-34,-63],[-5,-38],[-27,-67],[-8,-52],[-103,-156],[-16,-91],[-21,-36],[-42,-6],[-108,38],[-40,-1],[-101,-44],[-27,-26],[70,-84],[-138,-39],[-51,-7],[-120,-33],[-197,39],[45,-43],[11,-43],[-22,-39],[-154,-90],[-96,65],[-17,29],[-61,51],[-134,80],[-226,96]],[[47524,21226],[-36,17],[-6,39],[41,42],[68,25],[36,36],[135,69],[-7,50],[40,52],[33,15],[69,52],[39,-8],[44,13],[26,57],[-67,28],[-25,23],[-55,-26],[-70,13],[-50,-26],[-114,2],[-8,-26],[-84,-4],[-23,43],[-62,-1],[-77,14],[-77,3],[-63,28],[2,24],[36,53],[12,50],[-24,12],[-72,2],[-55,51],[34,131],[-82,6],[-44,-67],[-99,29],[-65,38],[25,80],[-12,27],[13,43],[-48,67],[-68,-37],[-72,19],[-40,21],[-39,39],[-41,68],[-73,35],[-14,30],[-181,-56],[-60,-74],[-38,12],[-68,-39],[-42,-42],[-66,-99],[-30,-32],[-28,58],[-36,-43],[-93,-79],[-58,11],[-90,51],[-68,-70],[-22,20],[-134,-5],[-54,-39],[27,-46],[67,9],[36,-80],[-20,-49],[61,-11],[95,-58],[89,-28],[41,-4],[57,-70],[-15,-35],[44,-36],[-95,-67],[16,-55],[-12,-78],[-37,-24],[-55,15],[-66,1],[-127,60],[15,31],[-50,5],[-63,63],[-114,52],[-114,64],[-68,30],[-102,56],[-33,-24],[-55,-65],[-48,11],[-47,-67],[-82,23],[-76,-4],[-39,58],[-122,-16],[-205,-2],[-111,-93],[-34,31],[-91,-58],[-160,-69],[-56,-42],[-15,-30],[-74,-2],[-2,-50],[-111,-8],[-7,36],[-70,24],[-30,44],[-37,0],[-107,-24],[-103,-13],[-128,26],[-139,17],[-58,-6],[-60,-33],[-37,-36],[-49,-20],[-32,-56],[-41,-3],[2,45],[-72,7],[-45,20],[11,47],[45,34],[29,51],[29,81],[29,14],[72,5],[114,33],[23,32],[-28,58],[-79,11],[-74,31],[-78,-7],[-80,13],[-86,33],[-43,3],[-117,-34],[-66,-54],[2,-62],[29,-83],[7,-46],[-61,-28],[-47,-7],[36,-52],[120,-54],[66,-37],[20,-32],[-5,-47],[-63,-22],[-46,14],[-45,32],[0,-44],[-57,-43],[-53,10],[-80,40],[-72,-3],[-78,14],[-35,-26],[-37,14],[-72,-69],[-54,-19],[-44,-58],[-57,-57],[-56,-70],[-25,-16],[-73,12],[-49,-5],[-170,33],[-77,1],[-50,-10],[-71,-29],[-33,19],[-51,57],[-38,21],[-111,-9],[11,53],[3,79],[16,33],[-50,75],[10,40],[-47,32],[-69,10],[-42,-11],[-14,21],[-106,47],[31,43],[-16,23],[-243,-41],[-46,-21],[-71,-17],[-59,8],[-18,-31],[-4,-62],[-79,-76],[-102,-20],[-96,2],[-43,15],[-95,10],[9,88],[19,13],[1,54],[-24,23],[-116,12],[-84,-10],[-42,8],[-33,32],[-5,45],[-98,5],[-50,-13],[15,-26],[-72,-74],[-66,-20],[-4,-40],[43,-31],[18,-31],[79,-1],[66,-54],[-90,-35],[-26,-31],[-71,-19],[-16,-44],[-36,-8],[-16,-50],[14,-50],[27,-44],[-10,-28],[-56,-2],[15,-49],[73,-38],[41,24],[37,-17],[87,8],[92,-80],[-10,-17],[19,-82],[-43,-12],[19,-94],[47,-29],[63,-57],[67,-7],[6,-30],[46,-37],[-13,-22],[36,-113],[-52,-45],[-29,8],[-73,-14],[-90,-4],[-127,-80],[-45,9],[-43,-12],[-11,-43],[-61,-4],[-8,42],[-35,-22],[-53,46],[-51,-14],[-47,-51],[-46,-67],[-47,-86],[-90,-40],[-124,-6],[-61,26],[-63,1],[-53,14],[-64,-17],[-80,0],[-91,-27],[57,-55],[-26,-47],[-41,1],[-69,54],[-81,10],[-32,-15],[-50,-79],[-122,-35],[-39,-43],[-47,-1],[-55,40],[-6,-34],[-71,-49],[-38,-67],[-32,-18]],[[37677,19612],[-35,0],[-40,21],[3,33],[-25,22],[-61,19],[-106,7],[-58,15],[-36,-17],[-8,-30],[-64,8],[0,38],[-39,71],[-23,-13],[-55,22],[-18,-54],[-33,-12],[-59,16],[-24,37],[-11,45],[-62,-51],[-18,-37],[-39,13],[-76,-44],[-35,47],[-44,31],[-100,12],[-6,31],[-48,45],[-25,44],[-46,44],[-28,-2],[-65,37],[-3,29],[30,50],[76,63],[-102,36],[-61,6],[-163,59],[-42,53],[-86,23],[-39,61],[-33,15],[-119,-2],[-31,9],[-11,78],[-41,33],[-36,-19],[-84,6],[-22,-14],[-73,2],[2,27],[161,25],[-13,37],[-61,0],[-52,41],[-109,-9],[-54,63],[-73,13],[-58,-9],[13,-55],[-61,-28],[-110,-2],[-39,-37],[-47,-12],[-33,-24],[-41,-3],[-70,-34],[-67,10],[-16,-24],[-60,-28],[-71,-4],[-44,-33],[-80,6],[-70,-22],[-47,14],[-11,56],[11,32],[-34,65],[22,14],[-30,51],[-219,-42],[-35,6],[-57,30],[-22,57],[18,53],[-47,69],[-83,49],[-43,72],[-98,29],[-27,51],[-39,30],[-148,71],[-26,34],[-83,49],[-15,60],[-62,64],[-33,17],[-52,65],[-28,98],[-123,88],[65,64],[14,57],[47,65],[-62,62],[20,33],[-69,40],[-37,35],[-54,16],[-48,50],[-48,9],[-22,28],[-26,75],[-41,37],[65,90],[-23,54],[-16,90],[168,19],[12,24],[-32,66],[13,46],[-109,33],[-60,-1],[-46,27],[-90,-9],[-41,62],[71,37],[-18,43],[71,-1],[135,14],[86,27],[130,24],[104,41],[108,74],[-20,43],[-97,29],[-102,-78],[-35,-1],[-38,23],[-104,16],[-103,44],[8,36],[89,31],[2,35],[56,28],[55,9],[47,32],[-5,37],[16,55],[-7,50],[-37,47],[0,28],[61,17],[57,27],[46,36],[64,29],[0,60],[51,38],[17,63],[-36,50],[63,26],[90,-7],[41,19],[105,13],[12,48],[-44,45],[17,45],[68,5],[17,25],[135,32],[66,22],[115,28],[68,-1],[26,-27],[70,-10],[43,18],[62,1],[11,-26],[119,22],[18,22],[-12,39],[94,22],[-93,41],[-19,-6],[-259,-10],[-44,21],[-62,6],[-84,19],[23,57],[-26,49],[64,27],[18,70],[25,22],[7,47],[-31,67],[28,105],[38,27],[66,2],[45,-12],[45,33],[94,25],[53,2],[0,29],[52,35],[9,33],[44,51],[17,49],[-65,4],[-23,18],[-71,0],[-21,27],[-58,-2],[-69,-28],[-81,-4],[-48,12],[-52,-9],[-24,-19],[-44,5],[-116,-31],[-47,3],[-146,-25],[-109,34],[-52,-1],[-80,25],[-1,32],[-89,41],[-86,19],[-93,34],[-70,58],[-17,-7],[-31,58],[-67,36],[-96,3],[-59,30],[-19,29],[-132,35],[-79,12],[-53,-4],[-76,61],[28,43],[-124,59],[-13,25],[-59,29],[-75,23],[-53,29],[-30,-1],[-44,24],[-127,21],[-78,23],[-27,55],[-34,24],[-51,13],[10,79],[-51,29],[-3,36],[17,63],[31,26],[73,34],[47,37],[24,47],[215,108],[138,-26],[231,114],[92,22],[79,43],[121,4],[105,27],[43,35],[54,10],[96,5],[135,-13],[92,9],[200,6],[94,-9],[60,15],[112,7],[-43,25],[13,60],[-45,35],[59,62],[-16,42],[121,-5],[72,-11],[25,-20],[91,24],[6,16],[-42,54],[34,90],[17,19],[22,77],[31,32],[-40,32],[-7,45],[18,48],[-89,101],[-79,16],[-220,-37],[-75,-37],[-60,-74],[-71,-21],[-35,-33],[-45,15],[-63,-28],[-94,-21],[-66,-6],[-66,-64],[33,-21],[71,-13],[28,-24],[-47,-46],[-125,-19],[-108,-34],[-138,-14],[-44,6],[-46,-14],[-34,14],[-23,55],[71,28],[131,17],[55,30],[-57,101],[-102,146],[-41,20],[-62,57],[-9,91],[26,32],[121,15],[66,-12],[75,39],[43,46],[34,0],[29,31],[51,0],[48,17],[0,36],[-36,66],[103,57],[-7,30],[37,48],[75,27],[-2,26],[45,18],[80,2],[-98,68],[-98,22],[-23,15],[118,46],[82,-4],[35,21],[71,-1],[-11,38],[36,64],[-1,55],[57,44],[-1,46],[-26,34],[31,39],[-1,74],[-43,45],[56,14],[54,-2],[39,41],[0,33],[27,28],[35,8],[34,32],[8,39],[-36,59],[50,52],[87,-11],[32,15],[79,-18],[36,15],[120,11],[27,29],[46,8],[22,-49],[-27,-63],[107,-11],[63,21],[-11,82],[-45,11],[1,34],[-42,57],[-28,9],[-79,-21],[-95,1],[-56,24],[46,77],[-57,1],[-121,65],[-56,-23],[-50,49],[59,12],[37,43],[2,31],[-25,28],[-56,31],[-33,-30],[-129,17],[-12,28],[-35,12],[-80,-29],[-25,50],[-78,14],[-10,-24],[-52,-16],[-27,41],[-28,4],[-20,-40],[-26,-6],[-53,19],[16,23],[-27,36],[-82,1],[10,24],[-39,69],[60,35],[-9,53],[-44,4],[-67,-46],[-84,16],[-12,-33],[-49,-39],[-61,-22],[-6,36],[-124,4],[-103,23],[-42,-10],[-15,29],[-111,17],[-29,29],[29,35],[43,26],[3,46],[-51,-3],[-25,-32],[-30,6],[-40,40],[29,39],[-24,72],[65,63],[32,44],[40,32],[-23,38],[52,57],[-101,54],[56,51],[82,26],[53,44],[79,17],[67,53],[-14,22],[-53,5],[-54,38],[-20,-2],[-106,54],[41,24],[13,35],[108,15],[-113,40],[28,28],[72,19],[108,-5],[48,11],[66,-9],[-16,51],[41,67],[-1,51],[33,69],[99,96],[38,23],[102,-18],[13,-19],[79,-11],[63,13],[63,-4],[24,27],[51,-11],[42,13],[42,-14],[24,13],[48,-13],[94,35],[3,24],[46,22],[64,100],[31,27],[38,0],[33,73],[64,20],[97,1],[34,17],[84,-6],[25,60],[47,38],[63,-48],[-43,-37],[55,-22],[75,-71],[112,-52],[136,-42],[36,-22],[40,23],[86,17],[106,-15],[53,23],[46,59],[80,2],[66,-38],[289,-30],[57,12],[59,-27],[47,-100],[145,-94],[28,-37],[82,-42],[0,-53],[58,-30],[52,-67],[15,-44],[62,18],[11,39],[115,75],[264,159],[107,-2],[161,8],[26,48],[-11,43],[14,62],[-23,131],[37,29],[-32,28],[7,55],[-14,20],[-48,8],[-24,24],[46,49],[-14,21],[55,48],[-2,15]],[[70040,16724],[102,-9],[6,-23],[-108,32]],[[70637,16741],[-32,-32],[-25,5],[-112,-26],[-20,-16],[-74,6],[-21,29],[73,8],[51,18],[63,-9],[97,17]],[[69643,16825],[81,-36],[32,-27],[62,-23],[16,25],[119,-31],[26,-24],[69,5],[148,-33],[20,-34],[48,-17],[109,-18],[28,5],[29,-59],[1,-43],[-80,-21],[-74,-5],[-202,-29],[-20,22],[-69,-39],[-75,-14],[-197,27],[-69,79],[-69,23],[-110,-24],[-28,16],[-74,98],[42,25],[36,1],[75,-20],[96,42],[7,98],[23,31]],[[72520,17051],[5,-29],[34,-18],[25,-44],[-89,-7],[-62,59],[37,62],[33,20],[17,-43]],[[72528,17254],[28,-51],[-71,-87],[-6,-24],[-63,-48],[-40,3],[-37,38],[-2,35],[-62,22],[-13,65],[41,45],[61,40],[45,15],[73,4],[63,-11],[-17,-46]],[[72823,17428],[16,-52],[-37,6],[21,46]],[[73636,17557],[73,-10],[56,2],[-47,-67],[-102,-91],[-130,-98],[-121,-78],[-321,-167],[-145,-58],[-9,-16],[-72,-39],[-72,-19],[-163,51],[-14,36],[-30,17],[-5,56],[-25,33],[35,45],[38,17],[7,28],[-27,45],[7,50],[99,-15],[105,-3],[77,27],[43,66],[0,45],[24,74],[85,24],[78,-5],[104,-19],[42,15],[46,-5],[61,18],[77,8],[64,-8],[95,34],[67,7]],[[71879,18619],[5,-13],[146,-17],[-24,-36],[-102,-15],[-154,39],[-6,41],[74,-5],[61,6]],[[71411,18649],[53,-40],[14,-64],[-35,-23],[-93,22],[-50,-12],[58,105],[53,12]],[[72561,19085],[88,-20],[-37,-29],[-30,12],[-21,37]],[[74499,19212],[37,-68],[-26,-10],[-21,63],[10,15]],[[73304,19325],[-24,-33],[-93,-55],[-4,22],[34,38],[53,31],[34,-3]],[[73734,19668],[50,-9],[29,-30],[8,-58],[-120,31],[33,66]],[[76746,20081],[81,-7],[30,-47],[-28,-15],[-54,30],[-29,39]],[[76428,20154],[-2,-37],[-46,-47],[-40,12],[28,50],[53,-9],[7,31]],[[76810,20153],[8,-72],[-44,11],[6,47],[30,14]],[[76747,20189],[37,-19],[-41,-52],[-60,2],[-33,-41],[-52,-30],[-37,4],[-51,43],[-46,9],[-12,39],[66,29],[37,-13],[73,4],[119,25]],[[76544,20285],[4,-20],[60,-48],[-91,2],[-29,32],[33,37],[23,-3]],[[76488,20375],[57,-32],[18,-27],[67,-10],[18,-42],[-21,-34],[-30,4],[-58,54],[-59,18],[-17,48],[25,21]],[[76499,20390],[109,-33],[17,-37],[-49,-1],[-77,71]],[[76755,20519],[-20,-45],[-49,42],[69,3]],[[79453,22156],[82,-18],[14,-22],[-137,-50],[-82,-38],[-7,19],[56,41],[47,61],[27,7]],[[80632,27229],[44,-96],[-22,-24],[-89,-7],[-55,-40],[12,-73],[-13,-29],[-90,-76],[-41,-15],[-97,-8],[-25,-23],[-22,-55],[26,-23],[51,-9],[59,6],[24,-34],[-48,-25],[-335,193],[19,39],[74,-1],[44,54],[52,41],[56,11],[2,54],[67,8],[55,-14],[59,19],[41,55],[76,16],[23,54],[53,2]],[[66869,29509],[-13,-25]],[[72783,30986],[-24,-20],[-46,13],[5,32],[65,-25]],[[73669,30991],[102,-22],[-10,-15],[-118,-12],[26,49]],[[71641,31054],[-15,-46],[-39,28],[54,18]],[[73391,31020],[98,-39],[57,-7],[7,-21],[-41,-26],[-39,-2],[-18,25],[-38,-1],[-74,32],[-5,27],[53,12]],[[72874,31029],[63,-13],[-32,-50],[-68,-6],[-18,30],[26,44],[29,-5]],[[73211,31016],[48,-4],[2,-32],[-47,-10],[-100,-8],[-19,31],[116,23]],[[73994,31012],[29,-41],[-54,-16],[25,57]],[[74246,31007],[56,1],[38,-22],[-30,-49],[-50,4],[-9,-29],[-51,25],[-25,-6],[-101,32],[-3,42],[71,-14],[36,13],[68,3]],[[73123,31060],[64,-11],[12,-28],[-113,-33],[-42,-47],[-51,6],[0,27],[-58,22],[3,29],[41,4],[38,-28],[62,18],[44,41]],[[71433,31127],[-89,-46],[-39,19],[-63,-7],[-7,27],[51,8],[28,-10],[119,9]],[[72964,31109],[45,-56],[45,8],[-7,-46],[-31,-13],[-39,29],[-58,12],[-168,6],[52,23],[35,61],[42,10],[84,-34]],[[76349,20048],[45,1],[31,20],[39,-14],[20,-88],[-23,-31],[56,-7],[35,39],[63,-24],[51,0],[16,-32],[37,20],[-9,27],[69,31],[92,-25],[-41,-58],[39,-8],[48,73],[-56,121],[93,19],[14,15]],[[76968,20127],[-52,25],[-29,-27],[-71,54],[12,32],[133,-68],[126,-50],[10,-28],[-16,-79],[-137,-118],[-104,-102],[-24,-1],[-53,-53],[-50,-31],[-107,-92],[-60,-41],[-163,-84],[-32,-29],[-136,-54],[-214,-61],[-173,-59],[-287,-126],[-21,-23],[-112,-10],[-64,-27],[-136,-5],[-158,1],[-47,6],[-175,-26],[-100,-5],[-90,8],[-48,31],[4,29],[-50,29],[-9,30],[56,20],[-24,42],[-84,75],[-79,23],[-45,29],[33,21],[74,-27],[47,1],[78,23],[52,-16],[46,41],[28,47],[-30,6],[-73,-13]],[[74614,19445],[-68,-36],[-108,-12],[-50,18],[-77,-15],[-64,35],[-106,79],[-26,3],[-94,111],[35,108],[-52,41],[-25,50],[-94,26],[-63,25]],[[73822,19878],[30,-34],[70,-20],[28,-24],[9,-82],[-39,-53],[11,-44],[67,-80],[-58,-4],[-101,40],[-24,98],[-108,-10],[-13,-80],[153,-40],[51,-22],[59,-40],[57,-18],[21,-41],[-68,13],[-43,31],[-47,11],[-253,-26],[-105,-37],[-32,-46],[-65,9],[-63,-36],[39,-37],[49,45],[32,0],[37,35],[93,33],[145,10],[75,10],[43,-4],[88,-38],[63,-11],[68,3],[59,-11],[72,-50],[-41,-46],[-109,-52],[-188,-58],[-80,-14],[-163,-59],[-99,-12],[-158,-5],[-133,10],[-46,-4],[-40,47],[31,72],[64,48],[55,22],[68,-10],[-1,49],[-68,50],[-43,-3],[-9,-26],[-54,-29],[-75,-76],[-37,-86],[-31,-2],[-90,44],[-8,27],[-85,9],[-34,-32],[-80,21],[-63,-10],[-49,11],[-29,-28],[1,-35],[52,28],[79,12],[136,-41],[59,-5],[59,-44],[34,-41],[-29,-71],[-109,28],[-23,17],[-98,4],[-5,43],[-27,20],[-97,-24],[-42,12],[-60,-6],[-40,-40],[74,1],[79,-60],[33,-61],[24,24],[67,29],[74,-13],[91,-34],[4,-18],[-78,-47],[-72,-33],[-18,-20],[-136,-57],[-49,5],[-14,-21],[-280,-1],[-78,25],[-85,13],[-56,23],[-30,-80],[-100,26],[-29,37],[-38,-11],[-17,-31],[-55,19],[-15,-20],[-52,-14],[-75,-48],[-58,-16],[-56,21],[-33,-35],[-52,16],[-90,51],[-60,4],[-52,-67],[-25,-51],[-44,27],[-84,19],[-86,37],[22,-45],[31,-19],[53,-2],[4,-38],[61,-18],[97,-56],[45,9],[43,-19],[78,-17],[91,-2],[75,-28],[82,4],[59,-11],[30,-22],[-35,-29],[-67,-31],[3,-58],[-53,-2],[-33,-27],[-68,17],[0,-67],[79,36],[50,-21],[82,51],[-2,63],[78,28],[61,-13],[11,16],[83,47],[65,-4],[31,29],[4,68],[25,15],[68,3],[41,-11],[138,34],[47,-9],[94,-51],[166,14],[103,24],[132,65],[22,3],[102,95],[36,19],[10,43],[87,35],[195,25],[31,11],[81,-19],[87,-43],[13,-24],[72,-72],[8,-89],[-22,-73],[-33,-57],[13,-34],[-39,-70],[12,-56],[52,-58],[9,-79],[-22,-29],[-32,-78],[1,-63],[-39,-75],[1,-32],[-29,-31],[-7,-50],[23,-49],[-1,-42],[-25,-34],[-80,-38],[-150,-47],[-73,-18],[-100,5],[-32,10],[-137,-5],[-178,-22],[-217,22],[-44,-9],[-104,6],[-67,22],[-109,14],[-80,-15],[-75,17],[-63,39],[-36,34],[-89,45],[-94,39],[-127,11],[-71,-25],[-109,18],[-45,-9],[-95,9],[-53,-23],[-21,-37],[-81,-2],[-56,24],[-39,-22],[-37,8],[-97,-12],[-54,27],[-28,-14],[-58,11],[-39,-18],[-140,9],[-128,22],[40,-37],[19,16],[49,-13],[-30,-34],[-145,-1],[-88,-10],[-10,-17],[203,9],[69,-17],[36,-65],[35,0],[-11,50],[76,24],[34,31],[82,-3],[187,7],[188,-9],[110,12],[76,0],[72,-44],[187,12],[44,16],[44,33],[34,4],[111,-43],[91,-92],[83,-3],[72,-13],[105,-1],[68,-36],[88,-26],[81,-7],[78,7],[42,-15],[118,-20],[-18,-22],[-48,19],[-2,-39],[69,-1],[-6,-65],[-45,-42],[-45,-5],[-66,11],[-212,14],[-98,-49],[-68,-49],[-74,-27],[-126,15],[-56,-30],[-52,-13],[-39,8],[-126,-39],[-118,11],[-54,-38],[76,-3],[51,13],[85,-2],[44,20],[141,16],[62,26],[102,-13],[105,26],[22,-74],[56,-17],[35,-89],[36,-48],[82,-13],[8,-26],[114,6],[93,-34],[5,-27],[-68,-45],[-53,-13],[-52,-29],[-46,-11],[-123,-50],[-170,-93],[-124,-79],[-53,-6],[-250,71],[-130,15],[-125,2],[-111,24],[-177,6],[-99,18],[-124,9],[-98,24],[-117,5],[-158,24],[-66,-19],[-85,-6],[-66,-26],[-128,-8],[-93,19],[-184,26],[-23,-4],[-119,21],[-72,33],[-86,13],[-59,17],[-27,-126],[-91,-41],[-108,18],[-57,-28],[22,-67],[-3,-38],[30,-33],[105,-21],[68,3],[23,-18],[-99,-41],[-88,-6],[-24,20],[-117,-46],[-211,-26],[-2,6],[-186,-21],[-9,27],[-72,32],[-76,-21],[-86,-3],[-32,-15],[45,-51],[-39,-53],[-21,-65],[4,-34],[-57,-209],[-53,-25],[-137,-37],[-117,-21],[-99,-9],[-133,-1],[-27,-8],[-187,-8],[-181,12],[-23,35],[-39,9],[-24,51],[15,23],[-84,75],[-99,25],[-69,3],[-108,-22],[-59,-24],[-104,-84],[-26,14],[-234,77],[-84,23],[-166,97],[-33,30],[-165,47]],[[66288,16253],[24,48],[24,16],[89,7],[56,21],[-34,72],[68,1],[85,13],[-8,57],[-39,56],[57,51],[80,44],[29,-109],[99,0],[17,71],[0,72],[324,31],[29,35],[217,17],[92,3],[23,17],[-59,61],[-28,45],[-63,21],[-36,26],[-23,80],[-227,-15],[-36,72],[-47,73],[-99,90],[-28,75],[6,43],[-151,17],[33,52],[65,18],[-118,91],[-154,67],[-133,76],[-20,-16],[-185,-49],[-88,5],[-50,-6],[-73,7],[-136,-44],[-133,19],[-198,3],[-66,-22],[-50,-39],[-49,-21],[-26,15],[-71,-29],[-94,-13],[-21,27],[-58,-18],[3,-74],[-54,-17],[-27,19],[-53,7],[-64,-24],[-98,22],[-141,67],[-52,33],[-29,-12],[-80,65],[-82,53],[-7,33],[18,38],[-26,31],[-4,34],[-53,-8],[-75,12],[-88,3],[-93,18],[-41,26],[5,68],[29,72],[-26,37],[12,128],[-8,42],[-87,3],[-86,11],[-153,8],[-55,12],[-74,-13],[-97,9],[-127,50],[-49,11],[-109,1],[-110,18],[-164,-33],[-132,1],[-140,-32],[-141,26],[-1,-57],[-89,-93],[-25,1],[-70,-45],[-58,-8],[-33,-40],[-56,16],[-32,47],[-34,-1],[-47,-35],[1,-37],[-119,-22],[-62,-31],[-29,24],[-78,-12],[-112,-35],[-37,-73],[-57,-62],[-60,30],[-49,-24],[-47,-3],[-13,-28],[-202,-36],[-100,7],[-123,41],[-27,-21],[-71,-17],[-60,-29],[-58,-43],[-16,12],[-93,-38],[-105,-16],[-58,-40],[-103,-31],[-101,-24],[-68,-6],[-68,-18],[-115,4],[-56,26],[-99,6],[-118,29],[-72,-3],[-34,-43],[-82,-30],[-121,45],[-75,51],[-112,49],[-36,40],[-55,9],[-32,-30],[26,-20],[-17,-56],[39,-24],[-35,-76],[26,-87],[-43,-27]],[[59175,17348],[-172,6],[-28,15],[-57,120],[-38,34],[-19,83],[-25,44],[-11,59],[-37,22],[19,49],[65,62],[-58,33],[4,80],[37,26],[84,-51],[32,102],[63,-26],[22,31],[74,45],[-28,49],[-30,18],[-107,0],[-27,23],[-68,-14],[-37,10],[-48,-14],[-67,1],[-29,45],[21,43],[37,36],[-10,44],[-25,14],[-8,46],[-47,8],[-107,77],[20,64],[53,37],[54,12],[-27,54],[30,22],[-82,35],[-9,32],[-42,-16],[-3,39],[-91,-37],[-34,19],[-79,90],[-23,53],[-145,-7],[-82,-19],[-38,-21],[-9,35],[-94,35],[-53,2],[-25,-15],[-127,10],[-49,45],[-38,8],[-69,41],[-94,22],[-73,56],[-14,46],[12,26],[-29,36],[-24,60],[-87,42],[62,15],[14,34],[-99,86],[-86,91],[-82,56],[-25,-22],[-74,-22],[-44,17],[-54,40],[-25,47],[-63,45],[-1,30],[-69,36],[-9,45],[94,3],[34,52],[55,28],[48,-4],[1,43],[67,32],[52,3],[35,-34],[54,31],[53,6],[41,-11],[55,-78],[-86,-81],[52,2],[70,-58],[48,-94],[60,-64],[52,-39],[161,-5],[33,-17],[34,22],[100,28],[15,14],[73,-41],[101,-9],[36,-30],[55,4],[88,19],[60,-62],[98,-12],[75,93],[-9,26],[81,10],[47,39],[17,64],[36,9],[35,-43],[46,13],[54,-35],[60,69],[-106,45],[-28,37],[-63,55],[-47,5],[-94,94],[22,31],[-43,28],[-38,51],[-96,45],[-221,51],[-36,20],[-75,79],[-83,-34],[-89,5],[-175,53],[-47,27],[0,37],[-77,23],[-60,52],[-95,-15],[-95,-1],[-100,89],[96,115],[38,86],[52,61],[20,-2],[-7,76],[96,34],[30,26],[-34,36],[15,39],[41,-17],[54,11],[26,42],[42,8],[31,97],[65,19],[-34,40],[-71,58],[7,62],[-51,26],[13,22],[-24,67],[23,3],[31,54],[69,49],[59,6],[-16,28],[-40,11],[61,111],[8,44],[-9,70],[-259,114],[146,108],[10,22],[51,41],[67,19],[30,40],[22,54],[106,74],[24,-8],[48,19],[21,26],[107,39],[18,70],[73,26],[-52,33],[87,55],[2,18],[-48,33],[9,36],[-20,65],[-83,82],[-121,-8],[-78,22],[-30,21],[-45,6],[-18,58],[4,37],[-48,53],[101,21],[11,46],[-17,46],[-36,40],[37,37],[30,7],[-11,62],[19,29],[-121,18],[4,33],[-41,21],[-78,12],[-64,-2],[-86,29],[-21,23]],[[65894,28734],[-14,-22],[-29,-118],[-112,-166],[-20,-226],[-18,-88],[54,-57],[9,-53],[-55,-13],[-15,-28],[-208,-187],[-70,-39],[-188,-64],[-116,-53],[-276,-153],[-41,-49],[-219,-43],[-523,-80],[-685,-107],[-1,-3],[688,107],[526,81],[219,44],[30,43],[100,57],[212,114],[94,42],[173,58],[76,41],[210,187],[4,24],[64,18],[13,25],[-17,33],[-47,48],[33,254],[5,70],[92,131],[24,45],[22,101],[14,22]],[[66856,29483],[75,36],[43,-4],[79,28],[36,-12],[53,5],[319,0],[70,-14],[34,-20],[64,-10],[73,-47],[15,-30],[69,-74],[81,-106],[193,-291],[40,-129],[-71,-64],[-276,-196],[-29,-34],[-15,-46],[15,-63],[73,-78],[59,-24],[38,-38],[4,-59],[-79,-116],[-40,-82],[59,-121],[-6,-80],[23,-32],[-7,-110],[-22,-37],[8,-32],[-30,-38],[19,-107],[-28,-28],[-31,-57],[-51,-45],[-87,-40],[-43,-44],[0,-62],[-798,-714],[-1201,-902],[138,100],[1065,801],[798,709],[19,14],[-7,66],[76,53],[47,15],[69,69],[46,69],[-18,56],[1,57],[27,27],[-8,34],[22,38],[10,82],[-26,54],[5,88],[-55,119],[38,79],[65,93],[18,39],[-11,53],[-43,38],[-58,24],[-61,75],[-15,74],[42,59],[314,220],[45,55],[-31,99],[-27,47],[-180,284],[-112,148],[-21,55],[112,75],[19,-4],[99,49],[164,94],[57,46],[113,36],[51,60],[85,35],[55,33],[90,15],[29,-9],[13,49],[-2,58],[-26,35],[29,77],[69,88],[75,79],[109,163],[29,80],[19,75],[30,72],[59,73],[45,89],[73,55],[113,53],[56,33],[-2,27],[49,42],[155,56],[131,15],[168,5],[51,-8],[1,-42],[28,-46],[90,29],[18,21],[65,-8],[-15,64],[146,-25],[153,-19],[18,-22],[-43,-33],[104,9],[-30,57],[116,7],[284,42],[89,-12],[37,-35],[-63,-38],[-52,8],[-3,-39],[80,25],[86,-18],[0,41],[81,27],[51,44],[98,-22],[21,-36],[129,-15],[126,12],[41,17],[131,2],[6,-24],[-41,-32],[-42,-6],[-52,11],[-17,-52],[134,5],[65,45],[46,-1],[-38,53],[14,34],[190,13],[119,-17],[189,-13],[200,19],[202,-6],[7,-35],[45,-18],[-1,-133],[45,-21],[209,3],[22,17],[97,4],[62,-24],[-7,36],[68,0],[105,27],[79,-9],[104,-51],[57,6],[38,50],[66,6],[10,-45],[81,8],[40,-27],[63,25],[44,-2],[12,25],[48,7],[68,-18],[31,-23],[142,-21],[42,15],[41,-20],[29,29],[53,-34],[7,72],[18,25],[69,19],[-70,35],[-80,9],[-115,-4],[-105,7],[-53,-12],[-20,14],[-123,11],[-74,-12],[5,50],[126,35],[213,-26],[224,-46],[372,-85],[304,-58],[72,-18],[318,-57],[158,-20],[464,-30],[156,-2],[156,-8],[122,-18],[218,-18],[22,-8],[156,-23],[139,-30],[154,-23],[144,-40],[85,-34],[216,-59],[191,-105],[235,-81],[207,-76],[74,-32],[227,-111],[135,-93],[238,-140],[148,-73],[53,-31],[197,-87],[170,-92],[112,-75],[71,-28],[149,-68],[132,-67],[65,-21],[83,-58],[212,-120],[23,-8],[173,-113],[77,-42],[187,-128],[215,-167],[64,-67],[105,-82],[70,-162],[2,-30],[51,-95],[73,-102],[61,-114],[50,-64],[27,-90],[38,-78],[23,-26],[47,-131],[35,-82],[-28,-63],[-17,-115],[-16,-55],[-16,-156],[15,-47],[-9,-74],[-44,-11],[-11,62],[-34,89],[-24,33],[5,51],[-16,65],[-46,41],[-14,32],[-43,16],[8,37],[-59,25],[-46,4],[-67,-18],[-33,5],[-57,-46],[-82,-53],[-42,-11],[-104,-7],[-81,-26],[-63,-67],[-50,-35],[-33,-54],[-57,-8],[-27,-58],[-87,-19],[-11,-34],[-59,-28],[-87,17],[-45,-12],[11,-40],[-56,-21],[-58,-37],[-26,-47],[-25,-15],[-58,1],[-72,-23],[483,-276],[-68,52],[9,64],[-26,9],[-82,-4],[-41,19],[14,60],[51,30],[71,1],[59,26],[79,71],[10,28],[-14,64],[28,35],[79,5],[65,19],[-22,78],[32,29],[-14,69],[113,37],[124,10],[99,21],[87,34],[52,29],[82,12],[56,29],[74,-15],[61,-62],[12,-56],[-6,-51],[26,-38],[33,-89],[11,-76],[-3,-90],[19,-132],[19,-76],[32,-86],[89,-163],[76,-176],[24,-39],[48,-147],[-16,-50],[-36,4],[-32,-27],[-60,-12],[-56,2],[-120,21],[-58,21],[-31,-17],[163,-26],[16,-9],[106,4],[-144,-213],[-31,-64],[-34,-130],[32,-18],[-6,-119],[-22,-122],[-22,-59],[-75,-117],[-105,-130],[-50,-88],[-112,-144],[-38,-62],[-24,-66],[-17,-84],[-58,-88],[-24,-56],[-26,-30],[-68,29],[-78,57],[-15,28],[-71,0],[-67,41],[-42,6],[-62,28],[-13,-12],[-129,-18],[-80,-27],[7,-26],[-29,-38],[-42,79],[-53,16],[-45,-30],[12,-31],[73,-48],[18,-29],[101,6],[32,26],[90,29],[12,42],[83,36],[72,-18],[65,-40],[63,-4],[85,-75],[56,-22],[-117,-62],[-109,-76],[-56,-50],[-32,-43],[-65,-115],[-43,-122],[-14,-284],[-39,-134],[-6,-101],[-17,-107],[-1,-119],[6,-43],[-35,-61],[-95,-129],[-34,-80],[-95,-262],[-36,-86],[-30,-148],[-29,-90],[-53,-121],[-27,-37],[-53,-34],[-95,-38],[-243,-71],[-224,-68],[-199,-57],[-161,-59],[21,29],[65,31],[86,27],[197,44],[83,40],[100,32],[42,45],[0,46],[-19,34],[23,28],[80,-8],[73,18],[47,38],[58,31],[30,51],[-23,47],[23,39],[67,17],[94,65],[21,61],[44,40],[22,72],[25,26],[-8,45],[-50,8],[-48,-21],[-70,-4],[-72,30],[-14,32],[50,14],[34,29],[-43,50],[-43,18],[-82,6],[-79,-17],[21,37],[-34,31],[-54,-7],[-117,5],[-93,-41],[-40,-3],[-55,-31],[-66,-14],[-1,52],[-55,29],[-44,6],[-29,-22],[54,-44],[7,-44],[56,-31],[71,-9],[67,20],[14,48],[113,-6],[67,-12],[11,-24],[95,-22],[76,25],[57,31],[6,-76],[30,-44],[92,-34],[58,-3],[84,18],[-50,-57],[-6,-53],[-43,-49],[-29,-65],[-55,-39],[-102,-41],[-11,-38],[20,-53],[-10,-24],[-83,-42],[-53,-40],[-103,-4],[-39,-11],[-23,-30],[19,-65],[-29,-5],[-101,12],[-35,-21],[-40,-52],[-49,-40],[-32,-9],[-88,25],[-39,-43],[-12,-35],[-169,-58],[-41,-43],[-60,-27],[-65,-56],[-62,-104],[5,-30],[-62,-19],[-42,-32],[-100,-130],[-28,-63],[-93,-76],[-149,-82],[-150,-58],[8,63],[-20,36],[-47,39],[-220,81],[4,119],[-44,26],[-30,35],[-135,43],[-6,31],[68,42],[7,70],[-60,54],[-53,26],[37,46],[-9,65],[-129,42],[-19,46],[-100,76],[6,69],[77,30],[3,25],[44,13],[3,38],[44,11],[-3,35],[-55,-16],[-28,-50],[-75,-55],[-33,-15],[-25,-59],[-38,-45],[-157,-6],[26,-23],[129,16],[66,-12],[18,-32],[39,-24],[14,-77],[84,-44],[-10,-59],[39,-51],[42,-24],[-23,-27],[-9,-71],[56,-92],[67,-7],[57,-23],[46,-49],[-7,-82],[24,-38],[72,-38],[52,-6],[50,-21],[59,-44],[18,-53],[53,-5],[-21,-51],[-3,-43],[-28,-27],[-61,-29],[-105,-101],[-191,-50],[-61,-24],[-99,-101],[-65,-53],[-52,-59],[-50,-21],[20,77],[-73,94],[31,8],[-331,147],[13,15],[-25,47],[-1,79],[53,3],[-33,95],[-35,25],[-83,33],[-72,0],[-12,25],[-51,14],[-54,-16],[-40,7],[-186,76],[-107,-5],[-39,6],[-37,40],[-45,22],[-95,27],[-98,-2],[-54,44],[-88,47],[-40,61],[-58,-8],[-59,50],[-70,4],[58,-60],[47,-19],[55,-90],[153,-96],[58,-20],[32,5],[121,-22],[84,-84],[151,4],[90,-22],[79,-29],[39,-23],[53,9],[143,-25],[33,-43],[5,-41],[-36,-30],[31,-25],[23,-57],[62,-79],[-39,-41],[-58,-19],[-134,54],[-100,13],[-43,-16],[-43,17],[-41,-16],[-11,-24],[-77,-19],[-47,-23],[-73,30],[-49,-7],[-122,10],[-84,-5],[-30,19],[-48,63],[-39,18],[-116,14],[-50,-8],[-146,-39],[-118,-48],[-19,-41],[-114,27],[-97,-22],[-140,21],[-60,26],[-51,-2],[-79,-31],[-32,4],[-57,-35],[-4,-27],[-76,58],[-21,-39],[47,-50],[41,-6],[122,8],[27,-23],[90,12],[52,-15],[109,-18],[43,6],[91,-28],[74,16],[44,-12],[66,2],[77,22],[47,30],[204,21],[9,-22],[90,-40],[73,-11],[106,4],[58,14],[79,-14],[63,4],[35,-20],[109,11],[34,39],[47,29],[47,10],[149,-6],[60,-22],[9,-31],[68,-30],[48,-1],[-7,44],[56,18],[38,35],[25,-17],[11,-40],[-14,-64],[-22,6],[-64,-28],[-84,-67],[-36,-47],[-104,-71],[-84,5],[11,-25],[63,-22],[-21,-54],[-36,-57],[-61,-53],[-36,51],[-82,30],[-84,0],[-39,-32],[-90,-21],[91,-30],[55,-8],[-3,-45],[-90,-13],[-60,15],[5,-36],[-64,4],[-65,-33],[24,-59],[-53,-6],[-65,-77],[99,15],[-8,-43],[82,18],[37,-24],[52,34]],[[71155,31226],[208,-33],[184,-19],[135,-25],[-24,-27],[-93,28],[-58,7],[-41,-15],[-183,-1],[-101,6],[-81,16],[-99,-37],[-34,26],[21,55],[-63,11],[-31,-34],[-34,15],[-46,-8],[-17,31],[91,8],[186,1],[80,-5]],[[66288,16253],[-144,-20],[-71,-5],[-44,30],[-23,87],[-40,59],[-44,27],[-91,36],[-133,11],[-80,24],[-74,35],[-96,10],[-77,-14],[-47,-22],[-77,-20],[-75,10],[-35,20],[-108,-46],[-45,-40],[-66,-80],[-40,-12],[-96,-8],[-166,15],[-167,-13],[-44,3],[-53,21],[-74,58],[1,24],[-35,54],[-27,0],[-18,-37],[-90,-78],[2,-48],[37,-60],[-4,-33],[-30,-19],[-97,-10],[-46,12],[-47,34],[-22,40],[5,71],[-11,39],[-47,30],[-89,11],[-83,-22],[-92,-48],[-91,17],[-116,36],[-196,27],[-117,0],[-79,-17],[-36,-49],[-23,-126],[-71,-59],[-56,-9],[-83,9],[-174,-21],[-120,-20],[-35,-36],[-17,-54],[-53,-61],[-79,-17],[-86,5],[-77,18],[-63,25],[-47,39],[-20,39],[-6,50],[-46,64],[21,-126],[37,-44],[49,-36],[107,-43],[82,-12],[87,7],[68,21],[51,53],[32,70],[37,25],[227,33],[89,-9],[79,10],[79,42],[29,65],[19,94],[43,39],[41,8],[149,-1],[114,-18],[120,-30],[89,-30],[65,3],[66,20],[63,40],[31,6],[71,-12],[19,-19],[-1,-114],[49,-58],[48,-26],[92,-17],[102,20],[47,29],[13,41],[-37,44],[-7,65],[25,17],[44,-1],[87,-74],[41,-19],[110,-12],[113,15],[173,-10],[187,15],[60,30],[97,101],[149,4],[133,20],[49,16],[71,-7],[147,-56],[134,-12],[63,-20],[51,-58],[8,-89],[58,-54],[50,-22],[105,-19],[68,8],[111,26],[43,-32],[-3,-26],[-38,-11],[-37,-50],[28,-24],[-8,-59],[-58,-25],[-13,-21]],[[66212,15930],[3,-35],[-54,-26],[-50,-1],[-20,-29],[-67,-41],[-83,-27],[-32,10],[-61,-80],[2,-29],[-30,-32],[-80,20],[-21,-34],[-7,-52],[-19,-19],[0,-53],[-14,-34],[31,-30],[45,-79],[16,-50],[-7,-36],[-106,6],[23,-70],[10,-67],[-14,-55],[16,-14],[-28,-58],[-33,-35],[8,-47],[-33,-75],[-54,-48],[-2,-17],[-118,17],[-67,-17],[-18,-29],[36,-92],[-61,-47],[-93,0],[-111,-72],[-60,-19],[-28,-23],[-14,-55],[27,-103],[49,-34],[-55,-37],[-41,-13],[-82,-2],[-149,-22],[-24,30],[-53,16],[-51,0],[-24,26],[-5,44],[-99,65],[-81,-53],[-38,-54],[-19,-51],[-41,1],[-66,186],[20,57],[-38,-4],[-43,134],[-95,43],[-37,2],[-27,-21],[-42,14],[-28,42],[-54,15],[-68,-12],[-51,13],[-41,-49],[-83,-12],[-8,-17],[33,-44],[-47,-41],[-115,-38],[-60,3],[-10,23],[-79,-14],[1,-17],[-60,-22],[29,-52],[-69,-35],[-24,-57],[-31,-22],[-167,-71],[-38,2],[-30,-53],[-65,-3],[-62,63],[-6,24],[-62,53],[-37,-12],[-143,17],[-24,31],[34,59],[-69,72],[6,57],[-36,28],[11,43],[-97,-3],[-13,32],[-133,76],[-99,28],[-48,-35],[-109,-46],[-11,-52],[-68,-4],[-89,66],[125,69],[-29,67],[-19,12],[-6,58],[-42,55],[-63,34],[-122,9],[7,22],[-3,109],[-89,-12],[-72,8],[-36,-40],[-78,-33],[-41,-35],[-91,-47],[6,-29],[-60,-46],[-18,-42],[-70,-47],[-41,-46],[-22,-80],[-128,-71],[-93,-15],[-24,25],[28,147],[-26,47],[26,38],[44,25],[52,90],[8,83],[32,26],[56,9],[8,29],[-29,78],[-69,75],[-82,-23],[-28,9],[-119,108],[-32,9],[-153,79],[-56,-3],[-92,-31],[-55,-7],[-44,23],[-58,6],[-7,36],[42,0],[-5,58],[-79,31],[-109,-7],[-84,76],[-53,23],[-87,-32],[-48,-2],[-74,16],[3,40],[-80,4],[14,50],[-102,-18],[-10,109],[-40,-1],[29,73],[-27,9],[-123,14],[-35,27],[-88,0],[-80,14],[-31,32],[-93,18],[4,48],[24,80],[48,56],[-5,25],[78,45],[52,78],[27,72],[-63,34],[-25,56],[19,31],[-4,62],[18,27],[-26,58],[-39,37],[85,111],[43,18],[61,65],[-9,23],[-53,25],[-20,41],[8,43],[-55,72],[-1,34],[-51,28],[-10,35],[-38,40],[-11,76]],[[47256,8725],[0,-1]],[[47256,8724],[0,1]],[[51099,9023],[66,-5],[36,-18],[25,-48],[32,-20],[-22,-43],[22,-65],[29,-56],[-7,-32],[63,-77],[14,-78],[39,31],[13,54],[-35,16],[-16,37],[-40,37],[0,34],[-30,30],[-18,63],[3,45],[25,53],[110,33],[58,-8],[103,-50],[59,-66],[66,-15],[69,-64],[16,-26],[93,-5],[106,-39],[45,-34],[115,-10],[118,-19],[87,3],[48,12],[145,-14],[17,7],[106,-9],[85,-36],[69,-20],[63,-2],[103,-35],[105,-17],[36,-77],[29,-15],[17,-51],[36,-11],[-12,-49],[12,-48],[-82,7],[-22,-37],[59,-11],[39,-20],[50,26],[-1,28],[112,-13],[117,-66],[6,-44],[-153,-62],[-23,-27],[-76,-30],[-32,-66],[-133,8],[-125,-18],[-83,-19],[-104,-36],[-89,-41],[-85,-51],[-56,-53],[-88,-213],[23,-73],[-46,-49],[18,-36],[-40,-60],[-61,-37],[-106,-21],[-60,-24],[-79,4],[-127,-45],[-175,-43],[-18,-15],[-80,-19],[-99,-15],[-35,7],[-145,-15],[-29,-15],[-55,5],[-89,-27],[-73,7],[-55,18],[-6,32],[-101,93],[-60,29],[-149,90],[-135,63],[-90,19],[-37,33],[-169,104],[-78,39],[-70,17],[-126,56],[-155,29],[-72,25],[-144,32],[-56,29],[-51,44],[-69,17],[-32,33],[-88,66],[-85,46],[-84,14],[-118,-1],[-56,17],[-25,-16],[-100,-5],[-164,-22],[-88,-21],[-127,-5],[-77,-21],[-98,-8],[22,36],[71,16],[0,80],[65,22],[140,22],[44,44],[29,67],[36,7],[41,39],[7,72],[35,28],[78,36],[67,-1],[92,-25],[55,-47],[6,70],[132,-1],[78,18],[96,11],[129,67],[107,34],[52,29],[150,42],[96,-24],[32,-32],[-26,-43],[25,-67],[33,34],[3,42],[166,-1],[26,27],[-72,45],[0,38],[80,30],[76,9],[26,16],[153,37],[106,12],[60,43],[21,71],[75,48],[96,26],[79,74],[63,20],[57,-1]],[[53217,9493],[-51,-6],[28,62],[44,-6],[17,-41],[-38,-9]],[[54508,9699],[-11,-41],[94,7],[68,-35],[12,-40],[-66,-81],[16,-71],[-53,27],[-12,-36],[-69,-14],[4,-37],[118,16],[45,-32],[-43,-18],[-5,-95],[51,-21],[42,-34],[122,19],[4,-71],[-34,-22],[-72,-1],[-122,20],[-119,27],[-84,12],[-224,19],[-60,9],[-126,-9],[-41,35],[-16,73],[80,-31],[23,20],[52,-6],[89,9],[65,38],[50,52],[6,74],[30,26],[5,51],[21,20],[-28,33],[-4,32],[86,44],[65,11],[41,21]],[[53659,9679],[73,-19],[3,-46],[34,-37],[-18,-39],[6,-48],[19,-32],[-14,-64],[37,-83],[-43,-42],[8,-22],[101,26],[27,-28],[-31,-26],[-183,-32],[-120,-27],[-164,-25],[-108,-6],[-194,126],[10,28],[-11,61],[-22,-7],[-3,83],[38,0],[37,36],[93,-16],[34,1],[5,78],[-31,63],[-30,-3],[-33,39],[54,3],[109,-16],[4,47],[47,29],[25,39],[149,-13],[92,-28]],[[58920,10021],[-52,-25],[-47,31],[3,48],[34,10],[44,-28],[18,-36]],[[64340,10241],[-43,-23],[-24,18],[-89,11],[92,56],[64,-62]],[[77725,14339],[-62,-25],[-18,-34],[41,-28],[-6,-46],[39,-52],[-21,-50],[-36,-9],[-60,17],[-20,39],[-36,20],[-28,-12],[-53,58],[64,67],[55,2],[54,81],[44,-26],[43,-2]],[[70999,15316],[-85,-59],[-25,38],[42,17],[68,4]],[[70317,15353],[-20,-5],[-82,-59],[-67,29],[-1,35],[54,21],[102,-10],[14,-11]],[[69888,15429],[21,-23],[67,14],[31,-38],[-211,-9],[-7,39],[29,19],[70,-2]],[[71011,15478],[75,-5],[-1,-69],[48,-71],[-7,-14],[-108,13],[-33,18],[-74,-11],[10,35],[-39,29],[-26,40],[46,10],[58,-38],[12,29],[34,-3],[5,37]],[[70520,15589],[30,-44],[-70,17],[40,27]],[[70969,15586],[88,-16],[6,-69],[-77,42],[-42,1],[-1,-46],[-55,-9],[-26,67],[-63,-18],[-4,25],[43,26],[77,-8],[54,5]],[[72963,14969],[-95,32],[-60,5],[-39,16],[-21,-22],[-64,57],[0,-66],[-131,-1],[-6,8],[-144,32],[-24,11],[-110,9],[-19,11],[-76,-19],[-22,17],[-51,-2],[-48,19],[-97,-44],[-59,5],[-68,28],[7,59],[48,18],[-47,66],[-38,26],[-51,-2],[-53,27],[1,31],[-54,14],[-41,32],[-76,12],[-31,15],[-33,64],[125,35],[20,32],[-65,73],[-6,28],[27,83],[62,83],[-9,39],[19,29],[55,-24],[74,-14],[113,-32],[184,-5],[37,-10],[156,-76],[88,-38],[86,-24],[66,0],[148,-19],[146,-12],[71,-16],[69,6],[99,-5],[169,-41],[88,-97],[84,-53],[100,-53],[96,-67],[69,-101],[58,-63],[-79,-58],[-15,29],[-43,-8],[-104,-48],[-3,-25],[-54,-26],[-124,-42],[-97,-11],[-96,9],[-113,40],[1,24]],[[70481,15775],[-48,-41],[-62,-8],[-2,-51],[-85,-73],[50,-9],[25,35],[54,-15],[-26,-44],[-50,-13],[-47,-31],[-109,-15],[-28,5],[-54,-17],[-53,17],[-110,-9],[-17,-20],[-53,-2],[-25,-20],[-107,10],[-94,-2],[-80,15],[-72,-18],[-44,-64],[-1,-28],[-33,-28],[-23,-55],[6,-32],[-22,-41],[-41,19],[-62,76],[-49,7],[-41,-43],[-68,-18],[-27,-31],[15,-38],[-17,-21],[-89,-6],[-50,-22],[-31,-29],[-83,-18],[-58,-36],[-91,-44],[-16,-71],[53,-37],[18,-50],[-56,-14],[23,-44],[57,71],[-21,40],[-49,33],[9,67],[124,47],[37,26],[88,12],[56,41],[68,2],[78,57],[-4,28],[91,61],[42,0],[13,-68],[64,-30],[61,29],[27,94],[50,65],[14,41],[47,37],[112,-29],[49,-70],[54,-41],[50,-2],[84,-40],[53,-15],[155,-3],[85,-68],[69,-31],[81,-24],[43,38],[10,52],[128,21],[-12,-46],[-29,-1],[-55,-32],[31,-30],[39,42],[41,6],[41,36],[16,45],[-17,40],[80,25],[59,-39],[36,-10],[37,-81],[50,-48],[88,-40],[28,37],[36,4],[30,96],[21,19],[94,13],[29,-51],[-40,-28],[16,-44],[180,38],[29,59],[-54,14],[-26,25],[-73,21],[-61,111],[44,32],[-22,22],[-5,57],[15,31],[108,-35],[55,17],[50,-11],[-31,-37],[10,-32],[48,-58],[33,-68],[84,-33],[38,3],[49,-21],[78,-63],[114,-33],[3,-51],[-31,-24],[11,-30],[-16,-35],[38,-29],[13,-44],[177,-22],[242,-9],[80,-17],[81,-35],[154,-9],[139,7],[105,18],[156,-32],[98,-65],[53,-15],[38,-37],[202,38],[112,1],[112,15],[164,-17],[123,14],[87,-3],[135,6],[111,15],[63,16],[52,26],[69,65],[56,42],[78,24],[211,0],[89,7],[50,27],[207,-9],[62,5],[39,40],[201,-4],[76,13],[224,-4],[170,14],[163,28],[97,7],[72,19],[165,2],[353,-30],[152,9],[123,-1],[115,49],[217,-12],[215,18],[16,30],[60,-16],[125,23],[52,-14],[51,1],[156,29],[52,39],[243,-3],[104,-7],[58,22],[98,-45],[71,-21],[77,-97],[-15,-81],[-23,-18],[1,-92],[-25,-3],[-12,-80],[-93,-116],[-80,-71],[-39,-4],[-64,-35],[-32,-36],[-21,30],[-100,-8],[-113,10],[-56,19],[-46,3],[-103,-49],[-46,-43],[21,-31],[-6,-32],[-56,-16],[-45,-30],[-59,-74],[-24,2],[-6,60],[-60,49],[-76,0],[-63,40],[-116,12],[-37,-11],[-105,16],[-88,28],[-61,1],[-93,-13],[-74,21],[-101,11],[-48,26],[-13,29],[-62,-1],[-35,19],[-118,10],[-1,-30],[-145,-80],[-51,33],[-83,-8],[-84,-63],[-41,-3],[-21,-22],[-37,8],[-56,-11],[-117,-55],[-36,8],[-13,-44],[100,67],[59,-2],[3,23],[62,12],[29,-8],[28,22],[42,4],[49,43],[68,26],[85,-20],[129,36],[31,32],[48,21],[63,0],[42,-20],[50,7],[19,-31],[47,-29],[111,-12],[46,-17],[79,-4],[28,13],[60,0],[107,-31],[90,-14],[50,11],[108,-11],[69,-41],[33,9],[43,-11],[54,-44],[6,-59],[-27,-54],[-53,-42],[-32,9],[-64,-66],[54,-63],[30,12],[35,-21],[22,-39],[56,-16],[42,9],[18,55],[-35,51],[43,39],[-76,33],[19,34],[32,9],[-28,44],[43,55],[65,47],[41,3],[29,50],[53,-38],[21,-54],[13,-108],[23,-101],[39,-84],[86,-151],[88,-171],[46,-119],[11,-62],[0,-98],[-9,-83],[8,-68],[6,-174],[-9,-120],[-26,-70],[-81,-111],[-94,-61],[-13,-40],[-65,-50],[-127,-49],[-68,-17],[-99,-13],[-48,-24],[1,-36],[-42,5],[-95,-41],[-23,23],[-102,-26],[-31,-35],[47,-19],[-53,-32],[-105,-10],[-54,-13],[-25,-25],[-122,-16],[-6,-22],[-139,-41],[-62,9],[-143,-17],[-206,-13],[-110,-24],[-99,-45],[-44,-40],[-20,-55],[-77,-11],[-18,-47],[-33,-10],[-89,-4],[-69,-27],[-253,-4],[-198,-16],[-248,-29],[-252,-49],[-151,-44],[-105,-39],[-106,-48],[-47,-33],[-184,-107],[-95,-48],[-100,-70],[-124,-114],[-72,-106],[-37,-80],[-91,-265],[-4,-65],[27,-109],[58,-144],[89,-124],[12,-63],[-11,-29],[-48,-30],[-61,-8],[-182,5],[-160,14],[-402,50],[-571,85],[-73,6],[-194,34],[-190,27],[-64,2],[-150,-19],[0,-36],[-197,-45],[-95,-47],[-75,-27],[-151,-73],[-380,-227],[-32,-46],[-59,-30],[-30,-42],[-101,-39],[-96,-22],[-116,-8],[-75,-21],[-69,-36],[-155,-15],[-96,-30],[-19,-22],[-53,-13],[-143,6],[-197,-36],[-213,-5],[-171,-21],[-100,-36],[-114,-30],[-121,-19],[-51,-17],[-537,-56],[-144,-19],[-232,-60],[-262,-80],[-123,-55],[-76,-61],[-106,-118],[-35,0],[-21,-38],[39,-14],[-48,-35],[-167,-52],[-70,-36],[-58,-43],[-107,-107],[-86,-39],[-73,-50],[-49,-47],[-34,-62],[-41,-28],[-97,-10],[-85,-22],[-48,12],[-170,15],[-109,20],[-74,42],[-84,38],[-450,120],[-85,-32],[-159,24],[-70,27],[-233,117],[-140,64],[-110,33],[-84,-3],[-58,129],[-40,55],[-6,39],[-59,55],[-80,6],[-30,39],[-39,8],[14,67],[-23,91],[18,41],[25,9],[43,95],[38,7],[-78,98],[-35,16],[-61,48],[27,37],[-9,56],[-61,16],[-11,31],[-57,28],[-40,7],[-85,71],[24,21],[92,-8],[21,-18],[49,26],[-70,60],[-120,-77],[37,-40],[61,-40],[84,-31],[12,-31],[58,-16],[10,-56],[-30,-32],[67,-55],[32,-13],[36,-50],[36,-29],[-30,-23],[-44,-94],[-27,-11],[-17,-43],[22,-92],[-16,-47],[79,-75],[79,-2],[42,-49],[18,-53],[-18,-23],[54,-21],[16,-66],[40,-65],[-42,-21],[-100,19],[-69,-4],[-144,41],[-50,0],[-170,35],[-70,21],[-182,45],[-123,40],[-123,22],[-64,0],[-84,29],[-207,59],[-71,15],[-15,-11],[-134,20],[-286,61],[-32,-3],[-176,33],[-100,13],[-248,25],[-135,6],[-108,14],[-142,12],[-70,-1],[-9,18],[-91,2],[-108,10],[-179,-3],[6,-20],[84,16],[155,-7],[-7,-44],[-241,9],[-270,-36],[-61,-14],[-188,-29],[-79,-27],[-278,-62],[-87,-14],[-274,-29],[-210,-6],[-17,-8],[-218,-19],[-117,-4],[-189,8],[-667,-9],[-30,57],[-80,40],[-75,16],[-7,50],[-51,11],[-38,-28],[-39,32],[13,88],[43,0],[-23,45],[10,32],[48,8],[-6,67],[27,51],[33,31],[75,18],[49,-26],[59,22],[22,40],[-23,19],[-53,11],[21,58],[116,-19],[72,32],[-19,34],[-39,25],[-51,-6],[-6,-56],[-80,-8],[-14,-66],[70,-24],[-23,-41],[-45,-16],[-59,24],[-83,-21],[-54,-79],[-1,-38],[21,-23],[-71,-21],[1,-32],[26,-35],[-54,-4],[-29,-31],[32,-24],[-13,-29],[17,-36],[41,-2],[25,20],[46,-8],[8,-51],[40,-21],[49,0],[65,-40],[34,-62],[-183,-6],[-90,-13],[-117,-32],[-70,-6],[-30,-17],[-144,-23],[-117,0],[-126,-27],[-184,-9],[-77,-25],[-267,-47],[-114,-10],[-226,-48],[-119,-29],[-76,-30],[-97,-54],[-49,-10],[-61,57],[13,46],[-70,10],[-41,-57],[-45,16],[-67,-15],[-27,-20],[-35,-52],[72,25],[97,-34],[53,-81],[-11,-78],[-31,-26],[-98,-103],[-76,-49],[-31,-32],[-72,10],[-62,31],[-80,64],[-116,77],[8,42],[-13,44],[-36,-54],[-179,90],[-225,93],[-222,66],[-207,56],[-89,56],[-3,74],[35,25],[45,-28],[-61,-33],[-12,-30],[101,14],[9,38],[29,40],[69,3],[37,96],[32,30],[37,4],[60,45],[94,6],[80,-54],[48,1],[113,-33],[56,16],[25,27],[108,4],[8,58],[63,13],[40,28],[-10,63],[27,14],[27,45],[-25,56],[-46,-25],[7,-46],[-45,-45],[11,-36],[-31,-27],[-33,-3],[-40,-30],[-43,-5],[-82,-58],[-135,25],[6,32],[-69,20],[-56,6],[-18,48],[70,58],[49,1],[41,57],[-68,-10],[9,94],[-69,9],[-34,-16],[0,-52],[47,-46],[-91,-91],[-29,-63],[-48,9],[-82,38],[-18,19],[4,50],[-36,48],[24,46],[-6,49],[-107,6],[-45,-5],[-40,22],[-37,-37],[90,-195],[-18,-31],[-26,-125],[-156,105],[-121,51],[-20,43],[2,63],[98,132],[-5,31],[-55,-13],[-132,5],[-82,-37],[-120,30],[-61,-9],[-28,-24],[-97,-12],[-77,29],[-44,36],[-22,-14],[-92,16],[-75,-14],[-14,-77],[-26,-36],[0,-46],[-55,3],[-48,20],[-14,60],[-24,-8],[-132,-11],[-99,25],[-166,13],[-33,-14],[-55,-52],[-75,6],[-46,32],[-70,34],[38,79],[-31,10],[-82,0],[-32,-38],[48,-52],[-8,-17],[-92,-4],[-128,36],[-90,-3],[-42,29],[-44,-7],[-19,37],[-60,-1],[-24,-31],[-122,-30],[100,-23],[66,23],[83,-51],[-22,-38],[34,-38],[32,0],[38,-83],[182,-115],[-3,-69],[75,-36],[-41,-76],[44,-1],[-102,-66],[-79,-61],[-43,-17],[-43,1],[-117,78],[-66,30],[-100,10],[-135,24],[-63,26],[-62,40],[-120,113],[-63,43],[-126,38],[-100,41],[-90,-4],[-112,65],[-87,32],[-222,67],[-106,28],[-68,36],[-14,26],[49,55],[-41,45],[14,40],[-26,34],[27,59],[5,80],[80,39],[-8,29],[-40,26],[144,80],[-51,5],[-117,-87],[2,-56],[-87,-15],[12,-63],[20,-4],[-31,-68],[5,-51],[-22,-77],[-77,19],[-129,73],[-49,39],[-112,67],[-73,60],[-65,41],[-61,51],[-77,23],[-52,33],[12,71],[-20,56],[25,31],[93,33],[14,22],[-35,36],[-61,6],[-14,29],[58,28],[-3,23],[-65,-33],[-34,-4],[-39,-43],[42,-25],[87,-12],[4,-23],[-94,-34],[-20,-44],[19,-50],[-39,-7],[12,-37],[-67,-28],[37,-29],[-24,-42],[-55,72],[-27,53],[-74,30],[-289,96],[-30,1],[-43,-45],[-38,3],[-159,68],[-44,73],[-53,51],[-20,2],[2,-116],[71,-49],[88,-34],[16,-21],[192,2],[150,-49],[193,-171],[98,-50],[-32,-28],[50,-28],[29,6],[46,-54],[51,-17],[29,-26],[66,-30],[-3,-27],[49,-8],[107,-42],[-25,-24],[16,-40],[44,0],[31,36],[58,-10],[56,-28],[44,-60],[-42,-23],[30,-66],[87,-39],[41,12],[18,-28],[-16,-43],[60,-3],[66,-43],[-6,-13],[-83,-41],[-72,-49],[-90,-93],[-53,-78],[-121,-21],[-146,14],[-135,-3],[-105,8],[-57,-16],[-57,5],[-47,20],[22,46],[-30,41],[-3,52],[-22,21],[-61,6],[7,23],[-54,26],[-20,-29],[19,-53],[38,-10],[68,11],[3,-64],[21,-25],[-41,-40],[16,-33],[135,-65],[-54,-55],[-112,-46],[-233,-28],[-82,-22],[-93,-1],[-51,-11],[-35,37],[-26,-49],[-88,-15],[-73,-24],[-120,-7],[-65,-13],[-117,-7],[-129,38],[-29,-60],[43,-22],[-6,-43],[-47,-22],[-3,-54],[-97,-72],[-49,-27],[-44,14],[-25,-11],[-31,-51],[-48,-13],[-33,11],[-73,-39],[-59,-17],[99,-60],[131,-37],[10,47],[35,-39],[-51,-15],[-107,28],[-155,88],[-38,15],[-626,141],[-423,42],[-32,-1]],[[47256,8725],[17,32],[62,32],[28,81],[-88,-3],[-133,10],[-141,-4],[-90,-12],[-172,-35],[25,128],[27,30],[-58,98],[-9,32],[-34,32],[-75,-11],[-110,-55],[-13,-31],[-72,-34],[-29,10],[-32,-24],[-61,19],[-17,77],[21,43],[-96,49],[-33,36],[-32,74],[17,55],[-94,58],[-1,26],[50,18],[4,45],[24,50],[-8,37],[12,63],[30,15],[35,-15],[16,39],[34,-3],[7,34],[-72,19],[-48,56],[35,40],[-49,26],[8,54],[-40,80],[-48,1],[-20,-59],[-147,-34],[-121,27],[-93,7],[-23,40],[-3,38],[57,32],[-7,41],[32,42],[-22,54],[30,19],[-6,30],[-35,16],[69,71],[102,4],[59,-12],[91,78],[-39,81],[16,44],[38,41],[11,65],[-68,-8],[-90,13],[-106,43],[-108,-31],[-88,-75],[-47,-24],[-90,-17],[-43,59],[-37,33],[-109,52],[-61,43],[-5,25],[-101,69],[-33,69],[-36,9],[-49,84],[-62,21],[-27,42],[-93,19],[-56,61],[-77,28],[-30,-3],[-17,49],[4,66],[29,-17],[40,-58],[220,154],[76,-3],[80,20],[143,-8],[92,14],[134,47],[8,-11],[-5,-119],[11,-73],[72,64],[48,58],[92,84],[105,35],[65,9],[84,-121],[59,-43],[61,-71],[78,62],[167,-20],[71,-32],[295,-64],[-1,-26],[105,-1],[41,-12],[99,7],[103,-5],[31,-26],[69,-30],[86,-85],[117,-81],[124,-49],[152,-44],[99,19],[101,53],[13,30],[54,37],[116,-46],[67,80],[45,87],[72,39],[21,33],[-47,15],[-68,-5],[-52,35],[7,44],[-63,29],[-6,36],[-30,52],[25,19],[91,32],[65,-25],[10,42],[122,22],[-1,26],[-73,53],[-7,40],[50,22],[-22,33],[-56,8],[-51,21],[-60,47],[-129,-3],[3,32],[-19,61],[39,233],[23,33],[-13,69],[1,56],[-51,43],[-32,67],[63,74],[40,33],[-13,48],[-26,35],[47,61],[-144,81],[-157,18],[-67,0],[17,67],[30,57],[-15,25],[52,99],[6,42],[-128,137],[-36,69],[11,50],[5,90],[-82,26],[-87,59],[-84,47],[30,33],[13,75],[161,10],[10,15],[106,5],[86,27],[160,-29],[40,-1],[24,63],[27,23],[29,57],[23,16],[39,78],[57,2],[71,105],[58,-12],[5,28],[121,-3],[105,24],[52,-7],[96,-30],[59,-27],[57,-4],[69,-37],[83,35],[48,68],[6,72],[-99,-18],[14,63],[20,37],[3,74],[-58,31],[81,58],[117,0],[-13,61],[42,21],[-14,23],[-42,-4],[-25,26],[28,73],[-48,79],[-36,12],[17,119],[48,35],[-14,25],[10,44],[107,5],[54,-40],[131,-56],[8,38],[73,88],[37,33],[-3,41],[-82,34],[-56,35],[13,70],[42,44],[-3,20],[-71,-8],[-109,31],[-8,41],[-28,27],[-69,-7],[-37,7],[-13,26],[-94,41],[6,28],[-96,29],[-17,35],[-66,9],[-6,25],[26,34],[6,85],[-93,-18],[-12,50],[-61,15],[-16,18],[43,45],[87,-5],[122,23],[64,33],[68,-5],[62,-17],[-17,41],[-38,16],[81,117],[-9,90],[-41,52],[-132,23],[-62,29],[-25,48],[-86,42],[-16,61],[-57,11],[-10,46],[-26,48],[-32,9],[-87,69],[-3,68],[-32,12],[-23,114],[27,101],[-86,-38],[-88,-15],[-55,106],[-54,76],[-86,59],[-7,18],[-100,83],[-108,116],[-39,79],[-73,45],[-33,-23],[-41,-6],[-141,-42],[-82,44],[-64,97],[57,41],[-11,60],[-41,119],[81,40],[12,41],[63,-18],[80,45],[-53,40],[-8,23],[40,49],[63,37],[29,38],[-34,49],[-73,9],[-91,40],[-35,53],[-57,56],[-17,81],[-36,26],[1,24],[-49,7],[-12,28],[15,42],[38,21],[-16,35],[54,52],[98,31],[53,-20],[22,-36],[47,-35],[95,-5],[70,7],[44,26],[-73,74],[-19,50],[-50,-1],[-129,74],[-66,52],[-43,12],[-26,34],[0,38],[-70,64],[90,47],[10,49],[-32,58],[7,28],[-44,40],[-29,63],[19,14],[-48,79],[-22,90],[-77,69],[-91,40],[37,46],[204,81],[65,40],[32,31],[34,58],[34,99],[-42,-10],[-20,43],[-34,142],[54,74],[24,76],[-25,101],[-60,32],[3,27],[34,32],[46,11],[73,53],[36,12],[-10,52],[64,58],[9,72],[41,27],[44,-2],[57,-21],[60,6],[73,30],[-16,34],[-2,52],[18,45],[-72,21],[-34,50],[33,11],[-19,39],[34,14],[117,80],[84,44],[47,2],[-137,155],[-64,36],[-105,2],[-31,19],[-65,-14],[-18,56],[-53,9],[-64,113],[36,53],[-4,69]],[[66212,15930],[72,42],[15,56],[-25,34],[33,43],[36,9],[40,32],[89,-39],[130,-75],[118,-59],[69,-14],[64,-48],[70,-23],[103,-1],[60,9],[97,35],[104,88],[65,-32],[35,-60],[91,-73],[90,-25],[98,-15],[212,-11],[202,-20],[105,-1],[140,7],[263,52],[64,36],[28,-12],[96,36],[-9,42],[-42,42],[39,26],[11,41],[91,126],[118,42],[123,-3],[334,-24],[209,28],[67,-21],[5,-32],[59,30],[144,-4],[50,-39],[56,7],[29,29],[115,-29],[20,3],[103,-26],[35,-37],[127,28],[182,9],[44,-21],[95,10],[33,-24],[64,-3],[16,-28],[72,25],[76,4],[85,-27],[50,4],[34,-14],[90,-70],[85,-46],[22,-60],[6,-102],[-57,-58],[-73,-30],[-105,-16],[-56,4],[-164,-4],[-22,67],[-31,2],[-35,37],[-56,-2],[4,25],[-45,29],[-45,-1],[-18,-23],[-77,-21],[-114,5],[-39,-26]],[[690,333],[48,-32],[68,-9],[24,41],[69,-32],[-10,-59],[-68,50],[-24,-7],[24,-71],[-39,-6],[-46,19],[-14,24],[-58,-17],[-21,25],[43,29],[4,45]],[[451,339],[39,-40],[-72,2],[33,38]],[[1191,726],[72,-20],[40,-21],[-5,-25],[65,-1],[58,-84],[-23,-59],[-47,-7],[-17,-46],[-32,-12],[-129,21],[-26,-11],[33,-50],[-20,-25],[-36,8],[-53,76],[-43,17],[-27,-10],[3,-39],[-37,-2],[-62,40],[57,47],[54,-20],[69,11],[17,17],[-5,47],[-54,49],[45,28],[1,31],[88,20],[14,20]],[[687,634],[-82,20],[40,35],[42,-20],[0,-35]],[[597,1018],[-10,-26],[60,-24],[29,-80],[-21,-92],[-47,29],[8,22],[-40,80],[35,45],[-43,21],[29,25]],[[696,1031],[59,-1],[31,-52],[52,11],[18,-48],[53,3],[62,-58],[-27,-91],[-46,-9],[-48,-27],[-74,109],[21,23],[-58,34],[-38,47],[-28,14],[23,45]],[[1209,1092],[43,-5],[6,-35],[32,-36],[111,-26],[83,2],[38,35],[43,-47],[-65,-19],[-34,-27],[-65,10],[-64,-31],[-29,43],[-87,35],[-83,1],[-6,26],[26,35],[51,39]],[[933,1099],[17,-40],[-50,-3],[-1,36],[34,7]],[[44371,8187],[-19,-16],[-54,-2],[-3,23],[76,-5]],[[43988,8292],[48,-87],[-36,-7],[-22,33],[10,61]],[[44483,8308],[114,-7],[22,-61],[-54,-26],[-73,0],[-65,10],[-81,-2],[-45,54],[26,22],[108,27],[48,-17]],[[17416,13369],[62,-8],[4,-61],[44,-32],[31,-45],[-15,-68],[19,-39],[-4,-71],[43,-70],[-23,-17],[-37,11],[-68,-27],[-47,44],[-28,55],[-11,70],[19,27],[40,16],[-39,50],[21,64],[-41,43],[24,20],[6,38]],[[47256,8724],[-54,-9],[-96,1],[-146,-20],[-73,-24],[-64,-51],[-57,1],[-91,-12],[-59,15],[-37,-37],[-38,-3],[-49,43],[-26,89],[-26,-18],[37,-44],[35,-85],[55,-39],[98,6],[70,-6],[-5,-39],[-38,-24],[-181,45],[-267,26],[-88,11],[-138,7],[-274,-12],[-214,-21],[-254,-49],[-93,-29],[-132,-52],[-101,-56],[-105,-73],[-76,-67],[-58,-20],[-47,26],[46,33],[66,2],[75,41],[13,21],[-23,41],[-67,20],[-73,56],[-12,44],[-48,-19],[-65,28],[22,36],[-82,-3],[-63,-48],[-41,14],[-150,6],[-10,17],[80,65],[-76,32],[1,96],[-47,19],[-81,-9],[-53,-25],[-5,-25],[26,-40],[78,-73],[53,-9],[21,-51],[61,-10],[-16,-38],[-61,0],[-54,36],[-45,-12],[-78,6],[-244,68],[-23,31],[42,23],[-18,24],[44,21],[-38,43],[-30,-20],[-33,24],[-37,-15],[-35,-36],[79,-8],[4,-24],[-48,-75],[-85,18],[-68,-10],[-74,-62],[40,-27],[-31,-35],[-38,7],[-7,-74],[-71,-14],[17,-94],[23,10],[53,-11],[71,14],[39,25],[2,28],[37,56],[123,37],[35,44],[71,8],[64,-6],[9,-45],[-52,3],[5,-41],[51,-33],[-14,-40],[15,-42],[-57,-20],[-10,-34],[44,0],[5,-39],[-32,-26],[20,-23],[63,65],[-2,22],[115,3],[27,-35],[-26,-39],[83,10],[12,-58],[37,-24],[153,91],[-35,-72],[25,-29],[66,-9],[2,-25],[60,4],[28,71],[33,-5],[22,43],[39,-20],[67,61],[94,-49],[-6,-38],[-75,-86],[-28,-55],[-5,-48],[30,-51],[29,-8],[60,-46],[151,16],[-18,-49],[-56,-65],[-106,-17],[-84,-52],[-52,-83],[-2,-35],[20,-39],[55,-35],[-31,-57],[-4,-48],[-73,-33],[-77,5],[-156,-10],[-29,6],[-164,7],[-171,-26],[-57,-2],[-57,-46],[-76,-42],[-129,-26],[-53,-3],[-41,41],[-24,62],[15,43],[-16,17],[-84,-13],[-43,32],[-60,-7],[-78,23],[-77,11],[-70,-12],[-90,21],[-60,33],[-69,20],[-40,33],[22,23],[-51,26],[-48,-21],[-79,-3],[-109,53],[-121,-16],[-127,15],[-48,46],[-109,30],[-56,-15],[-164,-14],[-41,-34],[-36,-6],[-165,3],[-16,30],[-70,-14],[-71,3],[-51,25],[-75,13],[-27,-11],[-56,15],[-105,4],[-118,23],[-161,5],[-36,-9],[-67,21],[-46,41],[-90,10],[-57,-11],[-90,6],[-74,-5],[-134,44],[-167,12],[-115,-24],[-12,-12],[-110,34],[-42,-6],[-80,-34],[-136,-94],[-47,-51],[-26,-46],[21,-47],[41,17],[16,-41],[-56,-15],[9,-35],[-98,-36],[-13,-26],[-57,-32],[-41,-87],[-67,26],[-69,54],[-63,8],[-72,38],[-19,33],[37,28],[-57,35],[-30,-2],[-59,65],[-72,63],[-73,-10],[-67,5],[-67,24],[-61,36],[-24,42],[9,28],[-123,4],[-24,72],[-97,-4],[-120,43],[-63,42],[-99,30],[8,44],[-139,6],[251,-119],[127,-66],[71,-29],[314,-170],[93,-45],[97,-60],[195,-110],[39,-18],[198,-127],[43,6],[43,-59],[39,-34],[45,7],[89,-33],[59,4],[105,-12],[57,-42],[78,-111],[-10,-94],[-114,-71],[-75,-55],[-9,-39],[-35,-28],[-11,-30],[-46,-15],[-94,-60],[-35,35],[12,50],[34,41],[-5,56],[23,76],[-27,35],[37,42],[5,51],[42,55],[-12,29],[-48,39],[-150,105],[-238,154],[-246,143],[-272,151],[-267,138],[-293,144],[-283,129],[-115,48],[-380,151],[-461,165],[-105,35],[-47,22],[-230,69],[-176,56],[-134,32],[-52,-5],[-62,13],[-73,-10],[-60,26],[-99,22],[-83,11],[-27,-9],[-75,8],[-160,39],[-171,31],[-145,20],[-173,10],[-98,-24],[-68,-28],[-26,-36],[-66,-26],[-23,-29],[-79,-13],[-55,-37],[-51,-14],[-85,-4],[-40,-31],[-112,-45],[-101,5],[-56,-10],[-90,-42],[-159,-20],[-62,3],[-186,28],[-62,4],[-55,33],[46,130],[-42,-15],[-22,-137],[-119,1],[-62,-7],[-55,-18],[-30,-41],[-44,-12],[-9,-49],[-32,-52],[-93,2],[-100,11],[-112,4],[-122,-4],[-125,-11],[-76,7],[-82,-12],[-177,1],[-84,-6],[-60,-20],[-78,-2],[-234,-27],[-97,-21],[-56,-21],[-70,-8],[-116,-33],[-29,-45],[-135,-90],[5,-19],[-52,-34],[2,-39],[-43,-75],[-51,-51],[-61,-44],[-51,-14],[-47,48],[-10,-33],[-31,-22],[-98,-15],[-107,-27],[-145,-49],[-96,-47],[13,-32],[-9,-54],[-53,28],[-51,-3],[-164,-27],[-25,22],[-103,11],[-90,15],[-85,42],[-72,8],[15,48],[48,-1],[12,79],[-61,59],[-32,55],[-81,55],[7,17],[-38,83],[-39,44],[-48,84],[-50,39],[-32,57],[-35,-36],[-69,31],[-29,45],[-58,25],[-11,24],[-64,31],[-10,-33],[36,-31],[58,-12],[22,-17],[12,-54],[3,-124],[20,-32],[78,-31],[63,-100],[-12,-48],[31,-98],[33,-77],[-11,-60],[15,-44],[20,-125],[83,48],[69,12],[7,53],[51,1],[-71,-79],[-93,-58],[-59,-77],[-120,-61],[-100,-77],[-21,-40],[6,-78],[-17,-37],[-72,-22],[-57,-59],[-35,-23],[-98,-97],[-47,34],[-86,7],[-83,-11],[-113,18],[-128,-19],[-171,1],[-55,-10],[-34,-21],[-93,-3],[-49,-25],[-65,-7],[5,-30],[117,25],[173,8],[83,19],[75,-13],[123,2],[91,12],[41,-6],[106,16],[113,-47],[-47,-46],[-62,-136],[-20,-20],[-43,-111],[10,-34],[-23,-142],[-2,-69],[27,-20],[68,-8],[44,-40],[-2,-31],[107,-27],[4,-46],[33,-14],[-46,-50],[-31,11],[-97,4],[-118,-58],[-32,9],[-73,54],[-72,30],[-66,-26],[-49,-46],[2,-33],[-54,-4],[-69,-97],[-19,-70],[46,-72],[-46,-6],[-2,-69],[32,-28],[17,-60],[-9,-52],[82,-12],[24,-35],[80,24],[84,3],[88,-16],[72,-54],[137,37],[100,-11],[6,-24],[-48,-64],[-36,2],[-57,-22],[-17,-30],[50,-59],[-75,-8],[-20,-30],[-62,-29],[-17,-27],[3,-66],[-21,-5],[-31,-61],[44,-27],[17,-36],[-57,-68],[-85,-12],[-33,-16],[-37,-56],[-80,-12],[-30,34],[-58,-3],[-9,28],[-78,11],[-23,33],[-85,14],[23,44],[-4,55],[-58,63],[11,48],[-29,77],[-17,17],[-117,48],[138,67],[-28,34],[-71,24],[-134,-6],[-17,11],[-43,-30],[-54,9],[-24,33],[-64,21],[-23,-7],[-88,22],[24,33],[-57,42],[-74,-20],[10,36],[-24,31],[-52,6],[-91,-9],[-15,32],[-33,-18],[63,-30],[101,5],[-22,-34],[16,-28],[51,-12],[63,19],[-18,-50],[-93,-32],[-107,-19],[7,-15],[147,24],[19,17],[55,2],[51,-14],[41,-47],[71,-7],[90,-27],[4,-32],[113,62],[43,-18],[-32,-51],[25,-38],[80,-48],[42,-12],[21,-27],[-25,-60],[-58,-57],[100,-6],[22,-28],[-12,-84],[14,-32],[45,-29],[31,10],[39,-77],[-43,-47],[-32,-10],[0,-41],[-162,-3],[-63,-36],[-15,-24],[-96,-2],[-67,-23],[-93,-86],[-36,-14],[-78,-64],[-91,-106],[-39,-73],[-57,-157],[-42,-135],[-32,-156],[22,-73],[32,-33],[94,-57],[-53,-1],[-58,-40],[-43,27],[-46,-4],[-148,16],[-15,7],[-72,-56],[-152,-56],[-3,-30],[-130,-29],[-46,-34],[-47,32],[1,31],[-40,5],[-69,39],[2,17],[-69,10],[-65,38],[-29,-5],[-128,19],[-72,31],[20,52],[60,41],[9,20],[75,26],[103,5],[40,37],[-101,-19],[-46,37],[41,20],[-16,69],[59,19],[10,22],[105,11],[24,40],[-11,20],[-96,-15],[-85,-43],[-7,28],[-75,9],[27,66],[-26,67],[-34,-31],[-73,35],[13,-75],[40,-32],[-22,-39],[-58,12],[-6,-47],[15,-25],[95,-6],[-4,-26],[61,-37],[-34,-80],[-36,8],[1,-42],[-97,-70],[-35,6],[-29,-76],[14,-67],[-60,-5],[-1,-53],[-59,16],[-37,-2],[-28,35],[-120,-4],[-121,29],[-34,58],[-60,17],[-28,29],[-65,28],[-56,-1],[-50,40],[-73,-1],[-70,48],[13,42],[66,-7],[-13,119],[26,23],[-3,39],[-47,38],[-23,-5],[-54,45],[-86,36],[-19,39],[51,39],[50,-10],[43,14],[24,70],[61,34],[-16,65],[60,29],[-6,22],[-51,-14],[-27,-25],[-5,-42],[21,-27],[-44,-20],[-61,-81],[-44,1],[-44,32],[-97,-28],[-56,0],[-19,14],[-10,49],[-31,-3],[-59,29],[-29,36],[-53,4],[-73,23],[-108,-16],[-54,21],[-42,-11],[-7,47],[-38,6],[6,51],[79,79],[41,85],[-9,47],[-24,15],[-2,-98],[-38,-51],[-47,-16],[-17,-31],[-54,-4],[-15,-26],[-85,-30],[-118,36],[-103,-10],[-31,13],[-48,-7],[-43,-30],[-56,-24],[-77,15],[-40,-12],[-30,-28],[-18,-45],[-45,20],[-104,-38],[-111,12],[-63,40],[-49,-2],[-25,27],[-51,17],[-95,18],[30,52],[67,0],[40,24],[39,-22],[36,1],[26,28],[-21,57],[68,54],[4,33],[58,50],[103,38],[24,43],[-61,-8],[-23,19],[-40,-46],[-60,-47],[-39,-88],[-62,-51],[-15,-61],[-67,17],[-55,-11],[-9,19],[-149,37],[-52,-8],[-105,2],[-42,-22],[-65,9],[-11,34],[-63,1],[-27,48],[-3,40],[29,39],[-52,44],[-25,-5],[-17,69],[42,24],[28,33],[-31,68],[90,39],[32,1],[48,93],[37,18],[46,92],[107,35],[-23,28],[-93,-24],[-105,-109],[8,-45],[-40,-57],[-67,-11],[-58,33],[-34,-5],[-39,19],[-11,-31],[-110,13],[-26,-20],[-31,10],[-29,43],[-29,-30],[-3,-35],[-87,56],[-22,-26],[-41,15],[-80,-6],[-49,22],[16,91],[-21,58],[-23,17],[-35,71],[-58,39],[-54,17],[-23,30],[34,28],[-3,25],[45,71],[54,128],[144,-25],[-31,32],[-73,19],[118,73],[26,7],[42,56],[46,29],[25,56],[59,42],[-20,28],[-66,-18],[-43,-27],[-70,-113],[-85,-64],[-57,10],[-5,57],[-76,47],[-22,89],[-119,119],[-66,25],[-51,-18],[-26,-30],[29,-30],[66,33],[62,-82],[17,-105],[41,-52],[53,-25],[12,-23],[-38,-31],[-7,-26],[-148,-9],[-44,-48],[85,25],[29,-5],[9,-62],[-9,-62],[45,-30],[13,-29],[-31,-27],[-30,-60],[-137,-32],[-6,-24],[-69,3],[-68,-14],[-38,-34],[-35,14],[-24,-18],[12,-37],[-51,-9],[-129,30],[-41,-24],[-1,-52],[-27,-28],[-30,2],[-64,45],[4,40],[-28,35],[-52,14],[-33,-13],[-69,19],[-4,-24],[53,-12],[42,-32],[45,-14],[111,-89],[50,13],[46,-4],[62,19],[88,-9],[62,14],[53,29],[46,46],[-3,28],[51,30],[42,-11],[44,20],[87,13],[70,-36],[-20,-18],[90,-60],[60,-54],[-18,-40],[-47,-17],[-73,18],[-11,-21],[-61,-6],[-43,-17],[-46,3],[-129,-41],[90,-8],[48,4],[46,-12],[39,-80],[12,48],[60,27],[95,-23],[1,-57],[-46,-11],[-28,-57],[88,29],[19,39],[104,34],[24,31],[62,4],[30,-25],[-16,-25],[64,-41],[-8,-58],[-38,-20],[-56,-5],[-40,-18],[-73,-5],[-132,-80],[4,-34],[105,-51],[14,-56],[-46,-6],[-169,1],[-84,-31],[-37,-38],[-43,23],[37,29],[-41,25],[52,26],[26,29],[-26,35],[-71,54],[-155,86],[-35,8],[-82,40],[-101,31],[-40,26],[-121,42],[-139,19],[-116,27],[-119,-3],[-121,12],[-61,-28],[-62,12],[-109,11],[-64,-16],[-53,1],[-124,21],[-79,20],[-56,-12],[-173,10],[-80,-21],[-182,-10],[-66,-33],[-62,-48],[-54,-3],[-26,138],[-24,-72],[24,-11],[13,-51],[47,-26],[-13,-56],[-206,-63],[11,-44],[-25,-13],[-78,13],[-32,15],[-61,-3],[-59,20],[-43,-68],[-143,-4],[-29,-19],[-57,-9],[-73,-25],[-70,-12],[-60,11],[-65,-5],[-94,31],[-83,15],[-93,37],[-42,-16],[-48,11],[-71,-46],[-25,-28],[-35,-8],[-29,48],[-59,0],[-56,-37],[-47,-10],[-134,3],[-55,19],[9,36],[34,-7],[44,34],[2,58],[-17,31],[23,45],[-61,10],[7,31],[-20,60],[25,76],[2,37],[-41,58],[-94,73],[-61,20],[-4,-37],[59,-23],[43,-36],[41,-14],[5,-47],[-20,-36],[23,-29],[-8,-54],[24,-36],[-8,-35],[68,-31],[-21,-40],[-10,-57],[-70,-31],[-54,-48],[-51,-1],[-32,-38],[-85,-10],[-18,15],[-43,-36],[-17,-59],[-40,7],[-14,31],[-47,16],[-16,63],[9,125],[-76,39],[-2,43],[-80,13],[-47,-9],[-37,-64],[-336,-52],[-69,-36],[-58,5],[-106,-57],[-37,-43],[17,-93],[40,-46],[71,-24],[-25,-56],[-29,-18],[-34,22],[-40,-30],[-59,-24],[-7,-26],[-54,-22],[-56,-59],[12,-29],[45,-26],[-52,-40],[10,-33],[-20,-105],[145,-34],[18,-51],[-43,-21],[-47,-2],[-79,-49],[-27,-45],[53,-32],[-7,-26],[-113,-27],[-34,-24],[-8,-35],[20,-48],[-14,-24],[-57,-6],[-80,81],[-11,28],[-63,19],[-102,-12],[-30,28],[-57,-12],[-29,48],[-34,-21],[-89,6],[-32,-8],[-61,14],[-111,-55],[-21,-59],[-68,-5],[-58,-58],[-40,-12],[-25,-39],[-45,11],[-50,-47],[0,-46],[-58,4],[3,-39],[-57,-43],[-59,-17],[-16,67],[-102,49],[-150,-14],[-89,-35],[-61,-63],[-50,-38],[5,-65],[-40,7],[-25,-65],[37,-17],[-30,-53],[15,-81],[-64,-45],[-26,-5],[-31,-37],[26,-42],[-26,-19],[-65,4],[-49,-17],[-36,-35],[-100,-58],[-69,67],[-11,34],[81,46],[55,-7],[33,22],[7,40],[29,43],[-4,58],[44,48],[-23,76],[-32,-62],[-3,-46],[-61,-20],[33,-35],[-43,-41],[-2,-52],[-76,28],[-59,-18],[-41,-26],[-44,37],[8,30],[32,28],[27,70],[-6,40],[22,12],[-6,48],[-39,6],[-34,42],[-6,57],[-31,85],[-34,30],[93,51],[11,15],[-10,74],[27,54],[60,-1],[75,45],[49,-37],[54,0],[47,13],[96,11],[55,13],[82,-2],[-14,28],[-94,-2],[30,31],[69,-18],[48,26],[15,31],[-28,23],[-28,-26],[-57,-6],[-73,-27],[-6,-41],[-72,-24],[-99,-13],[-39,30],[-53,8],[-29,-15],[-24,69],[43,65],[-76,58],[74,25],[36,28],[-14,59],[40,60],[-11,37],[-63,-94],[-5,-29],[25,-38],[-47,-12],[-69,-36],[-37,-34],[-25,4],[-51,61],[-39,3],[-19,-40],[130,-47],[45,17],[56,-13],[-47,-89],[24,-14],[11,-57],[-69,-8],[-26,-13],[-8,-92],[12,-32],[-32,-24],[-26,36],[-73,-77],[-97,-23],[-89,-77],[4,47],[-62,33],[-1,41],[-51,-11],[-47,27],[-101,1],[-99,10],[18,-30],[49,6],[119,-15],[24,-57],[94,-34],[17,-38],[62,-24],[19,-37],[-6,-86],[97,-23],[-9,-70],[-99,-75],[-38,13],[-90,-6],[-61,54],[-47,7],[-81,-30],[28,-23],[55,17],[56,-33],[5,-23],[90,-69],[60,-3],[20,22],[64,-5],[52,-37],[12,-61],[-62,24],[-32,25],[-44,-6],[-95,-30],[-44,-33],[-54,-14],[0,-29],[39,-29],[-63,-14],[-22,-33],[-71,-30],[-20,-20],[17,-42],[-25,-15],[1,-45],[58,-51],[-59,-63],[-107,-32],[-26,26],[-66,16],[-89,-18],[-39,-31],[-111,16],[-41,-3],[-81,-26],[-43,13],[-43,-22],[-72,-2],[-27,-32],[54,-21],[82,14],[45,25],[79,13],[17,-24],[61,-13],[73,32],[65,1],[93,-27],[27,10],[76,-40],[-29,-13],[25,-38],[88,7],[93,-31],[59,-8],[-40,-54],[1,-85],[115,-12],[21,-46],[26,-4],[28,-70],[0,-43],[-45,-5],[-24,-39],[13,-26],[-40,-38],[-8,-54],[-190,-33],[-74,-49],[-3,-30],[24,-55],[-24,-39],[-10,-56],[-32,-41],[-59,6],[-52,-17],[-30,33],[-38,2],[-23,22],[-139,-14],[-100,5],[-179,-23],[-34,-20],[-30,-50],[-23,-14],[17,-63],[-98,-48],[1,-37],[-41,-17],[-15,-47],[-27,-28],[39,-73],[-12,-29],[-52,-14],[-61,22],[-28,-45],[-69,-7],[-35,13],[-58,-5],[0,73],[-47,51],[-150,41],[-63,-14],[-50,24],[-8,43],[22,44],[-39,2],[-57,30],[38,25],[-50,60],[-33,-9],[-72,40],[-11,51],[36,16],[66,72],[-18,22],[36,51],[-17,28],[-35,8],[-45,46],[-9,76],[-51,36],[-84,8],[-11,25],[53,38],[-26,67],[-48,52],[-71,60],[-177,115],[-101,51],[-42,1],[-49,26],[-5,20],[-72,40],[-140,7],[-44,-18],[-99,-13],[-31,46],[-59,-3],[-26,44],[-95,39],[-73,19],[-72,-26],[-70,32],[-73,-2],[-61,-45],[-68,-4],[-31,65],[-116,63],[-39,9],[-27,-15],[-60,38],[-7,29],[-49,15],[-53,39],[-70,-7],[-45,9],[-82,41],[-120,11],[-288,-27],[-58,-26],[-3,-77],[-66,-18],[-104,-60],[-15,-47],[96,-57],[16,-46],[48,-44],[-23,-40],[-35,-14],[-4,-48],[-31,-81],[-61,-37],[-21,-39],[-38,-28],[-85,27],[-6,-42],[-53,-33],[-38,-1],[-37,-28],[-79,12],[-55,-31],[-62,25],[-49,-8],[-66,-37],[-115,30],[-60,-16],[-5,-26],[-53,-40],[-34,10],[-21,-40],[-29,34],[-34,12],[-54,-7],[-62,-60],[-41,16],[-113,-20],[-32,-28],[-85,17],[-21,38],[-31,6],[-29,46],[11,31],[-50,16],[-23,48],[-46,12],[-54,-11],[-38,56],[-53,24],[3,56],[50,26],[-1,55],[29,14],[79,2],[61,45],[37,57],[-2,38],[-83,71],[8,37],[-22,54],[16,23],[-41,90],[-40,26],[-4,36],[37,43],[-28,46],[44,18],[71,14],[-7,57],[22,65],[59,22],[52,34],[12,32],[56,20],[25,57],[112,-28],[90,42],[61,7],[52,-16],[96,7],[43,11],[46,77],[44,19],[22,32],[46,-2],[28,46],[26,-8],[65,74],[28,-42],[40,3],[58,39],[43,13],[66,69],[32,-28],[63,13],[59,49],[50,13],[9,39],[68,25],[35,-6],[36,30],[55,5],[38,-16],[147,21],[51,2],[35,16],[116,20],[22,-25],[43,0],[22,-18],[70,15],[1,-35],[58,-53],[45,-14],[2,-65],[89,-22],[40,5],[28,-29],[104,-2],[63,-16],[60,-68],[-49,-14],[-13,-38],[-40,-29],[40,-24],[58,25],[5,35],[64,36],[18,31],[-97,20],[-9,37],[52,49],[97,45],[55,35],[107,83],[84,98],[27,42],[-5,34],[-44,66],[17,13],[95,-14],[43,39],[80,-68],[39,-6],[19,18],[43,-8],[43,27],[51,6],[25,-17],[76,-8],[74,19],[17,18],[88,26],[46,48],[64,18],[28,57],[103,62],[47,-17],[105,38],[27,51],[36,33],[52,16],[100,-1],[25,43],[145,52],[46,43],[41,96],[45,66],[-10,131],[140,45],[24,-12],[138,9],[39,-20],[49,45],[75,53],[-10,23],[81,21],[-8,57],[107,9],[32,26],[104,39],[24,-12],[20,99],[16,16],[31,117],[21,59],[-30,20],[-14,41],[-52,58],[90,29],[44,53],[-62,52],[47,49],[30,-20],[34,32],[43,17],[31,-30],[78,-5],[67,34],[67,6],[71,-10],[17,-25],[58,6],[66,-24],[15,26],[-69,16],[-161,20],[-44,-10],[-106,19],[11,23],[57,-11],[50,19],[103,-7],[38,48],[15,53],[31,-25],[63,-1],[23,-55],[66,4],[89,50],[44,12],[-8,31],[72,-7],[36,55],[74,70],[-3,20],[46,36],[31,57],[11,64],[-24,16],[-5,82],[72,26],[28,27],[-72,48],[57,80],[-9,116],[-37,21],[-67,5],[49,60],[37,22],[35,42],[48,8],[7,98],[-22,14],[6,40],[30,14],[-2,32],[37,29],[-36,94],[-69,11],[-34,63],[89,24],[55,-16],[31,-47],[40,-11],[91,23],[29,-50],[80,-7],[10,24],[48,7],[59,-15],[51,44],[20,53],[42,57],[65,5],[90,47],[2,38],[43,25],[74,-7],[-22,-41],[-19,-71],[10,-16],[92,-24],[47,-62],[-18,-61],[20,-55],[-6,-28],[30,-29],[-35,-39],[58,-15],[28,59],[67,12],[92,-9],[19,-21],[110,-30],[63,34],[59,13],[76,1],[46,-10],[108,5],[75,-10],[67,-20],[-5,38],[-41,11],[-84,44],[-40,-22],[-85,9],[-128,-3],[-82,-32],[-42,-5],[-59,21],[-20,24],[-75,18],[-25,32],[18,31],[-97,10],[-28,41],[-36,21],[28,46],[22,59],[-44,21],[7,23],[76,86],[63,19],[-48,40],[-148,67],[103,41],[39,6],[54,-32],[57,-2],[18,-35],[118,13],[78,-33],[74,6],[0,33],[58,8],[35,22],[1,45],[19,15],[56,-21],[44,-1],[59,36],[74,10],[56,-44],[38,26],[24,-27],[46,24],[68,-27],[60,31],[126,5],[90,16],[129,106],[9,31],[117,105],[-16,55],[7,40],[34,35],[-7,26],[27,55],[56,34],[16,60],[-79,20],[5,48],[54,54],[-41,38],[70,28],[45,-10],[61,3],[33,16],[-1,38],[38,-1],[25,-46],[55,13],[33,34],[28,76],[30,12],[55,-18],[76,27],[45,-3],[70,86],[122,14],[51,86],[48,22],[83,1],[20,50],[54,9],[46,24],[31,65],[-12,19],[43,35],[4,49],[-27,40],[9,36],[98,-13],[70,29],[-38,31],[40,23],[32,39],[67,-4],[45,14],[49,79],[46,30],[67,22],[134,18],[26,26],[68,30],[58,10],[22,38],[55,10],[55,37],[36,69],[13,104],[-27,76],[35,110],[-25,78],[49,72],[-29,105],[16,60],[-13,121],[-26,112],[1,39],[-22,55],[-57,51],[41,13],[16,41],[-26,20],[-13,57],[-25,37],[40,51],[13,86],[99,70],[6,22],[56,22],[9,41],[-33,79],[58,39],[16,49],[-19,53],[41,30],[21,42],[39,40],[0,116],[35,90],[-34,45],[-3,30],[20,42],[-10,35],[20,34],[-29,54],[61,16],[-5,66],[52,28],[34,-7],[54,18],[124,-37],[41,27],[26,-7],[129,10],[119,-1],[85,-20],[94,-45],[83,1],[97,-26],[82,11],[33,-23],[43,-4],[75,-44],[61,-21],[43,-31],[44,-48],[46,-19],[81,-17],[83,-29],[190,1],[121,-13],[119,26],[131,12],[90,22],[64,29],[125,90],[63,73],[54,22],[57,71],[45,39],[54,65],[50,38],[55,20],[140,16],[22,17],[101,176],[47,41],[44,4],[53,-38],[-17,-45],[36,-39],[39,6],[86,45],[70,-31],[-9,-43],[10,-41],[-52,-68],[-71,-51],[-11,-27],[18,-70],[-46,-168],[24,4],[21,74],[52,84],[-19,25],[8,69],[99,46],[55,64],[33,55],[-30,11],[4,48],[33,75],[-20,30],[66,25],[20,30],[77,27],[56,-15],[43,24],[14,45],[139,-5],[96,-20],[115,39],[-8,62],[11,22],[46,-2],[54,-44],[51,-20],[129,-18],[47,-29],[89,-17],[52,9],[-172,80],[-80,17],[-110,62],[-117,9],[-98,-11],[-6,-55],[-38,-22],[-134,-21],[-57,16],[-74,-2],[-41,-15],[-29,-31],[-67,-12],[-122,-31],[-63,-61],[20,-40],[-90,39],[-70,15],[-116,53],[-58,106],[2,139],[12,108],[-6,56],[-166,24],[-42,27],[54,70],[-14,36],[-74,20],[-32,27],[-94,29],[18,56],[95,-12],[109,3],[145,-11],[27,22],[52,74],[25,63],[23,103],[-47,57],[30,19],[-42,40],[-120,63],[146,15],[58,24],[60,80],[29,-12],[154,2],[54,-23],[60,17],[5,20],[56,16],[61,-8],[34,25],[99,-2],[30,21],[113,25],[102,39],[71,-33],[87,8],[50,31],[38,-23],[68,31],[24,33],[101,-10],[66,-21],[14,18],[136,-52],[53,-33],[37,5],[57,-14],[8,37],[70,-3],[11,35],[41,29],[41,-8],[111,17],[46,-6],[54,26],[32,-14],[61,-3],[67,11],[95,3],[18,15],[47,-12],[135,0],[10,10],[92,14],[51,33],[36,38],[106,7],[20,23],[69,-15],[152,-7],[29,-33],[92,-25],[81,18],[32,32],[70,-17],[18,41],[104,-4],[78,38],[145,4],[87,-39],[53,7],[118,-6],[67,11],[72,45],[43,50],[97,46],[94,-67],[63,-20],[117,-4],[177,-15],[127,-4],[127,-37],[69,3],[42,-12],[55,3],[73,-25],[194,-19],[167,-22],[90,-4],[47,-12],[93,7],[41,-45],[59,-24],[44,1],[53,19],[57,-14],[1,30],[76,5],[82,25],[101,61],[19,27],[152,-7],[80,19],[125,-9],[94,-17],[158,-44],[49,-3],[99,-30],[61,10],[74,-37],[57,-11],[48,-22],[52,-44],[9,-33],[52,-16],[71,3],[54,15],[76,-6],[56,-24],[45,-42],[51,-68],[89,-53],[50,-19],[69,-44],[69,-13],[93,-2],[107,6],[123,19],[91,-9],[108,-25],[67,-1],[94,19],[167,-11],[3,-17],[115,-9],[113,26],[105,-3],[34,-17],[67,-4],[68,22],[124,57],[67,-3],[131,37],[53,1],[59,18],[95,13],[98,54],[107,27],[76,0],[75,-27],[87,24],[73,4],[82,56],[78,11],[124,6],[98,16],[55,-28],[78,-16],[99,15],[131,-29],[96,-37],[96,-5],[116,24],[122,54],[124,69],[52,24],[93,-3],[-3,-24],[-40,-29],[-39,-132],[-159,18],[-104,-58],[-58,-23],[23,-38],[23,48],[95,56],[47,8],[80,-17],[34,-24],[-52,-31],[-96,10],[-79,-51],[-38,-37],[-29,-69],[24,-41],[139,-107],[71,-16],[74,36],[-2,77],[15,13],[73,9],[88,-21],[42,-25],[39,-46],[-21,-32],[31,-26],[12,46],[-46,63],[-30,24],[-98,28],[-102,-9],[-27,-34],[7,-53],[-30,-31],[-36,-5],[-54,21],[-65,67],[-55,35],[-6,53],[20,36],[55,28],[128,9],[93,47],[48,44],[28,92],[78,105],[70,64],[40,129],[-10,47],[-50,58],[-56,37],[-81,94],[-24,55],[10,71],[44,150],[23,97],[20,135],[2,86],[-24,36],[-140,7],[17,36],[153,-26],[81,-1],[17,-29],[94,-4],[58,127],[32,122],[1,29],[-60,36],[-51,9],[-3,30],[96,32],[133,21],[43,16],[24,82],[24,30],[-3,72],[-94,72],[69,27],[71,-3],[139,52],[67,9],[22,-28],[58,-8],[96,13],[67,1],[172,107],[19,30],[59,49],[29,45],[23,66],[25,20],[11,43],[125,48],[49,41],[-3,26],[48,47],[52,36],[30,37],[106,51],[86,50],[63,16],[55,57],[87,66],[95,58],[158,19],[99,49],[6,27],[149,4],[61,-21],[67,-2],[105,8],[79,45],[9,24],[84,9],[66,-49],[113,-37],[133,-93],[12,11],[-131,97],[-98,34],[-14,45],[-55,51],[55,53],[72,27],[236,227],[68,77],[44,83],[10,43],[5,105],[33,49],[55,19],[142,104],[73,79],[23,41],[62,77],[142,46],[94,46],[128,80],[72,62],[42,50],[11,42],[30,36],[22,67],[46,70],[106,107],[311,145],[102,19],[65,25],[132,80],[81,76],[32,44],[18,47],[25,157],[74,-2],[90,46],[86,67],[86,33],[112,-31],[46,-4],[169,71],[71,53],[93,21],[102,57],[59,18],[38,44],[1,49],[-32,67],[-30,19],[-126,43],[-74,18],[-65,28],[-59,10],[-136,2],[-103,21],[-38,19],[-16,49],[90,115],[45,41],[55,35],[66,-10],[62,-67],[141,-59],[111,-15],[94,-47],[60,-20],[76,-8],[97,14],[67,20],[54,55],[-9,39],[-38,27],[-78,29],[-19,23],[0,46],[-26,5],[-1,-66],[21,-43],[67,-34],[56,-7],[-8,-31],[-41,-28],[-122,-27],[-50,5],[-159,65],[-152,32],[-52,41],[-81,86],[-95,23],[-94,-26],[-70,-41],[-36,-32],[-37,-75],[-53,-53],[28,-98],[19,-20],[72,-30],[50,-8],[62,11],[173,-21],[71,-30],[10,-23],[-21,-42],[-51,-23],[-143,-40],[-42,-26],[-73,-24],[-115,-65],[-108,-49],[-53,-12],[-85,-36],[-38,-38],[-15,-42],[-112,-38],[-40,-25],[-40,-48],[-33,-79],[-43,-54],[-53,-20],[-92,-14],[-69,-47],[-181,-38],[-73,-58],[-85,15],[-26,-32],[-59,0],[-54,-37],[-19,-28],[-208,-64],[-111,-55],[-69,-57],[-98,-57],[-11,-26],[27,-41],[-75,-70],[-9,-24],[-68,-59],[-19,-37],[-44,-23],[-39,-37],[-17,-81],[36,-49],[-17,-56],[-37,-17],[-49,11],[-15,66],[38,37],[-20,45],[-57,35],[-39,43],[-6,26],[23,45],[-36,62],[-45,4],[-40,-16],[-12,40],[111,92],[24,40],[-18,33],[-42,-11],[-36,-31],[-59,-11],[-51,23],[16,49],[32,16],[135,-3],[81,21],[24,46],[-54,24],[-56,9],[-45,30],[38,64],[0,52],[-41,39],[-101,28],[29,27],[65,-28],[47,22],[2,46],[-40,37],[-65,35],[-24,71],[12,35],[-59,37],[2,34],[107,27],[42,25],[14,57]],[[37486,18778],[68,112],[-35,31],[-68,26],[-65,76],[-4,42],[36,32],[1,53],[28,48],[-3,38],[15,51],[-47,53],[-16,40],[59,60],[131,18],[7,29],[-23,45],[2,47],[107,13],[-2,20]],[[33005,15106],[-62,4],[21,43],[37,-10],[4,-37]],[[17159,17774],[105,-24],[48,21],[65,-8],[36,-25],[-35,-69],[-38,-19],[-44,19],[-39,-3],[-20,30],[-65,-24],[-30,10],[22,57],[-5,35]],[[11441,18386],[49,-35],[-52,-58],[-32,-9],[-106,1],[-12,29],[49,8],[28,37],[76,27]],[[20837,18621],[-11,-36],[-64,9],[3,26],[72,1]],[[20763,18644],[-18,-38],[-85,-11],[-9,-14],[-67,-2],[23,48],[70,17],[86,0]],[[11224,18792],[66,-22],[76,-7],[12,-43],[30,17],[80,-39],[-52,-13],[-86,19],[-46,-14],[-1,-33],[-52,-23],[-60,8],[-21,31],[-97,5],[-21,26],[-2,45],[58,16],[67,38],[49,-11]],[[10813,20129],[45,-1],[-10,-62],[-17,-12],[25,-51],[2,-39],[-18,-36],[-71,-38],[-12,47],[-55,-15],[-55,67],[8,26],[70,1],[33,42],[-42,8],[-8,38],[88,38],[17,-13]],[[16244,29037],[52,1],[86,-27],[-3,-70],[-56,-58],[-96,11],[-16,-63],[-44,0],[-3,30],[67,54],[-13,99],[26,23]],[[20116,32758],[-72,-63],[2,48],[57,46],[13,-31]],[[33321,33920],[-48,-12],[-5,39]],[[33354,33908],[4,-1]],[[34977,33181],[-104,-10],[-40,4],[-904,323],[-182,68],[-109,10],[-52,12],[-61,59],[-57,33],[-233,121],[-59,50],[-15,31],[-73,49],[89,16],[48,-40],[100,11]],[[33265,33948],[-9,6]],[[33255,33955],[-17,11]],[[33237,33967],[-10,6]],[[33226,33974],[-33,-22],[-55,5],[-80,22],[18,32],[29,-5],[59,18]],[[33164,34024],[-96,-8],[41,56]],[[17709,34560],[17,-32],[36,8],[81,-9],[69,-28],[23,46],[37,-87],[38,-2],[17,-44],[42,-32],[58,-3],[7,20],[86,11],[36,-14],[40,-49],[-1,-81],[-46,-5],[-63,-77],[38,-26],[4,-45],[77,-23],[50,12],[74,-91],[39,-5],[28,-54],[38,-7],[39,-45],[-15,-24],[19,-54],[-45,-23],[-82,-10],[-100,-35],[-46,49],[-41,-5],[-26,-35],[-32,-5],[-81,39],[-42,2],[-37,36],[31,22],[11,57],[-39,24],[-9,39],[-52,-1],[-23,51],[-3,83],[55,11],[-35,36],[-80,-8],[-95,25],[-32,32],[-59,-18],[-38,35],[-99,-12],[-67,-42],[-18,15],[-74,12],[-66,-21],[-27,16],[-18,47],[32,30],[67,39],[-36,54],[-66,-14],[-34,17],[-57,64],[43,38],[64,10],[59,48],[-7,53],[56,-12],[65,4],[21,-26],[48,0],[24,18],[122,1]],[[37486,18778],[-21,-16],[-8,-45],[-32,-17],[-112,-29],[-1,-36],[62,-39],[-13,-31],[24,-75],[67,-37],[41,-44],[-6,-35],[-59,-18],[-38,27],[-22,-43],[79,-19],[31,-29],[4,-62],[-41,-49],[15,-26],[48,-26],[73,-11],[18,-42],[-120,-29],[-71,7],[-74,-19],[-19,-44],[13,-31],[75,-15],[46,15],[45,34],[23,-16],[-40,-54],[-97,-80],[23,-52],[63,17],[48,-32],[-25,-87],[41,-52],[63,-44],[13,-22],[-43,-37],[-31,-64],[-35,-29],[-167,-54],[-85,-47],[-72,-59],[-23,-39],[-51,-24],[-42,-45],[-38,-6],[-201,-4],[-117,-12],[-77,-14],[-87,-36],[-85,-21],[-174,-62],[-146,-63],[-181,-65],[-103,-44],[-114,-39],[-174,-31],[-71,-1],[-106,-35],[-42,-1],[-63,-29],[-106,-9],[-67,-23],[-78,28],[-76,14],[-65,-9],[-213,-10],[-106,20],[-13,15],[-73,16],[-46,24],[-30,-2],[-37,27],[15,30],[99,34],[44,30],[6,40],[-27,25],[-132,54],[-31,37],[-24,-18],[36,-36],[116,-52],[7,-43],[-177,-57],[-42,-57],[-26,-73],[-92,-60],[-183,-79],[-97,-36],[-105,1],[-17,-35],[-88,-34],[-156,-71],[-110,-32],[-42,-25],[-35,3],[-55,-30],[-175,-52],[-45,16],[-79,-39],[-4,-31],[-34,-33],[9,-23],[-54,-60],[-42,-20],[-4,-57],[-49,-40],[-157,-111],[-51,13],[-52,-80],[26,-39],[-64,-139],[-7,-142],[19,-49],[-9,-22],[-55,-8],[-43,-21],[-76,-10],[-4,-17],[-86,-7],[-146,16],[-108,24],[-93,-23],[-82,-44],[-110,0],[-47,-36],[-41,17],[-61,-34],[-22,-41],[-27,23],[-67,1],[-22,27],[-46,11],[-30,-12],[-25,-66],[-91,47],[-68,19],[-52,2],[-67,-41],[-73,-14],[-83,-39],[-85,-22],[-157,28],[-159,0],[-80,-10],[-16,16],[-225,-30],[-53,53],[-131,15],[-37,-9],[-82,12],[-124,-6],[-81,11],[-98,24],[-61,22],[-53,-16],[-117,33],[-66,1],[-126,24],[-78,6],[-41,15],[-72,-1],[-68,-19],[-58,-4],[-115,27],[-77,10],[-84,113],[-89,51],[-73,116],[-32,7],[-26,49],[-95,73],[-48,-8],[-26,50],[-85,41],[-94,35],[-62,15],[-111,77],[-3,76],[-95,71],[-76,22],[-78,6],[-68,-11],[-51,-43],[-65,16],[-50,-2],[-87,13],[-25,-40],[-49,20],[-39,-5],[-63,38],[-44,4],[-74,129],[-58,36],[-12,28],[-82,24],[-46,32],[24,27],[-39,43],[-84,137],[-51,112],[2,16],[-82,97],[-88,121],[-95,98],[-25,13],[-54,-17],[7,39],[-30,58],[-48,47],[-134,96],[-264,153],[-67,59],[76,44],[-5,28],[-54,-27],[-56,-8],[-124,12],[-45,-17],[-77,-10],[-142,21],[-93,-56],[-157,-37],[-81,20],[-21,20],[-117,3],[-208,-22],[-158,-43],[-92,-46],[-58,-36],[-35,-41],[-40,-76],[-11,-71],[27,-47],[58,-26],[148,-39],[-62,-44],[-99,-16],[-70,18],[-59,28],[-60,2],[-16,-39],[-40,4],[-64,-12],[-29,35],[-86,33],[-94,-45],[-25,8],[-46,-19],[-64,-4],[-20,-59],[-62,-3],[-73,44],[-75,-7],[-54,9],[-16,22],[-56,10],[-76,-3],[-39,38],[-91,33],[-57,-33],[-30,7],[-119,-9],[-80,1],[-8,-14],[-86,-35],[-65,-52],[-16,-36],[137,-73],[-3,-46],[-52,-24],[-45,5],[-46,31],[-47,2],[-72,19],[-64,3],[-22,14],[-54,-13],[-70,12],[-65,-8],[-64,-27],[-31,-77],[-26,5],[-20,35],[-85,-8],[-121,16],[-239,94],[-58,31],[-58,10],[-63,40],[-54,22],[-81,15],[-56,-35],[-86,50],[78,43],[71,9],[16,66],[-13,75],[-60,125],[-117,145],[50,26],[87,21],[37,-14],[76,0],[47,29],[59,78],[56,29],[81,11],[37,20],[57,83],[38,84],[77,-10],[49,-56],[-50,-62],[-45,-28],[-1,-23],[102,18],[50,-17],[19,-36],[77,-1],[-33,34],[53,24],[69,-9],[31,-35],[51,-11],[72,2],[78,-12],[43,8],[55,-16],[62,-3],[70,47],[41,53],[57,15],[98,-16],[58,15],[-27,28],[59,31],[33,-10],[44,15],[58,-4],[36,15],[34,65],[111,38],[118,27],[73,-17],[60,40],[-21,45],[111,60],[-27,62],[-41,21],[-19,42],[35,34],[51,-3],[42,68],[30,29],[12,43],[78,7],[-7,20],[-71,-11],[-56,-33],[11,-25],[-32,-41],[-60,-17],[-73,0],[-11,-38],[15,-47],[6,-80],[-31,-39],[12,-44],[-120,-9],[-43,-15],[-319,-34],[-18,26],[-44,-17],[-46,8],[-47,-49],[-78,7],[-92,65],[-10,27],[-92,90],[-2,-36],[-93,106],[-143,30],[-143,14],[-76,2],[-69,-20],[-6,-35],[-104,-2],[-82,-14],[-84,6],[-126,-30],[6,-30],[-111,-38],[-70,-14],[-147,9],[-112,35],[-150,68],[-116,74],[-127,89],[-81,63],[-126,110],[-61,93],[-46,57],[-6,41],[57,11],[44,-27],[97,4],[42,-20],[-34,-33],[1,-23],[166,24],[100,-47],[20,24],[111,-5],[-2,39],[-49,35],[34,48],[-95,22],[-56,1],[-37,-13],[-49,14],[-103,8],[-86,-5],[-67,53],[-47,50],[-4,64],[9,38],[33,60],[-3,43],[66,47],[31,72],[-37,49],[22,37],[80,18],[124,66],[95,0],[85,33],[24,25],[5,72],[30,35],[6,77],[-82,57],[104,68],[44,55],[-23,53],[-34,-108],[-99,-59],[0,-14],[74,-53],[-4,-58],[-33,-43],[-5,-50],[-21,-51],[-73,-20],[-69,8],[-149,-44],[-61,-7],[-85,-44],[-34,-49],[2,-55],[-29,-40],[-147,-120],[-62,-9],[-22,-32],[-75,-27],[-96,27],[-19,23],[-79,19],[-88,-2],[-11,19],[-99,39],[6,23],[63,27],[12,49],[-78,68],[-68,11],[-29,24],[-32,-12],[110,-73],[-35,-57],[-74,-49],[35,-78],[44,-6],[62,-28],[75,-58],[146,-78],[25,-34],[-38,-17],[-123,-27],[-96,-45],[-172,-17],[-203,23],[-162,14],[-207,25],[-386,41],[-90,-49],[-59,12],[-48,-40],[-114,23],[-206,15],[-92,-9],[-88,-34],[-41,14],[-213,-22],[-87,-17],[-135,-41],[-101,-47],[-115,-114],[40,-57],[89,-92],[-111,-109],[-57,-83],[-1,-25],[44,-38],[-57,-24],[-57,-44],[-70,-72],[-9,-41],[-41,-10],[-113,11],[-43,-6],[-41,20],[-55,-15],[-107,11],[-48,-49],[12,-25],[-82,-21],[-19,-15],[-66,-3],[-1,-31],[-39,-44],[-50,5],[-8,27],[-95,-4],[-101,14],[-7,51],[-84,10],[-13,-20],[-81,-6],[-26,47],[-72,6],[-13,-27],[-75,-4],[-63,17],[-109,6],[-63,-37],[-16,-48],[-84,-14],[-33,-45],[-58,-17],[-40,4],[-66,-28],[-43,-44],[31,-24],[-61,-47],[30,-28],[40,-12],[-10,-29],[-45,23],[-80,-17],[-27,5],[-31,-35],[-45,23],[-23,-73],[-19,-10],[-12,-57],[-40,26],[-91,-15],[-76,4],[-27,23],[-67,19],[6,19],[-96,22],[-67,-1],[-53,35],[-54,3],[-68,32],[-5,-18],[-119,-5],[-56,-19],[-88,26],[-60,30],[-87,20],[-17,20],[-68,-3],[-14,16],[-50,-5],[-134,16],[-30,23],[3,64],[46,34],[49,5],[23,40],[-1,39],[-51,90],[-31,31],[-15,43],[-49,58],[-198,20],[-100,33],[-60,-14],[-85,41],[-90,18],[-7,40],[-54,48],[41,21],[41,-3],[84,15],[-22,71],[50,-2],[96,-20],[75,4],[78,-6],[-7,-80],[23,-27],[131,-24],[58,10],[86,-19],[55,7],[32,45],[-23,37],[-50,20],[-21,37],[5,34],[65,8],[62,-13],[30,16],[80,-4],[66,-29],[164,-20],[90,0],[65,-12],[25,-37],[80,-71],[-12,-32],[65,-5],[87,25],[117,-11],[28,14],[91,-4],[46,-17],[30,64],[-62,-12],[-67,1],[-78,13],[-45,19],[-66,2],[-63,25],[46,47],[65,25],[14,44],[159,-20],[-8,34],[90,25],[18,29],[39,-5],[86,-30],[-15,-33],[42,-35],[57,-14],[11,17],[-66,51],[84,40],[51,45],[120,-3],[40,27],[28,62],[122,4],[90,-23],[85,-88],[67,-33],[27,-50],[24,33],[-40,23],[20,43],[-92,77],[-56,34],[27,18],[70,-5],[52,58],[-105,-31],[-75,-1],[-59,16],[-28,-38],[-61,-19],[-56,10],[-4,73],[14,55],[86,-3],[-38,45],[-32,-13],[-65,32],[-90,25],[32,40],[12,52],[-15,43],[41,37],[18,92],[30,19],[129,37],[47,30],[33,80],[99,34],[125,15],[67,27],[-155,-8],[-69,-16],[-81,-41],[-32,-52],[-57,-44],[-73,-2],[-36,-25],[-27,4],[-68,-45],[-106,47],[-70,1],[-100,17],[-96,-34],[-50,-40],[-46,3],[-19,35],[14,63],[65,28],[-5,21],[-87,-40],[-23,-59],[33,-58],[62,-15],[166,57],[57,3],[51,-14],[89,-45],[16,-30],[-73,-13],[64,-67],[15,-63],[-62,-23],[49,-85],[91,-31],[43,-28],[-24,-44],[16,-20],[-54,-80],[5,-35],[-20,-25],[-90,11],[-51,-9],[-76,-49],[-40,-12],[-80,38],[-61,7],[-53,-12],[-32,-32],[-35,-9],[-94,32],[-88,-21],[-35,2],[-84,-44],[-81,-18],[-160,18],[-75,15],[-176,67],[-82,18],[-73,-35],[-74,8],[-80,-6],[-34,22],[-45,-22],[-51,-1],[-47,-15],[-34,11],[-70,-11],[-29,12],[-3,49],[-69,46],[-4,42],[-96,24],[-34,-76],[-32,7],[-67,-56],[-7,32],[-55,31],[-101,-20],[-10,-27],[-76,13],[-58,-14],[-74,2],[-50,48],[-62,22],[-57,-47],[43,-36],[6,-47],[93,-27],[42,-66],[-5,-33],[-45,-10],[21,-55],[-45,-5],[-71,8],[-29,-33],[15,-34],[-49,-9],[-6,22],[-64,31],[8,36],[-62,7],[20,40],[-42,59],[31,43],[-34,49],[-72,19],[-37,-2],[-18,29],[21,37],[-62,40],[-76,23],[-75,5],[-46,-24],[-62,40],[-28,-2],[-78,45],[-5,25],[-67,23],[-27,28],[76,4],[21,-19],[73,13],[102,1],[48,-9],[35,-21],[75,-7],[56,42],[0,42],[27,34],[7,39],[-22,30],[28,25],[47,14],[59,-15],[48,0],[37,42],[45,12],[24,46],[91,20],[7,24],[52,27],[31,-11],[80,15],[88,-23],[39,31],[85,-43],[83,-7],[51,23],[83,55],[28,31],[-8,114],[-15,50],[4,77],[22,17],[-43,139],[-34,15],[-29,40],[-1,128],[-29,65],[-116,148],[-23,2],[-32,40],[-55,15],[-27,-18],[-79,6],[-52,-15],[-43,4],[-68,31],[-36,-13],[-72,0],[-24,36],[-85,10],[-103,-10],[-68,16],[-43,-17],[-14,22],[-87,32],[-115,7],[-98,-25],[-50,27],[-45,-45],[-36,39],[-67,-40],[-54,30],[-85,-39],[-23,16],[-35,-32],[-109,-23],[-53,-27],[-15,47],[-39,-24],[-110,-38],[-67,20],[9,41],[38,4],[9,27],[37,5],[30,52],[-75,68],[-8,34],[68,27],[43,-17],[28,35],[58,36],[-3,46],[-30,29],[-59,1],[-54,21],[-9,22],[79,40],[113,30],[12,17],[54,3],[108,-25],[42,21],[45,2],[49,22],[22,-7],[59,19],[35,43],[58,1],[137,93],[59,-14],[16,19],[121,8],[39,22],[-5,55],[87,19],[-23,32],[42,13],[28,38],[121,3],[63,10],[11,-24],[48,8],[37,-18],[98,9],[5,42],[53,2],[82,60],[46,43],[70,-28],[64,14],[18,-16],[133,8],[59,28],[-5,46],[76,-3],[34,10],[60,-15],[35,28],[7,33],[-31,21],[-14,45],[60,59],[-85,11],[6,38],[-39,28],[199,97],[-58,15],[-11,50],[-78,29],[-3,48],[56,50],[98,35],[1,28],[87,25],[46,-39],[50,-27],[51,27],[27,-17],[68,14],[40,-23],[26,12],[77,-27],[31,-34],[79,32],[40,-4],[73,12],[76,-17],[44,11],[33,-12],[5,-67],[41,-4],[-36,-64],[-69,-48],[62,-55],[46,16],[59,0],[45,-27],[30,32],[30,6],[41,-19],[82,35],[92,11],[36,35],[117,17],[20,21],[44,-4],[62,63],[27,3],[44,33],[-31,31],[-51,16],[19,41],[43,17],[0,24],[59,7],[121,-43],[-7,-73],[62,1],[28,-29],[207,4],[52,23],[53,-13],[72,1],[82,-14],[44,16],[-16,31],[-55,-4],[39,50],[-14,46],[-65,20],[-17,22],[17,39],[79,53],[-5,25],[78,11],[14,22],[97,24],[77,7],[128,-1],[71,19],[60,30],[21,47],[61,23],[101,76],[54,23],[105,123],[-9,22],[79,30],[28,27],[-46,70],[93,28],[29,30],[3,40],[34,25],[69,-29],[21,-25],[85,-20],[16,-23],[77,-7],[9,-16],[81,-4],[48,-60],[73,-39],[5,-112],[35,35],[28,52],[6,73],[-73,43],[-63,-6],[35,53],[-24,67],[-46,34],[27,19],[17,73],[93,-4],[58,6],[28,28],[78,6],[30,18],[108,-6],[63,17],[-17,29],[84,7],[193,-5],[101,21],[58,-20],[139,-7],[85,30],[17,24],[65,13],[69,-1],[49,-14],[23,-41],[44,0],[51,-55],[29,26],[66,-13],[112,7],[63,-3],[76,35],[55,14],[85,41],[57,44],[32,54],[107,53],[65,12],[36,85],[77,-14],[54,3],[26,18],[54,1],[47,46],[46,7],[80,33],[100,79],[26,29],[88,26],[24,34],[76,34],[44,52],[45,28],[44,10],[53,71],[142,43],[36,-4],[33,-54],[28,-22],[100,-5],[86,40],[40,-14],[74,7],[108,43],[108,54],[72,46],[35,1],[51,36],[58,20],[84,56],[40,3],[39,41],[121,49],[72,1],[78,13],[47,17],[164,79],[42,26],[56,16],[49,37],[32,59],[65,33],[37,36],[51,99],[17,15],[67,13],[53,24],[48,48],[31,60],[58,21],[68,75],[43,21],[81,85],[-3,23],[31,57],[73,46],[33,50],[11,51],[32,46],[16,77],[23,40],[43,41],[7,48],[27,39],[55,49],[70,105],[47,33],[19,40],[-14,51],[9,83],[44,32],[-9,66],[43,66],[22,14],[-28,66],[50,123],[78,140],[11,42],[41,25],[24,50],[91,31],[11,56],[-9,116],[-41,194],[-21,58],[1,67],[35,47],[35,13],[8,-57],[95,-42],[15,-22],[90,14],[111,-3],[12,26],[44,1],[116,63],[36,-2],[31,28],[115,9],[129,46],[62,40],[-5,40],[46,11],[53,54],[66,38],[-127,11],[-92,-49],[-62,8],[-91,-15],[-62,-23],[-24,5],[-191,-55],[-123,-6],[-67,-19],[-30,5],[-116,-29],[-127,-13],[-96,21],[-35,35],[-115,178],[-132,156],[-82,108],[-113,111],[46,19],[77,-44],[80,11],[70,-1],[9,36],[-79,32],[-133,-28],[-52,1],[-88,40],[-36,48],[46,98],[10,43],[55,76],[2,45],[27,46],[45,42],[95,136],[35,21],[21,43],[100,28],[148,100],[83,44],[44,15],[9,52],[-22,157],[23,-30],[50,-13],[107,17],[84,30],[-35,52],[85,5],[77,39],[49,3],[18,-36],[59,66],[76,22],[75,73],[24,51],[63,17],[71,2],[57,18],[83,57],[102,49],[-92,4],[-73,-15],[-67,-48],[-81,-26],[-34,-23],[-92,2],[-76,-16],[-9,-13],[-86,-15],[-85,0],[-65,-34],[-34,-73],[-53,-36],[-51,0],[-33,-18],[-62,5],[-29,-25],[-54,15],[-90,128],[-80,87],[-49,76],[-197,173],[-70,50],[-82,74],[-166,130],[-113,104],[-59,65],[-22,59],[53,58],[75,38],[18,-40],[42,3],[21,20],[116,43],[12,48],[-72,-5],[-11,53],[24,52],[51,49],[4,29],[-23,59],[-67,99],[-126,135],[-57,70],[-11,43],[22,52],[56,28],[89,13],[110,-2],[101,28],[231,15],[48,32],[29,40],[50,25],[20,53],[43,12],[69,1],[89,70],[-7,22],[-87,-44],[-117,8],[-126,-44],[-58,-47],[-66,-17],[-52,-41],[-34,9],[-45,61],[-83,30],[10,27],[-81,21],[29,33],[-38,19],[-5,-42],[-39,-78],[-34,-31],[-90,-36],[-57,1],[-24,-40],[-112,-10],[-81,8],[-64,16],[-173,68],[-62,-6],[-164,49],[-119,0],[-26,-39],[-32,5],[-193,-19],[-32,-20],[-88,-13],[-145,11],[-88,-9],[-103,2],[-162,-22],[-85,-38],[1,-42],[-30,-38],[5,-48],[-204,26],[-277,19],[-135,-8],[-51,-11],[-72,-39],[-41,-56],[-15,56],[-100,-32],[59,-40],[12,-22],[-177,-22],[-142,-31],[-154,-48],[-79,-33],[10,-39],[-92,-39],[-33,-23],[-24,-44],[66,-30],[-17,-45],[-80,-16],[-125,-57],[-74,-76],[-16,-44],[57,-13],[-36,-68],[14,-60],[29,-26],[67,-2],[21,17],[30,-30],[24,-48],[-25,-27],[-14,-64],[-47,-36],[-59,41],[-85,-3],[-89,-17],[-48,-73],[7,-39],[-37,-5],[-54,-36],[-48,34],[-91,49],[7,67],[51,75],[-178,99],[-180,77],[-91,32],[-128,30],[-94,11],[-80,-6],[-43,-27],[-90,-122],[-83,-46],[-49,-8],[-51,-40],[-68,-10],[-11,42],[-106,28],[-101,-32],[-25,-18],[-51,-4],[-69,-38],[-15,-28],[-42,4],[-7,50],[-129,32],[-107,8],[-48,-7],[-54,-126],[-17,-9],[-43,-74],[-32,4],[-40,31],[-16,-18],[-105,40],[-45,3],[-109,59],[-7,42],[36,3],[16,28],[51,11],[67,42],[-11,92],[144,90],[40,74],[24,-1],[89,65],[-4,40],[-28,12],[-9,42],[33,28],[-35,29],[32,20],[89,4],[90,38],[37,-10],[51,6],[38,36],[10,92],[47,40],[73,-13],[50,7],[63,36],[35,50],[-21,52],[62,34],[34,46],[35,14],[52,74],[94,-17],[23,18],[52,1],[46,36],[50,55],[-5,20],[48,49],[37,19],[28,-7],[45,25],[81,0],[46,9],[41,33],[73,37],[27,39],[93,11],[36,17],[45,-24],[68,-10],[77,3],[75,14],[116,-15],[88,27],[134,77],[21,29],[49,-2],[86,57],[57,50],[34,49],[36,12],[44,-14],[61,43],[44,55],[32,64],[20,16],[148,66],[38,57],[34,30],[78,11],[136,-28],[79,24],[49,49],[65,34],[58,55],[56,19],[108,65],[40,44],[42,10],[35,36],[80,24],[26,33],[17,81],[74,30],[29,64],[-5,64],[17,45],[-4,95],[18,34],[-15,105],[-49,79],[-40,95],[-8,53],[13,40],[73,70],[77,12],[26,-28],[-29,-75],[72,-38],[0,-50],[26,-24],[61,-16],[42,52],[-8,17],[12,81],[-18,29],[12,35],[-17,25],[18,33],[60,38],[46,8],[74,42],[92,30],[57,3],[17,27],[68,44],[27,43],[55,42],[42,60],[124,70],[19,24],[222,73],[25,27],[47,12],[31,37],[25,82],[-5,54],[15,55],[136,85],[104,23],[81,31],[124,5],[27,9],[140,93],[98,18],[88,48],[54,14],[50,-46],[122,0],[58,27],[54,7],[58,-17],[1,-28],[54,-33],[35,20],[59,10],[67,24],[186,4],[143,33],[58,26],[12,28],[161,16],[21,25],[87,24],[-18,37],[139,35],[42,32],[115,14],[54,25],[167,38],[83,4],[99,16],[187,61],[175,92],[43,8],[111,41],[77,-21],[73,8],[49,19],[84,56],[59,10],[44,-11],[17,-48],[33,1],[16,-37],[47,-6],[4,-30],[54,-43],[67,-20],[46,-97],[22,-29],[-85,-40],[-34,-3],[-54,-77],[12,-26],[81,-45],[73,-25],[30,-27],[6,-43],[-17,-18],[-133,-56],[21,-46],[-83,-41],[20,-13],[75,53],[-20,38],[35,18],[95,28],[32,29],[-6,56],[-31,31],[-121,74],[39,58],[55,14],[108,53],[24,25],[11,70],[-25,-4],[-84,62],[-93,41],[-47,32],[-28,45],[-29,-6],[-26,36],[-71,15],[-21,86],[-36,60],[1,69],[-10,21],[-61,40],[-81,25],[-61,35],[-125,38],[-22,44],[110,55],[97,-19],[45,7],[136,-46],[77,11],[3,-31],[45,-54],[-2,-41],[96,-26],[137,1],[171,23],[97,39],[76,-51],[64,-53],[152,-29],[55,-2],[45,-15],[4,-86],[66,-51],[173,-56],[181,-15],[161,12],[88,-16],[172,-7],[202,24],[126,-41],[61,-4],[147,15],[236,52],[199,52],[195,69],[88,23],[103,38],[69,17],[9,-39],[45,-41],[51,-25],[13,16],[-89,47],[61,54],[145,81],[161,39],[31,-5],[103,13],[120,25],[123,38],[219,56],[291,63],[104,28],[122,22],[66,-7],[212,27],[100,5],[94,-6],[57,-17],[-15,-51],[1,-49],[45,-38],[13,-41],[55,-41],[147,-68],[52,-33],[52,-13],[92,30],[45,-55],[-4,-22],[40,-24],[31,1],[151,-60],[21,-18],[153,-52],[191,-71],[79,-46],[57,-54],[71,-45],[60,-23],[84,-49],[45,-35],[101,-42],[88,-49],[101,-9],[28,-47],[97,-45],[130,-41],[109,-55],[156,-46],[113,-52],[102,-84],[103,-5],[109,-26],[143,-56],[99,-32],[745,-264],[54,-18],[134,9]],[[19948,35639],[34,-26],[145,13],[-9,-51],[37,-14],[56,19],[13,32],[75,-14],[60,-1],[28,16],[63,-18],[61,-31],[13,-34],[31,-16],[88,-13],[20,15],[87,6],[43,26],[59,-24],[76,12],[190,-41],[90,-1],[36,-17],[29,48],[75,-64],[-14,-39],[59,-15],[48,-31],[-6,-50],[44,-19],[1,-89],[-79,-65],[3,-22],[-48,-21],[-90,-87],[25,-22],[47,16],[79,46],[24,41],[86,-79],[6,-65],[81,-16],[59,19],[105,-24],[25,-16],[77,7],[-51,-86],[55,-33],[10,-27],[-37,-35],[25,-30],[51,5],[7,-53],[27,-24],[23,-105],[148,-52],[-31,-72],[-58,-47],[-13,-31],[43,-25],[89,-8],[72,25],[64,-1],[63,23],[74,11],[20,18],[243,12],[44,10],[22,48],[43,17],[18,30],[160,45],[95,-1],[39,-12],[72,-1],[64,-31],[34,4],[52,-15],[123,-15],[143,27],[114,-35],[41,1],[-46,-65],[-65,-5],[-54,-32],[-10,-58],[-68,-9],[-63,-51],[-39,-84],[-104,-62],[5,-73],[-16,-44],[-104,-19],[-78,-66],[-46,-26],[-141,-47],[-130,-63],[-58,-33],[-66,-21],[-61,-32],[-24,1],[-13,-59],[-24,-45],[-42,-12],[-48,42],[-74,-14],[-80,-65],[-143,-17],[-74,-37],[-67,-71],[-11,-49],[16,-48],[-19,-55],[-83,-52],[-63,-28],[-54,1],[-89,-24],[-36,-33],[-82,-29],[-90,-61],[-61,-9],[-53,-38],[-53,-64],[-165,-73],[-192,-44],[-51,2],[-14,40],[-29,-14],[-86,11],[-9,-58],[-47,-38],[-7,-44],[95,-59],[-221,26],[-51,12],[-197,92],[-139,34],[-98,3],[-27,-12],[-99,124],[-22,67],[15,32],[69,-1],[62,16],[58,32],[-19,38],[48,7],[45,-19],[64,85],[15,48],[-47,51],[-96,-38],[-57,-68],[-81,-25],[-39,-80],[-65,-21],[-42,-26],[-29,-53],[-96,-25],[-48,-29],[-5,55],[-53,8],[-38,88],[-24,1],[-44,49],[10,39],[-88,50],[-76,-38],[-65,4],[-55,-36],[-32,19],[3,34],[29,23],[-52,28],[-36,-16],[-89,11],[-3,41],[-21,21],[20,55],[48,53],[-9,29],[-35,-2],[-10,27],[38,20],[-26,37],[-122,80],[-44,-5],[-34,39],[28,49],[-49,40],[-99,15],[-12,23],[-52,37],[-77,34],[-29,23],[4,65],[-55,47],[-9,41],[-160,115],[-25,-14],[-91,43],[-12,27],[115,49],[31,43],[63,37],[104,41],[94,24],[-33,26],[-76,-7],[-52,-30],[-9,40],[8,60],[20,43],[-31,45],[-61,3],[-20,59],[-105,13],[17,22],[-33,33],[44,24],[55,-4],[51,50],[-15,21],[36,45],[-18,31],[28,18],[5,79],[40,8],[21,31],[45,132],[-74,54],[-49,50],[25,53],[-68,12],[10,34],[-12,40],[-38,5],[24,46],[105,32],[56,-32],[61,1],[25,20],[183,-2],[19,36],[43,28],[41,-2],[54,25],[34,-45],[71,-11],[20,36],[61,8],[23,-18],[52,4],[-7,30],[110,71],[28,-37],[110,-25],[66,-3],[78,-25],[-25,48],[72,33],[94,68],[74,-3],[28,23],[26,-14]]],Ep={scale:[9999999999999998e-20,9999831828195693e-20],translate:[-6.4181,49.8649]},Tp={rgn:{type:"GeometryCollection",geometries:[{arcs:[[[0]],[[1,2,3,4,5]],[[6]]],type:"MultiPolygon",properties:{areacd:"E12000001",areanm:"North East"}},{arcs:[[[9]],[[10]],[[11]],[[12]],[[13]],[[14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,-5]]],type:"MultiPolygon",properties:{areacd:"E12000002",areanm:"North West"}},{arcs:[[[32]],[[33,34]],[[36,-15,-4,37]]],type:"MultiPolygon",properties:{areacd:"E12000003",areanm:"Yorkshire and The Humber"}},{arcs:[[[40,41]],[[42]],[[43]],[[44,45,46,47,-16,-37,48,-34,49]]],type:"MultiPolygon",properties:{areacd:"E12000004",areanm:"East Midlands"}},{arcs:[[50,51,52,-17,-48]],type:"Polygon",properties:{areacd:"E12000005",areanm:"West Midlands"}},{arcs:[[[53]],[[54]],[[55]],[[56]],[[57]],[[58]],[[59]],[[60]],[[61]],[[62]],[[63]],[[64]],[[65]],[[66]],[[67]],[[68]],[[69]],[[70]],[[71]],[[72]],[[73]],[[74]],[[75]],[[77]],[[78]],[[79]],[[80]],[[81]],[[82]],[[83]],[[84]],[[85]],[[86]],[[87]],[[88,89,90,91,92,93,-46,94,-41,95]],[[96]]],type:"MultiPolygon",properties:{areacd:"E12000006",areanm:"East of England"}},{arcs:[[97,98,-93]],type:"Polygon",properties:{areacd:"E12000007",areanm:"London"}},{arcs:[[[101]],[[102]],[[103]],[[104]],[[105]],[[106]],[[107]],[[108]],[[109]],[[110]],[[111]],[[112]],[[113]],[[114]],[[115,116,-51,-47,-94,-99,117]]],type:"MultiPolygon",properties:{areacd:"E12000008",areanm:"South East"}},{arcs:[[[118]],[[119]],[[120]],[[121]],[[122]],[[123]],[[124]],[[125]],[[126]],[[127]],[[128]],[[129]],[[-117,-101,130,131,-52]]],type:"MultiPolygon",properties:{areacd:"E12000009",areanm:"South West"}}]},ctry:{type:"GeometryCollection",geometries:[{arcs:[[[118]],[[119]],[[120]],[[121]],[[122]],[[123]],[[124]],[[125]],[[126]],[[127]],[[128]],[[101]],[[102]],[[103]],[[104]],[[105]],[[106]],[[129]],[[107]],[[108]],[[109]],[[110]],[[111]],[[112]],[[113]],[[114]],[[53]],[[54]],[[55]],[[56]],[[57]],[[58]],[[59]],[[60]],[[61]],[[62]],[[63]],[[64]],[[65]],[[66]],[[67]],[[68]],[[69]],[[70]],[[71]],[[72]],[[73]],[[74]],[[75]],[[42]],[[43]],[[77]],[[78]],[[79]],[[80]],[[81]],[[82]],[[83]],[[84]],[[85]],[[86]],[[87]],[[96]],[[32]],[[9]],[[10]],[[11]],[[12]],[[13]],[[0]],[[44,94,41,95,88,89,90,91,97,117,115,99,130,131,52,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,5,35,2,37,48,34,49]],[[6]]],type:"MultiPolygon",properties:{areacd:"E92000001",areanm:"England"}},{arcs:[[[132]],[[133]],[[134]],[[135]],[[136]],[[137]],[[138]],[[139]],[[140]],[[-22,141]],[[-8,142,-20,143]],[[147,-30]],[[-31,148]],[[149]],[[-18,-53,-132,150]],[[151]]],type:"MultiPolygon",properties:{areacd:"W92000004",areanm:"Wales"}}]},ew:{type:"GeometryCollection",geometries:[{arcs:[[[118]],[[119]],[[120]],[[121]],[[122]],[[123]],[[124]],[[125]],[[126]],[[127]],[[128]],[[101]],[[102]],[[103]],[[104]],[[105]],[[106]],[[129]],[[107]],[[108]],[[109]],[[110]],[[111]],[[112]],[[113]],[[114]],[[53]],[[54]],[[55]],[[56]],[[57]],[[58]],[[59]],[[60]],[[61]],[[62]],[[63]],[[64]],[[65]],[[66]],[[67]],[[68]],[[69]],[[70]],[[71]],[[72]],[[73]],[[74]],[[75]],[[42]],[[43]],[[77]],[[78]],[[79]],[[80]],[[81]],[[82]],[[83]],[[84]],[[85]],[[86]],[[87]],[[96]],[[44,94,41,95,88,89,90,91,97,117,115,99,130,150,18,143,8,142,20,141,22,144,24,145,26,146,28,147,148,31,5,35,2,37,48,34,49]],[[32]],[[9]],[[10]],[[11]],[[12]],[[13]],[[0]],[[6]],[[132]],[[133]],[[134]],[[135]],[[136]],[[137]],[[138]],[[139]],[[140]],[[149]],[[151]]],type:"MultiPolygon",properties:{areacd:"K04000001",areanm:"England and Wales"}}]}},kp={type:Sp,arcs:Ip,transform:Ep,objects:Tp};function ih(v,c,f){const y=v.slice();return y[2]=c[f],y}function Ap(v){let c=v[2].label+"",f;return{c(){f=Yt(c)},l(y){f=Jt(y,c)},m(y,x){Ge(y,f,x)},p(y,x){x&1&&c!==(c=y[2].label+"")&&xi(f,c)},d(y){y&&ae(f)}}}function zp(v){let c,f=v[2].label+"",y,x;return{c(){c=Ye("a"),y=Yt(f),this.h()},l(S){c=Je(S,"A",{class:!0,href:!0});var w=$e(c);y=Jt(w,f),w.forEach(ae),this.h()},h(){ue(c,"class","breadcrumb__link"),ue(c,"href",x=v[2].url)},m(S,w){Ge(S,c,w),Ne(c,y)},p(S,w){w&1&&f!==(f=S[2].label+"")&&xi(y,f),w&1&&x!==(x=S[2].url)&&ue(c,"href",x)},d(S){S&&ae(c)}}}function nh(v){let c,f;function y(w,a){return w[2].url?zp:Ap}let x=y(v),S=x(v);return{c(){c=Ye("li"),S.c(),f=Et(),this.h()},l(w){c=Je(w,"LI",{class:!0});var a=$e(c);S.l(a),f=Tt(a),a.forEach(ae),this.h()},h(){ue(c,"class","breadcrumb__item")},m(w,a){Ge(w,c,a),S.m(c,null),Ne(c,f)},p(w,a){x===(x=y(w))&&S?S.p(w,a):(S.d(1),S=x(w),S&&(S.c(),S.m(c,f)))},d(w){w&&ae(c),S.d()}}}function Cp(v){let c,f,y,x,S=v[0],w=[];for(let a=0;a<S.length;a+=1)w[a]=nh(ih(v,S,a));return{c(){c=Ye("nav"),f=Ye("div"),y=Ye("ol");for(let a=0;a<w.length;a+=1)w[a].c();this.h()},l(a){c=Je(a,"NAV",{"aria-label":!0});var A=$e(c);f=Je(A,"DIV",{class:!0});var O=$e(f);y=Je(O,"OL",{class:!0});var N=$e(y);for(let U=0;U<w.length;U+=1)w[U].l(N);N.forEach(ae),O.forEach(ae),A.forEach(ae),this.h()},h(){ue(y,"class","breadcrumb__list"),ue(f,"class",x=(v[1]=="neutral"?"breadcrumb-neutral":"breadcrumb")+" print--hide"),ue(c,"aria-label","Breadcrumbs")},m(a,A){Ge(a,c,A),Ne(c,f),Ne(f,y);for(let O=0;O<w.length;O+=1)w[O].m(y,null)},p(a,[A]){if(A&1){S=a[0];let O;for(O=0;O<S.length;O+=1){const N=ih(a,S,O);w[O]?w[O].p(N,A):(w[O]=nh(N),w[O].c(),w[O].m(y,null))}for(;O<w.length;O+=1)w[O].d(1);w.length=S.length}A&2&&x!==(x=(a[1]=="neutral"?"breadcrumb-neutral":"breadcrumb")+" print--hide")&&ue(f,"class",x)},i:Si,o:Si,d(a){a&&ae(c),Ar(w,a)}}}function Mp(v,c,f){let{links:y=[]}=c,{mode:x="neutral"}=c;return v.$$set=S=>{"links"in S&&f(0,y=S.links),"mode"in S&&f(1,x=S.mode)},[y,x]}class Pp extends Wi{constructor(c){super(),Xi(this,c,Mp,Cp,Ki,{links:0,mode:1})}}function rh(v,c,f){const y=v.slice();return y[2]=c[f],y}function sh(v){let c,f,y=v[2].label+"",x,S,w,a;return{c(){c=Ye("li"),f=Ye("a"),x=Yt(y),a=Et(),this.h()},l(A){c=Je(A,"LI",{});var O=$e(c);f=Je(O,"A",{href:!0,"data-gtm-title":!0,"data-gtm-type":!0});var N=$e(f);x=Jt(N,y),N.forEach(ae),a=Tt(O),O.forEach(ae),this.h()},h(){ue(f,"href",S=v[2].url),ue(f,"data-gtm-title",w=v[2].label),ue(f,"data-gtm-type","highlighted-links")},m(A,O){Ge(A,c,O),Ne(c,f),Ne(f,x),Ne(c,a)},p(A,O){O&2&&y!==(y=A[2].label+"")&&xi(x,y),O&2&&S!==(S=A[2].url)&&ue(f,"href",S),O&2&&w!==(w=A[2].label)&&ue(f,"data-gtm-title",w)},d(A){A&&ae(c)}}}function Lp(v){let c,f,y,x,S,w=v[1],a=[];for(let A=0;A<w.length;A+=1)a[A]=sh(rh(v,w,A));return{c(){c=Ye("div"),f=Ye("h2"),y=Yt(v[0]),x=Et(),S=Ye("ul");for(let A=0;A<a.length;A+=1)a[A].c();this.h()},l(A){c=Je(A,"DIV",{class:!0});var O=$e(c);f=Je(O,"H2",{class:!0});var N=$e(f);y=Jt(N,v[0]),N.forEach(ae),x=Tt(O),S=Je(O,"UL",{class:!0});var U=$e(S);for(let F=0;F<a.length;F+=1)a[F].l(U);U.forEach(ae),O.forEach(ae),this.h()},h(){ue(f,"class","margin-top-lg--1"),ue(S,"class","list--neutral margin-top--negative-one-fix"),ue(c,"class","nav-secondary--border-left-lg col col--md-47 col--lg-19 col--lg-offset-2 padding-left margin-top-lg--3")},m(A,O){Ge(A,c,O),Ne(c,f),Ne(f,y),Ne(c,x),Ne(c,S);for(let N=0;N<a.length;N+=1)a[N].m(S,null)},p(A,[O]){if(O&1&&xi(y,A[0]),O&2){w=A[1];let N;for(N=0;N<w.length;N+=1){const U=rh(A,w,N);a[N]?a[N].p(U,O):(a[N]=sh(U),a[N].c(),a[N].m(S,null))}for(;N<a.length;N+=1)a[N].d(1);a.length=w.length}},i:Si,o:Si,d(A){A&&ae(c),Ar(a,A)}}}function Dp(v,c,f){let{title:y="Highlighted content"}=c,{links:x=[]}=c;return v.$$set=S=>{"title"in S&&f(0,y=S.title),"links"in S&&f(1,x=S.links)},[y,x]}class Bp extends Wi{constructor(c){super(),Xi(this,c,Dp,Lp,Ki,{title:0,links:1})}}function ah(v,c,f){const y=v.slice();return y[2]=c[f],y}function oh(v){let c,f;return{c(){c=Ye("h2"),f=Yt(v[0]),this.h()},l(y){c=Je(y,"H2",{class:!0});var x=$e(c);f=Jt(x,v[0]),x.forEach(ae),this.h()},h(){ue(c,"class","ons-toc__title ons-u-fs-r--b ons-u-mb-s svelte-1dyzlhu")},m(y,x){Ge(y,c,x),Ne(c,f)},p(y,x){x&1&&xi(f,y[0])},d(y){y&&ae(c)}}}function Rp(v){let c,f=v[2].label+"",y;return{c(){c=Ye("li"),y=Yt(f),this.h()},l(x){c=Je(x,"LI",{class:!0,"aria-current":!0});var S=$e(c);y=Jt(S,f),S.forEach(ae),this.h()},h(){ue(c,"class","ons-list__item svelte-1dyzlhu"),ue(c,"aria-current","true")},m(x,S){Ge(x,c,S),Ne(c,y)},p(x,S){S&2&&f!==(f=x[2].label+"")&&xi(y,f)},d(x){x&&ae(c)}}}function Fp(v){let c,f,y=v[2].label+"",x,S,w;return{c(){c=Ye("li"),f=Ye("a"),x=Yt(y),w=Et(),this.h()},l(a){c=Je(a,"LI",{class:!0});var A=$e(c);f=Je(A,"A",{href:!0,class:!0});var O=$e(f);x=Jt(O,y),O.forEach(ae),w=Tt(A),A.forEach(ae),this.h()},h(){ue(f,"href",S=v[2].url),ue(f,"class","ons-list__link"),ue(c,"class","ons-list__item svelte-1dyzlhu")},m(a,A){Ge(a,c,A),Ne(c,f),Ne(f,x),Ne(c,w)},p(a,A){A&2&&y!==(y=a[2].label+"")&&xi(x,y),A&2&&S!==(S=a[2].url)&&ue(f,"href",S)},d(a){a&&ae(c)}}}function lh(v){let c;function f(S,w){return S[2].url?Fp:Rp}let y=f(v),x=y(v);return{c(){x.c(),c=ti()},l(S){x.l(S),c=ti()},m(S,w){x.m(S,w),Ge(S,c,w)},p(S,w){y===(y=f(S))&&x?x.p(S,w):(x.d(1),x=y(S),x&&(x.c(),x.m(c.parentNode,c)))},d(S){x.d(S),S&&ae(c)}}}function Op(v){let c,f,y,x=v[0]&&oh(v),S=v[1],w=[];for(let a=0;a<S.length;a+=1)w[a]=lh(ah(v,S,a));return{c(){c=Ye("nav"),x&&x.c(),f=Et(),y=Ye("ol");for(let a=0;a<w.length;a+=1)w[a].c();this.h()},l(a){c=Je(a,"NAV",{class:!0,"aria-label":!0});var A=$e(c);x&&x.l(A),f=Tt(A),y=Je(A,"OL",{class:!0});var O=$e(y);for(let N=0;N<w.length;N+=1)w[N].l(O);O.forEach(ae),A.forEach(ae),this.h()},h(){ue(y,"class","ons-list ons-u-mb-m ons-list--dashed svelte-1dyzlhu"),ue(c,"class","ons-toc svelte-1dyzlhu"),ue(c,"aria-label","Pages in this section")},m(a,A){Ge(a,c,A),x&&x.m(c,null),Ne(c,f),Ne(c,y);for(let O=0;O<w.length;O+=1)w[O].m(y,null)},p(a,[A]){if(a[0]?x?x.p(a,A):(x=oh(a),x.c(),x.m(c,f)):x&&(x.d(1),x=null),A&2){S=a[1];let O;for(O=0;O<S.length;O+=1){const N=ah(a,S,O);w[O]?w[O].p(N,A):(w[O]=lh(N),w[O].c(),w[O].m(y,null))}for(;O<w.length;O+=1)w[O].d(1);w.length=S.length}},i:Si,o:Si,d(a){a&&ae(c),x&&x.d(),Ar(w,a)}}}function Vp(v,c,f){let{title:y=null}=c,{links:x=[]}=c;return v.$$set=S=>{"title"in S&&f(0,y=S.title),"links"in S&&f(1,x=S.links)},[y,x]}class Up extends Wi{constructor(c){super(),Xi(this,c,Vp,Op,Ki,{title:0,links:1})}}function Np(v){let c,f,y,x,S,w,a,A,O;return{c(){c=Ye("div"),f=Ye("div"),y=Ye("dl"),x=Ye("div"),S=Ye("dt"),w=Yt(v[1]),a=Yt(":"),A=Et(),O=Ye("dd"),this.h()},l(N){c=Je(N,"DIV",{class:!0});var U=$e(c);f=Je(U,"DIV",{class:!0});var F=$e(f);y=Je(F,"DL",{class:!0});var ee=$e(y);x=Je(ee,"DIV",{class:!0});var ge=$e(x);S=Je(ge,"DT",{class:!0});var xe=$e(S);w=Jt(xe,v[1]),a=Jt(xe,":"),xe.forEach(ae),A=Tt(ge),O=Je(ge,"DD",{class:!0});var et=$e(O);et.forEach(ae),ge.forEach(ae),ee.forEach(ae),F.forEach(ae),U.forEach(ae),this.h()},h(){ue(S,"class","meta__term inline"),ue(O,"class","inline"),ue(x,"class","col padding-left--0 meta__item meta__item--no-border"),ue(y,"class","col-wrap"),ue(f,"class","wrapper"),ue(c,"class","meta-wrap--thin"),yi(c,"meta-wrap",v[0]=="grey")},m(N,U){Ge(N,c,U),Ne(c,f),Ne(f,y),Ne(y,x),Ne(x,S),Ne(S,w),Ne(S,a),Ne(x,A),Ne(x,O),O.innerHTML=v[2]},p(N,[U]){U&2&&xi(w,N[1]),U&4&&(O.innerHTML=N[2]),U&1&&yi(c,"meta-wrap",N[0]=="grey")},i:Si,o:Si,d(N){N&&ae(c)}}}function qp(v,c,f){let{background:y="grey"}=c,{label:x="Last updated"}=c,{value:S="date"}=c;return v.$$set=w=>{"background"in w&&f(0,y=w.background),"label"in w&&f(1,x=w.label),"value"in w&&f(2,S=w.value)},[y,x,S]}class Gp extends Wi{constructor(c){super(),Xi(this,c,qp,Np,Ki,{background:0,label:1,value:2})}}const jp=v=>({}),ch=v=>({});function uh(v){let c,f;return c=new Pp({props:{links:v[2],mode:v[1]=="none"?"neutral":v[0]}}),{c(){Nt(c.$$.fragment)},l(y){ni(c.$$.fragment,y)},m(y,x){qt(c,y,x),f=!0},p(y,x){const S={};x&4&&(S.links=y[2]),x&3&&(S.mode=y[1]=="none"?"neutral":y[0]),c.$set(S)},i(y){f||(Oe(c.$$.fragment,y),f=!0)},o(y){Ke(c.$$.fragment,y),f=!1},d(y){Gt(c,y)}}}function hh(v){let c,f;return{c(){c=Ye("p"),f=Yt(v[5]),this.h()},l(y){c=Je(y,"P",{class:!0});var x=$e(c);f=Jt(x,v[5]),x.forEach(ae),this.h()},h(){ue(c,"class","page-neutral-intro__meta margin-top--0 margin-bottom--3")},m(y,x){Ge(y,c,x),Ne(c,f)},p(y,x){x&32&&xi(f,y[5])},d(y){y&&ae(c)}}}function dh(v){let c,f;return c=new Up({props:{links:v[3],title:"Contents"}}),{c(){Nt(c.$$.fragment)},l(y){ni(c.$$.fragment,y)},m(y,x){qt(c,y,x),f=!0},p(y,x){const S={};x&8&&(S.links=y[3]),c.$set(S)},i(y){f||(Oe(c.$$.fragment,y),f=!0)},o(y){Ke(c.$$.fragment,y),f=!1},d(y){Gt(c,y)}}}function fh(v){let c,f;return c=new Bp({props:{links:v[4]}}),{c(){Nt(c.$$.fragment)},l(y){ni(c.$$.fragment,y)},m(y,x){qt(c,y,x),f=!0},p(y,x){const S={};x&16&&(S.links=y[4]),c.$set(S)},i(y){f||(Oe(c.$$.fragment,y),f=!0)},o(y){Ke(c.$$.fragment,y),f=!1},d(y){Gt(c,y)}}}function ph(v){let c,f;return c=new Gp({props:{label:"Last updated",value:v[6],background:v[1]}}),{c(){Nt(c.$$.fragment)},l(y){ni(c.$$.fragment,y)},m(y,x){qt(c,y,x),f=!0},p(y,x){const S={};x&64&&(S.value=y[6]),x&2&&(S.background=y[1]),c.$set(S)},i(y){f||(Oe(c.$$.fragment,y),f=!0)},o(y){Ke(c.$$.fragment,y),f=!1},d(y){Gt(c,y)}}}function mh(v){let c,f,y,x;return{c(){c=Ye("div"),f=Ye("div"),y=Ye("div"),x=Ye("hr"),this.h()},l(S){c=Je(S,"DIV",{class:!0});var w=$e(c);f=Je(w,"DIV",{class:!0});var a=$e(f);y=Je(a,"DIV",{class:!0});var A=$e(y);x=Je(A,"HR",{style:!0}),A.forEach(ae),a.forEach(ae),w.forEach(ae),this.h()},h(){Gi(x,"border","0"),Gi(x,"height","0"),Gi(x,"border-top","1px solid #808080"),ue(y,"class","col"),ue(f,"class","col-wrap"),ue(c,"class","wrapper")},m(S,w){Ge(S,c,w),Ne(c,f),Ne(f,y),Ne(y,x)},d(S){S&&ae(c)}}}function Zp(v){let c,f,y,x,S,w,a,A,O,N,U,F,ee,ge,xe=v[2]&&uh(v);const et=v[9].default,me=Ir(et,v,v[8],null);let Ve=v[5]&&hh(v),Ee=v[3]&&dh(v),fe=v[4]&&fh(v);const Pe=v[9].meta,He=Ir(Pe,v,v[8],ch);let Be=v[6]&&ph(v),Qe=v[1]=="none"&&v[7]&&mh();return{c(){c=Ye("div"),f=Ye("div"),y=Ye("div"),x=Ye("div"),xe&&xe.c(),S=Et(),w=Ye("div"),me&&me.c(),a=Et(),Ve&&Ve.c(),A=Et(),Ee&&Ee.c(),O=Et(),fe&&fe.c(),N=Et(),He&&He.c(),U=Et(),Be&&Be.c(),F=Et(),Qe&&Qe.c(),this.h()},l(ke){c=Je(ke,"DIV",{class:!0});var Xe=$e(c);f=Je(Xe,"DIV",{class:!0});var It=$e(f);y=Je(It,"DIV",{class:!0});var vt=$e(y);x=Je(vt,"DIV",{class:!0});var pt=$e(x);xe&&xe.l(pt),S=Tt(pt),w=Je(pt,"DIV",{class:!0});var bt=$e(w);me&&me.l(bt),a=Tt(bt),Ve&&Ve.l(bt),A=Tt(bt),Ee&&Ee.l(bt),bt.forEach(ae),O=Tt(pt),fe&&fe.l(pt),pt.forEach(ae),vt.forEach(ae),It.forEach(ae),N=Tt(Xe),He&&He.l(Xe),U=Tt(Xe),Be&&Be.l(Xe),F=Tt(Xe),Qe&&Qe.l(Xe),Xe.forEach(ae),this.h()},h(){ue(w,"class","col col--md-47"),yi(w,"col--lg-38",v[4]),yi(w,"col--lg-48",!v[4]),ue(x,"class","col"),ue(y,"class","col-wrap"),ue(f,"class","wrapper"),ue(c,"class",ee="page-neutral-intro "+(v[1]=="grey"?"background--gallery":""))},m(ke,Xe){Ge(ke,c,Xe),Ne(c,f),Ne(f,y),Ne(y,x),xe&&xe.m(x,null),Ne(x,S),Ne(x,w),me&&me.m(w,null),Ne(w,a),Ve&&Ve.m(w,null),Ne(w,A),Ee&&Ee.m(w,null),Ne(x,O),fe&&fe.m(x,null),Ne(c,N),He&&He.m(c,null),Ne(c,U),Be&&Be.m(c,null),Ne(c,F),Qe&&Qe.m(c,null),ge=!0},p(ke,[Xe]){ke[2]?xe?(xe.p(ke,Xe),Xe&4&&Oe(xe,1)):(xe=uh(ke),xe.c(),Oe(xe,1),xe.m(x,S)):xe&&(pi(),Ke(xe,1,1,()=>{xe=null}),mi()),me&&me.p&&(!ge||Xe&256)&&Er(me,et,ke,ke[8],ge?kr(et,ke[8],Xe,null):Tr(ke[8]),null),ke[5]?Ve?Ve.p(ke,Xe):(Ve=hh(ke),Ve.c(),Ve.m(w,A)):Ve&&(Ve.d(1),Ve=null),ke[3]?Ee?(Ee.p(ke,Xe),Xe&8&&Oe(Ee,1)):(Ee=dh(ke),Ee.c(),Oe(Ee,1),Ee.m(w,null)):Ee&&(pi(),Ke(Ee,1,1,()=>{Ee=null}),mi()),Xe&16&&yi(w,"col--lg-38",ke[4]),Xe&16&&yi(w,"col--lg-48",!ke[4]),ke[4]?fe?(fe.p(ke,Xe),Xe&16&&Oe(fe,1)):(fe=fh(ke),fe.c(),Oe(fe,1),fe.m(x,null)):fe&&(pi(),Ke(fe,1,1,()=>{fe=null}),mi()),He&&He.p&&(!ge||Xe&256)&&Er(He,Pe,ke,ke[8],ge?kr(Pe,ke[8],Xe,jp):Tr(ke[8]),ch),ke[6]?Be?(Be.p(ke,Xe),Xe&64&&Oe(Be,1)):(Be=ph(ke),Be.c(),Oe(Be,1),Be.m(c,F)):Be&&(pi(),Ke(Be,1,1,()=>{Be=null}),mi()),ke[1]=="none"&&ke[7]?Qe||(Qe=mh(),Qe.c(),Qe.m(c,null)):Qe&&(Qe.d(1),Qe=null),(!ge||Xe&2&&ee!==(ee="page-neutral-intro "+(ke[1]=="grey"?"background--gallery":"")))&&ue(c,"class",ee)},i(ke){ge||(Oe(xe),Oe(me,ke),Oe(Ee),Oe(fe),Oe(He,ke),Oe(Be),ge=!0)},o(ke){Ke(xe),Ke(me,ke),Ke(Ee),Ke(fe),Ke(He,ke),Ke(Be),ge=!1},d(ke){ke&&ae(c),xe&&xe.d(),me&&me.d(ke),Ve&&Ve.d(),Ee&&Ee.d(),fe&&fe.d(),He&&He.d(ke),Be&&Be.d(),Qe&&Qe.d()}}}function Hp(v,c,f){let{$$slots:y={},$$scope:x}=c,{mode:S="neutral"}=c,{background:w="grey"}=c,{breadcrumb:a=null}=c,{contents:A=null}=c,{highlighted:O=null}=c,{date:N=null}=c,{updated:U=null}=c,{hr:F=!0}=c;return ws("mode",S),ws("background",w),v.$$set=ee=>{"mode"in ee&&f(0,S=ee.mode),"background"in ee&&f(1,w=ee.background),"breadcrumb"in ee&&f(2,a=ee.breadcrumb),"contents"in ee&&f(3,A=ee.contents),"highlighted"in ee&&f(4,O=ee.highlighted),"date"in ee&&f(5,N=ee.date),"updated"in ee&&f(6,U=ee.updated),"hr"in ee&&f(7,F=ee.hr),"$$scope"in ee&&f(8,x=ee.$$scope)},[S,w,a,A,O,N,U,F,x,y]}class Wp extends Wi{constructor(c){super(),Xi(this,c,Hp,Zp,Ki,{mode:0,background:1,breadcrumb:2,contents:3,highlighted:4,date:5,updated:6,hr:7})}}function Xp(v){let c,f,y;const x=v[2].default,S=Ir(x,v,v[1],null);return{c(){c=Ye("h1"),S&&S.c(),this.h()},l(w){c=Je(w,"H1",{class:!0});var a=$e(c);S&&S.l(a),a.forEach(ae),this.h()},h(){ue(c,"class",f=$l(v[0]=="neutral"?"page-neutral-intro__title":"page-intro__title")+" svelte-m86ur0")},m(w,a){Ge(w,c,a),S&&S.m(c,null),y=!0},p(w,[a]){S&&S.p&&(!y||a&2)&&Er(S,x,w,w[1],y?kr(x,w[1],a,null):Tr(w[1]),null),(!y||a&1&&f!==(f=$l(w[0]=="neutral"?"page-neutral-intro__title":"page-intro__title")+" svelte-m86ur0"))&&ue(c,"class",f)},i(w){y||(Oe(S,w),y=!0)},o(w){Ke(S,w),y=!1},d(w){w&&ae(c),S&&S.d(w)}}}function Kp(v,c,f){let{$$slots:y={},$$scope:x}=c,{mode:S=Fa("mode")}=c;return v.$$set=w=>{"mode"in w&&f(0,S=w.mode),"$$scope"in w&&f(1,x=w.$$scope)},[S,x,y]}class Yp extends Wi{constructor(c){super(),Xi(this,c,Kp,Xp,Ki,{mode:0})}}function Jp(v){let c,f,y;const x=v[1].default,S=Ir(x,v,v[0],null);return{c(){c=Ye("div"),f=Ye("div"),S&&S.c(),this.h()},l(w){c=Je(w,"DIV",{class:!0});var a=$e(c);f=Je(a,"DIV",{class:!0});var A=$e(f);S&&S.l(A),A.forEach(ae),a.forEach(ae),this.h()},h(){ue(f,"class","wrapper"),ue(c,"class","page-content margin-bottom--2")},m(w,a){Ge(w,c,a),Ne(c,f),S&&S.m(f,null),y=!0},p(w,[a]){S&&S.p&&(!y||a&1)&&Er(S,x,w,w[0],y?kr(x,w[0],a,null):Tr(w[0]),null)},i(w){y||(Oe(S,w),y=!0)},o(w){Ke(S,w),y=!1},d(w){w&&ae(c),S&&S.d(w)}}}function Qp(v,c,f){let{$$slots:y={},$$scope:x}=c;return v.$$set=S=>{"$$scope"in S&&f(0,x=S.$$scope)},[x,y]}class _d extends Wi{constructor(c){super(),Xi(this,c,Qp,Jp,Ki,{})}}const $p=v=>({}),gh=v=>({});function _h(v){let c,f,y,x;const S=v[7].meta,w=Ir(S,v,v[6],gh);return{c(){c=Ye("h2"),f=Yt(v[0]),y=Et(),w&&w.c(),this.h()},l(a){c=Je(a,"H2",{class:!0});var A=$e(c);f=Jt(A,v[0]),A.forEach(ae),y=Tt(a),w&&w.l(a),this.h()},h(){ue(c,"class","svelte-4xzjby")},m(a,A){Ge(a,c,A),Ne(c,f),Ge(a,y,A),w&&w.m(a,A),x=!0},p(a,A){(!x||A&1)&&xi(f,a[0]),w&&w.p&&(!x||A&64)&&Er(w,S,a,a[6],x?kr(S,a[6],A,$p):Tr(a[6]),gh)},i(a){x||(Oe(w,a),x=!0)},o(a){Ke(w,a),x=!1},d(a){a&&ae(c),a&&ae(y),w&&w.d(a)}}}function e2(v){let c,f,y,x,S=`repeat(${v[1]=="full"?"1fr":"auto-fill, minmax(min("+v[4][v[1]].w+"px, 100%), 1fr))"}`,w=`${v[2]}px`,a,A=v[0]&&_h(v);const O=v[7].default,N=Ir(O,v,v[6],null);return{c(){c=Ye("div"),A&&A.c(),f=Et(),y=Ye("div"),N&&N.c(),this.h()},l(U){c=Je(U,"DIV",{class:!0});var F=$e(c);A&&A.l(F),f=Tt(F),y=Je(F,"DIV",{class:!0});var ee=$e(y);N&&N.l(ee),ee.forEach(ae),F.forEach(ae),this.h()},h(){ue(y,"class","tiles-grid margin-bottom svelte-4xzjby"),bu(()=>v[8].call(y)),Gi(y,"grid-template-columns",S,!1),Gi(y,"grid-gap",w,!1),ue(c,"class","tiles")},m(U,F){Ge(U,c,F),A&&A.m(c,null),Ne(c,f),Ne(c,y),N&&N.m(y,null),x=dd(y,v[8].bind(y)),a=!0},p(U,[F]){U[0]?A?(A.p(U,F),F&1&&Oe(A,1)):(A=_h(U),A.c(),Oe(A,1),A.m(c,f)):A&&(pi(),Ke(A,1,1,()=>{A=null}),mi()),N&&N.p&&(!a||F&64)&&Er(N,O,U,U[6],a?kr(O,U[6],F,null):Tr(U[6]),null),F&2&&S!==(S=`repeat(${U[1]=="full"?"1fr":"auto-fill, minmax(min("+U[4][U[1]].w+"px, 100%), 1fr))"}`)&&Gi(y,"grid-template-columns",S,!1),F&4&&w!==(w=`${U[2]}px`)&&Gi(y,"grid-gap",w,!1)},i(U){a||(Oe(A),Oe(N,U),a=!0)},o(U){Ke(A),Ke(N,U),a=!1},d(U){U&&ae(c),A&&A.d(),N&&N.d(U),x()}}}function t2(v,c,f){let y,{$$slots:x={},$$scope:S}=c,{title:w=null}=c,{colwidth:a="medium"}=c,{gridgap:A=16}=c;const O={narrow:{w:180,c:4},medium:{w:280,c:3},wide:{w:380,c:2},full:{w:"100%",c:1}};let N;const U=fd(O[a].c);ws("tiles",{cols:U});function F(){N=this.clientWidth,f(3,N)}return v.$$set=ee=>{"title"in ee&&f(0,w=ee.title),"colwidth"in ee&&f(1,a=ee.colwidth),"gridgap"in ee&&f(2,A=ee.gridgap),"$$scope"in ee&&f(6,S=ee.$$scope)},v.$$.update=()=>{v.$$.dirty&14&&f(5,y=a=="full"?1:N?Math.floor((N+A)/(O[a].w+A)):O[a].c),v.$$.dirty&32&&U.set(y)},[w,a,A,N,O,y,S,x,F]}class yh extends Wi{constructor(c){super(),Xi(this,c,t2,e2,Ki,{title:0,colwidth:1,gridgap:2})}}function vh(v,c,f){const y=v.slice();return y[9]=c[f],y}function xh(v){let c,f,y;return{c(){c=Ye("header"),f=Ye("h3"),y=Yt(v[2]),this.h()},l(x){c=Je(x,"HEADER",{class:!0});var S=$e(c);f=Je(S,"H3",{class:!0});var w=$e(f);y=Jt(w,v[2]),w.forEach(ae),S.forEach(ae),this.h()},h(){ue(f,"class","margin-top--0 margin-right--0 margin-bottom--0 margin-left--0 svelte-rupdr0"),ue(c,"class","margin-top--1")},m(x,S){Ge(x,c,S),Ne(c,f),Ne(f,y)},p(x,S){S&4&&xi(y,x[2])},d(x){x&&ae(c)}}}function bh(v){let c,f=v[3],y=[];for(let x=0;x<f.length;x+=1)y[x]=wh(vh(v,f,x));return{c(){c=Ye("div");for(let x=0;x<y.length;x+=1)y[x].c();this.h()},l(x){c=Je(x,"DIV",{class:!0});var S=$e(c);for(let w=0;w<y.length;w+=1)y[w].l(S);S.forEach(ae),this.h()},h(){ue(c,"class","margin-top--2")},m(x,S){Ge(x,c,S);for(let w=0;w<y.length;w+=1)y[w].m(c,null)},p(x,S){if(S&8){f=x[3];let w;for(w=0;w<f.length;w+=1){const a=vh(x,f,w);y[w]?y[w].p(a,S):(y[w]=wh(a),y[w].c(),y[w].m(c,null))}for(;w<y.length;w+=1)y[w].d(1);y.length=f.length}},d(x){x&&ae(c),Ar(y,x)}}}function wh(v){let c,f=v[9].label+"",y,x,S,w,a;return{c(){c=Ye("a"),y=Yt(f),x=Et(),this.h()},l(A){c=Je(A,"A",{href:!0,class:!0,"aria-label":!0,"data-gtm-label":!0});var O=$e(c);y=Jt(O,f),x=Tt(O),O.forEach(ae),this.h()},h(){ue(c,"href",S=v[9].url),ue(c,"class","tile__link"),ue(c,"aria-label",w=v[9].label),ue(c,"data-gtm-label",a=v[9].label)},m(A,O){Ge(A,c,O),Ne(c,y),Ne(c,x)},p(A,O){O&8&&f!==(f=A[9].label+"")&&xi(y,f),O&8&&S!==(S=A[9].url)&&ue(c,"href",S),O&8&&w!==(w=A[9].label)&&ue(c,"aria-label",w),O&8&&a!==(a=A[9].label)&&ue(c,"data-gtm-label",a)},d(A){A&&ae(c)}}}function i2(v){let c,f,y,x,S=`span ${v[0]==1?1:v[0]>v[5]?v[5]:v[0]}`,w=`span ${v[1]}`,a,A=v[2]&&xh(v);const O=v[8].default,N=Ir(O,v,v[7],null);let U=v[3]&&v[3][0]&&bh(v);return{c(){c=Ye("article"),A&&A.c(),f=Et(),N&&N.c(),y=Et(),U&&U.c(),this.h()},l(F){c=Je(F,"ARTICLE",{class:!0});var ee=$e(c);A&&A.l(ee),f=Tt(ee),N&&N.l(ee),y=Tt(ee),U&&U.l(ee),ee.forEach(ae),this.h()},h(){ue(c,"class",x=$l(v[4]?"":"tile tile__content")+" svelte-rupdr0"),yi(c,"blank",v[4]),Gi(c,"grid-column",S,!1),Gi(c,"grid-row",w,!1)},m(F,ee){Ge(F,c,ee),A&&A.m(c,null),Ne(c,f),N&&N.m(c,null),Ne(c,y),U&&U.m(c,null),a=!0},p(F,[ee]){F[2]?A?A.p(F,ee):(A=xh(F),A.c(),A.m(c,f)):A&&(A.d(1),A=null),N&&N.p&&(!a||ee&128)&&Er(N,O,F,F[7],a?kr(O,F[7],ee,null):Tr(F[7]),null),F[3]&&F[3][0]?U?U.p(F,ee):(U=bh(F),U.c(),U.m(c,null)):U&&(U.d(1),U=null),(!a||ee&16&&x!==(x=$l(F[4]?"":"tile tile__content")+" svelte-rupdr0"))&&ue(c,"class",x),ee&16&&yi(c,"blank",F[4]),ee&33&&S!==(S=`span ${F[0]==1?1:F[0]>F[5]?F[5]:F[0]}`)&&Gi(c,"grid-column",S,!1),ee&2&&w!==(w=`span ${F[1]}`)&&Gi(c,"grid-row",w,!1)},i(F){a||(Oe(N,F),a=!0)},o(F){Ke(N,F),a=!1},d(F){F&&ae(c),A&&A.d(),N&&N.d(F),U&&U.d()}}}function n2(v,c,f){let y,{$$slots:x={},$$scope:S}=c,{colspan:w=1}=c,{rowspan:a=1}=c,{title:A=null}=c,{links:O=null}=c,{blank:N=!1}=c;const{cols:U}=Fa("tiles");return wu(v,U,F=>f(5,y=F)),v.$$set=F=>{"colspan"in F&&f(0,w=F.colspan),"rowspan"in F&&f(1,a=F.rowspan),"title"in F&&f(2,A=F.title),"links"in F&&f(3,O=F.links),"blank"in F&&f(4,N=F.blank),"$$scope"in F&&f(7,S=F.$$scope)},[w,a,A,O,N,y,U,S,x]}class fu extends Wi{constructor(c){super(),Xi(this,c,n2,i2,Ki,{colspan:0,rowspan:1,title:2,links:3,blank:4})}}var r2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s2={rgb2hsl:Zo,rgb2hsv:nc,rgb2hwb:Ho,rgb2cmyk:Wo,rgb2keyword:Xo,rgb2xyz:Tu,rgb2lab:ku,rgb2lch:a2,hsl2rgb:rc,hsl2hsv:o2,hsl2hwb:l2,hsl2cmyk:c2,hsl2keyword:u2,hsv2rgb:sc,hsv2hsl:h2,hsv2hwb:d2,hsv2cmyk:f2,hsv2keyword:p2,hwb2rgb:Ko,hwb2hsl:m2,hwb2hsv:g2,hwb2cmyk:_2,hwb2keyword:y2,cmyk2rgb:Yo,cmyk2hsl:v2,cmyk2hsv:x2,cmyk2hwb:b2,cmyk2keyword:w2,keyword2rgb:Xs,keyword2hsl:T2,keyword2hsv:k2,keyword2hwb:A2,keyword2cmyk:z2,keyword2lab:C2,keyword2xyz:M2,xyz2rgb:yd,xyz2lab:vd,xyz2lch:S2,lab2xyz:Au,lab2rgb:xd,lab2lch:zu,lch2lab:Cu,lch2xyz:I2,lch2rgb:E2};function Zo(v){var c=v[0]/255,f=v[1]/255,y=v[2]/255,x=Math.min(c,f,y),S=Math.max(c,f,y),w=S-x,a,A,O;return S==x?a=0:c==S?a=(f-y)/w:f==S?a=2+(y-c)/w:y==S&&(a=4+(c-f)/w),a=Math.min(a*60,360),a<0&&(a+=360),O=(x+S)/2,S==x?A=0:O<=.5?A=w/(S+x):A=w/(2-S-x),[a,A*100,O*100]}function nc(v){var c=v[0],f=v[1],y=v[2],x=Math.min(c,f,y),S=Math.max(c,f,y),w=S-x,a,A,O;return S==0?A=0:A=w/S*1e3/10,S==x?a=0:c==S?a=(f-y)/w:f==S?a=2+(y-c)/w:y==S&&(a=4+(c-f)/w),a=Math.min(a*60,360),a<0&&(a+=360),O=S/255*1e3/10,[a,A,O]}function Ho(v){var c=v[0],f=v[1],S=v[2],y=Zo(v)[0],x=1/255*Math.min(c,Math.min(f,S)),S=1-1/255*Math.max(c,Math.max(f,S));return[y,x*100,S*100]}function Wo(v){var c=v[0]/255,f=v[1]/255,y=v[2]/255,x,S,w,a;return a=Math.min(1-c,1-f,1-y),x=(1-c-a)/(1-a)||0,S=(1-f-a)/(1-a)||0,w=(1-y-a)/(1-a)||0,[x*100,S*100,w*100,a*100]}function Xo(v){return bd[JSON.stringify(v)]}function Tu(v){var c=v[0]/255,f=v[1]/255,y=v[2]/255;c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var x=c*.4124+f*.3576+y*.1805,S=c*.2126+f*.7152+y*.0722,w=c*.0193+f*.1192+y*.9505;return[x*100,S*100,w*100]}function ku(v){var c=Tu(v),f=c[0],y=c[1],x=c[2],S,w,a;return f/=95.047,y/=100,x/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,S=116*y-16,w=500*(f-y),a=200*(y-x),[S,w,a]}function a2(v){return zu(ku(v))}function rc(v){var c=v[0]/360,f=v[1]/100,y=v[2]/100,x,S,w,a,A;if(f==0)return A=y*255,[A,A,A];y<.5?S=y*(1+f):S=y+f-y*f,x=2*y-S,a=[0,0,0];for(var O=0;O<3;O++)w=c+1/3*-(O-1),w<0&&w++,w>1&&w--,6*w<1?A=x+(S-x)*6*w:2*w<1?A=S:3*w<2?A=x+(S-x)*(2/3-w)*6:A=x,a[O]=A*255;return a}function o2(v){var c=v[0],f=v[1]/100,y=v[2]/100,x,S;return y===0?[0,0,0]:(y*=2,f*=y<=1?y:2-y,S=(y+f)/2,x=2*f/(y+f),[c,x*100,S*100])}function l2(v){return Ho(rc(v))}function c2(v){return Wo(rc(v))}function u2(v){return Xo(rc(v))}function sc(v){var c=v[0]/60,f=v[1]/100,A=v[2]/100,y=Math.floor(c)%6,x=c-Math.floor(c),S=255*A*(1-f),w=255*A*(1-f*x),a=255*A*(1-f*(1-x)),A=255*A;switch(y){case 0:return[A,a,S];case 1:return[w,A,S];case 2:return[S,A,a];case 3:return[S,w,A];case 4:return[a,S,A];case 5:return[A,S,w]}}function h2(v){var c=v[0],f=v[1]/100,y=v[2]/100,x,S;return S=(2-f)*y,x=f*y,x/=S<=1?S:2-S,x=x||0,S/=2,[c,x*100,S*100]}function d2(v){return Ho(sc(v))}function f2(v){return Wo(sc(v))}function p2(v){return Xo(sc(v))}function Ko(v){var c=v[0]/360,f=v[1]/100,y=v[2]/100,x=f+y,S,w,a,A;switch(x>1&&(f/=x,y/=x),S=Math.floor(6*c),w=1-y,a=6*c-S,(S&1)!=0&&(a=1-a),A=f+a*(w-f),S){default:case 6:case 0:r=w,g=A,b=f;break;case 1:r=A,g=w,b=f;break;case 2:r=f,g=w,b=A;break;case 3:r=f,g=A,b=w;break;case 4:r=A,g=f,b=w;break;case 5:r=w,g=f,b=A;break}return[r*255,g*255,b*255]}function m2(v){return Zo(Ko(v))}function g2(v){return nc(Ko(v))}function _2(v){return Wo(Ko(v))}function y2(v){return Xo(Ko(v))}function Yo(v){var c=v[0]/100,f=v[1]/100,y=v[2]/100,x=v[3]/100,S,w,a;return S=1-Math.min(1,c*(1-x)+x),w=1-Math.min(1,f*(1-x)+x),a=1-Math.min(1,y*(1-x)+x),[S*255,w*255,a*255]}function v2(v){return Zo(Yo(v))}function x2(v){return nc(Yo(v))}function b2(v){return Ho(Yo(v))}function w2(v){return Xo(Yo(v))}function yd(v){var c=v[0]/100,f=v[1]/100,y=v[2]/100,x,S,w;return x=c*3.2406+f*-1.5372+y*-.4986,S=c*-.9689+f*1.8758+y*.0415,w=c*.0557+f*-.204+y*1.057,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x=x*12.92,S=S>.0031308?1.055*Math.pow(S,1/2.4)-.055:S=S*12.92,w=w>.0031308?1.055*Math.pow(w,1/2.4)-.055:w=w*12.92,x=Math.min(Math.max(0,x),1),S=Math.min(Math.max(0,S),1),w=Math.min(Math.max(0,w),1),[x*255,S*255,w*255]}function vd(v){var c=v[0],f=v[1],y=v[2],x,S,w;return c/=95.047,f/=100,y/=108.883,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,x=116*f-16,S=500*(c-f),w=200*(f-y),[x,S,w]}function S2(v){return zu(vd(v))}function Au(v){var c=v[0],f=v[1],y=v[2],x,S,w,a;return c<=8?(S=c*100/903.3,a=7.787*(S/100)+16/116):(S=100*Math.pow((c+16)/116,3),a=Math.pow(S/100,1/3)),x=x/95.047<=.008856?x=95.047*(f/500+a-16/116)/7.787:95.047*Math.pow(f/500+a,3),w=w/108.883<=.008859?w=108.883*(a-y/200-16/116)/7.787:108.883*Math.pow(a-y/200,3),[x,S,w]}function zu(v){var c=v[0],f=v[1],y=v[2],x,S,w;return x=Math.atan2(y,f),S=x*360/2/Math.PI,S<0&&(S+=360),w=Math.sqrt(f*f+y*y),[c,w,S]}function xd(v){return yd(Au(v))}function Cu(v){var c=v[0],f=v[1],y=v[2],x,S,w;return w=y/360*2*Math.PI,x=f*Math.cos(w),S=f*Math.sin(w),[c,x,S]}function I2(v){return Au(Cu(v))}function E2(v){return xd(Cu(v))}function Xs(v){return vu[v]}function T2(v){return Zo(Xs(v))}function k2(v){return nc(Xs(v))}function A2(v){return Ho(Xs(v))}function z2(v){return Wo(Xs(v))}function C2(v){return ku(Xs(v))}function M2(v){return Tu(Xs(v))}var vu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},bd={};for(var Sh in vu)bd[JSON.stringify(vu[Sh])]=Sh;var pu=s2,Ra=function(){return new Jo};for(var jo in pu){Ra[jo+"Raw"]=function(v){return function(c){return typeof c=="number"&&(c=Array.prototype.slice.call(arguments)),pu[v](c)}}(jo);var Ih=/(\w+)2(\w+)/.exec(jo),mu=Ih[1],P2=Ih[2];Ra[mu]=Ra[mu]||{},Ra[mu][P2]=Ra[jo]=function(v){return function(c){typeof c=="number"&&(c=Array.prototype.slice.call(arguments));var f=pu[v](c);if(typeof f=="string"||f===void 0)return f;for(var y=0;y<f.length;y++)f[y]=Math.round(f[y]);return f}}(jo)}var Jo=function(){this.convs={}};Jo.prototype.routeSpace=function(v,c){var f=c[0];return f===void 0?this.getValues(v):(typeof f=="number"&&(f=Array.prototype.slice.call(c)),this.setValues(v,f))};Jo.prototype.setValues=function(v,c){return this.space=v,this.convs={},this.convs[v]=c,this};Jo.prototype.getValues=function(v){var c=this.convs[v];if(!c){var f=this.space,y=this.convs[f];c=Ra[f][v](y),this.convs[v]=c}return c};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(v){Jo.prototype[v]=function(c){return this.routeSpace(v,arguments)}});function L2(v,c){const f=v.getBoundingClientRect(),y=c.getBoundingClientRect(),x={};return x.top=f.top<0,x.left=f.left<0,x.bottom=f.bottom+y.height>(window.innerHeight||document.documentElement.clientHeight),x.right=f.right>(window.innerWidth||document.documentElement.clientWidth),x.any=x.top||x.left||x.bottom||x.right,x}function D2(v){let c,f=v[0](v[1],v[2])+"",y;return{c(){c=Ye("div"),this.h()},l(x){c=Je(x,"DIV",{class:!0});var S=$e(c);S.forEach(ae),this.h()},h(){ue(c,"class",y="item "+v[3]+" svelte-3e0qet")},m(x,S){Ge(x,c,S),c.innerHTML=f},p(x,[S]){S&7&&f!==(f=x[0](x[1],x[2])+"")&&(c.innerHTML=f),S&8&&y!==(y="item "+x[3]+" svelte-3e0qet")&&ue(c,"class",y)},i:Si,o:Si,d(x){x&&ae(c)}}}function B2(v,c,f){let{isActive:y=!1}=c,{isFirst:x=!1}=c,{isHover:S=!1}=c,{isSelectable:w=!1}=c,{getOptionLabel:a=void 0}=c,{item:A=void 0}=c,{filterText:O=""}=c,N="";return v.$$set=U=>{"isActive"in U&&f(4,y=U.isActive),"isFirst"in U&&f(5,x=U.isFirst),"isHover"in U&&f(6,S=U.isHover),"isSelectable"in U&&f(7,w=U.isSelectable),"getOptionLabel"in U&&f(0,a=U.getOptionLabel),"item"in U&&f(1,A=U.item),"filterText"in U&&f(2,O=U.filterText)},v.$$.update=()=>{if(v.$$.dirty&242){const U=[];y&&U.push("active"),x&&U.push("first"),S&&U.push("hover"),A.isGroupHeader&&U.push("groupHeader"),A.isGroupItem&&U.push("groupItem"),w||U.push("notSelectable"),f(3,N=U.join(" "))}},[a,A,O,N,y,x,S,w]}class wd extends Wi{constructor(c){super(),Xi(this,c,B2,D2,Ki,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Eh(v,c,f){const y=v.slice();return y[41]=c[f],y[42]=f,y}function R2(v){let c,f,y=v[1],x=[];for(let a=0;a<y.length;a+=1)x[a]=Ah(Eh(v,y,a));const S=a=>Ke(x[a],1,1,()=>{x[a]=null});let w=null;return y.length||(w=Th(v)),{c(){for(let a=0;a<x.length;a+=1)x[a].c();c=ti(),w&&w.c()},l(a){for(let A=0;A<x.length;A+=1)x[A].l(a);c=ti(),w&&w.l(a)},m(a,A){for(let O=0;O<x.length;O+=1)x[O].m(a,A);Ge(a,c,A),w&&w.m(a,A),f=!0},p(a,A){if(A[0]&114390){y=a[1];let O;for(O=0;O<y.length;O+=1){const N=Eh(a,y,O);x[O]?(x[O].p(N,A),Oe(x[O],1)):(x[O]=Ah(N),x[O].c(),Oe(x[O],1),x[O].m(c.parentNode,c))}for(pi(),O=y.length;O<x.length;O+=1)S(O);mi(),!y.length&&w?w.p(a,A):y.length?w&&(w.d(1),w=null):(w=Th(a),w.c(),w.m(c.parentNode,c))}},i(a){if(!f){for(let A=0;A<y.length;A+=1)Oe(x[A]);f=!0}},o(a){x=x.filter(Boolean);for(let A=0;A<x.length;A+=1)Ke(x[A]);f=!1},d(a){Ar(x,a),a&&ae(c),w&&w.d(a)}}}function F2(v){let c,f,y;var x=v[3];function S(w){return{props:{items:w[1],itemHeight:w[8],$$slots:{default:[U2,({item:a,i:A})=>({41:a,42:A}),({item:a,i:A})=>[0,(a?1024:0)|(A?2048:0)]]},$$scope:{ctx:w}}}}return x&&(c=new x(S(v))),{c(){c&&Nt(c.$$.fragment),f=ti()},l(w){c&&ni(c.$$.fragment,w),f=ti()},m(w,a){c&&qt(c,w,a),Ge(w,f,a),y=!0},p(w,a){const A={};if(a[0]&2&&(A.items=w[1]),a[0]&256&&(A.itemHeight=w[8]),a[0]&9814|a[1]&11264&&(A.$$scope={dirty:a,ctx:w}),x!==(x=w[3])){if(c){pi();const O=c;Ke(O.$$.fragment,1,0,()=>{Gt(O,1)}),mi()}x?(c=new x(S(w)),Nt(c.$$.fragment),Oe(c.$$.fragment,1),qt(c,f.parentNode,f)):c=null}else x&&c.$set(A)},i(w){y||(c&&Oe(c.$$.fragment,w),y=!0)},o(w){c&&Ke(c.$$.fragment,w),y=!1},d(w){w&&ae(f),c&&Gt(c,w)}}}function Th(v){let c,f=!v[11]&&kh(v);return{c(){f&&f.c(),c=ti()},l(y){f&&f.l(y),c=ti()},m(y,x){f&&f.m(y,x),Ge(y,c,x)},p(y,x){y[11]?f&&(f.d(1),f=null):f?f.p(y,x):(f=kh(y),f.c(),f.m(c.parentNode,c))},d(y){f&&f.d(y),y&&ae(c)}}}function kh(v){let c,f;return{c(){c=Ye("div"),f=Yt(v[12]),this.h()},l(y){c=Je(y,"DIV",{class:!0});var x=$e(c);f=Jt(x,v[12]),x.forEach(ae),this.h()},h(){ue(c,"class","empty svelte-1uyqfml")},m(y,x){Ge(y,c,x),Ne(c,f)},p(y,x){x[0]&4096&&xi(f,y[12])},d(y){y&&ae(c)}}}function O2(v){let c,f,y,x,S,w;var a=v[4];function A(F){return{props:{item:F[41],filterText:F[13],getOptionLabel:F[6],isFirst:xu(F[42]),isActive:ec(F[41],F[9],F[10]),isHover:tc(F[2],F[41],F[42],F[1]),isSelectable:Ws(F[41])}}}a&&(f=new a(A(v)));function O(){return v[29](v[42])}function N(){return v[30](v[42])}function U(...F){return v[31](v[41],v[42],...F)}return{c(){c=Ye("div"),f&&Nt(f.$$.fragment),y=Et(),this.h()},l(F){c=Je(F,"DIV",{class:!0,tabindex:!0});var ee=$e(c);f&&ni(f.$$.fragment,ee),y=Tt(ee),ee.forEach(ae),this.h()},h(){ue(c,"class","listItem"),ue(c,"tabindex","-1")},m(F,ee){Ge(F,c,ee),f&&qt(f,c,null),Ne(c,y),x=!0,S||(w=[un(c,"mouseover",O),un(c,"focus",N),un(c,"click",U)],S=!0)},p(F,ee){v=F;const ge={};if(ee[0]&2&&(ge.item=v[41]),ee[0]&8192&&(ge.filterText=v[13]),ee[0]&64&&(ge.getOptionLabel=v[6]),ee[0]&1538&&(ge.isActive=ec(v[41],v[9],v[10])),ee[0]&6&&(ge.isHover=tc(v[2],v[41],v[42],v[1])),ee[0]&2&&(ge.isSelectable=Ws(v[41])),a!==(a=v[4])){if(f){pi();const xe=f;Ke(xe.$$.fragment,1,0,()=>{Gt(xe,1)}),mi()}a?(f=new a(A(v)),Nt(f.$$.fragment),Oe(f.$$.fragment,1),qt(f,c,y)):f=null}else a&&f.$set(ge)},i(F){x||(f&&Oe(f.$$.fragment,F),x=!0)},o(F){f&&Ke(f.$$.fragment,F),x=!1},d(F){F&&ae(c),f&&Gt(f),S=!1,ic(w)}}}function V2(v){let c,f=v[7](v[41])+"",y;return{c(){c=Ye("div"),y=Yt(f),this.h()},l(x){c=Je(x,"DIV",{class:!0});var S=$e(c);y=Jt(S,f),S.forEach(ae),this.h()},h(){ue(c,"class","listGroupTitle svelte-1uyqfml")},m(x,S){Ge(x,c,S),Ne(c,y)},p(x,S){S[0]&130&&f!==(f=x[7](x[41])+"")&&xi(y,f)},i:Si,o:Si,d(x){x&&ae(c)}}}function Ah(v){let c,f,y,x;const S=[V2,O2],w=[];function a(A,O){return A[41].isGroupHeader&&!A[41].isSelectable?0:1}return c=a(v),f=w[c]=S[c](v),{c(){f.c(),y=ti()},l(A){f.l(A),y=ti()},m(A,O){w[c].m(A,O),Ge(A,y,O),x=!0},p(A,O){let N=c;c=a(A),c===N?w[c].p(A,O):(pi(),Ke(w[N],1,1,()=>{w[N]=null}),mi(),f=w[c],f?f.p(A,O):(f=w[c]=S[c](A),f.c()),Oe(f,1),f.m(y.parentNode,y))},i(A){x||(Oe(f),x=!0)},o(A){Ke(f),x=!1},d(A){w[c].d(A),A&&ae(y)}}}function U2(v){let c,f,y,x,S;var w=v[4];function a(U){return{props:{item:U[41],filterText:U[13],getOptionLabel:U[6],isFirst:xu(U[42]),isActive:ec(U[41],U[9],U[10]),isHover:tc(U[2],U[41],U[42],U[1]),isSelectable:Ws(U[41])}}}w&&(f=new w(a(v)));function A(){return v[26](v[42])}function O(){return v[27](v[42])}function N(...U){return v[28](v[41],v[42],...U)}return{c(){c=Ye("div"),f&&Nt(f.$$.fragment),this.h()},l(U){c=Je(U,"DIV",{class:!0});var F=$e(c);f&&ni(f.$$.fragment,F),F.forEach(ae),this.h()},h(){ue(c,"class","listItem")},m(U,F){Ge(U,c,F),f&&qt(f,c,null),y=!0,x||(S=[un(c,"mouseover",A),un(c,"focus",O),un(c,"click",N)],x=!0)},p(U,F){v=U;const ee={};if(F[1]&1024&&(ee.item=v[41]),F[0]&8192&&(ee.filterText=v[13]),F[0]&64&&(ee.getOptionLabel=v[6]),F[1]&2048&&(ee.isFirst=xu(v[42])),F[0]&1536|F[1]&1024&&(ee.isActive=ec(v[41],v[9],v[10])),F[0]&6|F[1]&3072&&(ee.isHover=tc(v[2],v[41],v[42],v[1])),F[1]&1024&&(ee.isSelectable=Ws(v[41])),w!==(w=v[4])){if(f){pi();const ge=f;Ke(ge.$$.fragment,1,0,()=>{Gt(ge,1)}),mi()}w?(f=new w(a(v)),Nt(f.$$.fragment),Oe(f.$$.fragment,1),qt(f,c,null)):f=null}else w&&f.$set(ee)},i(U){y||(f&&Oe(f.$$.fragment,U),y=!0)},o(U){f&&Ke(f.$$.fragment,U),y=!1},d(U){U&&ae(c),f&&Gt(f),x=!1,ic(S)}}}function N2(v){let c,f,y,x,S,w;const a=[F2,R2],A=[];function O(N,U){return N[5]?0:1}return f=O(v),y=A[f]=a[f](v),{c(){c=Ye("div"),y.c(),this.h()},l(N){c=Je(N,"DIV",{class:!0,style:!0});var U=$e(c);y.l(U),U.forEach(ae),this.h()},h(){ue(c,"class","listContainer svelte-1uyqfml"),ue(c,"style",v[14]),yi(c,"virtualList",v[5])},m(N,U){Ge(N,c,U),A[f].m(c,null),v[32](c),x=!0,S||(w=[un(window,"keydown",v[17]),un(window,"resize",v[18])],S=!0)},p(N,U){let F=f;f=O(N),f===F?A[f].p(N,U):(pi(),Ke(A[F],1,1,()=>{A[F]=null}),mi(),y=A[f],y?y.p(N,U):(y=A[f]=a[f](N),y.c()),Oe(y,1),y.m(c,null)),(!x||U[0]&16384)&&ue(c,"style",N[14]),U[0]&32&&yi(c,"virtualList",N[5])},i(N){x||(Oe(y),x=!0)},o(N){Ke(y),x=!1},d(N){N&&ae(c),A[f].d(),v[32](null),S=!1,ic(w)}}}function ec(v,c,f){return c&&c[f]===v[f]}function xu(v){return v===0}function tc(v,c,f,y){return Ws(c)&&(v===f||y.length===1)}function Ws(v){return v.isGroupHeader&&v.isSelectable||v.selectable||!v.hasOwnProperty("selectable")}function q2(v,c,f){const y=Ua();let{container:x=void 0}=c,{VirtualList:S=null}=c,{Item:w=wd}=c,{isVirtualList:a=!1}=c,{items:A=[]}=c,{labelIdentifier:O="label"}=c,{getOptionLabel:N=(Ze,Ce)=>{if(Ze)return Ze.isCreator?`Create "${Ce}"`:Ze[O]}}=c,{getGroupHeaderLabel:U=null}=c,{itemHeight:F=40}=c,{hoverItemIndex:ee=0}=c,{value:ge=void 0}=c,{optionIdentifier:xe="value"}=c,{hideEmptyState:et=!1}=c,{noOptionsMessage:me="No options"}=c,{isMulti:Ve=!1}=c,{activeItemIndex:Ee=0}=c,{filterText:fe=""}=c,{parent:Pe=null}=c,{listPlacement:He=null}=c,{listAutoWidth:Be=null}=c,{listOffset:Qe=5}=c,ke=0,Xe=!1,It;Na(()=>{if(A.length>0&&!Ve&&ge){const Ze=A.findIndex(Ce=>Ce[xe]===ge[xe]);Ze&&f(2,ee=Ze)}bi("active"),x.addEventListener("scroll",()=>{clearTimeout(ke),ke=setTimeout(()=>{Xe=!1},100)},!1)}),pd(()=>{A||f(1,A=[]),A!==It&&A.length>0&&f(2,ee=0),It=A});function vt(Ze){Ze.isCreator||y("itemSelected",Ze)}function pt(Ze){Xe||f(2,ee=Ze)}function bt(Ze){const{item:Ce,i:Zt,event:Bi}=Ze;if(Bi.stopPropagation(),ge&&!Ve&&ge[xe]===Ce[xe])return De();Ce.isCreator?y("itemCreated",fe):Ws(Ce)&&(f(19,Ee=Zt),f(2,ee=Zt),vt(Ce))}function De(){y("closeList")}async function Ae(Ze){if(a)return;let Ce=!0;for(;Ce;)Ze>0&&ee===A.length-1?f(2,ee=0):Ze<0&&ee===0?f(2,ee=A.length-1):f(2,ee=ee+Ze),Ce=!Ws(A[ee]);await Ql(),bi("hover")}function li(Ze){switch(Ze.key){case"Escape":Ze.preventDefault(),De();break;case"ArrowDown":Ze.preventDefault(),A.length&&Ae(1);break;case"ArrowUp":Ze.preventDefault(),A.length&&Ae(-1);break;case"Enter":if(Ze.preventDefault(),A.length===0)break;const Ce=A[ee];if(ge&&!Ve&&ge[xe]===Ce[xe]){De();break}Ce.isCreator?y("itemCreated",fe):(f(19,Ee=ee),vt(A[ee]));break;case"Tab":if(Ze.preventDefault(),A.length===0||ge&&ge[xe]===A[ee][xe])return De();f(19,Ee=ee),vt(A[ee]);break}}function bi(Ze){if(a||!x)return;let Ce;const Zt=x.querySelector(`.listItem .${Ze}`);Zt&&(Ce=x.getBoundingClientRect().bottom-Zt.getBoundingClientRect().bottom),f(0,x.scrollTop-=Ce,x)}let kt;function gi(){const{height:Ze,width:Ce}=Pe.getBoundingClientRect();f(14,kt=""),f(14,kt+=`min-width:${Ce}px;width:${Be?"auto":"100%"};`),He==="top"||He==="auto"&&L2(Pe,x).bottom?f(14,kt+=`bottom:${Ze+Qe}px;`):f(14,kt+=`top:${Ze+Qe}px;`)}const Mi=Ze=>pt(Ze),hi=Ze=>pt(Ze),Di=(Ze,Ce,Zt)=>bt({item:Ze,i:Ce,event:Zt}),Ii=Ze=>pt(Ze),Yi=Ze=>pt(Ze),Ei=(Ze,Ce,Zt)=>bt({item:Ze,i:Ce,event:Zt});function ji(Ze){Tn[Ze?"unshift":"push"](()=>{x=Ze,f(0,x)})}return v.$$set=Ze=>{"container"in Ze&&f(0,x=Ze.container),"VirtualList"in Ze&&f(3,S=Ze.VirtualList),"Item"in Ze&&f(4,w=Ze.Item),"isVirtualList"in Ze&&f(5,a=Ze.isVirtualList),"items"in Ze&&f(1,A=Ze.items),"labelIdentifier"in Ze&&f(20,O=Ze.labelIdentifier),"getOptionLabel"in Ze&&f(6,N=Ze.getOptionLabel),"getGroupHeaderLabel"in Ze&&f(7,U=Ze.getGroupHeaderLabel),"itemHeight"in Ze&&f(8,F=Ze.itemHeight),"hoverItemIndex"in Ze&&f(2,ee=Ze.hoverItemIndex),"value"in Ze&&f(9,ge=Ze.value),"optionIdentifier"in Ze&&f(10,xe=Ze.optionIdentifier),"hideEmptyState"in Ze&&f(11,et=Ze.hideEmptyState),"noOptionsMessage"in Ze&&f(12,me=Ze.noOptionsMessage),"isMulti"in Ze&&f(21,Ve=Ze.isMulti),"activeItemIndex"in Ze&&f(19,Ee=Ze.activeItemIndex),"filterText"in Ze&&f(13,fe=Ze.filterText),"parent"in Ze&&f(22,Pe=Ze.parent),"listPlacement"in Ze&&f(23,He=Ze.listPlacement),"listAutoWidth"in Ze&&f(24,Be=Ze.listAutoWidth),"listOffset"in Ze&&f(25,Qe=Ze.listOffset)},v.$$.update=()=>{v.$$.dirty[0]&4194305&&Pe&&x&&gi()},[x,A,ee,S,w,a,N,U,F,ge,xe,et,me,fe,kt,pt,bt,li,gi,Ee,O,Ve,Pe,He,Be,Qe,Mi,hi,Di,Ii,Yi,Ei,ji]}class G2 extends Wi{constructor(c){super(),Xi(this,c,q2,N2,Ki,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function j2(v){let c,f=v[0](v[1])+"";return{c(){c=Ye("div"),this.h()},l(y){c=Je(y,"DIV",{class:!0});var x=$e(c);x.forEach(ae),this.h()},h(){ue(c,"class","selection svelte-pu1q1n")},m(y,x){Ge(y,c,x),c.innerHTML=f},p(y,[x]){x&3&&f!==(f=y[0](y[1])+"")&&(c.innerHTML=f)},i:Si,o:Si,d(y){y&&ae(c)}}}function Z2(v,c,f){let{getSelectionLabel:y=void 0}=c,{item:x=void 0}=c;return v.$$set=S=>{"getSelectionLabel"in S&&f(0,y=S.getSelectionLabel),"item"in S&&f(1,x=S.item)},[y,x]}class H2 extends Wi{constructor(c){super(),Xi(this,c,Z2,j2,Ki,{getSelectionLabel:0,item:1})}}function zh(v,c,f){const y=v.slice();return y[9]=c[f],y[11]=f,y}function Ch(v){let c,f,y,x,S;function w(...a){return v[6](v[11],...a)}return{c(){c=Ye("div"),f=Rr("svg"),y=Rr("path"),this.h()},l(a){c=Je(a,"DIV",{class:!0});var A=$e(c);f=Fr(A,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var O=$e(f);y=Fr(O,"path",{d:!0}),$e(y).forEach(ae),O.forEach(ae),A.forEach(ae),this.h()},h(){ue(y,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),ue(f,"width","100%"),ue(f,"height","100%"),ue(f,"viewBox","-2 -2 50 50"),ue(f,"focusable","false"),ue(f,"aria-hidden","true"),ue(f,"role","presentation"),ue(f,"class","svelte-liu9pa"),ue(c,"class","multiSelectItem_clear svelte-liu9pa")},m(a,A){Ge(a,c,A),Ne(c,f),Ne(f,y),x||(S=un(c,"click",w),x=!0)},p(a,A){v=a},d(a){a&&ae(c),x=!1,S()}}}function Mh(v){let c,f,y=v[4](v[9])+"",x,S,w,a,A,O=!v[2]&&!v[3]&&Ch(v);function N(...U){return v[7](v[11],...U)}return{c(){c=Ye("div"),f=Ye("div"),x=Et(),O&&O.c(),S=Et(),this.h()},l(U){c=Je(U,"DIV",{class:!0});var F=$e(c);f=Je(F,"DIV",{class:!0});var ee=$e(f);ee.forEach(ae),x=Tt(F),O&&O.l(F),S=Tt(F),F.forEach(ae),this.h()},h(){ue(f,"class","multiSelectItem_label svelte-liu9pa"),ue(c,"class",w="multiSelectItem "+(v[1]===v[11]?"active":"")+" "+(v[2]?"disabled":"")+" svelte-liu9pa")},m(U,F){Ge(U,c,F),Ne(c,f),f.innerHTML=y,Ne(c,x),O&&O.m(c,null),Ne(c,S),a||(A=un(c,"click",N),a=!0)},p(U,F){v=U,F&17&&y!==(y=v[4](v[9])+"")&&(f.innerHTML=y),!v[2]&&!v[3]?O?O.p(v,F):(O=Ch(v),O.c(),O.m(c,S)):O&&(O.d(1),O=null),F&6&&w!==(w="multiSelectItem "+(v[1]===v[11]?"active":"")+" "+(v[2]?"disabled":"")+" svelte-liu9pa")&&ue(c,"class",w)},d(U){U&&ae(c),O&&O.d(),a=!1,A()}}}function W2(v){let c,f=v[0],y=[];for(let x=0;x<f.length;x+=1)y[x]=Mh(zh(v,f,x));return{c(){for(let x=0;x<y.length;x+=1)y[x].c();c=ti()},l(x){for(let S=0;S<y.length;S+=1)y[S].l(x);c=ti()},m(x,S){for(let w=0;w<y.length;w+=1)y[w].m(x,S);Ge(x,c,S)},p(x,[S]){if(S&63){f=x[0];let w;for(w=0;w<f.length;w+=1){const a=zh(x,f,w);y[w]?y[w].p(a,S):(y[w]=Mh(a),y[w].c(),y[w].m(c.parentNode,c))}for(;w<y.length;w+=1)y[w].d(1);y.length=f.length}},i:Si,o:Si,d(x){Ar(y,x),x&&ae(c)}}}function X2(v,c,f){const y=Ua();let{value:x=[]}=c,{activeValue:S=void 0}=c,{isDisabled:w=!1}=c,{multiFullItemClearable:a=!1}=c,{getSelectionLabel:A=void 0}=c;function O(F,ee){ee.stopPropagation(),y("multiItemClear",{i:F})}const N=(F,ee)=>O(F,ee),U=(F,ee)=>a?O(F,ee):{};return v.$$set=F=>{"value"in F&&f(0,x=F.value),"activeValue"in F&&f(1,S=F.activeValue),"isDisabled"in F&&f(2,w=F.isDisabled),"multiFullItemClearable"in F&&f(3,a=F.multiFullItemClearable),"getSelectionLabel"in F&&f(4,A=F.getSelectionLabel)},[x,S,w,a,A,O,N,U]}class K2 extends Wi{constructor(c){super(),Xi(this,c,X2,W2,Ki,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function Ph(v,c,f){const y=v.slice();return y[23]=c[f],y}const Y2=v=>({item:v&32,i:v&32,hoverItemIndex:v&2}),Lh=v=>({item:v[23].data,i:v[23].index,hoverItemIndex:v[1]});function J2(v){let c;return{c(){c=Yt("Missing template")},l(f){c=Jt(f,"Missing template")},m(f,y){Ge(f,c,y)},d(f){f&&ae(c)}}}function Dh(v,c){let f,y,x;const S=c[15].default,w=Ir(S,c,c[14],Lh),a=w||J2();return{key:v,first:null,c(){f=Ye("svelte-virtual-list-row"),a&&a.c(),y=Et(),this.h()},l(A){f=Je(A,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var O=$e(f);a&&a.l(O),y=Tt(O),O.forEach(ae),this.h()},h(){yu(f,"class","svelte-g2cagw"),this.first=f},m(A,O){Ge(A,f,O),a&&a.m(f,null),Ne(f,y),x=!0},p(A,O){c=A,w&&w.p&&(!x||O&16418)&&Er(w,S,c,c[14],x?kr(S,c[14],O,Y2):Tr(c[14]),Lh)},i(A){x||(Oe(a,A),x=!0)},o(A){Ke(a,A),x=!1},d(A){A&&ae(f),a&&a.d(A)}}}function Q2(v){let c,f,y=[],x=new Map,S,w,a,A,O=v[5];const N=U=>U[23].index;for(let U=0;U<O.length;U+=1){let F=Ph(v,O,U),ee=N(F);x.set(ee,y[U]=Dh(ee,F))}return{c(){c=Ye("svelte-virtual-list-viewport"),f=Ye("svelte-virtual-list-contents");for(let U=0;U<y.length;U+=1)y[U].c();this.h()},l(U){c=Je(U,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var F=$e(c);f=Je(F,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var ee=$e(f);for(let ge=0;ge<y.length;ge+=1)y[ge].l(ee);ee.forEach(ae),F.forEach(ae),this.h()},h(){Gi(f,"padding-top",v[6]+"px"),Gi(f,"padding-bottom",v[7]+"px"),yu(f,"class","svelte-g2cagw"),Gi(c,"height",v[0]),yu(c,"class","svelte-g2cagw"),bu(()=>v[18].call(c))},m(U,F){Ge(U,c,F),Ne(c,f);for(let ee=0;ee<y.length;ee+=1)y[ee].m(f,null);v[16](f),v[17](c),S=dd(c,v[18].bind(c)),w=!0,a||(A=un(c,"scroll",v[8]),a=!0)},p(U,[F]){F&16418&&(O=U[5],pi(),y=fp(y,F,N,1,U,O,x,f,pp,Dh,null,Ph),mi()),(!w||F&64)&&Gi(f,"padding-top",U[6]+"px"),(!w||F&128)&&Gi(f,"padding-bottom",U[7]+"px"),(!w||F&1)&&Gi(c,"height",U[0])},i(U){if(!w){for(let F=0;F<O.length;F+=1)Oe(y[F]);w=!0}},o(U){for(let F=0;F<y.length;F+=1)Ke(y[F]);w=!1},d(U){U&&ae(c);for(let F=0;F<y.length;F+=1)y[F].d();v[16](null),v[17](null),S(),a=!1,A()}}}function $2(v,c,f){let{$$slots:y={},$$scope:x}=c,{items:S=void 0}=c,{height:w="100%"}=c,{itemHeight:a=40}=c,{hoverItemIndex:A=0}=c,{start:O=0}=c,{end:N=0}=c,U=[],F,ee,ge,xe=0,et,me,Ve=0,Ee=0,fe;async function Pe(Xe,It,vt){const{scrollTop:pt}=ee;await Ql();let bt=Ve-pt,De=O;for(;bt<It&&De<Xe.length;){let li=F[De-O];li||(f(10,N=De+1),await Ql(),li=F[De-O]);const bi=U[De]=vt||li.offsetHeight;bt+=bi,De+=1}f(10,N=De);const Ae=Xe.length-N;fe=(Ve+bt)/N,f(7,Ee=Ae*fe),U.length=Xe.length,ee&&f(3,ee.scrollTop=0,ee)}async function He(){const{scrollTop:Xe}=ee,It=O;for(let De=0;De<F.length;De+=1)U[O+De]=a||F[De].offsetHeight;let vt=0,pt=0;for(;vt<S.length;){const De=U[vt]||fe;if(pt+De>Xe){f(9,O=vt),f(6,Ve=pt);break}pt+=De,vt+=1}for(;vt<S.length&&(pt+=U[vt]||fe,vt+=1,!(pt>Xe+xe)););f(10,N=vt);const bt=S.length-N;for(fe=pt/N;vt<S.length;)U[vt++]=fe;if(f(7,Ee=bt*fe),O<It){await Ql();let De=0,Ae=0;for(let bi=O;bi<It;bi+=1)F[bi-O]&&(De+=U[bi],Ae+=a||F[bi-O].offsetHeight);const li=Ae-De;ee.scrollTo(0,Xe+li)}}Na(()=>{F=ge.getElementsByTagName("svelte-virtual-list-row"),f(13,me=!0)});function Be(Xe){Tn[Xe?"unshift":"push"](()=>{ge=Xe,f(4,ge)})}function Qe(Xe){Tn[Xe?"unshift":"push"](()=>{ee=Xe,f(3,ee)})}function ke(){xe=this.offsetHeight,f(2,xe)}return v.$$set=Xe=>{"items"in Xe&&f(11,S=Xe.items),"height"in Xe&&f(0,w=Xe.height),"itemHeight"in Xe&&f(12,a=Xe.itemHeight),"hoverItemIndex"in Xe&&f(1,A=Xe.hoverItemIndex),"start"in Xe&&f(9,O=Xe.start),"end"in Xe&&f(10,N=Xe.end),"$$scope"in Xe&&f(14,x=Xe.$$scope)},v.$$.update=()=>{v.$$.dirty&3584&&f(5,et=S.slice(O,N).map((Xe,It)=>({index:It+O,data:Xe}))),v.$$.dirty&14340&&me&&Pe(S,xe,a)},[w,A,xe,ee,ge,et,Ve,Ee,He,O,N,S,a,me,x,y,Be,Qe,ke]}class em extends Wi{constructor(c){super(),Xi(this,c,$2,Q2,Ki,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function tm(v){let c,f;return{c(){c=Rr("svg"),f=Rr("path"),this.h()},l(y){c=Fr(y,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var x=$e(c);f=Fr(x,"path",{fill:!0,d:!0}),$e(f).forEach(ae),x.forEach(ae),this.h()},h(){ue(f,"fill","currentColor"),ue(f,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),ue(c,"width","100%"),ue(c,"height","100%"),ue(c,"viewBox","-2 -2 50 50"),ue(c,"focusable","false"),ue(c,"aria-hidden","true"),ue(c,"role","presentation")},m(y,x){Ge(y,c,x),Ne(c,f)},p:Si,i:Si,o:Si,d(y){y&&ae(c)}}}class im extends Wi{constructor(c){super(),Xi(this,c,null,tm,Ki,{})}}function nm(v,c,f){let y;return function(){let S=this,w=arguments,a=function(){y=null,f||v.apply(S,w)},A=f&&!y;clearTimeout(y),y=setTimeout(a,c),A&&v.apply(S,w)}}function Bh(v,c,f){const y=v.slice();return y[103]=c[f],y}function Rh(v){let c,f,y,x,S;return{c(){c=Ye("span"),f=Yt(v[33]),y=Et(),x=Ye("span"),S=Yt(v[32]),this.h()},l(w){c=Je(w,"SPAN",{id:!0});var a=$e(c);f=Jt(a,v[33]),a.forEach(ae),y=Tt(w),x=Je(w,"SPAN",{id:!0});var A=$e(x);S=Jt(A,v[32]),A.forEach(ae),this.h()},h(){ue(c,"id","aria-selection"),ue(x,"id","aria-context")},m(w,a){Ge(w,c,a),Ne(c,f),Ge(w,y,a),Ge(w,x,a),Ne(x,S)},p(w,a){a[1]&4&&xi(f,w[33]),a[1]&2&&xi(S,w[32])},d(w){w&&ae(c),w&&ae(y),w&&ae(x)}}}function Fh(v){let c,f,y;const x=[v[18]];var S=v[17];function w(a){let A={};for(let O=0;O<x.length;O+=1)A=Su(A,x[O]);return{props:A}}return S&&(c=new S(w())),{c(){c&&Nt(c.$$.fragment),f=ti()},l(a){c&&ni(c.$$.fragment,a),f=ti()},m(a,A){c&&qt(c,a,A),Ge(a,f,A),y=!0},p(a,A){const O=A[0]&262144?Iu(x,[md(a[18])]):{};if(S!==(S=a[17])){if(c){pi();const N=c;Ke(N.$$.fragment,1,0,()=>{Gt(N,1)}),mi()}S?(c=new S(w()),Nt(c.$$.fragment),Oe(c.$$.fragment,1),qt(c,f.parentNode,f)):c=null}else S&&c.$set(O)},i(a){y||(c&&Oe(c.$$.fragment,a),y=!0)},o(a){c&&Ke(c.$$.fragment,a),y=!1},d(a){a&&ae(f),c&&Gt(c,a)}}}function Oh(v){let c,f,y;var x=v[26];function S(w){return{props:{value:w[2],getSelectionLabel:w[12],activeValue:w[30],isDisabled:w[9],multiFullItemClearable:w[8]}}}return x&&(c=new x(S(v)),c.$on("multiItemClear",v[38]),c.$on("focus",v[40])),{c(){c&&Nt(c.$$.fragment),f=ti()},l(w){c&&ni(c.$$.fragment,w),f=ti()},m(w,a){c&&qt(c,w,a),Ge(w,f,a),y=!0},p(w,a){const A={};if(a[0]&4&&(A.value=w[2]),a[0]&4096&&(A.getSelectionLabel=w[12]),a[0]&1073741824&&(A.activeValue=w[30]),a[0]&512&&(A.isDisabled=w[9]),a[0]&256&&(A.multiFullItemClearable=w[8]),x!==(x=w[26])){if(c){pi();const O=c;Ke(O.$$.fragment,1,0,()=>{Gt(O,1)}),mi()}x?(c=new x(S(w)),c.$on("multiItemClear",w[38]),c.$on("focus",w[40]),Nt(c.$$.fragment),Oe(c.$$.fragment,1),qt(c,f.parentNode,f)):c=null}else x&&c.$set(A)},i(w){y||(c&&Oe(c.$$.fragment,w),y=!0)},o(w){c&&Ke(c.$$.fragment,w),y=!1},d(w){w&&ae(f),c&&Gt(c,w)}}}function Vh(v){let c,f,y,x,S;var w=v[25];function a(A){return{props:{item:A[2],getSelectionLabel:A[12]}}}return w&&(f=new w(a(v))),{c(){c=Ye("div"),f&&Nt(f.$$.fragment),this.h()},l(A){c=Je(A,"DIV",{class:!0});var O=$e(c);f&&ni(f.$$.fragment,O),O.forEach(ae),this.h()},h(){ue(c,"class","selectedItem svelte-17l1npl")},m(A,O){Ge(A,c,O),f&&qt(f,c,null),y=!0,x||(S=un(c,"focus",v[40]),x=!0)},p(A,O){const N={};if(O[0]&4&&(N.item=A[2]),O[0]&4096&&(N.getSelectionLabel=A[12]),w!==(w=A[25])){if(f){pi();const U=f;Ke(U.$$.fragment,1,0,()=>{Gt(U,1)}),mi()}w?(f=new w(a(A)),Nt(f.$$.fragment),Oe(f.$$.fragment,1),qt(f,c,null)):f=null}else w&&f.$set(N)},i(A){y||(f&&Oe(f.$$.fragment,A),y=!0)},o(A){f&&Ke(f.$$.fragment,A),y=!1},d(A){A&&ae(c),f&&Gt(f),x=!1,S()}}}function Uh(v){let c,f,y,x,S;var w=v[23];function a(A){return{}}return w&&(f=new w(a())),{c(){c=Ye("div"),f&&Nt(f.$$.fragment),this.h()},l(A){c=Je(A,"DIV",{class:!0,"aria-hidden":!0});var O=$e(c);f&&ni(f.$$.fragment,O),O.forEach(ae),this.h()},h(){ue(c,"class","clearSelect svelte-17l1npl"),ue(c,"aria-hidden","true")},m(A,O){Ge(A,c,O),f&&qt(f,c,null),y=!0,x||(S=un(c,"click",mp(v[27])),x=!0)},p(A,O){if(w!==(w=A[23])){if(f){pi();const N=f;Ke(N.$$.fragment,1,0,()=>{Gt(N,1)}),mi()}w?(f=new w(a()),Nt(f.$$.fragment),Oe(f.$$.fragment,1),qt(f,c,null)):f=null}},i(A){y||(f&&Oe(f.$$.fragment,A),y=!0)},o(A){f&&Ke(f.$$.fragment,A),y=!1},d(A){A&&ae(c),f&&Gt(f),x=!1,S()}}}function Nh(v){let c;function f(S,w){return S[22]?sm:rm}let y=f(v),x=y(v);return{c(){c=Ye("div"),x.c(),this.h()},l(S){c=Je(S,"DIV",{class:!0,"aria-hidden":!0});var w=$e(c);x.l(w),w.forEach(ae),this.h()},h(){ue(c,"class","indicator svelte-17l1npl"),ue(c,"aria-hidden","true")},m(S,w){Ge(S,c,w),x.m(c,null)},p(S,w){y===(y=f(S))&&x?x.p(S,w):(x.d(1),x=y(S),x&&(x.c(),x.m(c,null)))},d(S){S&&ae(c),x.d()}}}function rm(v){let c,f;return{c(){c=Rr("svg"),f=Rr("path"),this.h()},l(y){c=Fr(y,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var x=$e(c);f=Fr(x,"path",{d:!0}),$e(f).forEach(ae),x.forEach(ae),this.h()},h(){ue(f,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),ue(c,"width","100%"),ue(c,"height","100%"),ue(c,"viewBox","0 0 20 20"),ue(c,"focusable","false"),ue(c,"aria-hidden","true"),ue(c,"class","svelte-17l1npl")},m(y,x){Ge(y,c,x),Ne(c,f)},p:Si,d(y){y&&ae(c)}}}function sm(v){let c,f;return{c(){c=new gp,f=ti(),this.h()},l(y){c=_p(y),f=ti(),this.h()},h(){c.a=f},m(y,x){c.m(v[22],y,x),Ge(y,f,x)},p(y,x){x[0]&4194304&&c.p(y[22])},d(y){y&&ae(f),y&&c.d()}}}function qh(v){let c,f,y;return{c(){c=Ye("div"),f=Rr("svg"),y=Rr("circle"),this.h()},l(x){c=Je(x,"DIV",{class:!0});var S=$e(c);f=Fr(S,"svg",{class:!0,viewBox:!0});var w=$e(f);y=Fr(w,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),$e(y).forEach(ae),w.forEach(ae),S.forEach(ae),this.h()},h(){ue(y,"class","spinner_path svelte-17l1npl"),ue(y,"cx","50"),ue(y,"cy","50"),ue(y,"r","20"),ue(y,"fill","none"),ue(y,"stroke","currentColor"),ue(y,"stroke-width","5"),ue(y,"stroke-miterlimit","10"),ue(f,"class","spinner_icon svelte-17l1npl"),ue(f,"viewBox","25 25 50 50"),ue(c,"class","spinner svelte-17l1npl")},m(x,S){Ge(x,c,S),Ne(c,f),Ne(f,y)},d(x){x&&ae(c)}}}function Gh(v){let c,f,y,x;const S=[v[34]];function w(O){v[84](O)}var a=v[24];function A(O){let N={};for(let U=0;U<S.length;U+=1)N=Su(N,S[U]);return O[28]!==void 0&&(N.hoverItemIndex=O[28]),{props:N}}return a&&(c=new a(A(v)),Tn.push(()=>Br(c,"hoverItemIndex",w)),c.$on("itemSelected",v[43]),c.$on("itemCreated",v[44]),c.$on("closeList",v[45])),{c(){c&&Nt(c.$$.fragment),y=ti()},l(O){c&&ni(c.$$.fragment,O),y=ti()},m(O,N){c&&qt(c,O,N),Ge(O,y,N),x=!0},p(O,N){const U=N[1]&8?Iu(S,[md(O[34])]):{};if(!f&&N[0]&268435456&&(f=!0,U.hoverItemIndex=O[28],is(()=>f=!1)),a!==(a=O[24])){if(c){pi();const F=c;Ke(F.$$.fragment,1,0,()=>{Gt(F,1)}),mi()}a?(c=new a(A(O)),Tn.push(()=>Br(c,"hoverItemIndex",w)),c.$on("itemSelected",O[43]),c.$on("itemCreated",O[44]),c.$on("closeList",O[45]),Nt(c.$$.fragment),Oe(c.$$.fragment,1),qt(c,y.parentNode,y)):c=null}else a&&c.$set(U)},i(O){x||(c&&Oe(c.$$.fragment,O),x=!0)},o(O){c&&Ke(c.$$.fragment,O),x=!1},d(O){O&&ae(y),c&&Gt(c,O)}}}function jh(v){let c,f,y;return{c(){c=Ye("input"),this.h()},l(x){c=Je(x,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){ue(c,"name",f=v[16].name),ue(c,"type","hidden"),c.value=y=v[2]?v[12](v[2]):null,ue(c,"class","svelte-17l1npl")},m(x,S){Ge(x,c,S)},p(x,S){S[0]&65536&&f!==(f=x[16].name)&&ue(c,"name",f),S[0]&4100&&y!==(y=x[2]?x[12](x[2]):null)&&(c.value=y)},d(x){x&&ae(c)}}}function Zh(v){let c,f=v[2],y=[];for(let x=0;x<f.length;x+=1)y[x]=Hh(Bh(v,f,x));return{c(){for(let x=0;x<y.length;x+=1)y[x].c();c=ti()},l(x){for(let S=0;S<y.length;S+=1)y[S].l(x);c=ti()},m(x,S){for(let w=0;w<y.length;w+=1)y[w].m(x,S);Ge(x,c,S)},p(x,S){if(S[0]&69636){f=x[2];let w;for(w=0;w<f.length;w+=1){const a=Bh(x,f,w);y[w]?y[w].p(a,S):(y[w]=Hh(a),y[w].c(),y[w].m(c.parentNode,c))}for(;w<y.length;w+=1)y[w].d(1);y.length=f.length}},d(x){Ar(y,x),x&&ae(c)}}}function Hh(v){let c,f,y;return{c(){c=Ye("input"),this.h()},l(x){c=Je(x,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){ue(c,"name",f=v[16].name),ue(c,"type","hidden"),c.value=y=v[103]?v[12](v[103]):null,ue(c,"class","svelte-17l1npl")},m(x,S){Ge(x,c,S)},p(x,S){S[0]&65536&&f!==(f=x[16].name)&&ue(c,"name",f),S[0]&4100&&y!==(y=x[103]?x[12](x[103]):null)&&(c.value=y)},d(x){x&&ae(c)}}}function am(v){let c,f,y,x,S,w,a,A,O,N,U,F,ee,ge,xe,et,me,Ve,Ee=v[1]&&Rh(v),fe=v[17]&&Fh(v),Pe=v[35]&&Oh(v),He=[{readOnly:a=!v[13]},v[31],{placeholder:v[36]},{style:v[14]},{disabled:v[9]}],Be={};for(let De=0;De<He.length;De+=1)Be=Su(Be,He[De]);let Qe=!v[7]&&v[29]&&Vh(v),ke=v[37]&&Uh(v),Xe=!v[37]&&(v[20]||v[19]&&!v[2]||!v[13]&&!v[9]&&!v[4]&&(v[29]&&!v[15]||!v[29]))&&Nh(v),It=v[4]&&qh(),vt=v[5]&&Gh(v),pt=(!v[7]||v[7]&&!v[35])&&jh(v),bt=v[7]&&v[35]&&Zh(v);return{c(){c=Ye("div"),f=Ye("span"),Ee&&Ee.c(),y=Et(),fe&&fe.c(),x=Et(),Pe&&Pe.c(),S=Et(),w=Ye("input"),A=Et(),Qe&&Qe.c(),O=Et(),ke&&ke.c(),N=Et(),Xe&&Xe.c(),U=Et(),It&&It.c(),F=Et(),vt&&vt.c(),ee=Et(),pt&&pt.c(),ge=Et(),bt&&bt.c(),this.h()},l(De){c=Je(De,"DIV",{class:!0,style:!0});var Ae=$e(c);f=Je(Ae,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var li=$e(f);Ee&&Ee.l(li),li.forEach(ae),y=Tt(Ae),fe&&fe.l(Ae),x=Tt(Ae),Pe&&Pe.l(Ae),S=Tt(Ae),w=Je(Ae,"INPUT",{placeholder:!0,style:!0}),A=Tt(Ae),Qe&&Qe.l(Ae),O=Tt(Ae),ke&&ke.l(Ae),N=Tt(Ae),Xe&&Xe.l(Ae),U=Tt(Ae),It&&It.l(Ae),F=Tt(Ae),vt&&vt.l(Ae),ee=Tt(Ae),pt&&pt.l(Ae),ge=Tt(Ae),bt&&bt.l(Ae),Ae.forEach(ae),this.h()},h(){ue(f,"aria-live","polite"),ue(f,"aria-atomic","false"),ue(f,"aria-relevant","additions text"),ue(f,"class","a11yText svelte-17l1npl"),J1(w,Be),yi(w,"svelte-17l1npl",!0),ue(c,"class",xe="selectContainer "+v[21]+" svelte-17l1npl"),ue(c,"style",v[11]),yi(c,"hasError",v[10]),yi(c,"multiSelect",v[7]),yi(c,"disabled",v[9]),yi(c,"focused",v[1])},m(De,Ae){Ge(De,c,Ae),Ne(c,f),Ee&&Ee.m(f,null),Ne(c,y),fe&&fe.m(c,null),Ne(c,x),Pe&&Pe.m(c,null),Ne(c,S),Ne(c,w),w.autofocus&&w.focus(),v[82](w),Q1(w,v[3]),Ne(c,A),Qe&&Qe.m(c,null),Ne(c,O),ke&&ke.m(c,null),Ne(c,N),Xe&&Xe.m(c,null),Ne(c,U),It&&It.m(c,null),Ne(c,F),vt&&vt.m(c,null),Ne(c,ee),pt&&pt.m(c,null),Ne(c,ge),bt&&bt.m(c,null),v[85](c),et=!0,me||(Ve=[un(window,"click",v[41]),un(window,"focusin",v[41]),un(window,"keydown",v[39]),un(w,"focus",v[40]),un(w,"input",v[83]),un(c,"click",v[42])],me=!0)},p(De,Ae){De[1]?Ee?Ee.p(De,Ae):(Ee=Rh(De),Ee.c(),Ee.m(f,null)):Ee&&(Ee.d(1),Ee=null),De[17]?fe?(fe.p(De,Ae),Ae[0]&131072&&Oe(fe,1)):(fe=Fh(De),fe.c(),Oe(fe,1),fe.m(c,x)):fe&&(pi(),Ke(fe,1,1,()=>{fe=null}),mi()),De[35]?Pe?(Pe.p(De,Ae),Ae[1]&16&&Oe(Pe,1)):(Pe=Oh(De),Pe.c(),Oe(Pe,1),Pe.m(c,S)):Pe&&(pi(),Ke(Pe,1,1,()=>{Pe=null}),mi()),J1(w,Be=Iu(He,[(!et||Ae[0]&8192&&a!==(a=!De[13]))&&{readOnly:a},Ae[1]&1&&De[31],(!et||Ae[1]&32)&&{placeholder:De[36]},(!et||Ae[0]&16384)&&{style:De[14]},(!et||Ae[0]&512)&&{disabled:De[9]}])),Ae[0]&8&&w.value!==De[3]&&Q1(w,De[3]),yi(w,"svelte-17l1npl",!0),!De[7]&&De[29]?Qe?(Qe.p(De,Ae),Ae[0]&536871040&&Oe(Qe,1)):(Qe=Vh(De),Qe.c(),Oe(Qe,1),Qe.m(c,O)):Qe&&(pi(),Ke(Qe,1,1,()=>{Qe=null}),mi()),De[37]?ke?(ke.p(De,Ae),Ae[1]&64&&Oe(ke,1)):(ke=Uh(De),ke.c(),Oe(ke,1),ke.m(c,N)):ke&&(pi(),Ke(ke,1,1,()=>{ke=null}),mi()),!De[37]&&(De[20]||De[19]&&!De[2]||!De[13]&&!De[9]&&!De[4]&&(De[29]&&!De[15]||!De[29]))?Xe?Xe.p(De,Ae):(Xe=Nh(De),Xe.c(),Xe.m(c,U)):Xe&&(Xe.d(1),Xe=null),De[4]?It||(It=qh(),It.c(),It.m(c,F)):It&&(It.d(1),It=null),De[5]?vt?(vt.p(De,Ae),Ae[0]&32&&Oe(vt,1)):(vt=Gh(De),vt.c(),Oe(vt,1),vt.m(c,ee)):vt&&(pi(),Ke(vt,1,1,()=>{vt=null}),mi()),!De[7]||De[7]&&!De[35]?pt?pt.p(De,Ae):(pt=jh(De),pt.c(),pt.m(c,ge)):pt&&(pt.d(1),pt=null),De[7]&&De[35]?bt?bt.p(De,Ae):(bt=Zh(De),bt.c(),bt.m(c,null)):bt&&(bt.d(1),bt=null),(!et||Ae[0]&2097152&&xe!==(xe="selectContainer "+De[21]+" svelte-17l1npl"))&&ue(c,"class",xe),(!et||Ae[0]&2048)&&ue(c,"style",De[11]),Ae[0]&2098176&&yi(c,"hasError",De[10]),Ae[0]&2097280&&yi(c,"multiSelect",De[7]),Ae[0]&2097664&&yi(c,"disabled",De[9]),Ae[0]&2097154&&yi(c,"focused",De[1])},i(De){et||(Oe(fe),Oe(Pe),Oe(Qe),Oe(ke),Oe(vt),et=!0)},o(De){Ke(fe),Ke(Pe),Ke(Qe),Ke(ke),Ke(vt),et=!1},d(De){De&&ae(c),Ee&&Ee.d(),fe&&fe.d(),Pe&&Pe.d(),v[82](null),Qe&&Qe.d(),ke&&ke.d(),Xe&&Xe.d(),It&&It.d(),vt&&vt.d(),pt&&pt.d(),bt&&bt.d(),v[85](null),me=!1,ic(Ve)}}}function Wh(v){return v.map((c,f)=>({index:f,value:c,label:`${c}`}))}function om(v,c,f){let y,x,S,w,a,A,O,N;const U=Ua();let{id:F=null}=c,{container:ee=void 0}=c,{input:ge=void 0}=c,{isMulti:xe=!1}=c,{multiFullItemClearable:et=!1}=c,{isDisabled:me=!1}=c,{isCreatable:Ve=!1}=c,{isFocused:Ee=!1}=c,{value:fe=null}=c,{filterText:Pe=""}=c,{placeholder:He="Select..."}=c,{placeholderAlwaysShow:Be=!1}=c,{items:Qe=null}=c,{itemFilter:ke=(K,Fe,rt)=>`${K}`.toLowerCase().includes(Fe.toLowerCase())}=c,{groupBy:Xe=void 0}=c,{groupFilter:It=K=>K}=c,{isGroupHeaderSelectable:vt=!1}=c,{getGroupHeaderLabel:pt=K=>K[bt]||K.id}=c,{labelIdentifier:bt="label"}=c,{getOptionLabel:De=(K,Fe)=>K.isCreator?`Create "${Fe}"`:K[bt]}=c,{optionIdentifier:Ae="value"}=c,{loadOptions:li=void 0}=c,{hasError:bi=!1}=c,{containerStyles:kt=""}=c,{getSelectionLabel:gi=K=>K?K[bt]:null}=c,{createGroupHeaderItem:Mi=K=>({value:K,label:K})}=c,{createItem:hi=K=>({value:K,label:K})}=c;const Di=()=>y;let{isSearchable:Ii=!0}=c,{inputStyles:Yi=""}=c,{isClearable:Ei=!0}=c,{isWaiting:ji=!1}=c,{listPlacement:Ze="auto"}=c,{listOpen:Ce=!1}=c,{isVirtualList:Zt=!1}=c,{loadOptionsInterval:Bi=300}=c,{noOptionsMessage:rr="No options"}=c,{hideEmptyState:Pi=!1}=c,{inputAttributes:xn={}}=c,{listAutoWidth:Qn=!0}=c,{itemHeight:Dn=40}=c,{Icon:bn=void 0}=c,{iconProps:_r={}}=c,{showChevron:qe=!1}=c,{showIndicator:vi=!1}=c,{containerClasses:hn=""}=c,{indicatorSvg:zr=void 0}=c,{listOffset:Vt=5}=c,{ClearIcon:sr=im}=c,{Item:Hn=wd}=c,{List:ar=G2}=c,{Selection:Cr=H2}=c,{MultiSelection:Se=K2}=c,{VirtualList:st=em}=c;function yr(K){if(K.loadOptions&&K.filterText.length>0)return;if(!K.items)return[];K.items&&K.items.length>0&&typeof K.items[0]!="object"&&(K.items=Wh(K.items));let Fe=K.items.filter(rt=>{let Ct=ke(De(rt,K.filterText),K.filterText,rt);return Ct&&K.isMulti&&K.value&&Array.isArray(K.value)&&(Ct=!K.value.some(Bt=>Bt[K.optionIdentifier]===rt[K.optionIdentifier])),Ct});return K.groupBy&&(Fe=vr(Fe)),K.isCreatable&&(Fe=Wn(Fe,K.filterText)),Fe}function Wn(K,Fe){if(Fe.length===0)return K;const rt=hi(Fe);return K[0]&&Fe===K[0][bt]?K:(rt.isCreator=!0,[...K,rt])}let{selectedValue:ri=null}=c,Xt,Fi,$n,ci,tt,Pt;const Lt=nm(async()=>{f(4,ji=!0);let K=await li(Pe).catch(Fe=>{console.warn("svelte-select loadOptions error :>> ",Fe),U("error",{type:"loadOptions",details:Fe})});K&&!K.cancelled&&(K?(K&&K.length>0&&typeof K[0]!="object"&&(K=Wh(K)),f(81,y=[...K]),U("loaded",{items:y})):f(81,y=[]),Ve&&f(81,y=Wn(y,Pe)),f(4,ji=!1),f(1,Ee=!0),f(5,Ce=!0))},Bi);function dn(){typeof fe=="string"?f(2,fe={[Ae]:fe,label:fe}):xe&&Array.isArray(fe)&&fe.length>0&&f(2,fe=fe.map(K=>typeof K=="string"?{value:K,label:K}:K))}let an;function Dt(){f(31,an=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},xn)),F&&f(31,an.id=F,an),Ii||f(31,an.readonly=!0,an)}function vr(K){const Fe=[],rt={};K.forEach(Bt=>{const At=Xe(Bt);Fe.includes(At)||(Fe.push(At),rt[At]=[],At&&rt[At].push(Object.assign(Mi(At,Bt),{id:At,isGroupHeader:!0,isSelectable:vt}))),rt[At].push(Object.assign({isGroupItem:!!At},Bt))});const Ct=[];return It(Fe).forEach(Bt=>{Ct.push(...rt[Bt])}),Ct}function Bn(){if(xe){JSON.stringify(fe)!==JSON.stringify(Fi)&&or()&&U("select",fe);return}(!Fi||JSON.stringify(fe[Ae])!==JSON.stringify(Fi[Ae]))&&U("select",fe)}function er(){Ee||Ce?lr():ge&&ge.blur()}function Oi(){fe&&(Array.isArray(fe)?f(2,fe=[...fe]):f(2,fe=[fe]))}function ui(){fe&&f(2,fe=null)}function kn(){Pe.length!==0&&(f(1,Ee=!0),f(5,Ce=!0),li?Lt():(f(5,Ce=!0),xe&&f(30,Xt=void 0)))}pd(async()=>{f(77,Fi=fe),f(78,$n=Pe),f(79,ci=Ee),f(80,tt=xe)});function or(){let K=!0;if(fe){const Fe=[],rt=[];fe.forEach(Ct=>{Fe.includes(Ct[Ae])?K=!1:(Fe.push(Ct[Ae]),rt.push(Ct))}),K||f(2,fe=rt)}return K}function Vi(K){let Fe=K?K[Ae]:fe[Ae];return Qe.find(rt=>rt[Ae]===Fe)}function Rn(K){!K||K.length===0||K.some(Fe=>typeof Fe!="object")||!fe||(xe?fe.some(Fe=>!Fe||!Fe[Ae]):!fe[Ae])||(Array.isArray(fe)?f(2,fe=fe.map(Fe=>Vi(Fe)||Fe)):f(2,fe=Vi()||fe))}function An(K){const{detail:Fe}=K,rt=fe[Fe?Fe.i:fe.length-1];fe.length===1?f(2,fe=void 0):f(2,fe=fe.filter(Ct=>Ct!==rt)),U("clear",rt)}function Or(K){if(!!Ee)switch(K.key){case"ArrowDown":K.preventDefault(),f(5,Ce=!0),f(30,Xt=void 0);break;case"ArrowUp":K.preventDefault(),f(5,Ce=!0),f(30,Xt=void 0);break;case"Tab":Ce||f(1,Ee=!1);break;case"Backspace":if(!xe||Pe.length>0)return;if(xe&&fe&&fe.length>0){if(An(Xt!==void 0?Xt:fe.length-1),Xt===0||Xt===void 0)break;f(30,Xt=fe.length>Xt?Xt-1:void 0)}break;case"ArrowLeft":if(!xe||Pe.length>0)return;Xt===void 0?f(30,Xt=fe.length-1):fe.length>Xt&&Xt!==0&&f(30,Xt-=1);break;case"ArrowRight":if(!xe||Pe.length>0||Xt===void 0)return;Xt===fe.length-1?f(30,Xt=void 0):Xt<fe.length-1&&f(30,Xt+=1);break}}function lr(){f(1,Ee=!0),ge&&ge.focus()}function Mr(K){if(!ee)return;const Fe=K.path&&K.path.length>0?K.path[0]:K.target;ee.contains(Fe)||ee.contains(K.relatedTarget)||(f(1,Ee=!1),f(5,Ce=!1),f(30,Xt=void 0),ge&&ge.blur())}function X(){me||(f(1,Ee=!0),f(5,Ce=!Ce))}function M(){f(2,fe=void 0),f(5,Ce=!1),U("clear",fe),lr()}Na(()=>{Ee&&ge&&ge.focus()});function D(K){const{detail:Fe}=K;if(Fe){f(3,Pe="");const rt=Object.assign({},Fe);(!rt.isGroupHeader||rt.isSelectable)&&(xe?f(2,fe=fe?fe.concat([rt]):[rt]):f(2,fe=rt),f(2,fe),setTimeout(()=>{f(5,Ce=!1),f(30,Xt=void 0)}))}}function Z(K){const{detail:Fe}=K;xe?(f(2,fe=fe||[]),f(2,fe=[...fe,hi(Fe)])):f(2,fe=hi(Fe)),U("itemCreated",Fe),f(3,Pe=""),f(5,Ce=!1),f(30,Xt=void 0)}function Y(){f(3,Pe=""),f(5,Ce=!1)}let{ariaValues:J=K=>`Option ${K}, selected.`}=c,{ariaListOpen:se=(K,Fe)=>`You are currently focused on option ${K}. There are ${Fe} results available.`}=c,{ariaFocused:ne=()=>"Select is focused, type to refine list, press down to open the menu."}=c;function re(){let K;return xe&&fe.length>0?K=fe.map(Fe=>gi(Fe)).join(", "):K=gi(fe),J(K)}function oe(){if(!Ee||!y||y.length===0)return"";let K=y[Pt];if(Ce&&K){let Fe=gi(K),rt=y?y.length:0;return se(Fe,rt)}else return ne()}function we(K){Tn[K?"unshift":"push"](()=>{ge=K,f(6,ge)})}function Re(){Pe=this.value,f(3,Pe)}function ve(K){Pt=K,f(28,Pt)}function mt(K){Tn[K?"unshift":"push"](()=>{ee=K,f(0,ee)})}return v.$$set=K=>{"id"in K&&f(46,F=K.id),"container"in K&&f(0,ee=K.container),"input"in K&&f(6,ge=K.input),"isMulti"in K&&f(7,xe=K.isMulti),"multiFullItemClearable"in K&&f(8,et=K.multiFullItemClearable),"isDisabled"in K&&f(9,me=K.isDisabled),"isCreatable"in K&&f(47,Ve=K.isCreatable),"isFocused"in K&&f(1,Ee=K.isFocused),"value"in K&&f(2,fe=K.value),"filterText"in K&&f(3,Pe=K.filterText),"placeholder"in K&&f(48,He=K.placeholder),"placeholderAlwaysShow"in K&&f(49,Be=K.placeholderAlwaysShow),"items"in K&&f(50,Qe=K.items),"itemFilter"in K&&f(51,ke=K.itemFilter),"groupBy"in K&&f(52,Xe=K.groupBy),"groupFilter"in K&&f(53,It=K.groupFilter),"isGroupHeaderSelectable"in K&&f(54,vt=K.isGroupHeaderSelectable),"getGroupHeaderLabel"in K&&f(55,pt=K.getGroupHeaderLabel),"labelIdentifier"in K&&f(56,bt=K.labelIdentifier),"getOptionLabel"in K&&f(57,De=K.getOptionLabel),"optionIdentifier"in K&&f(58,Ae=K.optionIdentifier),"loadOptions"in K&&f(59,li=K.loadOptions),"hasError"in K&&f(10,bi=K.hasError),"containerStyles"in K&&f(11,kt=K.containerStyles),"getSelectionLabel"in K&&f(12,gi=K.getSelectionLabel),"createGroupHeaderItem"in K&&f(60,Mi=K.createGroupHeaderItem),"createItem"in K&&f(61,hi=K.createItem),"isSearchable"in K&&f(13,Ii=K.isSearchable),"inputStyles"in K&&f(14,Yi=K.inputStyles),"isClearable"in K&&f(15,Ei=K.isClearable),"isWaiting"in K&&f(4,ji=K.isWaiting),"listPlacement"in K&&f(63,Ze=K.listPlacement),"listOpen"in K&&f(5,Ce=K.listOpen),"isVirtualList"in K&&f(64,Zt=K.isVirtualList),"loadOptionsInterval"in K&&f(65,Bi=K.loadOptionsInterval),"noOptionsMessage"in K&&f(66,rr=K.noOptionsMessage),"hideEmptyState"in K&&f(67,Pi=K.hideEmptyState),"inputAttributes"in K&&f(16,xn=K.inputAttributes),"listAutoWidth"in K&&f(68,Qn=K.listAutoWidth),"itemHeight"in K&&f(69,Dn=K.itemHeight),"Icon"in K&&f(17,bn=K.Icon),"iconProps"in K&&f(18,_r=K.iconProps),"showChevron"in K&&f(19,qe=K.showChevron),"showIndicator"in K&&f(20,vi=K.showIndicator),"containerClasses"in K&&f(21,hn=K.containerClasses),"indicatorSvg"in K&&f(22,zr=K.indicatorSvg),"listOffset"in K&&f(70,Vt=K.listOffset),"ClearIcon"in K&&f(23,sr=K.ClearIcon),"Item"in K&&f(71,Hn=K.Item),"List"in K&&f(24,ar=K.List),"Selection"in K&&f(25,Cr=K.Selection),"MultiSelection"in K&&f(26,Se=K.MultiSelection),"VirtualList"in K&&f(72,st=K.VirtualList),"selectedValue"in K&&f(73,ri=K.selectedValue),"ariaValues"in K&&f(74,J=K.ariaValues),"ariaListOpen"in K&&f(75,se=K.ariaListOpen),"ariaFocused"in K&&f(76,ne=K.ariaFocused)},v.$$.update=()=>{v.$$.dirty[0]&140|v.$$.dirty[1]&405340160&&f(81,y=yr({loadOptions:li,filterText:Pe,items:Qe,value:fe,isMulti:xe,optionIdentifier:Ae,groupBy:Xe,isCreatable:Ve})),v.$$.dirty[2]&2048&&ri&&console.warn("selectedValue is no longer used. Please use value instead."),v.$$.dirty[1]&524288&&Rn(Qe),v.$$.dirty[0]&4&&fe&&dn(),v.$$.dirty[0]&73728&&(xn||!Ii)&&Dt(),v.$$.dirty[0]&128|v.$$.dirty[2]&262144&&(xe&&Oi(),tt&&!xe&&ui()),v.$$.dirty[0]&132&&xe&&fe&&fe.length>1&&or(),v.$$.dirty[0]&4&&fe&&Bn(),v.$$.dirty[0]&132|v.$$.dirty[2]&32768&&!fe&&xe&&Fi&&U("select",fe),v.$$.dirty[0]&2|v.$$.dirty[2]&131072&&Ee!==ci&&er(),v.$$.dirty[0]&8|v.$$.dirty[2]&65536&&Pe!==$n&&kn(),v.$$.dirty[0]&12&&f(29,x=fe&&Pe.length===0),v.$$.dirty[0]&536904208&&f(37,S=x&&Ei&&!me&&!ji),v.$$.dirty[0]&132|v.$$.dirty[1]&393216&&f(36,w=Be&&xe?He:fe?"":He),v.$$.dirty[0]&132&&f(35,a=xe&&fe&&fe.length>0),v.$$.dirty[0]&141|v.$$.dirty[1]&218103808|v.$$.dirty[2]&526326&&f(34,A={Item:Hn,filterText:Pe,optionIdentifier:Ae,noOptionsMessage:rr,hideEmptyState:Pi,isVirtualList:Zt,VirtualList:st,value:fe,isMulti:xe,getGroupHeaderLabel:pt,items:y,itemHeight:Dn,getOptionLabel:De,listPlacement:Ze,parent:ee,listAutoWidth:Qn,listOffset:Vt}),v.$$.dirty[0]&132&&f(33,O=fe?re():""),v.$$.dirty[0]&268435490|v.$$.dirty[2]&524288&&f(32,N=oe())},[ee,Ee,fe,Pe,ji,Ce,ge,xe,et,me,bi,kt,gi,Ii,Yi,Ei,xn,bn,_r,qe,vi,hn,zr,sr,ar,Cr,Se,M,Pt,x,Xt,an,N,O,A,a,w,S,An,Or,lr,Mr,X,D,Z,Y,F,Ve,He,Be,Qe,ke,Xe,It,vt,pt,bt,De,Ae,li,Mi,hi,Di,Ze,Zt,Bi,rr,Pi,Qn,Dn,Vt,Hn,st,ri,J,se,ne,Fi,$n,ci,tt,y,we,Re,ve,mt]}class lm extends Wi{constructor(c){super(),Xi(this,c,om,am,Ki,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function cm(v){let c,f,y,x,S,w,a,A,O;function N(me){v[38](me)}function U(me){v[39](me)}function F(me){v[40](me)}function ee(me){v[41](me)}function ge(me){v[42](me)}function xe(me){v[43](me)}let et={id:v[2],container:v[3],items:v[4],placeholder:v[5],isMulti:v[10],isSearchable:v[6],groupBy:v[20],loadOptions:v[9],getSelectionLabel:v[11],getOptionLabel:v[19],itemFilter:v[17],ariaValues:v[23],ariaListOpen:v[24],ariaFocused:v[25],noOptionsMessage:v[18],indicatorSvg:v[21],containerStyles:v[22],optionIdentifier:v[8],showIndicator:!0,isClearable:v[7]?!v[10]:!1};return v[14]!==void 0&&(et.isFocused=v[14]),v[0]!==void 0&&(et.value=v[0]),v[15]!==void 0&&(et.listOpen=v[15]),v[1]!==void 0&&(et.filterText=v[1]),v[12]!==void 0&&(et.isWaiting=v[12]),v[16]!==void 0&&(et.handleClear=v[16]),f=new lm({props:et}),Tn.push(()=>Br(f,"isFocused",N)),Tn.push(()=>Br(f,"value",U)),Tn.push(()=>Br(f,"listOpen",F)),Tn.push(()=>Br(f,"filterText",ee)),Tn.push(()=>Br(f,"isWaiting",ge)),Tn.push(()=>Br(f,"handleClear",xe)),f.$on("select",v[26]),f.$on("clear",v[44]),f.$on("loaded",v[45]),f.$on("error",v[46]),{c(){c=Ye("div"),Nt(f.$$.fragment),this.h()},l(me){c=Je(me,"DIV",{class:!0});var Ve=$e(c);ni(f.$$.fragment,Ve),Ve.forEach(ae),this.h()},h(){ue(c,"class","selectbox svelte-1w33mjb"),yi(c,"multi-selected",v[0]&&v[10]),yi(c,"focused",v[14]),yi(c,"selected",v[0]&&!v[15]&&!v[10])},m(me,Ve){Ge(me,c,Ve),qt(f,c,null),v[47](c),O=!0},p(me,Ve){const Ee={};Ve[0]&4&&(Ee.id=me[2]),Ve[0]&8&&(Ee.container=me[3]),Ve[0]&16&&(Ee.items=me[4]),Ve[0]&32&&(Ee.placeholder=me[5]),Ve[0]&1024&&(Ee.isMulti=me[10]),Ve[0]&64&&(Ee.isSearchable=me[6]),Ve[0]&512&&(Ee.loadOptions=me[9]),Ve[0]&2048&&(Ee.getSelectionLabel=me[11]),Ve[0]&131072&&(Ee.itemFilter=me[17]),Ve[0]&262144&&(Ee.noOptionsMessage=me[18]),Ve[0]&256&&(Ee.optionIdentifier=me[8]),Ve[0]&1152&&(Ee.isClearable=me[7]?!me[10]:!1),!y&&Ve[0]&16384&&(y=!0,Ee.isFocused=me[14],is(()=>y=!1)),!x&&Ve[0]&1&&(x=!0,Ee.value=me[0],is(()=>x=!1)),!S&&Ve[0]&32768&&(S=!0,Ee.listOpen=me[15],is(()=>S=!1)),!w&&Ve[0]&2&&(w=!0,Ee.filterText=me[1],is(()=>w=!1)),!a&&Ve[0]&4096&&(a=!0,Ee.isWaiting=me[12],is(()=>a=!1)),!A&&Ve[0]&65536&&(A=!0,Ee.handleClear=me[16],is(()=>A=!1)),f.$set(Ee),Ve[0]&1025&&yi(c,"multi-selected",me[0]&&me[10]),Ve[0]&16384&&yi(c,"focused",me[14]),Ve[0]&33793&&yi(c,"selected",me[0]&&!me[15]&&!me[10])},i(me){O||(Oe(f.$$.fragment,me),O=!0)},o(me){Ke(f.$$.fragment,me),O=!1},d(me){me&&ae(c),Gt(f),v[47](null)}}}function um(v,c,f){let y,x;const S='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',w='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',a=Ua();let{id:A=""}=c,{container:O=void 0}=c,{mode:N="default"}=c,{items:U}=c,{placeholder:F="Select one..."}=c,{value:ee=null}=c,{filterText:ge=""}=c,{isSearchable:xe=!0}=c,{isClearable:et=!0}=c,{autoClear:me=!1}=c,{idKey:Ve="value"}=c,{labelKey:Ee="label"}=c,{groupKey:fe=null}=c,{groupItems:Pe=!1}=c,{loadOptions:He=void 0}=c,{fontSize:Be="1em"}=c,{height:Qe=42}=c,{isMulti:ke=!1}=c,{maxSelected:Xe=4}=c,{colors:It=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=c,{darkMode:vt=!1}=c,{borderColor:pt=vt?"white":"#206095"}=c;const bt=fe&&!Pe?qe=>`${qe[Ee]} <span class="group">${qe[fe]}</span>`:qe=>qe[Ee];let{getSelectionLabel:De=qe=>qe?bt(qe):null}=c;const Ae=Pe&&fe?qe=>qe[fe]:void 0,li=N=="search"?S:w,bi=`--inputFontSize: ${Be}; --groupTitleFontSize: ${Be}; --height: ${Qe}px; font-size: ${Be};`,kt=qe=>`${qe}, selected.`,gi=(qe,vi)=>`You are currently focused on ${qe}. There are ${vi} results available.`,Mi=()=>"Select is focused, type to refine list, press down to open the menu.";let hi,Di,Ii,Yi,Ei;const ji=qe=>new Promise(vi=>setTimeout(vi,qe));async function Ze(qe){if(a("select",qe.detail),me)Ei();else if(et){await ji(10);let vi=hi.getElementsByClassName("clearSelect")[0];vi&&(vi.tabIndex=0,vi.onkeypress=hn=>{hn.key=="Enter"&&Ei()},vi.removeAttribute("aria-hidden"),vi.setAttribute("aria-label","Clear selection"))}}Na(()=>{let qe=hi.style;qe.setProperty("--firstItem",It[0%It.length]),qe.setProperty("--secondItem",It[1%It.length]),qe.setProperty("--thirdItem",It[2%It.length]),qe.setProperty("--fourthItem",It[3%It.length]),qe.setProperty("--borderColor",pt)});function Ce(qe){Di=qe,f(14,Di)}function Zt(qe){ee=qe,f(0,ee)}function Bi(qe){Ii=qe,f(15,Ii)}function rr(qe){ge=qe,f(1,ge)}function Pi(qe){Yi=qe,f(12,Yi)}function xn(qe){Ei=qe,f(16,Ei)}function Qn(qe){hu.call(this,v,qe)}function Dn(qe){hu.call(this,v,qe)}function bn(qe){hu.call(this,v,qe)}function _r(qe){Tn[qe?"unshift":"push"](()=>{hi=qe,f(13,hi)})}return v.$$set=qe=>{"id"in qe&&f(2,A=qe.id),"container"in qe&&f(3,O=qe.container),"mode"in qe&&f(27,N=qe.mode),"items"in qe&&f(4,U=qe.items),"placeholder"in qe&&f(5,F=qe.placeholder),"value"in qe&&f(0,ee=qe.value),"filterText"in qe&&f(1,ge=qe.filterText),"isSearchable"in qe&&f(6,xe=qe.isSearchable),"isClearable"in qe&&f(7,et=qe.isClearable),"autoClear"in qe&&f(28,me=qe.autoClear),"idKey"in qe&&f(8,Ve=qe.idKey),"labelKey"in qe&&f(29,Ee=qe.labelKey),"groupKey"in qe&&f(30,fe=qe.groupKey),"groupItems"in qe&&f(31,Pe=qe.groupItems),"loadOptions"in qe&&f(9,He=qe.loadOptions),"fontSize"in qe&&f(32,Be=qe.fontSize),"height"in qe&&f(33,Qe=qe.height),"isMulti"in qe&&f(10,ke=qe.isMulti),"maxSelected"in qe&&f(34,Xe=qe.maxSelected),"colors"in qe&&f(35,It=qe.colors),"darkMode"in qe&&f(36,vt=qe.darkMode),"borderColor"in qe&&f(37,pt=qe.borderColor),"getSelectionLabel"in qe&&f(11,De=qe.getSelectionLabel)},v.$$.update=()=>{v.$$.dirty[0]&134221826&&f(18,y=Yi?"Loading...":N=="search"&&ge.length<3?"Enter 3 or more characters for suggestions":`No results match ${ge}`),v.$$.dirty[0]&134217731|v.$$.dirty[1]&8&&f(17,x=Array.isArray(ee)&&ee.length>=Xe||N=="search"&&ge.length<3?(qe,vi,hn)=>!1:(qe,vi,hn)=>`${qe}`.split("<")[0].toLowerCase().slice(0,vi.length)==vi.toLowerCase())},[ee,ge,A,O,U,F,xe,et,Ve,He,ke,De,Yi,hi,Di,Ii,Ei,x,y,bt,Ae,li,bi,kt,gi,Mi,Ze,N,me,Ee,fe,Pe,Be,Qe,Xe,It,vt,pt,Ce,Zt,Bi,rr,Pi,xn,Qn,Dn,bn,_r]}class hm extends Wi{constructor(c){super(),Xi(this,c,um,cm,Ki,{id:2,container:3,mode:27,items:4,placeholder:5,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:28,idKey:8,labelKey:29,groupKey:30,groupItems:31,loadOptions:9,fontSize:32,height:33,isMulti:10,maxSelected:34,colors:35,darkMode:36,borderColor:37,getSelectionLabel:11},null,[-1,-1])}}function dm(v){let c,f,y;return{c(){c=Rr("svg"),f=Rr("path"),this.h()},l(x){c=Fr(x,"svg",{class:!0,viewBox:!0,"fill-rule":!0,"clip-rule":!0,"aria-hidden":!0,focusable:!0,style:!0});var S=$e(c);f=Fr(S,"path",{d:!0}),$e(f).forEach(ae),S.forEach(ae),this.h()},h(){ue(f,"d",y=v[4][v[0]]),ue(c,"class","ico svelte-r1yv6i"),ue(c,"viewBox","0 0 24 24"),ue(c,"fill-rule","evenodd"),ue(c,"clip-rule","evenodd"),ue(c,"aria-hidden","true"),ue(c,"focusable","false"),ue(c,"style",v[3]),yi(c,"margin",v[2]),yi(c,"noclick",!v[1])},m(x,S){Ge(x,c,S),Ne(c,f)},p(x,[S]){S&1&&y!==(y=x[4][x[0]])&&ue(f,"d",y),S&8&&ue(c,"style",x[3]),S&4&&yi(c,"margin",x[2]),S&2&&yi(c,"noclick",!x[1])},i:Si,o:Si,d(x){x&&ae(c)}}}function fm(v,c,f){let{type:y="compass"}=c,{rotation:x=0}=c,{position:S="inline"}=c,{clickable:w=!1}=c,{margin:a=!1}=c;const A={compass:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10 10-4.48 10-10zm-10 1H8v-2h4V8l4 4-4 4v-3z",info:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1-8h-2V7h2v2z",chart:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM8 17c-.55 0-1-.45-1-1v-5c0-.55.45-1 1-1s1 .45 1 1v5c0 .55-.45 1-1 1zm4 0c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8c0 .55-.45 1-1 1zm4 0c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1z",share:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z",chevron:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",full:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z",full_exit:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z",shuffle:"M10.59 9.17 5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z",replay:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z",save:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z",tick:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",cross:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z",arrow:"M5,13h11.2l-2.9,2.9c-0.4,0.4-0.4,1,0,1.4s1,0.4,1.4,0l4.6-4.6c0.4-0.4,0.4-1,0-1.4l-4.6-4.6c-0.4-0.4-1-0.4-1.4,0c0,0,0,0,0,0c-0.4,0.4-0.4,1,0,1.4l2.9,2.9H5c-0.6,0-1,0.4-1,1S4.4,13,5,13z",plus:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z",minus:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z",subdir:"m19 15-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z"};let O=`transform: translate(0, 15%) scale(1.5) rotate(${-x}deg);`;return["left","right"].includes(S)&&(O+=` position: absolute; ${S}: 10px;`),v.$$set=N=>{"type"in N&&f(0,y=N.type),"rotation"in N&&f(5,x=N.rotation),"position"in N&&f(6,S=N.position),"clickable"in N&&f(1,w=N.clickable),"margin"in N&&f(2,a=N.margin)},[y,w,a,O,A,x,S]}class pm extends Wi{constructor(c){super(),Xi(this,c,fm,dm,Ki,{type:0,rotation:5,position:6,clickable:1,margin:2})}}var Sd={exports:{}};(function(v,c){(function(f,y){v.exports=y()})(r2,function(){var f,y,x;function S(a,A){if(!f)f=A;else if(!y)y=A;else{var O="var sharedChunk = {}; ("+f+")(sharedChunk); ("+y+")(sharedChunk);",N={};f(N),x=A(N),typeof window<"u"&&(x.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}S(["exports"],function(a){var A=O;function O(i,e,n,o){this.cx=3*i,this.bx=3*(n-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=e,this.p2x=n,this.p2y=o}function N(i,e,n,o){const u=new A(i,e,n,o);return function(p){return u.solve(p)}}O.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,e){if(e===void 0&&(e=1e-6),i<0)return 0;if(i>1)return 1;for(var n=i,o=0;o<8;o++){var u=this.sampleCurveX(n)-i;if(Math.abs(u)<e)return n;var p=this.sampleCurveDerivativeX(n);if(Math.abs(p)<1e-6)break;n-=u/p}var m=0,I=1;for(n=i,o=0;o<20&&(u=this.sampleCurveX(n),!(Math.abs(u-i)<e));o++)i>u?m=n:I=n,n=.5*(I-m)+m;return n},solve:function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))}};const U=N(.25,.1,.25,1);function F(i,e,n){return Math.min(n,Math.max(e,i))}function ee(i,e,n){const o=n-e,u=((i-e)%o+o)%o+e;return u===e?n:u}function ge(i,...e){for(const n of e)for(const o in n)i[o]=n[o];return i}let xe=1;function et(i,e){i.forEach(n=>{e[n]&&(e[n]=e[n].bind(e))})}function me(i,e,n){const o={};for(const u in i)o[u]=e.call(n||this,i[u],u,i);return o}function Ve(i,e,n){const o={};for(const u in i)e.call(n||this,i[u],u,i)&&(o[u]=i[u]);return o}function Ee(i){return Array.isArray(i)?i.map(Ee):typeof i=="object"&&i?me(i,Ee):i}const fe={};function Pe(i){fe[i]||(typeof console<"u"&&console.warn(i),fe[i]=!0)}function He(i,e,n){return(n.y-i.y)*(e.x-i.x)>(e.y-i.y)*(n.x-i.x)}function Be(i){let e=0;for(let n,o,u=0,p=i.length,m=p-1;u<p;m=u++)n=i[u],o=i[m],e+=(o.x-n.x)*(n.y+o.y);return e}function Qe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ke(i){const e={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,o,u,p)=>{const m=u||p;return e[o]=!m||m.toLowerCase(),""}),e["max-age"]){const n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}let Xe,It,vt=null;function pt(i){if(vt==null){const e=i.navigator?i.navigator.userAgent:null;vt=!!i.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return vt}function bt(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const De={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(i){const e=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(i,e=0){const n=window.document.createElement("canvas"),o=n.getContext("2d");if(!o)throw new Error("failed to create canvas 2d context");return n.width=i.width,n.height=i.height,o.drawImage(i,0,0,i.width,i.height),o.getImageData(-e,-e,i.width+2*e,i.height+2*e)},resolveURL:i=>(Xe||(Xe=document.createElement("a")),Xe.href=i,Xe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(It==null&&(It=matchMedia("(prefers-reduced-motion: reduce)")),It.matches)}};var Ae=li;function li(i,e){this.x=i,this.y=e}li.prototype={clone:function(){return new li(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,e){return this.clone()._rotateAround(i,e)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var e=i.x-this.x,n=i.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,e){return Math.atan2(this.x*e-this.y*i,this.x*i+this.y*e)},_matMult:function(i){var e=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=e,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var e=Math.cos(i),n=Math.sin(i),o=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=o,this},_rotateAround:function(i,e){var n=Math.cos(i),o=Math.sin(i),u=e.y+o*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-o*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},li.convert=function(i){return i instanceof li?i:Array.isArray(i)?new li(i[0],i[1]):i};const bi={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},kt="mapbox-tiles";let gi,Mi,hi=500,Di=50;function Ii(){typeof caches>"u"||gi||(gi=caches.open(kt))}let Yi=1/0;const Ei={supported:!1,testSupport:function(i){!Ce&&Ze&&(Zt?Bi(i):ji=i)}};let ji,Ze,Ce=!1,Zt=!1;function Bi(i){const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,Ze),i.isContextLost())return;Ei.supported=!0}catch{}i.deleteTexture(e),Ce=!0}typeof document<"u"&&(Ze=document.createElement("img"),Ze.onload=function(){ji&&Bi(ji),ji=null,Zt=!0},Ze.onerror=function(){Ce=!0,ji=null},Ze.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const rr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(rr);class Pi extends Error{constructor(e,n,o,u){super(`AJAXError: ${n} (${e}): ${o}`),this.status=e,this.statusText=n,this.url=o,this.body=u}}const xn=Qe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Qn(i,e){const n=new AbortController,o=new Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:xn(),signal:n.signal});let u=!1,p=!1;return i.type==="json"&&o.headers.set("Accept","application/json"),((m,I,T)=>{if(p)return;const C=Date.now();fetch(o).then(L=>L.ok?((B,V,G)=>{(i.type==="arrayBuffer"?B.arrayBuffer():i.type==="json"?B.json():B.text()).then(j=>{p||(V&&G&&function(te,ie,de){if(Ii(),!gi)return;const ye={status:ie.status,statusText:ie.statusText,headers:new Headers};ie.headers.forEach((Te,Ue)=>ye.headers.set(Ue,Te));const _e=ke(ie.headers.get("Cache-Control")||"");_e["no-store"]||(_e["max-age"]&&ye.headers.set("Expires",new Date(de+1e3*_e["max-age"]).toUTCString()),new Date(ye.headers.get("Expires")).getTime()-de<42e4||function(Te,Ue){if(Mi===void 0)try{new Response(new ReadableStream),Mi=!0}catch{Mi=!1}Mi?Ue(Te.body):Te.blob().then(Ue)}(ie,Te=>{const Ue=new Response(Te,ye);Ii(),gi&&gi.then(Le=>Le.put(function(ft){const yt=ft.indexOf("?");return yt<0?ft:ft.slice(0,yt)}(te.url),Ue)).catch(Le=>Pe(Le.message))}))}(o,V,G),u=!0,e(null,j,B.headers.get("Cache-Control"),B.headers.get("Expires")))}).catch(j=>{p||e(new Error(j.message))})})(L,null,C):L.blob().then(B=>e(new Pi(L.status,L.statusText,i.url,B)))).catch(L=>{L.code!==20&&e(new Error(L.message))})})(),{cancel:()=>{p=!0,u||n.abort()}}}const Dn=function(i,e){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){if(Qe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,e);if(!Qe()){const o=i.url.substring(0,i.url.indexOf("://"));return(bi.REGISTERED_PROTOCOLS[o]||Qn)(i,e)}}if(!(/^file:/.test(n=i.url)||/^file:/.test(xn())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Qn(i,e);if(Qe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,e,void 0,!0)}var n;return function(o,u){const p=new XMLHttpRequest;p.open(o.method||"GET",o.url,!0),o.type==="arrayBuffer"&&(p.responseType="arraybuffer");for(const m in o.headers)p.setRequestHeader(m,o.headers[m]);return o.type==="json"&&(p.responseType="text",p.setRequestHeader("Accept","application/json")),p.withCredentials=o.credentials==="include",p.onerror=()=>{u(new Error(p.statusText))},p.onload=()=>{if((p.status>=200&&p.status<300||p.status===0)&&p.response!==null){let m=p.response;if(o.type==="json")try{m=JSON.parse(p.response)}catch(I){return u(I)}u(null,m,p.getResponseHeader("Cache-Control"),p.getResponseHeader("Expires"))}else{const m=new Blob([p.response],{type:p.getResponseHeader("Content-Type")});u(new Pi(p.status,p.statusText,o.url,m))}},p.send(o.body),{cancel:()=>p.abort()}}(i,e)},bn=function(i,e){return Dn(ge(i,{type:"arrayBuffer"}),e)};function _r(i){const e=window.document.createElement("a");return e.href=i,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let vi,hn;vi=[],hn=0;const zr=function(i,e){if(Ei.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),hn>=bi.MAX_PARALLEL_IMAGE_REQUESTS){const p={requestParameters:i,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return vi.push(p),p}hn++;let n=!1;const o=()=>{if(!n)for(n=!0,hn--;vi.length&&hn<bi.MAX_PARALLEL_IMAGE_REQUESTS;){const p=vi.shift(),{requestParameters:m,callback:I,cancelled:T}=p;T||(p.cancel=zr(m,I).cancel)}},u=bn(i,(p,m,I,T)=>{o(),p?e(p):m&&function(C,L){typeof createImageBitmap=="function"?function(B,V){const G=new Blob([new Uint8Array(B)],{type:"image/png"});createImageBitmap(G).then(j=>{V(null,j)}).catch(j=>{V(new Error(`Could not load image because of ${j.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(C,L):function(B,V){const G=new Image;G.onload=()=>{V(null,G),URL.revokeObjectURL(G.src),G.onload=null,window.requestAnimationFrame(()=>{G.src=qe})},G.onerror=()=>V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const j=new Blob([new Uint8Array(B)],{type:"image/png"});G.src=B.byteLength?URL.createObjectURL(j):qe}(C,L)}(m,(C,L)=>{C!=null?e(C):L!=null&&e(null,L,{cacheControl:I,expires:T})})});return{cancel:()=>{u.cancel(),o()}}};function Vt(i,e,n){n[i]&&n[i].indexOf(e)!==-1||(n[i]=n[i]||[],n[i].push(e))}function sr(i,e,n){if(n&&n[i]){const o=n[i].indexOf(e);o!==-1&&n[i].splice(o,1)}}class Hn{constructor(e,n={}){ge(this,n),this.type=e}}class ar extends Hn{constructor(e,n={}){super("error",ge({error:e},n))}}class Cr{on(e,n){return this._listeners=this._listeners||{},Vt(e,n,this._listeners),this}off(e,n){return sr(e,n,this._listeners),sr(e,n,this._oneTimeListeners),this}once(e,n){return this._oneTimeListeners=this._oneTimeListeners||{},Vt(e,n,this._oneTimeListeners),this}fire(e,n){typeof e=="string"&&(e=new Hn(e,n||{}));const o=e.type;if(this.listens(o)){e.target=this;const u=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];for(const I of u)I.call(this,e);const p=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];for(const I of p)sr(o,I,this._oneTimeListeners),I.call(this,e);const m=this._eventedParent;m&&(ge(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),m.fire(e))}else e instanceof ar&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,n){return this._eventedParent=e,this._eventedParentData=n,this}}var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class st{constructor(e,n,o,u){this.message=(e?`${e}: `:"")+o,u&&(this.identifier=u),n!=null&&n.__line__&&(this.line=n.__line__)}}function yr(i){const e=i.value;return e?[new st(i.key,e,"constants have been deprecated as of v8")]:[]}function Wn(i,...e){for(const n of e)for(const o in n)i[o]=n[o];return i}function ri(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Xt(i){if(Array.isArray(i))return i.map(Xt);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const n in i)e[n]=Xt(i[n]);return e}return ri(i)}class Fi extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class $n{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[o,u]of n)this.bindings[o]=u}concat(e){return new $n(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const ci={kind:"null"},tt={kind:"number"},Pt={kind:"string"},Lt={kind:"boolean"},dn={kind:"color"},an={kind:"object"},Dt={kind:"value"},vr={kind:"collator"},Bn={kind:"formatted"},er={kind:"resolvedImage"};function Oi(i,e){return{kind:"array",itemType:i,N:e}}function ui(i){if(i.kind==="array"){const e=ui(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}return i.kind}const kn=[ci,tt,Pt,Lt,dn,Bn,an,Oi(Dt),er];function or(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!or(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const n of kn)if(!or(n,e))return null}}return`Expected ${ui(i)} but found ${ui(e)} instead.`}function Vi(i,e){return e.some(n=>n.kind===i.kind)}function Rn(i,e){return e.some(n=>n==="null"?i===null:n==="array"?Array.isArray(i):n==="object"?i&&!Array.isArray(i)&&typeof i=="object":n===typeof i)}var An,Or={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function lr(i){return(i=Math.round(i))<0?0:i>255?255:i}function Mr(i){return lr(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function X(i){return(e=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:e>1?1:e;var e}function M(i,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?i+(e-i)*n*6:2*n<1?e:3*n<2?i+(e-i)*(2/3-n)*6:i}try{An={}.parseCSSColor=function(i){var e,n=i.replace(/ /g,"").toLowerCase();if(n in Or)return Or[n].slice();if(n[0]==="#")return n.length===4?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:n.length===7&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var o=n.indexOf("("),u=n.indexOf(")");if(o!==-1&&u+1===n.length){var p=n.substr(0,o),m=n.substr(o+1,u-(o+1)).split(","),I=1;switch(p){case"rgba":if(m.length!==4)return null;I=X(m.pop());case"rgb":return m.length!==3?null:[Mr(m[0]),Mr(m[1]),Mr(m[2]),I];case"hsla":if(m.length!==4)return null;I=X(m.pop());case"hsl":if(m.length!==3)return null;var T=(parseFloat(m[0])%360+360)%360/360,C=X(m[1]),L=X(m[2]),B=L<=.5?L*(C+1):L+C-L*C,V=2*L-B;return[lr(255*M(V,B,T+1/3)),lr(255*M(V,B,T)),lr(255*M(V,B,T-1/3)),I];default:return null}}return null}}catch{}class D{constructor(e,n,o,u=1){this.r=e,this.g=n,this.b=o,this.a=u}static parse(e){if(!e)return;if(e instanceof D)return e;if(typeof e!="string")return;const n=An(e);return n?new D(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}toString(){const[e,n,o,u]=this.toArray();return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(o)},${u})`}toArray(){const{r:e,g:n,b:o,a:u}=this;return u===0?[0,0,0,0]:[255*e/u,255*n/u,255*o/u,u]}}D.black=new D(0,0,0,1),D.white=new D(1,1,1,1),D.transparent=new D(0,0,0,0),D.red=new D(1,0,0,1);class Z{constructor(e,n,o){this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Y{constructor(e,n,o,u,p){this.text=e,this.image=n,this.scale=o,this.fontStack=u,this.textColor=p}}class J{constructor(e){this.sections=e}static fromString(e){return new J([new Y(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof J?e:J.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const n of this.sections){if(n.image){e.push(["image",n.image.name]);continue}e.push(n.text);const o={};n.fontStack&&(o["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(o["font-scale"]=n.scale),n.textColor&&(o["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(o)}return e}}class se{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new se({name:e,available:!1}):null}serialize(){return["image",this.name]}}function ne(i,e,n,o){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?o===void 0||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[i,e,n,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[i,e,n,o]:[i,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function re(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof D||i instanceof Z||i instanceof J||i instanceof se)return!0;if(Array.isArray(i)){for(const e of i)if(!re(e))return!1;return!0}if(typeof i=="object"){for(const e in i)if(!re(i[e]))return!1;return!0}return!1}function oe(i){if(i===null)return ci;if(typeof i=="string")return Pt;if(typeof i=="boolean")return Lt;if(typeof i=="number")return tt;if(i instanceof D)return dn;if(i instanceof Z)return vr;if(i instanceof J)return Bn;if(i instanceof se)return er;if(Array.isArray(i)){const e=i.length;let n;for(const o of i){const u=oe(o);if(n){if(n===u)continue;n=Dt;break}n=u}return Oi(n||Dt,e)}return an}function we(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof D||i instanceof J||i instanceof se?i.toString():JSON.stringify(i)}class Re{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!re(e[1]))return n.error("invalid value");const o=e[1];let u=oe(o);const p=n.expectedType;return u.kind!=="array"||u.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(u=p),new Re(u,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof D?["rgba"].concat(this.value.toArray()):this.value instanceof J?this.value.serialize():this.value}}class ve{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const mt={string:Pt,number:tt,boolean:Lt,object:an};class K{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let o,u=1;const p=e[0];if(p==="array"){let I,T;if(e.length>2){const C=e[1];if(typeof C!="string"||!(C in mt)||C==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);I=mt[C],u++}else I=Dt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);T=e[2],u++}o=Oi(I,T)}else o=mt[p];const m=[];for(;u<e.length;u++){const I=n.parse(e[u],u,Dt);if(!I)return null;m.push(I)}return new K(o,m)}evaluate(e){for(let n=0;n<this.args.length;n++){const o=this.args[n].evaluate(e);if(!or(this.type,oe(o)))return o;if(n===this.args.length-1)throw new ve(`Expected value to be of type ${ui(this.type)}, but found ${ui(oe(o))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,n=[e.kind];if(e.kind==="array"){const o=e.itemType;if(o.kind==="string"||o.kind==="number"||o.kind==="boolean"){n.push(o.kind);const u=e.N;(typeof u=="number"||this.args.length>1)&&n.push(u)}}return n.concat(this.args.map(o=>o.serialize()))}}class Fe{constructor(e){this.type=Bn,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&typeof o=="object")return n.error("First argument must be an image or text section.");const u=[];let p=!1;for(let m=1;m<=e.length-1;++m){const I=e[m];if(p&&typeof I=="object"&&!Array.isArray(I)){p=!1;let T=null;if(I["font-scale"]&&(T=n.parse(I["font-scale"],1,tt),!T))return null;let C=null;if(I["text-font"]&&(C=n.parse(I["text-font"],1,Oi(Pt)),!C))return null;let L=null;if(I["text-color"]&&(L=n.parse(I["text-color"],1,dn),!L))return null;const B=u[u.length-1];B.scale=T,B.font=C,B.textColor=L}else{const T=n.parse(e[m],1,Dt);if(!T)return null;const C=T.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,u.push({content:T,scale:null,font:null,textColor:null})}}return new Fe(u)}evaluate(e){return new J(this.sections.map(n=>{const o=n.content.evaluate(e);return oe(o)===er?new Y("",o,null,null,null):new Y(we(o),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)}))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const n of this.sections){e.push(n.content.serialize());const o={};n.scale&&(o["font-scale"]=n.scale.serialize()),n.font&&(o["text-font"]=n.font.serialize()),n.textColor&&(o["text-color"]=n.textColor.serialize()),e.push(o)}return e}}class rt{constructor(e){this.type=er,this.input=e}static parse(e,n){if(e.length!==2)return n.error("Expected two arguments.");const o=n.parse(e[1],1,Pt);return o?new rt(o):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),o=se.fromString(n);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(n)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ct={"to-boolean":Lt,"to-color":dn,"to-number":tt,"to-string":Pt};class Bt{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const o=e[0];if((o==="to-boolean"||o==="to-string")&&e.length!==2)return n.error("Expected one argument.");const u=Ct[o],p=[];for(let m=1;m<e.length;m++){const I=n.parse(e[m],m,Dt);if(!I)return null;p.push(I)}return new Bt(u,p)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let n,o;for(const u of this.args){if(n=u.evaluate(e),o=null,n instanceof D)return n;if(typeof n=="string"){const p=e.parseColor(n);if(p)return p}else if(Array.isArray(n)&&(o=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:ne(n[0],n[1],n[2],n[3]),!o))return new D(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new ve(o||`Could not parse color from value '${typeof n=="string"?n:String(JSON.stringify(n))}'`)}if(this.type.kind==="number"){let n=null;for(const o of this.args){if(n=o.evaluate(e),n===null)return 0;const u=Number(n);if(!isNaN(u))return u}throw new ve(`Could not convert ${JSON.stringify(n)} to number.`)}return this.type.kind==="formatted"?J.fromString(we(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?se.fromString(we(this.args[0].evaluate(e))):we(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Fe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new rt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(n=>{e.push(n.serialize())}),e}}const At=["Unknown","Point","LineString","Polygon"];class Ot{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?At[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let n=this._parseColorCache[e];return n||(n=this._parseColorCache[e]=D.parse(e)),n}}class Ft{constructor(e,n,o,u){this.name=e,this.type=n,this._evaluate=o,this.args=u}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,n){const o=e[0],u=Ft.definitions[o];if(!u)return n.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const p=Array.isArray(u)?u[0]:u.type,m=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,I=m.filter(([C])=>!Array.isArray(C)||C.length===e.length-1);let T=null;for(const[C,L]of I){T=new Js(n.registry,n.path,null,n.scope);const B=[];let V=!1;for(let G=1;G<e.length;G++){const j=e[G],te=Array.isArray(C)?C[G-1]:C.type,ie=T.parse(j,1+B.length,te);if(!ie){V=!0;break}B.push(ie)}if(!V)if(Array.isArray(C)&&C.length!==B.length)T.error(`Expected ${C.length} arguments, but found ${B.length} instead.`);else{for(let G=0;G<B.length;G++){const j=Array.isArray(C)?C[G]:C.type,te=B[G];T.concat(G+1).checkSubtype(j,te.type)}if(T.errors.length===0)return new Ft(o,p,L,B)}}if(I.length===1)n.errors.push(...T.errors);else{const C=(I.length?I:m).map(([B])=>{return V=B,Array.isArray(V)?`(${V.map(ui).join(", ")})`:`(${ui(V.type)}...)`;var V}).join(" | "),L=[];for(let B=1;B<e.length;B++){const V=n.parse(e[B],1+L.length);if(!V)return null;L.push(ui(V.type))}n.error(`Expected arguments of type ${C}, but found (${L.join(", ")}) instead.`)}return null}static register(e,n){Ft.definitions=n;for(const o in n)e[o]=Ft}}class Zi{constructor(e,n,o){this.type=vr,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");const o=e[1];if(typeof o!="object"||Array.isArray(o))return n.error("Collator options argument must be an object.");const u=n.parse(o["case-sensitive"]!==void 0&&o["case-sensitive"],1,Lt);if(!u)return null;const p=n.parse(o["diacritic-sensitive"]!==void 0&&o["diacritic-sensitive"],1,Lt);if(!p)return null;let m=null;return o.locale&&(m=n.parse(o.locale,1,Pt),!m)?null:new Zi(u,p,m)}evaluate(e){return new Z(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Ui=8192;function on(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function fn(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function qa(i,e){const n=(180+i[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(n*u*Ui),Math.round(o*u*Ui)]}function Ga(i,e,n){const o=i[0]-e[0],u=i[1]-e[1],p=i[0]-n[0],m=i[1]-n[1];return o*m-p*u==0&&o*p<=0&&u*m<=0}function _i(i,e){let n=!1;for(let m=0,I=e.length;m<I;m++){const T=e[m];for(let C=0,L=T.length;C<L-1;C++){if(Ga(i,T[C],T[C+1]))return!1;(u=T[C])[1]>(o=i)[1]!=(p=T[C+1])[1]>o[1]&&o[0]<(p[0]-u[0])*(o[1]-u[1])/(p[1]-u[1])+u[0]&&(n=!n)}}var o,u,p;return n}function ac(i,e){for(let n=0;n<e.length;n++)if(_i(i,e[n]))return!0;return!1}function ja(i,e,n,o){const u=o[0]-n[0],p=o[1]-n[1],m=(i[0]-n[0])*p-u*(i[1]-n[1]),I=(e[0]-n[0])*p-u*(e[1]-n[1]);return m>0&&I<0||m<0&&I>0}function oc(i,e,n){for(const C of n)for(let L=0;L<C.length-1;++L)if((I=[(m=C[L+1])[0]-(p=C[L])[0],m[1]-p[1]])[0]*(T=[(u=e)[0]-(o=i)[0],u[1]-o[1]])[1]-I[1]*T[0]!=0&&ja(o,u,p,m)&&ja(p,m,o,u))return!0;var o,u,p,m,I,T;return!1}function Za(i,e){for(let n=0;n<i.length;++n)if(!_i(i[n],e))return!1;for(let n=0;n<i.length-1;++n)if(oc(i[n],i[n+1],e))return!1;return!0}function Qo(i,e){for(let n=0;n<e.length;n++)if(Za(i,e[n]))return!0;return!1}function Ha(i,e,n){const o=[];for(let u=0;u<i.length;u++){const p=[];for(let m=0;m<i[u].length;m++){const I=qa(i[u][m],n);on(e,I),p.push(I)}o.push(p)}return o}function Wa(i,e,n){const o=[];for(let u=0;u<i.length;u++){const p=Ha(i[u],e,n);o.push(p)}return o}function Xa(i,e,n,o){if(i[0]<n[0]||i[0]>n[2]){const u=.5*o;let p=i[0]-n[0]>u?-o:n[0]-i[0]>u?o:0;p===0&&(p=i[0]-n[2]>u?-o:n[2]-i[0]>u?o:0),i[0]+=p}on(e,i)}function $o(i,e,n,o){const u=Math.pow(2,o.z)*Ui,p=[o.x*Ui,o.y*Ui],m=[];for(const I of i)for(const T of I){const C=[T.x+p[0],T.y+p[1]];Xa(C,e,n,u),m.push(C)}return m}function el(i,e,n,o){const u=Math.pow(2,o.z)*Ui,p=[o.x*Ui,o.y*Ui],m=[];for(const T of i){const C=[];for(const L of T){const B=[L.x+p[0],L.y+p[1]];on(e,B),C.push(B)}m.push(C)}if(e[2]-e[0]<=u/2){(I=e)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const T of m)for(const C of T)Xa(C,e,n,u)}var I;return m}class Vr{constructor(e,n){this.type=Lt,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(re(e[1])){const o=e[1];if(o.type==="FeatureCollection")for(let u=0;u<o.features.length;++u){const p=o.features[u].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Vr(o,o.features[u].geometry)}else if(o.type==="Feature"){const u=o.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Vr(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new Vr(o,o)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(n,o){const u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],m=n.canonicalID();if(o.type==="Polygon"){const I=Ha(o.coordinates,p,m),T=$o(n.geometry(),u,p,m);if(!fn(u,p))return!1;for(const C of T)if(!_i(C,I))return!1}if(o.type==="MultiPolygon"){const I=Wa(o.coordinates,p,m),T=$o(n.geometry(),u,p,m);if(!fn(u,p))return!1;for(const C of T)if(!ac(C,I))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(n,o){const u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],m=n.canonicalID();if(o.type==="Polygon"){const I=Ha(o.coordinates,p,m),T=el(n.geometry(),u,p,m);if(!fn(u,p))return!1;for(const C of T)if(!Za(C,I))return!1}if(o.type==="MultiPolygon"){const I=Wa(o.coordinates,p,m),T=el(n.geometry(),u,p,m);if(!fn(u,p))return!1;for(const C of T)if(!Qo(C,I))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ks(i){if(i instanceof Ft&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Vr)return!1;let e=!0;return i.eachChild(n=>{e&&!Ks(n)&&(e=!1)}),e}function ns(i){if(i instanceof Ft&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(n=>{e&&!ns(n)&&(e=!1)}),e}function Is(i,e){if(i instanceof Ft&&e.indexOf(i.name)>=0)return!1;let n=!0;return i.eachChild(o=>{n&&!Is(o,e)&&(n=!1)}),n}class Ys{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const o=e[1];return n.scope.has(o)?new Ys(o,n.scope.get(o)):n.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Js{constructor(e,n=[],o,u=new $n,p=[]){this.registry=e,this.path=n,this.key=n.map(m=>`[${m}]`).join(""),this.scope=u,this.errors=p,this.expectedType=o}parse(e,n,o,u,p={}){return n?this.concat(n,o,u)._parse(e,p):this._parse(e,p)}_parse(e,n){function o(u,p,m){return m==="assert"?new K(p,[u]):m==="coerce"?new Bt(p,[u]):u}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=e[0];if(typeof u!="string")return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const p=this.registry[u];if(p){let m=p.parse(e,this);if(!m)return null;if(this.expectedType){const I=this.expectedType,T=m.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||T.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string"){if(this.checkSubtype(I,T))return null}else m=o(m,I,n.typeAnnotation||"coerce");else m=o(m,I,n.typeAnnotation||"assert")}if(!(m instanceof Re)&&m.type.kind!=="resolvedImage"&&Es(m)){const I=new Ot;try{m=new Re(m.type,m.evaluate(I))}catch(T){return this.error(T.message),null}}return m}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,n,o){const u=typeof e=="number"?this.path.concat(e):this.path,p=o?this.scope.concat(o):this.scope;return new Js(this.registry,u,n||null,p,this.errors)}error(e,...n){const o=`${this.key}${n.map(u=>`[${u}]`).join("")}`;this.errors.push(new Fi(o,e))}checkSubtype(e,n){const o=or(e,n);return o&&this.error(o),o}}function Es(i){if(i instanceof Ys)return Es(i.boundExpression);if(i instanceof Ft&&i.name==="error"||i instanceof Zi||i instanceof Vr)return!1;const e=i instanceof Bt||i instanceof K;let n=!0;return i.eachChild(o=>{n=e?n&&Es(o):n&&o instanceof Re}),!!n&&Ks(i)&&Is(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Qs(i,e){const n=i.length-1;let o,u,p=0,m=n,I=0;for(;p<=m;)if(I=Math.floor((p+m)/2),o=i[I],u=i[I+1],o<=e){if(I===n||e<u)return I;p=I+1}else{if(!(o>e))throw new ve("Input is not a number.");m=I-1}return 0}class Ts{constructor(e,n,o){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[u,p]of o)this.labels.push(u),this.outputs.push(p)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");const o=n.parse(e[1],1,tt);if(!o)return null;const u=[];let p=null;n.expectedType&&n.expectedType.kind!=="value"&&(p=n.expectedType);for(let m=1;m<e.length;m+=2){const I=m===1?-1/0:e[m],T=e[m+1],C=m,L=m+1;if(typeof I!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(u.length&&u[u.length-1][0]>=I)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const B=n.parse(T,L,p);if(!B)return null;p=p||B.type,u.push([I,B])}return new Ts(p,o,u)}evaluate(e){const n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(e);const u=this.input.evaluate(e);if(u<=n[0])return o[0].evaluate(e);const p=n.length;return u>=n[p-1]?o[p-1].evaluate(e):o[Qs(n,u)].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&e.push(this.labels[n]),e.push(this.outputs[n].serialize());return e}}function Ji(i,e,n){return i*(1-n)+e*n}var ks=Object.freeze({__proto__:null,number:Ji,color:function(i,e,n){return new D(Ji(i.r,e.r,n),Ji(i.g,e.g,n),Ji(i.b,e.b,n),Ji(i.a,e.a,n))},array:function(i,e,n){return i.map((o,u)=>Ji(o,e[u],n))}});const Ka=.95047,tl=1.08883,il=4/29,$s=6/29,Ya=3*$s*$s,lc=Math.PI/180,cc=180/Math.PI;function Ja(i){return i>.008856451679035631?Math.pow(i,1/3):i/Ya+il}function Qa(i){return i>$s?i*i*i:Ya*(i-il)}function $a(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function eo(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function nl(i){const e=eo(i.r),n=eo(i.g),o=eo(i.b),u=Ja((.4124564*e+.3575761*n+.1804375*o)/Ka),p=Ja((.2126729*e+.7151522*n+.072175*o)/1);return{l:116*p-16,a:500*(u-p),b:200*(p-Ja((.0193339*e+.119192*n+.9503041*o)/tl)),alpha:i.a}}function ii(i){let e=(i.l+16)/116,n=isNaN(i.a)?e:e+i.a/500,o=isNaN(i.b)?e:e-i.b/200;return e=1*Qa(e),n=Ka*Qa(n),o=tl*Qa(o),new D($a(3.2404542*n-1.5371385*e-.4985314*o),$a(-.969266*n+1.8760108*e+.041556*o),$a(.0556434*n-.2040259*e+1.0572252*o),i.alpha)}function uc(i,e,n){const o=e-i;return i+n*(o>180||o<-180?o-360*Math.round(o/360):o)}const As={forward:nl,reverse:ii,interpolate:function(i,e,n){return{l:Ji(i.l,e.l,n),a:Ji(i.a,e.a,n),b:Ji(i.b,e.b,n),alpha:Ji(i.alpha,e.alpha,n)}}},zs={forward:function(i){const{l:e,a:n,b:o}=nl(i),u=Math.atan2(o,n)*cc;return{h:u<0?u+360:u,c:Math.sqrt(n*n+o*o),l:e,alpha:i.a}},reverse:function(i){const e=i.h*lc,n=i.c;return ii({l:i.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:i.alpha})},interpolate:function(i,e,n){return{h:uc(i.h,e.h,n),c:Ji(i.c,e.c,n),l:Ji(i.l,e.l,n),alpha:Ji(i.alpha,e.alpha,n)}}};var rl=Object.freeze({__proto__:null,lab:As,hcl:zs});class Fn{constructor(e,n,o,u,p){this.type=e,this.operator=n,this.interpolation=o,this.input=u,this.labels=[],this.outputs=[];for(const[m,I]of p)this.labels.push(m),this.outputs.push(I)}static interpolationFactor(e,n,o,u){let p=0;if(e.name==="exponential")p=to(n,e.base,o,u);else if(e.name==="linear")p=to(n,1,o,u);else if(e.name==="cubic-bezier"){const m=e.controlPoints;p=new A(m[0],m[1],m[2],m[3]).solve(to(n,1,o,u))}return p}static parse(e,n){let[o,u,p,...m]=e;if(!Array.isArray(u)||u.length===0)return n.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const C=u[1];if(typeof C!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:C}}else{if(u[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const C=u.slice(1);if(C.length!==4||C.some(L=>typeof L!="number"||L<0||L>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:C}}}if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(p=n.parse(p,2,tt),!p)return null;const I=[];let T=null;o==="interpolate-hcl"||o==="interpolate-lab"?T=dn:n.expectedType&&n.expectedType.kind!=="value"&&(T=n.expectedType);for(let C=0;C<m.length;C+=2){const L=m[C],B=m[C+1],V=C+3,G=C+4;if(typeof L!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(I.length&&I[I.length-1][0]>=L)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const j=n.parse(B,G,T);if(!j)return null;T=T||j.type,I.push([L,j])}return T.kind==="number"||T.kind==="color"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new Fn(T,o,u,p,I):n.error(`Type ${ui(T)} is not interpolatable.`)}evaluate(e){const n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(e);const u=this.input.evaluate(e);if(u<=n[0])return o[0].evaluate(e);const p=n.length;if(u>=n[p-1])return o[p-1].evaluate(e);const m=Qs(n,u),I=Fn.interpolationFactor(this.interpolation,u,n[m],n[m+1]),T=o[m].evaluate(e),C=o[m+1].evaluate(e);return this.operator==="interpolate"?ks[this.type.kind.toLowerCase()](T,C,I):this.operator==="interpolate-hcl"?zs.reverse(zs.interpolate(zs.forward(T),zs.forward(C),I)):As.reverse(As.interpolate(As.forward(T),As.forward(C),I))}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const n=[this.operator,e,this.input.serialize()];for(let o=0;o<this.labels.length;o++)n.push(this.labels[o],this.outputs[o].serialize());return n}}function to(i,e,n,o){const u=o-n,p=i-n;return u===0?0:e===1?p/u:(Math.pow(e,p)-1)/(Math.pow(e,u)-1)}class ea{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let o=null;const u=n.expectedType;u&&u.kind!=="value"&&(o=u);const p=[];for(const I of e.slice(1)){const T=n.parse(I,1+p.length,o,void 0,{typeAnnotation:"omit"});if(!T)return null;o=o||T.type,p.push(T)}const m=u&&p.some(I=>or(u,I.type));return new ea(m?Dt:o,p)}evaluate(e){let n,o=null,u=0;for(const p of this.args)if(u++,o=p.evaluate(e),o&&o instanceof se&&!o.available&&(n||(n=o.name),o=null,u===this.args.length&&(o=n)),o!==null)break;return o}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class ta{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let p=1;p<e.length-1;p+=2){const m=e[p];if(typeof m!="string")return n.error(`Expected string, but found ${typeof m} instead.`,p);if(/[^a-zA-Z0-9_]/.test(m))return n.error("Variable names must contain only alphanumeric characters or '_'.",p);const I=n.parse(e[p+1],p+1);if(!I)return null;o.push([m,I])}const u=n.parse(e[e.length-1],e.length-1,n.expectedType,o);return u?new ta(o,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[n,o]of this.bindings)e.push(n,o.serialize());return e.push(this.result.serialize()),e}}class io{constructor(e,n,o){this.type=e,this.index=n,this.input=o}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=n.parse(e[1],1,tt),u=n.parse(e[2],2,Oi(n.expectedType||Dt));return o&&u?new io(u.type.itemType,o,u):null}evaluate(e){const n=this.index.evaluate(e),o=this.input.evaluate(e);if(n<0)throw new ve(`Array index out of bounds: ${n} < 0.`);if(n>=o.length)throw new ve(`Array index out of bounds: ${n} > ${o.length-1}.`);if(n!==Math.floor(n))throw new ve(`Array index must be an integer, but found ${n} instead.`);return o[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class no{constructor(e,n){this.type=Lt,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=n.parse(e[1],1,Dt),u=n.parse(e[2],2,Dt);return o&&u?Vi(o.type,[Lt,Pt,tt,ci,Dt])?new no(o,u):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${ui(o.type)} instead`):null}evaluate(e){const n=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!o)return!1;if(!Rn(n,["boolean","string","number","null"]))throw new ve(`Expected first argument to be of type boolean, string, number or null, but found ${ui(oe(n))} instead.`);if(!Rn(o,["string","array"]))throw new ve(`Expected second argument to be of type array or string, but found ${ui(oe(o))} instead.`);return o.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class ia{constructor(e,n,o){this.type=tt,this.needle=e,this.haystack=n,this.fromIndex=o}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=n.parse(e[1],1,Dt),u=n.parse(e[2],2,Dt);if(!o||!u)return null;if(!Vi(o.type,[Lt,Pt,tt,ci,Dt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${ui(o.type)} instead`);if(e.length===4){const p=n.parse(e[3],3,tt);return p?new ia(o,u,p):null}return new ia(o,u)}evaluate(e){const n=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!Rn(n,["boolean","string","number","null"]))throw new ve(`Expected first argument to be of type boolean, string, number or null, but found ${ui(oe(n))} instead.`);if(!Rn(o,["string","array"]))throw new ve(`Expected second argument to be of type array or string, but found ${ui(oe(o))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return o.indexOf(n,u)}return o.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class ro{constructor(e,n,o,u,p,m){this.inputType=e,this.type=n,this.input=o,this.cases=u,this.outputs=p,this.otherwise=m}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return n.error("Expected an even number of arguments.");let o,u;n.expectedType&&n.expectedType.kind!=="value"&&(u=n.expectedType);const p={},m=[];for(let C=2;C<e.length-1;C+=2){let L=e[C];const B=e[C+1];Array.isArray(L)||(L=[L]);const V=n.concat(C);if(L.length===0)return V.error("Expected at least one branch label.");for(const j of L){if(typeof j!="number"&&typeof j!="string")return V.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof j=="number"&&Math.floor(j)!==j)return V.error("Numeric branch labels must be integer values.");if(o){if(V.checkSubtype(o,oe(j)))return null}else o=oe(j);if(p[String(j)]!==void 0)return V.error("Branch labels must be unique.");p[String(j)]=m.length}const G=n.parse(B,C,u);if(!G)return null;u=u||G.type,m.push(G)}const I=n.parse(e[1],1,Dt);if(!I)return null;const T=n.parse(e[e.length-1],e.length-1,u);return T?I.type.kind!=="value"&&n.concat(1).checkSubtype(o,I.type)?null:new ro(o,u,I,p,m,T):null}evaluate(e){const n=this.input.evaluate(e);return(oe(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),o=[],u={};for(const m of n){const I=u[this.cases[m]];I===void 0?(u[this.cases[m]]=o.length,o.push([this.cases[m],[m]])):o[I][1].push(m)}const p=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,I]of o)e.push(I.length===1?p(I[0]):I.map(p)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}class so{constructor(e,n,o){this.type=e,this.branches=n,this.otherwise=o}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return n.error("Expected an odd number of arguments.");let o;n.expectedType&&n.expectedType.kind!=="value"&&(o=n.expectedType);const u=[];for(let m=1;m<e.length-1;m+=2){const I=n.parse(e[m],m,Lt);if(!I)return null;const T=n.parse(e[m+1],m+1,o);if(!T)return null;u.push([I,T]),o=o||T.type}const p=n.parse(e[e.length-1],e.length-1,o);return p?new so(o,u,p):null}evaluate(e){for(const[n,o]of this.branches)if(n.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,o]of this.branches)e(n),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class na{constructor(e,n,o,u){this.type=e,this.input=n,this.beginIndex=o,this.endIndex=u}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=n.parse(e[1],1,Dt),u=n.parse(e[2],2,tt);if(!o||!u)return null;if(!Vi(o.type,[Oi(Dt),Pt,Dt]))return n.error(`Expected first argument to be of type array or string, but found ${ui(o.type)} instead`);if(e.length===4){const p=n.parse(e[3],3,tt);return p?new na(o.type,o,u,p):null}return new na(o.type,o,u)}evaluate(e){const n=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!Rn(n,["string","array"]))throw new ve(`Expected first argument to be of type array or string, but found ${ui(oe(n))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return n.slice(o,u)}return n.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function sl(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function al(i,e,n,o){return o.compare(e,n)===0}function rs(i,e,n){const o=i!=="=="&&i!=="!=";return class Id{constructor(p,m,I){this.type=Lt,this.lhs=p,this.rhs=m,this.collator=I,this.hasUntypedArgument=p.type.kind==="value"||m.type.kind==="value"}static parse(p,m){if(p.length!==3&&p.length!==4)return m.error("Expected two or three arguments.");const I=p[0];let T=m.parse(p[1],1,Dt);if(!T)return null;if(!sl(I,T.type))return m.concat(1).error(`"${I}" comparisons are not supported for type '${ui(T.type)}'.`);let C=m.parse(p[2],2,Dt);if(!C)return null;if(!sl(I,C.type))return m.concat(2).error(`"${I}" comparisons are not supported for type '${ui(C.type)}'.`);if(T.type.kind!==C.type.kind&&T.type.kind!=="value"&&C.type.kind!=="value")return m.error(`Cannot compare types '${ui(T.type)}' and '${ui(C.type)}'.`);o&&(T.type.kind==="value"&&C.type.kind!=="value"?T=new K(C.type,[T]):T.type.kind!=="value"&&C.type.kind==="value"&&(C=new K(T.type,[C])));let L=null;if(p.length===4){if(T.type.kind!=="string"&&C.type.kind!=="string"&&T.type.kind!=="value"&&C.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(L=m.parse(p[3],3,vr),!L)return null}return new Id(T,C,L)}evaluate(p){const m=this.lhs.evaluate(p),I=this.rhs.evaluate(p);if(o&&this.hasUntypedArgument){const T=oe(m),C=oe(I);if(T.kind!==C.kind||T.kind!=="string"&&T.kind!=="number")throw new ve(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${T.kind}, ${C.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const T=oe(m),C=oe(I);if(T.kind!=="string"||C.kind!=="string")return e(p,m,I)}return this.collator?n(p,m,I,this.collator.evaluate(p)):e(p,m,I)}eachChild(p){p(this.lhs),p(this.rhs),this.collator&&p(this.collator)}outputDefined(){return!0}serialize(){const p=[i];return this.eachChild(m=>{p.push(m.serialize())}),p}}}const hc=rs("==",function(i,e,n){return e===n},al),dc=rs("!=",function(i,e,n){return e!==n},function(i,e,n,o){return!al(0,e,n,o)}),fc=rs("<",function(i,e,n){return e<n},function(i,e,n,o){return o.compare(e,n)<0}),pc=rs(">",function(i,e,n){return e>n},function(i,e,n,o){return o.compare(e,n)>0}),mc=rs("<=",function(i,e,n){return e<=n},function(i,e,n,o){return o.compare(e,n)<=0}),gc=rs(">=",function(i,e,n){return e>=n},function(i,e,n,o){return o.compare(e,n)>=0});class ao{constructor(e,n,o,u,p){this.type=Pt,this.number=e,this.locale=n,this.currency=o,this.minFractionDigits=u,this.maxFractionDigits=p}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");const o=n.parse(e[1],1,tt);if(!o)return null;const u=e[2];if(typeof u!="object"||Array.isArray(u))return n.error("NumberFormat options argument must be an object.");let p=null;if(u.locale&&(p=n.parse(u.locale,1,Pt),!p))return null;let m=null;if(u.currency&&(m=n.parse(u.currency,1,Pt),!m))return null;let I=null;if(u["min-fraction-digits"]&&(I=n.parse(u["min-fraction-digits"],1,tt),!I))return null;let T=null;return u["max-fraction-digits"]&&(T=n.parse(u["max-fraction-digits"],1,tt),!T)?null:new ao(o,p,m,I,T)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class oo{constructor(e){this.type=tt,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=n.parse(e[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${ui(o.type)} instead.`):new oo(o):null}evaluate(e){const n=this.input.evaluate(e);if(typeof n=="string"||Array.isArray(n))return n.length;throw new ve(`Expected value to be of type string or array, but found ${ui(oe(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(n=>{e.push(n.serialize())}),e}}const ss={"==":hc,"!=":dc,">":pc,"<":fc,">=":gc,"<=":mc,array:K,at:io,boolean:K,case:so,coalesce:ea,collator:Zi,format:Fe,image:rt,in:no,"index-of":ia,interpolate:Fn,"interpolate-hcl":Fn,"interpolate-lab":Fn,length:oo,let:ta,literal:Re,match:ro,number:K,"number-format":ao,object:K,slice:na,step:Ts,string:K,"to-boolean":Bt,"to-color":Bt,"to-number":Bt,"to-string":Bt,var:Ys,within:Vr};function ol(i,[e,n,o,u]){e=e.evaluate(i),n=n.evaluate(i),o=o.evaluate(i);const p=u?u.evaluate(i):1,m=ne(e,n,o,p);if(m)throw new ve(m);return new D(e/255*p,n/255*p,o/255*p,p)}function ll(i,e){return i in e}function lo(i,e){const n=e[i];return n===void 0?null:n}function Ur(i){return{type:i}}function cl(i){return{result:"success",value:i}}function Nr(i){return{result:"error",value:i}}function as(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function ul(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function co(i){return!!i.expression&&i.expression.interpolated}function Rt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function ra(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function oi(i){return i}function sa(i,e){const n=e.type==="color",o=i.stops&&typeof i.stops[0][0]=="object",u=o||!(o||i.property!==void 0),p=i.type||(co(e)?"exponential":"interval");if(n&&((i=Wn({},i)).stops&&(i.stops=i.stops.map(C=>[C[0],D.parse(C[1])])),i.default=D.parse(i.default?i.default:e.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!rl[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let m,I,T;if(p==="exponential")m=uo;else if(p==="interval")m=aa;else if(p==="categorical"){m=Ni,I=Object.create(null);for(const C of i.stops)I[C[0]]=C[1];T=typeof i.stops[0][0]}else{if(p!=="identity")throw new Error(`Unknown function type "${p}"`);m=_c}if(o){const C={},L=[];for(let G=0;G<i.stops.length;G++){const j=i.stops[G],te=j[0].zoom;C[te]===void 0&&(C[te]={zoom:te,type:i.type,property:i.property,default:i.default,stops:[]},L.push(te)),C[te].stops.push([j[0].value,j[1]])}const B=[];for(const G of L)B.push([C[G].zoom,sa(C[G],e)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:Fn.interpolationFactor.bind(void 0,V),zoomStops:B.map(G=>G[0]),evaluate:({zoom:G},j)=>uo({stops:B,base:i.base},e,G).evaluate(G,j)}}if(u){const C=p==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:Fn.interpolationFactor.bind(void 0,C),zoomStops:i.stops.map(L=>L[0]),evaluate:({zoom:L})=>m(i,e,L,I,T)}}return{kind:"source",evaluate(C,L){const B=L&&L.properties?L.properties[i.property]:void 0;return B===void 0?Ti(i.default,e.default):m(i,e,B,I,T)}}}function Ti(i,e,n){return i!==void 0?i:e!==void 0?e:n!==void 0?n:void 0}function Ni(i,e,n,o,u){return Ti(typeof n===u?o[n]:void 0,i.default,e.default)}function aa(i,e,n){if(Rt(n)!=="number")return Ti(i.default,e.default);const o=i.stops.length;if(o===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[o-1][0])return i.stops[o-1][1];const u=Qs(i.stops.map(p=>p[0]),n);return i.stops[u][1]}function uo(i,e,n){const o=i.base!==void 0?i.base:1;if(Rt(n)!=="number")return Ti(i.default,e.default);const u=i.stops.length;if(u===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[u-1][0])return i.stops[u-1][1];const p=Qs(i.stops.map(L=>L[0]),n),m=function(L,B,V,G){const j=G-V,te=L-V;return j===0?0:B===1?te/j:(Math.pow(B,te)-1)/(Math.pow(B,j)-1)}(n,o,i.stops[p][0],i.stops[p+1][0]),I=i.stops[p][1],T=i.stops[p+1][1];let C=ks[e.type]||oi;if(i.colorSpace&&i.colorSpace!=="rgb"){const L=rl[i.colorSpace];C=(B,V)=>L.reverse(L.interpolate(L.forward(B),L.forward(V),m))}return typeof I.evaluate=="function"?{evaluate(...L){const B=I.evaluate.apply(void 0,L),V=T.evaluate.apply(void 0,L);if(B!==void 0&&V!==void 0)return C(B,V,m)}}:C(I,T,m)}function _c(i,e,n){return e.type==="color"?n=D.parse(n):e.type==="formatted"?n=J.fromString(n.toString()):e.type==="resolvedImage"?n=se.fromString(n.toString()):Rt(n)===e.type||e.type==="enum"&&e.values[n]||(n=void 0),Ti(n,i.default,e.default)}Ft.register(ss,{error:[{kind:"error"},[Pt],(i,[e])=>{throw new ve(e.evaluate(i))}],typeof:[Pt,[Dt],(i,[e])=>ui(oe(e.evaluate(i)))],"to-rgba":[Oi(tt,4),[dn],(i,[e])=>e.evaluate(i).toArray()],rgb:[dn,[tt,tt,tt],ol],rgba:[dn,[tt,tt,tt,tt],ol],has:{type:Lt,overloads:[[[Pt],(i,[e])=>ll(e.evaluate(i),i.properties())],[[Pt,an],(i,[e,n])=>ll(e.evaluate(i),n.evaluate(i))]]},get:{type:Dt,overloads:[[[Pt],(i,[e])=>lo(e.evaluate(i),i.properties())],[[Pt,an],(i,[e,n])=>lo(e.evaluate(i),n.evaluate(i))]]},"feature-state":[Dt,[Pt],(i,[e])=>lo(e.evaluate(i),i.featureState||{})],properties:[an,[],i=>i.properties()],"geometry-type":[Pt,[],i=>i.geometryType()],id:[Dt,[],i=>i.id()],zoom:[tt,[],i=>i.globals.zoom],"heatmap-density":[tt,[],i=>i.globals.heatmapDensity||0],"line-progress":[tt,[],i=>i.globals.lineProgress||0],accumulated:[Dt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[tt,Ur(tt),(i,e)=>{let n=0;for(const o of e)n+=o.evaluate(i);return n}],"*":[tt,Ur(tt),(i,e)=>{let n=1;for(const o of e)n*=o.evaluate(i);return n}],"-":{type:tt,overloads:[[[tt,tt],(i,[e,n])=>e.evaluate(i)-n.evaluate(i)],[[tt],(i,[e])=>-e.evaluate(i)]]},"/":[tt,[tt,tt],(i,[e,n])=>e.evaluate(i)/n.evaluate(i)],"%":[tt,[tt,tt],(i,[e,n])=>e.evaluate(i)%n.evaluate(i)],ln2:[tt,[],()=>Math.LN2],pi:[tt,[],()=>Math.PI],e:[tt,[],()=>Math.E],"^":[tt,[tt,tt],(i,[e,n])=>Math.pow(e.evaluate(i),n.evaluate(i))],sqrt:[tt,[tt],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[tt,[tt],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[tt,[tt],(i,[e])=>Math.log(e.evaluate(i))],log2:[tt,[tt],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[tt,[tt],(i,[e])=>Math.sin(e.evaluate(i))],cos:[tt,[tt],(i,[e])=>Math.cos(e.evaluate(i))],tan:[tt,[tt],(i,[e])=>Math.tan(e.evaluate(i))],asin:[tt,[tt],(i,[e])=>Math.asin(e.evaluate(i))],acos:[tt,[tt],(i,[e])=>Math.acos(e.evaluate(i))],atan:[tt,[tt],(i,[e])=>Math.atan(e.evaluate(i))],min:[tt,Ur(tt),(i,e)=>Math.min(...e.map(n=>n.evaluate(i)))],max:[tt,Ur(tt),(i,e)=>Math.max(...e.map(n=>n.evaluate(i)))],abs:[tt,[tt],(i,[e])=>Math.abs(e.evaluate(i))],round:[tt,[tt],(i,[e])=>{const n=e.evaluate(i);return n<0?-Math.round(-n):Math.round(n)}],floor:[tt,[tt],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[tt,[tt],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[Lt,[Pt,Dt],(i,[e,n])=>i.properties()[e.value]===n.value],"filter-id-==":[Lt,[Dt],(i,[e])=>i.id()===e.value],"filter-type-==":[Lt,[Pt],(i,[e])=>i.geometryType()===e.value],"filter-<":[Lt,[Pt,Dt],(i,[e,n])=>{const o=i.properties()[e.value],u=n.value;return typeof o==typeof u&&o<u}],"filter-id-<":[Lt,[Dt],(i,[e])=>{const n=i.id(),o=e.value;return typeof n==typeof o&&n<o}],"filter->":[Lt,[Pt,Dt],(i,[e,n])=>{const o=i.properties()[e.value],u=n.value;return typeof o==typeof u&&o>u}],"filter-id->":[Lt,[Dt],(i,[e])=>{const n=i.id(),o=e.value;return typeof n==typeof o&&n>o}],"filter-<=":[Lt,[Pt,Dt],(i,[e,n])=>{const o=i.properties()[e.value],u=n.value;return typeof o==typeof u&&o<=u}],"filter-id-<=":[Lt,[Dt],(i,[e])=>{const n=i.id(),o=e.value;return typeof n==typeof o&&n<=o}],"filter->=":[Lt,[Pt,Dt],(i,[e,n])=>{const o=i.properties()[e.value],u=n.value;return typeof o==typeof u&&o>=u}],"filter-id->=":[Lt,[Dt],(i,[e])=>{const n=i.id(),o=e.value;return typeof n==typeof o&&n>=o}],"filter-has":[Lt,[Dt],(i,[e])=>e.value in i.properties()],"filter-has-id":[Lt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Lt,[Oi(Pt)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[Lt,[Oi(Dt)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[Lt,[Pt,Oi(Dt)],(i,[e,n])=>n.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[Lt,[Pt,Oi(Dt)],(i,[e,n])=>function(o,u,p,m){for(;p<=m;){const I=p+m>>1;if(u[I]===o)return!0;u[I]>o?m=I-1:p=I+1}return!1}(i.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Lt,overloads:[[[Lt,Lt],(i,[e,n])=>e.evaluate(i)&&n.evaluate(i)],[Ur(Lt),(i,e)=>{for(const n of e)if(!n.evaluate(i))return!1;return!0}]]},any:{type:Lt,overloads:[[[Lt,Lt],(i,[e,n])=>e.evaluate(i)||n.evaluate(i)],[Ur(Lt),(i,e)=>{for(const n of e)if(n.evaluate(i))return!0;return!1}]]},"!":[Lt,[Lt],(i,[e])=>!e.evaluate(i)],"is-supported-script":[Lt,[Pt],(i,[e])=>{const n=i.globals&&i.globals.isSupportedScript;return!n||n(e.evaluate(i))}],upcase:[Pt,[Pt],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[Pt,[Pt],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[Pt,Ur(Dt),(i,e)=>e.map(n=>we(n.evaluate(i))).join("")],"resolved-locale":[Pt,[vr],(i,[e])=>e.evaluate(i).resolvedLocale()]});class ho{constructor(e,n){this.expression=e,this._warningHistory={},this._evaluator=new Ot,this._defaultValue=n?function(o){return o.type==="color"&&ra(o.default)?new D(0,0,0,0):o.type==="color"?D.parse(o.default)||null:o.default===void 0?null:o.default}(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(e,n,o,u,p,m){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=o,this._evaluator.canonical=u,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)}evaluate(e,n,o,u,p,m){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=o||null,this._evaluator.canonical=u,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=m||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new ve(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function oa(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in ss}function la(i,e){const n=new Js(ss,[],e?function(u){const p={color:dn,string:Pt,number:tt,enum:Pt,boolean:Lt,formatted:Bn,resolvedImage:er};return u.type==="array"?Oi(p[u.value]||Dt,u.length):p[u.type]}(e):void 0),o=n.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?cl(new ho(o,e)):Nr(n.errors)}class ca{constructor(e,n){this.kind=e,this._styleExpression=n,this.isStateDependent=e!=="constant"&&!ns(n.expression)}evaluateWithoutErrorHandling(e,n,o,u,p,m){return this._styleExpression.evaluateWithoutErrorHandling(e,n,o,u,p,m)}evaluate(e,n,o,u,p,m){return this._styleExpression.evaluate(e,n,o,u,p,m)}}class ua{constructor(e,n,o,u){this.kind=e,this.zoomStops=o,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!ns(n.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,n,o,u,p,m){return this._styleExpression.evaluateWithoutErrorHandling(e,n,o,u,p,m)}evaluate(e,n,o,u,p,m){return this._styleExpression.evaluate(e,n,o,u,p,m)}interpolationFactor(e,n,o){return this.interpolationType?Fn.interpolationFactor(this.interpolationType,e,n,o):0}}function fo(i,e){const n=la(i,e);if(n.result==="error")return n;const o=n.value.expression,u=Ks(o);if(!u&&!as(e))return Nr([new Fi("","data expressions not supported")]);const p=Is(o,["zoom"]);if(!p&&!ul(e))return Nr([new Fi("","zoom expressions not supported")]);const m=ha(o);return m||p?m instanceof Fi?Nr([m]):m instanceof Fn&&!co(e)?Nr([new Fi("",'"interpolate" expressions cannot be used with this property')]):cl(m?new ua(u?"camera":"composite",n.value,m.labels,m instanceof Fn?m.interpolation:void 0):new ca(u?"constant":"source",n.value)):Nr([new Fi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class os{constructor(e,n){this._parameters=e,this._specification=n,Wn(this,sa(this._parameters,this._specification))}static deserialize(e){return new os(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ha(i){let e=null;if(i instanceof ta)e=ha(i.result);else if(i instanceof ea){for(const n of i.args)if(e=ha(n),e)break}else(i instanceof Ts||i instanceof Fn)&&i.input instanceof Ft&&i.input.name==="zoom"&&(e=i);return e instanceof Fi||i.eachChild(n=>{const o=ha(n);o instanceof Fi?e=o:!e&&o?e=new Fi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new Fi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function tr(i){const e=i.key,n=i.value,o=i.valueSpec||{},u=i.objectElementValidators||{},p=i.style,m=i.styleSpec;let I=[];const T=Rt(n);if(T!=="object")return[new st(e,n,`object expected, ${T} found`)];for(const C in n){const L=C.split(".")[0],B=o[L]||o["*"];let V;if(u[L])V=u[L];else if(o[L])V=zn;else if(u["*"])V=u["*"];else{if(!o["*"]){I.push(new st(e,n[C],`unknown property "${C}"`));continue}V=zn}I=I.concat(V({key:(e&&`${e}.`)+C,value:n[C],valueSpec:B,style:p,styleSpec:m,object:n,objectKey:C},n))}for(const C in o)u[C]||o[C].required&&o[C].default===void 0&&n[C]===void 0&&I.push(new st(e,n,`missing required property "${C}"`));return I}function hl(i){const e=i.value,n=i.valueSpec,o=i.style,u=i.styleSpec,p=i.key,m=i.arrayElementValidator||zn;if(Rt(e)!=="array")return[new st(p,e,`array expected, ${Rt(e)} found`)];if(n.length&&e.length!==n.length)return[new st(p,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new st(p,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let I={type:n.value,values:n.values};u.$version<7&&(I.function=n.function),Rt(n.value)==="object"&&(I=n.value);let T=[];for(let C=0;C<e.length;C++)T=T.concat(m({array:e,arrayIndex:C,value:e[C],valueSpec:I,style:o,styleSpec:u,key:`${p}[${C}]`}));return T}function dl(i){const e=i.key,n=i.value,o=i.valueSpec;let u=Rt(n);return u==="number"&&n!=n&&(u="NaN"),u!=="number"?[new st(e,n,`number expected, ${u} found`)]:"minimum"in o&&n<o.minimum?[new st(e,n,`${n} is less than the minimum value ${o.minimum}`)]:"maximum"in o&&n>o.maximum?[new st(e,n,`${n} is greater than the maximum value ${o.maximum}`)]:[]}function fl(i){const e=i.valueSpec,n=ri(i.value.type);let o,u,p,m={};const I=n!=="categorical"&&i.value.property===void 0,T=!I,C=Rt(i.value.stops)==="array"&&Rt(i.value.stops[0])==="array"&&Rt(i.value.stops[0][0])==="object",L=tr({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(G){if(n==="identity")return[new st(G.key,G.value,'identity function may not have a "stops" property')];let j=[];const te=G.value;return j=j.concat(hl({key:G.key,value:te,valueSpec:G.valueSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:B})),Rt(te)==="array"&&te.length===0&&j.push(new st(G.key,te,"array must have at least one stop")),j},default:function(G){return zn({key:G.key,value:G.value,valueSpec:e,style:G.style,styleSpec:G.styleSpec})}}});return n==="identity"&&I&&L.push(new st(i.key,i.value,'missing required property "property"')),n==="identity"||i.value.stops||L.push(new st(i.key,i.value,'missing required property "stops"')),n==="exponential"&&i.valueSpec.expression&&!co(i.valueSpec)&&L.push(new st(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(T&&!as(i.valueSpec)?L.push(new st(i.key,i.value,"property functions not supported")):I&&!ul(i.valueSpec)&&L.push(new st(i.key,i.value,"zoom functions not supported"))),n!=="categorical"&&!C||i.value.property!==void 0||L.push(new st(i.key,i.value,'"property" property is required')),L;function B(G){let j=[];const te=G.value,ie=G.key;if(Rt(te)!=="array")return[new st(ie,te,`array expected, ${Rt(te)} found`)];if(te.length!==2)return[new st(ie,te,`array length 2 expected, length ${te.length} found`)];if(C){if(Rt(te[0])!=="object")return[new st(ie,te,`object expected, ${Rt(te[0])} found`)];if(te[0].zoom===void 0)return[new st(ie,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new st(ie,te,"object stop key must have value")];if(p&&p>ri(te[0].zoom))return[new st(ie,te[0].zoom,"stop zoom values must appear in ascending order")];ri(te[0].zoom)!==p&&(p=ri(te[0].zoom),u=void 0,m={}),j=j.concat(tr({key:`${ie}[0]`,value:te[0],valueSpec:{zoom:{}},style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:dl,value:V}}))}else j=j.concat(V({key:`${ie}[0]`,value:te[0],valueSpec:{},style:G.style,styleSpec:G.styleSpec},te));return oa(Xt(te[1]))?j.concat([new st(`${ie}[1]`,te[1],"expressions are not allowed in function stops.")]):j.concat(zn({key:`${ie}[1]`,value:te[1],valueSpec:e,style:G.style,styleSpec:G.styleSpec}))}function V(G,j){const te=Rt(G.value),ie=ri(G.value),de=G.value!==null?G.value:j;if(o){if(te!==o)return[new st(G.key,de,`${te} stop domain type must match previous stop domain type ${o}`)]}else o=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new st(G.key,de,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&n!=="categorical"){let ye=`number expected, ${te} found`;return as(e)&&n===void 0&&(ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new st(G.key,de,ye)]}return n!=="categorical"||te!=="number"||isFinite(ie)&&Math.floor(ie)===ie?n!=="categorical"&&te==="number"&&u!==void 0&&ie<u?[new st(G.key,de,"stop domain values must appear in ascending order")]:(u=ie,n==="categorical"&&ie in m?[new st(G.key,de,"stop domain values must be unique")]:(m[ie]=!0,[])):[new st(G.key,de,`integer expected, found ${ie}`)]}}function ls(i){const e=(i.expressionContext==="property"?fo:la)(Xt(i.value),i.valueSpec);if(e.result==="error")return e.value.map(o=>new st(`${i.key}${o.key}`,i.value,o.message));const n=e.value.expression||e.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!n.outputDefined())return[new st(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!ns(n))return[new st(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!ns(n))return[new st(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Is(n,["zoom","feature-state"]))return[new st(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Ks(n))return[new st(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function da(i){const e=i.key,n=i.value,o=i.valueSpec,u=[];return Array.isArray(o.values)?o.values.indexOf(ri(n))===-1&&u.push(new st(e,n,`expected one of [${o.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(o.values).indexOf(ri(n))===-1&&u.push(new st(e,n,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(n)} found`)),u}function po(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!po(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const pl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fa(i){if(i==null)return{filter:()=>!0,needGeometry:!1};po(i)||(i=Cs(i));const e=la(i,pl);if(e.result==="error")throw new Error(e.value.map(n=>`${n.key}: ${n.message}`).join(", "));return{filter:(n,o,u)=>e.value.evaluate(n,o,{},u),needGeometry:ml(i)}}function pa(i,e){return i<e?-1:i>e?1:0}function ml(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let e=1;e<i.length;e++)if(ml(i[e]))return!0;return!1}function Cs(i){if(!i)return!0;const e=i[0];return i.length<=1?e!=="any":e==="=="?mo(i[1],i[2],"=="):e==="!="?cs(mo(i[1],i[2],"==")):e==="<"||e===">"||e==="<="||e===">="?mo(i[1],i[2],e):e==="any"?(n=i.slice(1),["any"].concat(n.map(Cs))):e==="all"?["all"].concat(i.slice(1).map(Cs)):e==="none"?["all"].concat(i.slice(1).map(Cs).map(cs)):e==="in"?ma(i[1],i.slice(2)):e==="!in"?cs(ma(i[1],i.slice(2))):e==="has"?ga(i[1]):e==="!has"?cs(ga(i[1])):e!=="within"||i;var n}function mo(i,e,n){switch(i){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,i,e]}}function ma(i,e){if(e.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(n=>typeof n!=typeof e[0])?["filter-in-large",i,["literal",e.sort(pa)]]:["filter-in-small",i,["literal",e]]}}function ga(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function cs(i){return["!",i]}function Ms(i){return po(Xt(i.value))?ls(Wn({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):gl(i)}function gl(i){const e=i.value,n=i.key;if(Rt(e)!=="array")return[new st(n,e,`array expected, ${Rt(e)} found`)];const o=i.styleSpec;let u,p=[];if(e.length<1)return[new st(n,e,"filter array must have at least 1 element")];switch(p=p.concat(da({key:`${n}[0]`,value:e[0],valueSpec:o.filter_operator,style:i.style,styleSpec:i.styleSpec})),ri(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ri(e[1])==="$type"&&p.push(new st(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&p.push(new st(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(u=Rt(e[1]),u!=="string"&&p.push(new st(`${n}[1]`,e[1],`string expected, ${u} found`)));for(let m=2;m<e.length;m++)u=Rt(e[m]),ri(e[1])==="$type"?p=p.concat(da({key:`${n}[${m}]`,value:e[m],valueSpec:o.geometry_type,style:i.style,styleSpec:i.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&p.push(new st(`${n}[${m}]`,e[m],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let m=1;m<e.length;m++)p=p.concat(gl({key:`${n}[${m}]`,value:e[m],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":u=Rt(e[1]),e.length!==2?p.push(new st(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="string"&&p.push(new st(`${n}[1]`,e[1],`string expected, ${u} found`));break;case"within":u=Rt(e[1]),e.length!==2?p.push(new st(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="object"&&p.push(new st(`${n}[1]`,e[1],`object expected, ${u} found`))}return p}function Ps(i,e){const n=i.key,o=i.style,u=i.styleSpec,p=i.value,m=i.objectKey,I=u[`${e}_${i.layerType}`];if(!I)return[];const T=m.match(/^(.*)-transition$/);if(e==="paint"&&T&&I[T[1]]&&I[T[1]].transition)return zn({key:n,value:p,valueSpec:u.transition,style:o,styleSpec:u});const C=i.valueSpec||I[m];if(!C)return[new st(n,p,`unknown property "${m}"`)];let L;if(Rt(p)==="string"&&as(C)&&!C.tokens&&(L=/^{([^}]+)}$/.exec(p)))return[new st(n,p,`"${m}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];const B=[];return i.layerType==="symbol"&&(m==="text-field"&&o&&!o.glyphs&&B.push(new st(n,p,'use of "text-field" requires a style "glyphs" property')),m==="text-font"&&ra(Xt(p))&&ri(p.type)==="identity"&&B.push(new st(n,p,'"text-font" does not support identity functions'))),B.concat(zn({key:i.key,value:p,valueSpec:C,style:o,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:m}))}function _l(i){return Ps(i,"paint")}function yl(i){return Ps(i,"layout")}function vl(i){let e=[];const n=i.value,o=i.key,u=i.style,p=i.styleSpec;n.type||n.ref||e.push(new st(o,n,'either "type" or "ref" is required'));let m=ri(n.type);const I=ri(n.ref);if(n.id){const T=ri(n.id);for(let C=0;C<i.arrayIndex;C++){const L=u.layers[C];ri(L.id)===T&&e.push(new st(o,n.id,`duplicate layer id "${n.id}", previously used at line ${L.id.__line__}`))}}if("ref"in n){let T;["type","source","source-layer","filter","layout"].forEach(C=>{C in n&&e.push(new st(o,n[C],`"${C}" is prohibited for ref layers`))}),u.layers.forEach(C=>{ri(C.id)===I&&(T=C)}),T?T.ref?e.push(new st(o,n.ref,"ref cannot reference another ref layer")):m=ri(T.type):e.push(new st(o,n.ref,`ref layer "${I}" not found`))}else if(m!=="background")if(n.source){const T=u.sources&&u.sources[n.source],C=T&&ri(T.type);T?C==="vector"&&m==="raster"?e.push(new st(o,n.source,`layer "${n.id}" requires a raster source`)):C==="raster"&&m!=="raster"?e.push(new st(o,n.source,`layer "${n.id}" requires a vector source`)):C!=="vector"||n["source-layer"]?C==="raster-dem"&&m!=="hillshade"?e.push(new st(o,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):m!=="line"||!n.paint||!n.paint["line-gradient"]||C==="geojson"&&T.lineMetrics||e.push(new st(o,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new st(o,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new st(o,n.source,`source "${n.source}" not found`))}else e.push(new st(o,n,'missing required property "source"'));return e=e.concat(tr({key:o,value:n,valueSpec:p.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>zn({key:`${o}.type`,value:n.type,valueSpec:p.layer.type,style:i.style,styleSpec:i.styleSpec,object:n,objectKey:"type"}),filter:Ms,layout:T=>tr({layer:n,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":C=>yl(Wn({layerType:m},C))}}),paint:T=>tr({layer:n,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":C=>_l(Wn({layerType:m},C))}})}})),e}function us(i){const e=i.value,n=i.key,o=Rt(e);return o!=="string"?[new st(n,e,`string expected, ${o} found`)]:[]}const xl={promoteId:function({key:i,value:e}){if(Rt(e)==="string")return us({key:i,value:e});{const n=[];for(const o in e)n.push(...us({key:`${i}.${o}`,value:e[o]}));return n}}};function Ls(i){const e=i.value,n=i.key,o=i.styleSpec,u=i.style;if(!e.type)return[new st(n,e,'"type" is required')];const p=ri(e.type);let m;switch(p){case"vector":case"raster":case"raster-dem":return m=tr({key:n,value:e,valueSpec:o[`source_${p.replace("-","_")}`],style:i.style,styleSpec:o,objectElementValidators:xl}),m;case"geojson":if(m=tr({key:n,value:e,valueSpec:o.source_geojson,style:u,styleSpec:o,objectElementValidators:xl}),e.cluster)for(const I in e.clusterProperties){const[T,C]=e.clusterProperties[I],L=typeof T=="string"?[T,["accumulated"],["get",I]]:T;m.push(...ls({key:`${n}.${I}.map`,value:C,expressionContext:"cluster-map"})),m.push(...ls({key:`${n}.${I}.reduce`,value:L,expressionContext:"cluster-reduce"}))}return m;case"video":return tr({key:n,value:e,valueSpec:o.source_video,style:u,styleSpec:o});case"image":return tr({key:n,value:e,valueSpec:o.source_image,style:u,styleSpec:o});case"canvas":return[new st(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return da({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:u,styleSpec:o})}}function Ds(i){const e=i.value,n=i.styleSpec,o=n.light,u=i.style;let p=[];const m=Rt(e);if(e===void 0)return p;if(m!=="object")return p=p.concat([new st("light",e,`object expected, ${m} found`)]),p;for(const I in e){const T=I.match(/^(.*)-transition$/);p=p.concat(T&&o[T[1]]&&o[T[1]].transition?zn({key:I,value:e[I],valueSpec:n.transition,style:u,styleSpec:n}):o[I]?zn({key:I,value:e[I],valueSpec:o[I],style:u,styleSpec:n}):[new st(I,e[I],`unknown property "${I}"`)])}return p}const On={"*":()=>[],array:hl,boolean:function(i){const e=i.value,n=i.key,o=Rt(e);return o!=="boolean"?[new st(n,e,`boolean expected, ${o} found`)]:[]},number:dl,color:function(i){const e=i.key,n=i.value,o=Rt(n);return o!=="string"?[new st(e,n,`color expected, ${o} found`)]:An(n)===null?[new st(e,n,`color expected, "${n}" found`)]:[]},constants:yr,enum:da,filter:Ms,function:fl,layer:vl,object:tr,source:Ls,light:Ds,string:us,formatted:function(i){return us(i).length===0?[]:ls(i)},resolvedImage:function(i){return us(i).length===0?[]:ls(i)}};function zn(i){const e=i.value,n=i.valueSpec,o=i.styleSpec;return n.expression&&ra(ri(e))?fl(i):n.expression&&oa(Xt(e))?ls(i):n.type&&On[n.type]?On[n.type](i):tr(Wn({},i,{valueSpec:n.type?o[n.type]:n}))}function yc(i){const e=i.value,n=i.key,o=us(i);return o.length||(e.indexOf("{fontstack}")===-1&&o.push(new st(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&o.push(new st(n,e,'"glyphs" url must include a "{range}" token'))),o}function qr(i,e=Se){let n=[];return n=n.concat(zn({key:"",value:i,valueSpec:e.$root,styleSpec:e,style:i,objectElementValidators:{glyphs:yc,"*":()=>[]}})),i.constants&&(n=n.concat(yr({key:"constants",value:i.constants,style:i,styleSpec:e}))),bl(n)}function bl(i){return[].concat(i).sort((e,n)=>e.line-n.line)}function hs(i){return function(...e){return bl(i.apply(this,e))}}qr.source=hs(Ls),qr.light=hs(Ds),qr.layer=hs(vl),qr.filter=hs(Ms),qr.paintProperty=hs(_l),qr.layoutProperty=hs(yl);const Gr=qr,vc=Gr.light,go=Gr.paintProperty,xc=Gr.layoutProperty;function wl(i,e){let n=!1;if(e&&e.length)for(const o of e)i.fire(new ar(new Error(o.message))),n=!0;return n}class jr{constructor(e,n,o){const u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const m=new Int32Array(this.arrayBuffer);e=m[0],this.d=(n=m[1])+2*(o=m[2]);for(let T=0;T<this.d*this.d;T++){const C=m[3+T],L=m[3+T+1];u.push(C===L?null:m.subarray(C,L))}const I=m[3+u.length+1];this.keys=m.subarray(m[3+u.length],I),this.bboxes=m.subarray(I),this.insert=this._insertReadonly}else{this.d=n+2*o;for(let m=0;m<this.d*this.d;m++)u.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=e,this.padding=o,this.scale=n/e,this.uid=0;const p=o/n*e;this.min=-p,this.max=e+p}insert(e,n,o,u,p){this._forEachCell(n,o,u,p,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(n),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(p)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,n,o,u,p,m){this.cells[p].push(m)}query(e,n,o,u,p){const m=this.min,I=this.max;if(e<=m&&n<=m&&I<=o&&I<=u&&!p)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(e,n,o,u,this._queryCell,T,{},p),T}}_queryCell(e,n,o,u,p,m,I,T){const C=this.cells[p];if(C!==null){const L=this.keys,B=this.bboxes;for(let V=0;V<C.length;V++){const G=C[V];if(I[G]===void 0){const j=4*G;(T?T(B[j+0],B[j+1],B[j+2],B[j+3]):e<=B[j+2]&&n<=B[j+3]&&o>=B[j+0]&&u>=B[j+1])?(I[G]=!0,m.push(L[G])):I[G]=!1}}}}_forEachCell(e,n,o,u,p,m,I,T){const C=this._convertToCellCoord(e),L=this._convertToCellCoord(n),B=this._convertToCellCoord(o),V=this._convertToCellCoord(u);for(let G=C;G<=B;G++)for(let j=L;j<=V;j++){const te=this.d*j+G;if((!T||T(this._convertFromCellCoord(G),this._convertFromCellCoord(j),this._convertFromCellCoord(G+1),this._convertFromCellCoord(j+1)))&&p.call(this,e,n,o,u,te,m,I,T))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,n=3+this.cells.length+1+1;let o=0;for(let m=0;m<this.cells.length;m++)o+=this.cells[m].length;const u=new Int32Array(n+o+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;let p=n;for(let m=0;m<e.length;m++){const I=e[m];u[3+m]=p,u.set(I,p),p+=I.length}return u[3+e.length]=p,u.set(this.keys,p),p+=this.keys.length,u[3+e.length+1]=p,u.set(this.bboxes,p),p+=this.bboxes.length,u.buffer}static serialize(e,n){const o=e.toArrayBuffer();return n&&n.push(o),{buffer:o}}static deserialize(e){return new jr(e.buffer)}}const ds={};function dt(i,e,n={}){Object.defineProperty(e,"_classRegistryKey",{value:i,writeable:!1}),ds[i]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}dt("Object",Object),dt("TransferableGridIndex",jr),dt("Color",D),dt("Error",Error),dt("AJAXError",Pi),dt("ResolvedImage",se),dt("StylePropertyFunction",os),dt("StyleExpression",ho,{omit:["_evaluator"]}),dt("ZoomDependentExpression",ua),dt("ZoomConstantExpression",ca),dt("CompoundExpression",Ft,{omit:["_evaluate"]});for(const i in ss)ss[i]._classRegistryKey||dt(`Expression_${i}`,ss[i]);function _o(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Bs(i,e){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob)return i;if(_o(i)||bt(i))return e&&e.push(i),i;if(ArrayBuffer.isView(i)){const n=i;return e&&e.push(n.buffer),n}if(i instanceof ImageData)return e&&e.push(i.data.buffer),i;if(Array.isArray(i)){const n=[];for(const o of i)n.push(Bs(o,e));return n}if(typeof i=="object"){const n=i.constructor,o=n._classRegistryKey;if(!o)throw new Error("can't serialize object of unregistered class");const u=n.serialize?n.serialize(i,e):{};if(!n.serialize){for(const p in i){if(!i.hasOwnProperty(p)||ds[o].omit.indexOf(p)>=0)continue;const m=i[p];u[p]=ds[o].shallow.indexOf(p)>=0?m:Bs(m,e)}i instanceof Error&&(u.message=i.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(u.$name=o),u}throw new Error("can't serialize object of type "+typeof i)}function Zr(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||_o(i)||bt(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(Zr);if(typeof i=="object"){const e=i.$name||"Object";if(!ds[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:n}=ds[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(i);const o=Object.create(n.prototype);for(const u of Object.keys(i)){if(u==="$name")continue;const p=i[u];o[u]=ds[e].shallow.indexOf(u)>=0?p:Zr(p)}return o}throw new Error("can't deserialize object of type "+typeof i)}class Rs{constructor(){this.first=!0}update(e,n){const o=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=o,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=o,!0):(this.lastFloorZoom>o?(this.lastIntegerZoom=o+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<o&&(this.lastIntegerZoom=o,this.lastIntegerZoomTime=n),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=o,!0))}}const at={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function yo(i){for(const e of i)if(Fs(e.charCodeAt(0)))return!0;return!1}function Sl(i){for(const e of i)if(!bc(e.charCodeAt(0)))return!1;return!0}function bc(i){return!(at.Arabic(i)||at["Arabic Supplement"](i)||at["Arabic Extended-A"](i)||at["Arabic Presentation Forms-A"](i)||at["Arabic Presentation Forms-B"](i))}function Fs(i){return!(i!==746&&i!==747&&(i<4352||!(at["Bopomofo Extended"](i)||at.Bopomofo(i)||at["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||at["CJK Compatibility Ideographs"](i)||at["CJK Compatibility"](i)||at["CJK Radicals Supplement"](i)||at["CJK Strokes"](i)||!(!at["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||at["CJK Unified Ideographs Extension A"](i)||at["CJK Unified Ideographs"](i)||at["Enclosed CJK Letters and Months"](i)||at["Hangul Compatibility Jamo"](i)||at["Hangul Jamo Extended-A"](i)||at["Hangul Jamo Extended-B"](i)||at["Hangul Jamo"](i)||at["Hangul Syllables"](i)||at.Hiragana(i)||at["Ideographic Description Characters"](i)||at.Kanbun(i)||at["Kangxi Radicals"](i)||at["Katakana Phonetic Extensions"](i)||at.Katakana(i)&&i!==12540||!(!at["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!at["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||at["Unified Canadian Aboriginal Syllabics"](i)||at["Unified Canadian Aboriginal Syllabics Extended"](i)||at["Vertical Forms"](i)||at["Yijing Hexagram Symbols"](i)||at["Yi Syllables"](i)||at["Yi Radicals"](i))))}function Il(i){return!(Fs(i)||function(e){return!!(at["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||at["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||at["Letterlike Symbols"](e)||at["Number Forms"](e)||at["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||at["Control Pictures"](e)&&e!==9251||at["Optical Character Recognition"](e)||at["Enclosed Alphanumerics"](e)||at["Geometric Shapes"](e)||at["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||at["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||at["CJK Symbols and Punctuation"](e)||at.Katakana(e)||at["Private Use Area"](e)||at["CJK Compatibility Forms"](e)||at["Small Form Variants"](e)||at["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(i))}function El(i){return i>=1424&&i<=2303||at["Arabic Presentation Forms-A"](i)||at["Arabic Presentation Forms-B"](i)}function wc(i,e){return!(!e&&El(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||at.Khmer(i))}function Sc(i){for(const e of i)if(El(e.charCodeAt(0)))return!0;return!1}const _a="deferred",vo="loading",xo="loaded";let bo=null,Cn="unavailable",Pr=null;const Tl=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(Cn="error"),bo&&bo(i)};function wo(){fs.fire(new Hn("pluginStateChange",{pluginStatus:Cn,pluginURL:Pr}))}const fs=new Cr,So=function(){return Cn},ya=function(){if(Cn!==_a||!Pr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Cn=vo,wo(),Pr&&bn({url:Pr},i=>{i?Tl(i):(Cn=xo,wo())})},Xn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Cn===xo||Xn.applyArabicShaping!=null,isLoading:()=>Cn===vo,setState(i){Cn=i.pluginStatus,Pr=i.pluginURL},isParsed:()=>Xn.applyArabicShaping!=null&&Xn.processBidirectionalText!=null&&Xn.processStyledBidirectionalText!=null,getPluginURL:()=>Pr};class ki{constructor(e,n){this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Rs,this.transition={})}isSupportedScript(e){return function(n,o){for(const u of n)if(!wc(u.charCodeAt(0),o))return!1;return!0}(e,Xn.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,n=e-Math.floor(e),o=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*o}:{fromScale:.5,toScale:1,t:1-(1-o)*n}}}class va{constructor(e,n){this.property=e,this.value=n,this.expression=function(o,u){if(ra(o))return new os(o,u);if(oa(o)){const p=fo(o,u);if(p.result==="error")throw new Error(p.value.map(m=>`${m.key}: ${m.message}`).join(", "));return p.value}{let p=o;return typeof o=="string"&&u.type==="color"&&(p=D.parse(o)),{kind:"constant",evaluate:()=>p}}}(n===void 0?e.specification.default:n,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,n,o){return this.property.possiblyEvaluate(this,e,n,o)}}class xa{constructor(e){this.property=e,this.value=new va(e,void 0)}transitioned(e,n){return new kl(this.property,this.value,n,ge({},e.transition,this.transition),e.now)}untransitioned(){return new kl(this.property,this.value,null,{},0)}}class Io{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Ee(this._values[e].value.value)}setValue(e,n){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new xa(this._values[e].property)),this._values[e].value=new va(this._values[e].property,n===null?void 0:Ee(n))}getTransition(e){return Ee(this._values[e].transition)}setTransition(e,n){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new xa(this._values[e].property)),this._values[e].transition=Ee(n)||void 0}serialize(){const e={};for(const n of Object.keys(this._values)){const o=this.getValue(n);o!==void 0&&(e[n]=o);const u=this.getTransition(n);u!==void 0&&(e[`${n}-transition`]=u)}return e}transitioned(e,n){const o=new Al(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].transitioned(e,n._values[u]);return o}untransitioned(){const e=new Al(this._properties);for(const n of Object.keys(this._values))e._values[n]=this._values[n].untransitioned();return e}}class kl{constructor(e,n,o,u,p){this.property=e,this.value=n,this.begin=p+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=o)}possiblyEvaluate(e,n,o){const u=e.now||0,p=this.value.possiblyEvaluate(e,n,o),m=this.prior;if(m){if(u>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(u<this.begin)return m.possiblyEvaluate(e,n,o);{const I=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,n,o),p,function(T){if(T<=0)return 0;if(T>=1)return 1;const C=T*T,L=C*T;return 4*(T<.5?L:3*(T-C)+L-.75)}(I))}}return p}}class Al{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,n,o){const u=new ba(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].possiblyEvaluate(e,n,o);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ic{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Ee(this._values[e].value)}setValue(e,n){this._values[e]=new va(this._values[e].property,n===null?void 0:Ee(n))}serialize(){const e={};for(const n of Object.keys(this._values)){const o=this.getValue(n);o!==void 0&&(e[n]=o)}return e}possiblyEvaluate(e,n,o){const u=new ba(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].possiblyEvaluate(e,n,o);return u}}class cr{constructor(e,n,o){this.property=e,this.value=n,this.parameters=o}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,n,o,u){return this.property.evaluate(this.value,this.parameters,e,n,o,u)}}class ba{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class _t{constructor(e){this.specification=e}possiblyEvaluate(e,n){return e.expression.evaluate(n)}interpolate(e,n,o){const u=ks[this.specification.type];return u?u(e,n,o):e}}class wt{constructor(e,n){this.specification=e,this.overrides=n}possiblyEvaluate(e,n,o,u){return new cr(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(n,null,{},o,u)}:e.expression,n)}interpolate(e,n,o){if(e.value.kind!=="constant"||n.value.kind!=="constant")return e;if(e.value.value===void 0||n.value.value===void 0)return new cr(this,{kind:"constant",value:void 0},e.parameters);const u=ks[this.specification.type];return u?new cr(this,{kind:"constant",value:u(e.value.value,n.value.value,o)},e.parameters):e}evaluate(e,n,o,u,p,m){return e.kind==="constant"?e.value:e.evaluate(n,o,u,p,m)}}class Os extends wt{possiblyEvaluate(e,n,o,u){if(e.value===void 0)return new cr(this,{kind:"constant",value:void 0},n);if(e.expression.kind==="constant"){const p=e.expression.evaluate(n,null,{},o,u),m=e.property.specification.type==="resolvedImage"&&typeof p!="string"?p.name:p,I=this._calculate(m,m,m,n);return new cr(this,{kind:"constant",value:I},n)}if(e.expression.kind==="camera"){const p=this._calculate(e.expression.evaluate({zoom:n.zoom-1}),e.expression.evaluate({zoom:n.zoom}),e.expression.evaluate({zoom:n.zoom+1}),n);return new cr(this,{kind:"constant",value:p},n)}return new cr(this,e.expression,n)}evaluate(e,n,o,u,p,m){if(e.kind==="source"){const I=e.evaluate(n,o,u,p,m);return this._calculate(I,I,I,n)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(n.zoom)-1},o,u),e.evaluate({zoom:Math.floor(n.zoom)},o,u),e.evaluate({zoom:Math.floor(n.zoom)+1},o,u),n):e.value}_calculate(e,n,o,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:n}:{from:o,to:n}}interpolate(e){return e}}class Vs{constructor(e){this.specification=e}possiblyEvaluate(e,n,o,u){if(e.value!==void 0){if(e.expression.kind==="constant"){const p=e.expression.evaluate(n,null,{},o,u);return this._calculate(p,p,p,n)}return this._calculate(e.expression.evaluate(new ki(Math.floor(n.zoom-1),n)),e.expression.evaluate(new ki(Math.floor(n.zoom),n)),e.expression.evaluate(new ki(Math.floor(n.zoom+1),n)),n)}}_calculate(e,n,o,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:n}:{from:o,to:n}}interpolate(e){return e}}class Eo{constructor(e){this.specification=e}possiblyEvaluate(e,n,o,u){return!!e.expression.evaluate(n,null,{},o,u)}interpolate(){return!1}}class nn{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const n in e){const o=e[n];o.specification.overridable&&this.overridableProperties.push(n);const u=this.defaultPropertyValues[n]=new va(o,void 0),p=this.defaultTransitionablePropertyValues[n]=new xa(o);this.defaultTransitioningPropertyValues[n]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=u.possiblyEvaluate({})}}}dt("DataDrivenProperty",wt),dt("DataConstantProperty",_t),dt("CrossFadedDataDrivenProperty",Os),dt("CrossFadedProperty",Vs),dt("ColorRampProperty",Eo);const Hr="-transition";class Mn extends Cr{constructor(e,n){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},e.type!=="custom"&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Ic(n.layout)),n.paint)){this._transitionablePaint=new Io(n.paint);for(const o in e.paint)this.setPaintProperty(o,e.paint[o],{validate:!1});for(const o in e.layout)this.setLayoutProperty(o,e.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ba(n.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,n,o={}){n!=null&&this._validate(xc,`layers.${this.id}.layout.${e}`,e,n,o)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,n):this.visibility=n)}getPaintProperty(e){return e.endsWith(Hr)?this._transitionablePaint.getTransition(e.slice(0,-Hr.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,n,o={}){if(n!=null&&this._validate(go,`layers.${this.id}.paint.${e}`,e,n,o))return!1;if(e.endsWith(Hr))return this._transitionablePaint.setTransition(e.slice(0,-Hr.length),n||void 0),!1;{const u=this._transitionablePaint._values[e],p=u.property.specification["property-type"]==="cross-faded-data-driven",m=u.value.isDataDriven(),I=u.value;this._transitionablePaint.setValue(e,n),this._handleSpecialPaintPropertyUpdate(e);const T=this._transitionablePaint._values[e].value;return T.isDataDriven()||m||p||this._handleOverridablePaintPropertyUpdate(e,I,T)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,n,o){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,n){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,n)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ve(e,(n,o)=>!(n===void 0||o==="layout"&&!Object.keys(n).length||o==="paint"&&!Object.keys(n).length))}_validate(e,n,o,u,p={}){return(!p||p.validate!==!1)&&wl(this,e.call(Gr,{key:n,layerType:this.type,objectKey:o,value:u,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const n=this.paint.get(e);if(n instanceof cr&&as(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}const Ec={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Us{constructor(e,n){this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class wi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,n){return e._trim(),n&&(e.isTransferred=!0,n.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const n=Object.create(this.prototype);return n.arrayBuffer=e.arrayBuffer,n.length=e.length,n.capacity=e.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function rn(i,e=1){let n=0,o=0;return{members:i.map(u=>{const p=Ec[u.type].BYTES_PER_ELEMENT,m=n=zl(n,Math.max(e,p)),I=u.components||1;return o=Math.max(o,p),n+=p*I,{name:u.name,type:u.type,components:I,offset:m}}),size:zl(n,Math.max(o,e)),alignment:e}}function zl(i,e){return Math.ceil(i/e)*e}class ps extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,n)}emplace(e,n,o){const u=2*e;return this.int16[u+0]=n,this.int16[u+1]=o,e}}ps.prototype.bytesPerElement=4,dt("StructArrayLayout2i4",ps);class Ns extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,u){const p=this.length;return this.resize(p+1),this.emplace(p,e,n,o,u)}emplace(e,n,o,u,p){const m=4*e;return this.int16[m+0]=n,this.int16[m+1]=o,this.int16[m+2]=u,this.int16[m+3]=p,e}}Ns.prototype.bytesPerElement=8,dt("StructArrayLayout4i8",Ns);class h extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p,m){const I=this.length;return this.resize(I+1),this.emplace(I,e,n,o,u,p,m)}emplace(e,n,o,u,p,m,I){const T=6*e;return this.int16[T+0]=n,this.int16[T+1]=o,this.int16[T+2]=u,this.int16[T+3]=p,this.int16[T+4]=m,this.int16[T+5]=I,e}}h.prototype.bytesPerElement=12,dt("StructArrayLayout2i4i12",h);class t extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p,m){const I=this.length;return this.resize(I+1),this.emplace(I,e,n,o,u,p,m)}emplace(e,n,o,u,p,m,I){const T=4*e,C=8*e;return this.int16[T+0]=n,this.int16[T+1]=o,this.uint8[C+4]=u,this.uint8[C+5]=p,this.uint8[C+6]=m,this.uint8[C+7]=I,e}}t.prototype.bytesPerElement=8,dt("StructArrayLayout2i4ub8",t);class s extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,n)}emplace(e,n,o){const u=2*e;return this.float32[u+0]=n,this.float32[u+1]=o,e}}s.prototype.bytesPerElement=8,dt("StructArrayLayout2f8",s);class l extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p,m,I,T,C,L){const B=this.length;return this.resize(B+1),this.emplace(B,e,n,o,u,p,m,I,T,C,L)}emplace(e,n,o,u,p,m,I,T,C,L,B){const V=10*e;return this.uint16[V+0]=n,this.uint16[V+1]=o,this.uint16[V+2]=u,this.uint16[V+3]=p,this.uint16[V+4]=m,this.uint16[V+5]=I,this.uint16[V+6]=T,this.uint16[V+7]=C,this.uint16[V+8]=L,this.uint16[V+9]=B,e}}l.prototype.bytesPerElement=20,dt("StructArrayLayout10ui20",l);class d extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p,m,I,T,C,L,B,V){const G=this.length;return this.resize(G+1),this.emplace(G,e,n,o,u,p,m,I,T,C,L,B,V)}emplace(e,n,o,u,p,m,I,T,C,L,B,V,G){const j=12*e;return this.int16[j+0]=n,this.int16[j+1]=o,this.int16[j+2]=u,this.int16[j+3]=p,this.uint16[j+4]=m,this.uint16[j+5]=I,this.uint16[j+6]=T,this.uint16[j+7]=C,this.int16[j+8]=L,this.int16[j+9]=B,this.int16[j+10]=V,this.int16[j+11]=G,e}}d.prototype.bytesPerElement=24,dt("StructArrayLayout4i4ui4i24",d);class _ extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,o)}emplace(e,n,o,u){const p=3*e;return this.float32[p+0]=n,this.float32[p+1]=o,this.float32[p+2]=u,e}}_.prototype.bytesPerElement=12,dt("StructArrayLayout3f12",_);class E extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint32[1*e+0]=n,e}}E.prototype.bytesPerElement=4,dt("StructArrayLayout1ul4",E);class k extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p,m,I,T,C){const L=this.length;return this.resize(L+1),this.emplace(L,e,n,o,u,p,m,I,T,C)}emplace(e,n,o,u,p,m,I,T,C,L){const B=10*e,V=5*e;return this.int16[B+0]=n,this.int16[B+1]=o,this.int16[B+2]=u,this.int16[B+3]=p,this.int16[B+4]=m,this.int16[B+5]=I,this.uint32[V+3]=T,this.uint16[B+8]=C,this.uint16[B+9]=L,e}}k.prototype.bytesPerElement=20,dt("StructArrayLayout6i1ul2ui20",k);class z extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p,m){const I=this.length;return this.resize(I+1),this.emplace(I,e,n,o,u,p,m)}emplace(e,n,o,u,p,m,I){const T=6*e;return this.int16[T+0]=n,this.int16[T+1]=o,this.int16[T+2]=u,this.int16[T+3]=p,this.int16[T+4]=m,this.int16[T+5]=I,e}}z.prototype.bytesPerElement=12,dt("StructArrayLayout2i2i2i12",z);class P extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,o,u,p)}emplace(e,n,o,u,p,m){const I=4*e,T=8*e;return this.float32[I+0]=n,this.float32[I+1]=o,this.float32[I+2]=u,this.int16[T+6]=p,this.int16[T+7]=m,e}}P.prototype.bytesPerElement=16,dt("StructArrayLayout2f1f2i16",P);class R extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,u){const p=this.length;return this.resize(p+1),this.emplace(p,e,n,o,u)}emplace(e,n,o,u,p){const m=12*e,I=3*e;return this.uint8[m+0]=n,this.uint8[m+1]=o,this.float32[I+1]=u,this.float32[I+2]=p,e}}R.prototype.bytesPerElement=12,dt("StructArrayLayout2ub2f12",R);class q extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,o)}emplace(e,n,o,u){const p=3*e;return this.uint16[p+0]=n,this.uint16[p+1]=o,this.uint16[p+2]=u,e}}q.prototype.bytesPerElement=6,dt("StructArrayLayout3ui6",q);class H extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p,m,I,T,C,L,B,V,G,j,te,ie,de){const ye=this.length;return this.resize(ye+1),this.emplace(ye,e,n,o,u,p,m,I,T,C,L,B,V,G,j,te,ie,de)}emplace(e,n,o,u,p,m,I,T,C,L,B,V,G,j,te,ie,de,ye){const _e=24*e,Te=12*e,Ue=48*e;return this.int16[_e+0]=n,this.int16[_e+1]=o,this.uint16[_e+2]=u,this.uint16[_e+3]=p,this.uint32[Te+2]=m,this.uint32[Te+3]=I,this.uint32[Te+4]=T,this.uint16[_e+10]=C,this.uint16[_e+11]=L,this.uint16[_e+12]=B,this.float32[Te+7]=V,this.float32[Te+8]=G,this.uint8[Ue+36]=j,this.uint8[Ue+37]=te,this.uint8[Ue+38]=ie,this.uint32[Te+10]=de,this.int16[_e+22]=ye,e}}H.prototype.bytesPerElement=48,dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",H);class $ extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,u,p,m,I,T,C,L,B,V,G,j,te,ie,de,ye,_e,Te,Ue,Le,ft,yt,lt,ct,nt,ht){const ut=this.length;return this.resize(ut+1),this.emplace(ut,e,n,o,u,p,m,I,T,C,L,B,V,G,j,te,ie,de,ye,_e,Te,Ue,Le,ft,yt,lt,ct,nt,ht)}emplace(e,n,o,u,p,m,I,T,C,L,B,V,G,j,te,ie,de,ye,_e,Te,Ue,Le,ft,yt,lt,ct,nt,ht,ut){const We=34*e,St=17*e;return this.int16[We+0]=n,this.int16[We+1]=o,this.int16[We+2]=u,this.int16[We+3]=p,this.int16[We+4]=m,this.int16[We+5]=I,this.int16[We+6]=T,this.int16[We+7]=C,this.uint16[We+8]=L,this.uint16[We+9]=B,this.uint16[We+10]=V,this.uint16[We+11]=G,this.uint16[We+12]=j,this.uint16[We+13]=te,this.uint16[We+14]=ie,this.uint16[We+15]=de,this.uint16[We+16]=ye,this.uint16[We+17]=_e,this.uint16[We+18]=Te,this.uint16[We+19]=Ue,this.uint16[We+20]=Le,this.uint16[We+21]=ft,this.uint16[We+22]=yt,this.uint32[St+12]=lt,this.float32[St+13]=ct,this.float32[St+14]=nt,this.float32[St+15]=ht,this.float32[St+16]=ut,e}}$.prototype.bytesPerElement=68,dt("StructArrayLayout8i15ui1ul4f68",$);class W extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.float32[1*e+0]=n,e}}W.prototype.bytesPerElement=4,dt("StructArrayLayout1f4",W);class Q extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,o)}emplace(e,n,o,u){const p=3*e;return this.int16[p+0]=n,this.int16[p+1]=o,this.int16[p+2]=u,e}}Q.prototype.bytesPerElement=6,dt("StructArrayLayout3i6",Q);class le extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,o)}emplace(e,n,o,u){const p=4*e;return this.uint32[2*e+0]=n,this.uint16[p+2]=o,this.uint16[p+3]=u,e}}le.prototype.bytesPerElement=8,dt("StructArrayLayout1ul2ui8",le);class ce extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,n)}emplace(e,n,o){const u=2*e;return this.uint16[u+0]=n,this.uint16[u+1]=o,e}}ce.prototype.bytesPerElement=4,dt("StructArrayLayout2ui4",ce);class pe extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint16[1*e+0]=n,e}}pe.prototype.bytesPerElement=2,dt("StructArrayLayout1ui2",pe);class he extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,u){const p=this.length;return this.resize(p+1),this.emplace(p,e,n,o,u)}emplace(e,n,o,u,p){const m=4*e;return this.float32[m+0]=n,this.float32[m+1]=o,this.float32[m+2]=u,this.float32[m+3]=p,e}}he.prototype.bytesPerElement=16,dt("StructArrayLayout4f16",he);class Me extends Us{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ae(this.anchorPointX,this.anchorPointY)}}Me.prototype.size=20;class be extends k{get(e){return new Me(this,e)}}dt("CollisionBoxArray",be);class Ie extends Us{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ie.prototype.size=48;class je extends H{get(e){return new Ie(this,e)}}dt("PlacedSymbolArray",je);class it extends Us{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}it.prototype.size=68;class ze extends ${get(e){return new it(this,e)}}dt("SymbolInstanceArray",ze);class gt extends W{getoffsetX(e){return this.float32[1*e+0]}}dt("GlyphOffsetArray",gt);class ot extends Q{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}dt("SymbolLineVertexArray",ot);class zt extends Us{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}zt.prototype.size=8;class Kt extends le{get(e){return new zt(this,e)}}dt("FeatureIndexArray",Kt);class Ut extends ps{}class Ht extends ps{}class Ri extends h{}class Mt extends t{}class $t extends s{}class di extends l{}class pn extends d{}class Vn extends _{}class Kn extends E{}class Yn extends z{}class Lr extends R{}class Pn extends q{}class ur extends ce{}const Wr=rn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Un}=Wr;class ei{constructor(e=[]){this.segments=e}prepareSegment(e,n,o,u){let p=this.segments[this.segments.length-1];return e>ei.MAX_VERTEX_ARRAY_LENGTH&&Pe(`Max vertices per segment is ${ei.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!p||p.vertexLength+e>ei.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==u)&&(p={vertexOffset:n.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0},u!==void 0&&(p.sortKey=u),this.segments.push(p)),p}get(){return this.segments}destroy(){for(const e of this.segments)for(const n in e.vaos)e.vaos[n].destroy()}static simpleSegment(e,n,o,u){return new ei([{vertexOffset:e,primitiveOffset:n,vertexLength:o,primitiveLength:u,vaos:{},sortKey:0}])}}function si(i,e){return 256*(i=F(Math.floor(i),0,255))+F(Math.floor(e),0,255)}ei.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dt("SegmentVector",ei);const Qi=rn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var wn={exports:{}},Ai={exports:{}};Ai.exports=function(i,e){var n,o,u,p,m,I,T,C;for(o=i.length-(n=3&i.length),u=e,m=3432918353,I=461845907,C=0;C<o;)T=255&i.charCodeAt(C)|(255&i.charCodeAt(++C))<<8|(255&i.charCodeAt(++C))<<16|(255&i.charCodeAt(++C))<<24,++C,u=27492+(65535&(p=5*(65535&(u=(u^=T=(65535&(T=(T=(65535&T)*m+(((T>>>16)*m&65535)<<16)&4294967295)<<15|T>>>17))*I+(((T>>>16)*I&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(p>>>16)&65535)<<16);switch(T=0,n){case 3:T^=(255&i.charCodeAt(C+2))<<16;case 2:T^=(255&i.charCodeAt(C+1))<<8;case 1:u^=T=(65535&(T=(T=(65535&(T^=255&i.charCodeAt(C)))*m+(((T>>>16)*m&65535)<<16)&4294967295)<<15|T>>>17))*I+(((T>>>16)*I&65535)<<16)&4294967295}return u^=i.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0};var Xr={exports:{}};Xr.exports=function(i,e){for(var n,o=i.length,u=e^o,p=0;o>=4;)n=1540483477*(65535&(n=255&i.charCodeAt(p)|(255&i.charCodeAt(++p))<<8|(255&i.charCodeAt(++p))<<16|(255&i.charCodeAt(++p))<<24))+((1540483477*(n>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),o-=4,++p;switch(o){case 3:u^=(255&i.charCodeAt(p+2))<<16;case 2:u^=(255&i.charCodeAt(p+1))<<8;case 1:u=1540483477*(65535&(u^=255&i.charCodeAt(p)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0};var hr=Ai.exports,wa=Xr.exports;wn.exports=hr,wn.exports.murmur3=hr,wn.exports.murmur2=wa;var To=wn.exports;class Sa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,n,o,u){this.ids.push(Cl(e)),this.positions.push(n,o,u)}getPositions(e){const n=Cl(e);let o=0,u=this.ids.length-1;for(;o<u;){const m=o+u>>1;this.ids[m]>=n?u=m:o=m+1}const p=[];for(;this.ids[o]===n;)p.push({index:this.positions[3*o],start:this.positions[3*o+1],end:this.positions[3*o+2]}),o++;return p}static serialize(e,n){const o=new Float64Array(e.ids),u=new Uint32Array(e.positions);return Kr(o,u,0,o.length-1),n&&n.push(o.buffer,u.buffer),{ids:o,positions:u}}static deserialize(e){const n=new Sa;return n.ids=e.ids,n.positions=e.positions,n.indexed=!0,n}}function Cl(i){const e=+i;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:To(String(i))}function Kr(i,e,n,o){for(;n<o;){const u=i[n+o>>1];let p=n-1,m=o+1;for(;;){do p++;while(i[p]<u);do m--;while(i[m]>u);if(p>=m)break;Ia(i,p,m),Ia(e,3*p,3*m),Ia(e,3*p+1,3*m+1),Ia(e,3*p+2,3*m+2)}m-n<o-m?(Kr(i,e,n,m),n=m+1):(Kr(i,e,m+1,o),o=m)}}function Ia(i,e,n){const o=i[e];i[e]=i[n],i[n]=o}dt("FeaturePositionMap",Sa);class dr{constructor(e,n){this.gl=e.gl,this.location=n}}class ms extends dr{constructor(e,n){super(e,n),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Mu extends dr{constructor(e,n){super(e,n),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Pu extends dr{constructor(e,n){super(e,n),this.current=D.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Ed=new Float32Array(16);function Tc(i){return[si(255*i.r,255*i.g),si(255*i.b,255*i.a)]}class ko{constructor(e,n,o){this.value=e,this.uniformNames=n.map(u=>`u_${u}`),this.type=o}setUniform(e,n,o){e.set(o.constantOr(this.value))}getBinding(e,n,o){return this.type==="color"?new Pu(e,n):new ms(e,n)}}class Ea{constructor(e,n){this.uniformNames=n.map(o=>`u_${o}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=e.tlbr}setUniform(e,n,o,u){const p=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)}getBinding(e,n,o){return o.substr(0,9)==="u_pattern"?new Mu(e,n):new ms(e,n)}}class Yr{constructor(e,n,o,u){this.expression=e,this.type=o,this.maxValue=0,this.paintVertexAttributes=n.map(p=>({name:`a_${p}`,type:"Float32",components:o==="color"?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,n,o,u,p){const m=this.paintVertexArray.length,I=this.expression.evaluate(new ki(0),n,{},u,[],p);this.paintVertexArray.resize(e),this._setPaintValue(m,e,I)}updatePaintArray(e,n,o,u){const p=this.expression.evaluate({zoom:0},o,u);this._setPaintValue(e,n,p)}_setPaintValue(e,n,o){if(this.type==="color"){const u=Tc(o);for(let p=e;p<n;p++)this.paintVertexArray.emplace(p,u[0],u[1])}else{for(let u=e;u<n;u++)this.paintVertexArray.emplace(u,o);this.maxValue=Math.max(this.maxValue,Math.abs(o))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xr{constructor(e,n,o,u,p,m){this.expression=e,this.uniformNames=n.map(I=>`u_${I}_t`),this.type=o,this.useIntegerZoom=u,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=n.map(I=>({name:`a_${I}`,type:"Float32",components:o==="color"?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,n,o,u,p){const m=this.expression.evaluate(new ki(this.zoom),n,{},u,[],p),I=this.expression.evaluate(new ki(this.zoom+1),n,{},u,[],p),T=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(T,e,m,I)}updatePaintArray(e,n,o,u){const p=this.expression.evaluate({zoom:this.zoom},o,u),m=this.expression.evaluate({zoom:this.zoom+1},o,u);this._setPaintValue(e,n,p,m)}_setPaintValue(e,n,o,u){if(this.type==="color"){const p=Tc(o),m=Tc(u);for(let I=e;I<n;I++)this.paintVertexArray.emplace(I,p[0],p[1],m[0],m[1])}else{for(let p=e;p<n;p++)this.paintVertexArray.emplace(p,o,u);this.maxValue=Math.max(this.maxValue,Math.abs(o),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,n){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,u=F(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);e.set(u)}getBinding(e,n,o){return new ms(e,n)}}class gs{constructor(e,n,o,u,p,m){this.expression=e,this.type=n,this.useIntegerZoom=o,this.zoom=u,this.layerId=m,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p}populatePaintArray(e,n,o){const u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,n.patterns&&n.patterns[this.layerId],o)}updatePaintArray(e,n,o,u,p){this._setPaintValues(e,n,o.patterns&&o.patterns[this.layerId],p)}_setPaintValues(e,n,o,u){if(!u||!o)return;const{min:p,mid:m,max:I}=o,T=u[p],C=u[m],L=u[I];if(T&&C&&L)for(let B=e;B<n;B++)this.zoomInPaintVertexArray.emplace(B,C.tl[0],C.tl[1],C.br[0],C.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],C.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(B,C.tl[0],C.tl[1],C.br[0],C.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],C.pixelRatio,L.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Qi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Qi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Lu{constructor(e,n,o){this.binders={},this._buffers=[];const u=[];for(const p in e.paint._values){if(!o(p))continue;const m=e.paint.get(p);if(!(m instanceof cr&&as(m.property.specification)))continue;const I=Td(p,e.type),T=m.value,C=m.property.specification.type,L=m.property.useIntegerZoom,B=m.property.specification["property-type"],V=B==="cross-faded"||B==="cross-faded-data-driven";if(T.kind==="constant")this.binders[p]=V?new Ea(T.value,I):new ko(T.value,I,C),u.push(`/u_${p}`);else if(T.kind==="source"||V){const G=Du(p,C,"source");this.binders[p]=V?new gs(T,C,L,n,G,e.id):new Yr(T,I,C,G),u.push(`/a_${p}`)}else{const G=Du(p,C,"composite");this.binders[p]=new xr(T,I,C,L,n,G),u.push(`/z_${p}`)}}this.cacheKey=u.sort().join("")}getMaxValue(e){const n=this.binders[e];return n instanceof Yr||n instanceof xr?n.maxValue:0}populatePaintArrays(e,n,o,u,p){for(const m in this.binders){const I=this.binders[m];(I instanceof Yr||I instanceof xr||I instanceof gs)&&I.populatePaintArray(e,n,o,u,p)}}setConstantPatternPositions(e,n){for(const o in this.binders){const u=this.binders[o];u instanceof Ea&&u.setConstantPatternPositions(e,n)}}updatePaintArrays(e,n,o,u,p){let m=!1;for(const I in e){const T=n.getPositions(I);for(const C of T){const L=o.feature(C.index);for(const B in this.binders){const V=this.binders[B];if((V instanceof Yr||V instanceof xr||V instanceof gs)&&V.expression.isStateDependent===!0){const G=u.paint.get(B);V.expression=G.value,V.updatePaintArray(C.start,C.end,L,e[I],p),m=!0}}}}return m}defines(){const e=[];for(const n in this.binders){const o=this.binders[n];(o instanceof ko||o instanceof Ea)&&e.push(...o.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const n in this.binders){const o=this.binders[n];if(o instanceof Yr||o instanceof xr)for(let u=0;u<o.paintVertexAttributes.length;u++)e.push(o.paintVertexAttributes[u].name);else if(o instanceof gs)for(let u=0;u<Qi.members.length;u++)e.push(Qi.members[u].name)}return e}getBinderUniforms(){const e=[];for(const n in this.binders){const o=this.binders[n];if(o instanceof ko||o instanceof Ea||o instanceof xr)for(const u of o.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,n){const o=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof ko||p instanceof Ea||p instanceof xr){for(const m of p.uniformNames)if(n[m]){const I=p.getBinding(e,n[m],m);o.push({name:m,property:u,binding:I})}}}return o}setUniforms(e,n,o,u){for(const{name:p,property:m,binding:I}of n)this.binders[m].setUniform(I,u,o.get(m),p)}updatePaintBuffers(e){this._buffers=[];for(const n in this.binders){const o=this.binders[n];if(e&&o instanceof gs){const u=e.fromScale===2?o.zoomInPaintVertexBuffer:o.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(o instanceof Yr||o instanceof xr)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(e){for(const n in this.binders){const o=this.binders[n];(o instanceof Yr||o instanceof xr||o instanceof gs)&&o.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const n=this.binders[e];(n instanceof Yr||n instanceof xr||n instanceof gs)&&n.destroy()}}}class qs{constructor(e,n,o=()=>!0){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new Lu(u,n,o);this.needsUpload=!1,this._featureMap=new Sa,this._bufferOffset=0}populatePaintArrays(e,n,o,u,p,m){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(e,n,u,p,m);n.id!==void 0&&this._featureMap.add(n.id,o,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,n,o,u){for(const p of o)this.needsUpload=this.programConfigurations[p.id].updatePaintArrays(e,this._featureMap,n,p,u)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Td(i,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${e}-`,"").replace(/-/g,"_")]}function Du(i,e,n){const o={color:{source:s,composite:he},number:{source:W,composite:s}},u=function(p){return{"line-pattern":{source:di,composite:di},"fill-pattern":{source:di,composite:di},"fill-extrusion-pattern":{source:di,composite:di}}[p]}(i);return u&&u[n]||o[e][n]}dt("ConstantBinder",ko),dt("CrossFadedConstantBinder",Ea),dt("SourceExpressionBinder",Yr),dt("CrossFadedCompositeBinder",gs),dt("CompositeExpressionBinder",xr),dt("ProgramConfiguration",Lu,{omit:["_buffers"]}),dt("ProgramConfigurationSet",qs);var sn=8192;const kc=Math.pow(2,14)-1,Bu=-kc-1;function Gs(i){const e=sn/i.extent,n=i.loadGeometry();for(let o=0;o<n.length;o++){const u=n[o];for(let p=0;p<u.length;p++){const m=u[p],I=Math.round(m.x*e),T=Math.round(m.y*e);m.x=F(I,Bu,kc),m.y=F(T,Bu,kc),(I<m.x||I>m.x+1||T<m.y||T>m.y+1)&&Pe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function js(i,e){return{type:i.type,id:i.id,properties:i.properties,geometry:e?Gs(i):[]}}function Ml(i,e,n,o,u){i.emplaceBack(2*e+(o+1)/2,2*n+(u+1)/2)}class Ac{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ut,this.indexArray=new Pn,this.segments=new ei,this.programConfigurations=new qs(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,o){const u=this.layers[0],p=[];let m=null,I=!1;u.type==="circle"&&(m=u.layout.get("circle-sort-key"),I=!m.isConstant());for(const{feature:T,id:C,index:L,sourceLayerIndex:B}of e){const V=this.layers[0]._featureFilter.needGeometry,G=js(T,V);if(!this.layers[0]._featureFilter.filter(new ki(this.zoom),G,o))continue;const j=I?m.evaluate(G,{},o):void 0,te={id:C,properties:T.properties,type:T.type,sourceLayerIndex:B,index:L,geometry:V?G.geometry:Gs(T),patterns:{},sortKey:j};p.push(te)}I&&p.sort((T,C)=>T.sortKey-C.sortKey);for(const T of p){const{geometry:C,index:L,sourceLayerIndex:B}=T,V=e[L].feature;this.addFeature(T,C,L,o),n.featureIndex.insert(V,C,L,B,this.index)}}update(e,n,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Un),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,o,u){for(const p of n)for(const m of p){const I=m.x,T=m.y;if(I<0||I>=sn||T<0||T>=sn)continue;const C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),L=C.vertexLength;Ml(this.layoutVertexArray,I,T,-1,-1),Ml(this.layoutVertexArray,I,T,1,-1),Ml(this.layoutVertexArray,I,T,1,1),Ml(this.layoutVertexArray,I,T,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),C.vertexLength+=4,C.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,{},u)}}function Ru(i,e){for(let n=0;n<i.length;n++)if(Ta(e,i[n]))return!0;for(let n=0;n<e.length;n++)if(Ta(i,e[n]))return!0;return!!zc(i,e)}function kd(i,e,n){return!!Ta(i,e)||!!Cc(e,i,n)}function Fu(i,e){if(i.length===1)return Vu(e,i[0]);for(let n=0;n<e.length;n++){const o=e[n];for(let u=0;u<o.length;u++)if(Ta(i,o[u]))return!0}for(let n=0;n<i.length;n++)if(Vu(e,i[n]))return!0;for(let n=0;n<e.length;n++)if(zc(i,e[n]))return!0;return!1}function Ad(i,e,n){if(i.length>1){if(zc(i,e))return!0;for(let o=0;o<e.length;o++)if(Cc(e[o],i,n))return!0}for(let o=0;o<i.length;o++)if(Cc(i[o],e,n))return!0;return!1}function zc(i,e){if(i.length===0||e.length===0)return!1;for(let n=0;n<i.length-1;n++){const o=i[n],u=i[n+1];for(let p=0;p<e.length-1;p++)if(zd(o,u,e[p],e[p+1]))return!0}return!1}function zd(i,e,n,o){return He(i,n,o)!==He(e,n,o)&&He(i,e,n)!==He(i,e,o)}function Cc(i,e,n){const o=n*n;if(e.length===1)return i.distSqr(e[0])<o;for(let u=1;u<e.length;u++)if(Ou(i,e[u-1],e[u])<o)return!0;return!1}function Ou(i,e,n){const o=e.distSqr(n);if(o===0)return i.distSqr(e);const u=((i.x-e.x)*(n.x-e.x)+(i.y-e.y)*(n.y-e.y))/o;return i.distSqr(u<0?e:u>1?n:n.sub(e)._mult(u)._add(e))}function Vu(i,e){let n,o,u,p=!1;for(let m=0;m<i.length;m++){n=i[m];for(let I=0,T=n.length-1;I<n.length;T=I++)o=n[I],u=n[T],o.y>e.y!=u.y>e.y&&e.x<(u.x-o.x)*(e.y-o.y)/(u.y-o.y)+o.x&&(p=!p)}return p}function Ta(i,e){let n=!1;for(let o=0,u=i.length-1;o<i.length;u=o++){const p=i[o],m=i[u];p.y>e.y!=m.y>e.y&&e.x<(m.x-p.x)*(e.y-p.y)/(m.y-p.y)+p.x&&(n=!n)}return n}function Cd(i,e,n){const o=n[0],u=n[2];if(i.x<o.x&&e.x<o.x||i.x>u.x&&e.x>u.x||i.y<o.y&&e.y<o.y||i.y>u.y&&e.y>u.y)return!1;const p=He(i,e,n[0]);return p!==He(i,e,n[1])||p!==He(i,e,n[2])||p!==He(i,e,n[3])}function Ao(i,e,n){const o=e.paint.get(i).value;return o.kind==="constant"?o.value:n.programConfigurations.get(e.id).getMaxValue(i)}function Pl(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Ll(i,e,n,o,u){if(!e[0]&&!e[1])return i;const p=Ae.convert(e)._mult(u);n==="viewport"&&p._rotate(-o);const m=[];for(let I=0;I<i.length;I++)m.push(i[I].sub(p));return m}dt("CircleBucket",Ac,{omit:["layers"]});const Md=new nn({"circle-sort-key":new wt(Se.layout_circle["circle-sort-key"])});var Pd={paint:new nn({"circle-radius":new wt(Se.paint_circle["circle-radius"]),"circle-color":new wt(Se.paint_circle["circle-color"]),"circle-blur":new wt(Se.paint_circle["circle-blur"]),"circle-opacity":new wt(Se.paint_circle["circle-opacity"]),"circle-translate":new _t(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new _t(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _t(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _t(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wt(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wt(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wt(Se.paint_circle["circle-stroke-opacity"])}),layout:Md},ka=typeof Float32Array<"u"?Float32Array:Array;function Mc(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Uu(i,e,n){var o=e[0],u=e[1],p=e[2],m=e[3],I=e[4],T=e[5],C=e[6],L=e[7],B=e[8],V=e[9],G=e[10],j=e[11],te=e[12],ie=e[13],de=e[14],ye=e[15],_e=n[0],Te=n[1],Ue=n[2],Le=n[3];return i[0]=_e*o+Te*I+Ue*B+Le*te,i[1]=_e*u+Te*T+Ue*V+Le*ie,i[2]=_e*p+Te*C+Ue*G+Le*de,i[3]=_e*m+Te*L+Ue*j+Le*ye,i[4]=(_e=n[4])*o+(Te=n[5])*I+(Ue=n[6])*B+(Le=n[7])*te,i[5]=_e*u+Te*T+Ue*V+Le*ie,i[6]=_e*p+Te*C+Ue*G+Le*de,i[7]=_e*m+Te*L+Ue*j+Le*ye,i[8]=(_e=n[8])*o+(Te=n[9])*I+(Ue=n[10])*B+(Le=n[11])*te,i[9]=_e*u+Te*T+Ue*V+Le*ie,i[10]=_e*p+Te*C+Ue*G+Le*de,i[11]=_e*m+Te*L+Ue*j+Le*ye,i[12]=(_e=n[12])*o+(Te=n[13])*I+(Ue=n[14])*B+(Le=n[15])*te,i[13]=_e*u+Te*T+Ue*V+Le*ie,i[14]=_e*p+Te*C+Ue*G+Le*de,i[15]=_e*m+Te*L+Ue*j+Le*ye,i}Math.hypot||(Math.hypot=function(){for(var i=0,e=arguments.length;e--;)i+=arguments[e]*arguments[e];return Math.sqrt(i)});var zo,Ld=Uu;function Dl(i,e,n){var o=e[0],u=e[1],p=e[2],m=e[3];return i[0]=n[0]*o+n[4]*u+n[8]*p+n[12]*m,i[1]=n[1]*o+n[5]*u+n[9]*p+n[13]*m,i[2]=n[2]*o+n[6]*u+n[10]*p+n[14]*m,i[3]=n[3]*o+n[7]*u+n[11]*p+n[15]*m,i}function Nu(i,e){const n=Dl([],[i.x,i.y,0,1],e);return new Ae(n[0]/n[3],n[1]/n[3])}zo=new ka(4),ka!=Float32Array&&(zo[0]=0,zo[1]=0,zo[2]=0,zo[3]=0);class qu extends Ac{}dt("HeatmapBucket",qu,{omit:["layers"]});var Dd={paint:new nn({"heatmap-radius":new wt(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wt(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _t(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Eo(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _t(Se.paint_heatmap["heatmap-opacity"])})};function Pc(i,{width:e,height:n},o,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*n*o)throw new RangeError(`mismatched image size. expected: ${u.length} but got: ${e*n*o}`)}else u=new Uint8Array(e*n*o);return i.width=e,i.height=n,i.data=u,i}function Gu(i,{width:e,height:n},o){if(e===i.width&&n===i.height)return;const u=Pc({},{width:e,height:n},o);Lc(i,u,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,e),height:Math.min(i.height,n)},o),i.width=e,i.height=n,i.data=u.data}function Lc(i,e,n,o,u,p){if(u.width===0||u.height===0)return e;if(u.width>i.width||u.height>i.height||n.x>i.width-u.width||n.y>i.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||o.x>e.width-u.width||o.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const m=i.data,I=e.data;for(let T=0;T<u.height;T++){const C=((n.y+T)*i.width+n.x)*p,L=((o.y+T)*e.width+o.x)*p;for(let B=0;B<u.width*p;B++)I[L+B]=m[C+B]}return e}class Co{constructor(e,n){Pc(this,e,1,n)}resize(e){Gu(this,e,1)}clone(){return new Co({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,o,u,p){Lc(e,n,o,u,p,1)}}class ir{constructor(e,n){Pc(this,e,4,n)}resize(e){Gu(this,e,4)}replace(e,n){n?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new ir({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,o,u,p){Lc(e,n,o,u,p,4)}}function ju(i){const e={},n=i.resolution||256,o=i.clips?i.clips.length:1,u=i.image||new ir({width:n,height:o}),p=(m,I,T)=>{e[i.evaluationKey]=T;const C=i.expression.evaluate(e);u.data[m+I+0]=Math.floor(255*C.r/C.a),u.data[m+I+1]=Math.floor(255*C.g/C.a),u.data[m+I+2]=Math.floor(255*C.b/C.a),u.data[m+I+3]=Math.floor(255*C.a)};if(i.clips)for(let m=0,I=0;m<o;++m,I+=4*n)for(let T=0,C=0;T<n;T++,C+=4){const L=T/(n-1),{start:B,end:V}=i.clips[m];p(I,C,B*(1-L)+V*L)}else for(let m=0,I=0;m<n;m++,I+=4)p(0,I,m/(n-1));return u}dt("AlphaImage",Co),dt("RGBAImage",ir);var Bd={paint:new nn({"hillshade-illumination-direction":new _t(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new _t(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _t(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _t(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _t(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _t(Se.paint_hillshade["hillshade-accent-color"])})};const Rd=rn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fd}=Rd;var Dc={exports:{}};function Bl(i,e,n){n=n||2;var o,u,p,m,I,T,C,L=e&&e.length,B=L?e[0]*n:i.length,V=Zu(i,0,B,n,!0),G=[];if(!V||V.next===V.prev)return G;if(L&&(V=function(te,ie,de,ye){var _e,Te,Ue,Le=[];for(_e=0,Te=ie.length;_e<Te;_e++)(Ue=Zu(te,ie[_e]*ye,_e<Te-1?ie[_e+1]*ye:te.length,ye,!1))===Ue.next&&(Ue.steiner=!0),Le.push(Zd(Ue));for(Le.sort(qd),_e=0;_e<Le.length;_e++)de=_s(de=Gd(Le[_e],de),de.next);return de}(i,e,V,n)),i.length>80*n){o=p=i[0],u=m=i[1];for(var j=n;j<B;j+=n)(I=i[j])<o&&(o=I),(T=i[j+1])<u&&(u=T),I>p&&(p=I),T>m&&(m=T);C=(C=Math.max(p-o,m-u))!==0?1/C:0}return Mo(V,G,n,o,u,C),G}function Zu(i,e,n,o,u){var p,m;if(u===Fc(i,e,n,o)>0)for(p=e;p<n;p+=o)m=Xu(p,i[p],i[p+1],m);else for(p=n-o;p>=e;p-=o)m=Xu(p,i[p],i[p+1],m);return m&&Rl(m,m.next)&&(Lo(m),m=m.next),m}function _s(i,e){if(!i)return i;e||(e=i);var n,o=i;do if(n=!1,o.steiner||!Rl(o,o.next)&&Hi(o.prev,o,o.next)!==0)o=o.next;else{if(Lo(o),(o=e=o.prev)===o.next)break;n=!0}while(n||o!==e);return e}function Mo(i,e,n,o,u,p,m){if(i){!m&&p&&function(L,B,V,G){var j=L;do j.z===null&&(j.z=Bc(j.x,j.y,B,V,G)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==L);j.prevZ.nextZ=null,j.prevZ=null,function(te){var ie,de,ye,_e,Te,Ue,Le,ft,yt=1;do{for(de=te,te=null,Te=null,Ue=0;de;){for(Ue++,ye=de,Le=0,ie=0;ie<yt&&(Le++,ye=ye.nextZ);ie++);for(ft=yt;Le>0||ft>0&&ye;)Le!==0&&(ft===0||!ye||de.z<=ye.z)?(_e=de,de=de.nextZ,Le--):(_e=ye,ye=ye.nextZ,ft--),Te?Te.nextZ=_e:te=_e,_e.prevZ=Te,Te=_e;de=ye}Te.nextZ=null,yt*=2}while(Ue>1)}(j)}(i,o,u,p);for(var I,T,C=i;i.prev!==i.next;)if(I=i.prev,T=i.next,p?Vd(i,o,u,p):Od(i))e.push(I.i/n),e.push(i.i/n),e.push(T.i/n),Lo(i),i=T.next,C=T.next;else if((i=T)===C){m?m===1?Mo(i=Ud(_s(i),e,n),e,n,o,u,p,2):m===2&&Nd(i,e,n,o,u,p):Mo(_s(i),e,n,o,u,p,1);break}}}function Od(i){var e=i.prev,n=i,o=i.next;if(Hi(e,n,o)>=0)return!1;for(var u=i.next.next;u!==i.prev;){if(Aa(e.x,e.y,n.x,n.y,o.x,o.y,u.x,u.y)&&Hi(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function Vd(i,e,n,o){var u=i.prev,p=i,m=i.next;if(Hi(u,p,m)>=0)return!1;for(var I=u.x>p.x?u.x>m.x?u.x:m.x:p.x>m.x?p.x:m.x,T=u.y>p.y?u.y>m.y?u.y:m.y:p.y>m.y?p.y:m.y,C=Bc(u.x<p.x?u.x<m.x?u.x:m.x:p.x<m.x?p.x:m.x,u.y<p.y?u.y<m.y?u.y:m.y:p.y<m.y?p.y:m.y,e,n,o),L=Bc(I,T,e,n,o),B=i.prevZ,V=i.nextZ;B&&B.z>=C&&V&&V.z<=L;){if(B!==i.prev&&B!==i.next&&Aa(u.x,u.y,p.x,p.y,m.x,m.y,B.x,B.y)&&Hi(B.prev,B,B.next)>=0||(B=B.prevZ,V!==i.prev&&V!==i.next&&Aa(u.x,u.y,p.x,p.y,m.x,m.y,V.x,V.y)&&Hi(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;B&&B.z>=C;){if(B!==i.prev&&B!==i.next&&Aa(u.x,u.y,p.x,p.y,m.x,m.y,B.x,B.y)&&Hi(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;V&&V.z<=L;){if(V!==i.prev&&V!==i.next&&Aa(u.x,u.y,p.x,p.y,m.x,m.y,V.x,V.y)&&Hi(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function Ud(i,e,n){var o=i;do{var u=o.prev,p=o.next.next;!Rl(u,p)&&Hu(u,o,o.next,p)&&Po(u,p)&&Po(p,u)&&(e.push(u.i/n),e.push(o.i/n),e.push(p.i/n),Lo(o),Lo(o.next),o=i=p),o=o.next}while(o!==i);return _s(o)}function Nd(i,e,n,o,u,p){var m=i;do{for(var I=m.next.next;I!==m.prev;){if(m.i!==I.i&&Hd(m,I)){var T=Wu(m,I);return m=_s(m,m.next),T=_s(T,T.next),Mo(m,e,n,o,u,p),void Mo(T,e,n,o,u,p)}I=I.next}m=m.next}while(m!==i)}function qd(i,e){return i.x-e.x}function Gd(i,e){var n=function(p,m){var I,T=m,C=p.x,L=p.y,B=-1/0;do{if(L<=T.y&&L>=T.next.y&&T.next.y!==T.y){var V=T.x+(L-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(V<=C&&V>B){if(B=V,V===C){if(L===T.y)return T;if(L===T.next.y)return T.next}I=T.x<T.next.x?T:T.next}}T=T.next}while(T!==m);if(!I)return null;if(C===B)return I;var G,j=I,te=I.x,ie=I.y,de=1/0;T=I;do C>=T.x&&T.x>=te&&C!==T.x&&Aa(L<ie?C:B,L,te,ie,L<ie?B:C,L,T.x,T.y)&&(G=Math.abs(L-T.y)/(C-T.x),Po(T,p)&&(G<de||G===de&&(T.x>I.x||T.x===I.x&&jd(I,T)))&&(I=T,de=G)),T=T.next;while(T!==j);return I}(i,e);if(!n)return e;var o=Wu(n,i),u=_s(n,n.next);return _s(o,o.next),e===n?u:e}function jd(i,e){return Hi(i.prev,i,e.prev)<0&&Hi(e.next,i,i.next)<0}function Bc(i,e,n,o,u){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-n)*u)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-o)*u)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Zd(i){var e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function Aa(i,e,n,o,u,p,m,I){return(u-m)*(e-I)-(i-m)*(p-I)>=0&&(i-m)*(o-I)-(n-m)*(e-I)>=0&&(n-m)*(p-I)-(u-m)*(o-I)>=0}function Hd(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function(n,o){var u=n;do{if(u.i!==n.i&&u.next.i!==n.i&&u.i!==o.i&&u.next.i!==o.i&&Hu(u,u.next,n,o))return!0;u=u.next}while(u!==n);return!1}(i,e)&&(Po(i,e)&&Po(e,i)&&function(n,o){var u=n,p=!1,m=(n.x+o.x)/2,I=(n.y+o.y)/2;do u.y>I!=u.next.y>I&&u.next.y!==u.y&&m<(u.next.x-u.x)*(I-u.y)/(u.next.y-u.y)+u.x&&(p=!p),u=u.next;while(u!==n);return p}(i,e)&&(Hi(i.prev,i,e.prev)||Hi(i,e.prev,e))||Rl(i,e)&&Hi(i.prev,i,i.next)>0&&Hi(e.prev,e,e.next)>0)}function Hi(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function Rl(i,e){return i.x===e.x&&i.y===e.y}function Hu(i,e,n,o){var u=Ol(Hi(i,e,n)),p=Ol(Hi(i,e,o)),m=Ol(Hi(n,o,i)),I=Ol(Hi(n,o,e));return u!==p&&m!==I||!(u!==0||!Fl(i,n,e))||!(p!==0||!Fl(i,o,e))||!(m!==0||!Fl(n,i,o))||!(I!==0||!Fl(n,e,o))}function Fl(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function Ol(i){return i>0?1:i<0?-1:0}function Po(i,e){return Hi(i.prev,i,i.next)<0?Hi(i,e,i.next)>=0&&Hi(i,i.prev,e)>=0:Hi(i,e,i.prev)<0||Hi(i,i.next,e)<0}function Wu(i,e){var n=new Rc(i.i,i.x,i.y),o=new Rc(e.i,e.x,e.y),u=i.next,p=e.prev;return i.next=e,e.prev=i,n.next=u,u.prev=n,o.next=n,n.prev=o,p.next=o,o.prev=p,o}function Xu(i,e,n,o){var u=new Rc(i,e,n);return o?(u.next=o.next,u.prev=o,o.next.prev=u,o.next=u):(u.prev=u,u.next=u),u}function Lo(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Rc(i,e,n){this.i=i,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fc(i,e,n,o){for(var u=0,p=e,m=n-o;p<n;p+=o)u+=(i[m]-i[p])*(i[p+1]+i[m+1]),m=p;return u}Dc.exports=Bl,Dc.exports.default=Bl,Bl.deviation=function(i,e,n,o){var u=e&&e.length,p=Math.abs(Fc(i,0,u?e[0]*n:i.length,n));if(u)for(var m=0,I=e.length;m<I;m++)p-=Math.abs(Fc(i,e[m]*n,m<I-1?e[m+1]*n:i.length,n));var T=0;for(m=0;m<o.length;m+=3){var C=o[m]*n,L=o[m+1]*n,B=o[m+2]*n;T+=Math.abs((i[C]-i[B])*(i[L+1]-i[C+1])-(i[C]-i[L])*(i[B+1]-i[C+1]))}return p===0&&T===0?0:Math.abs((T-p)/p)},Bl.flatten=function(i){for(var e=i[0][0].length,n={vertices:[],holes:[],dimensions:e},o=0,u=0;u<i.length;u++){for(var p=0;p<i[u].length;p++)for(var m=0;m<e;m++)n.vertices.push(i[u][p][m]);u>0&&n.holes.push(o+=i[u-1].length)}return n};var Ku=Dc.exports;function Wd(i,e,n,o,u){Yu(i,e,n||0,o||i.length-1,u||Xd)}function Yu(i,e,n,o,u){for(;o>n;){if(o-n>600){var p=o-n+1,m=e-n+1,I=Math.log(p),T=.5*Math.exp(2*I/3),C=.5*Math.sqrt(I*T*(p-T)/p)*(m-p/2<0?-1:1);Yu(i,e,Math.max(n,Math.floor(e-m*T/p+C)),Math.min(o,Math.floor(e+(p-m)*T/p+C)),u)}var L=i[e],B=n,V=o;for(Do(i,n,e),u(i[o],L)>0&&Do(i,n,o);B<V;){for(Do(i,B,V),B++,V--;u(i[B],L)<0;)B++;for(;u(i[V],L)>0;)V--}u(i[n],L)===0?Do(i,n,V):Do(i,++V,o),V<=e&&(n=V+1),e<=V&&(o=V-1)}}function Do(i,e,n){var o=i[e];i[e]=i[n],i[n]=o}function Xd(i,e){return i<e?-1:i>e?1:0}function Oc(i,e){const n=i.length;if(n<=1)return[i];const o=[];let u,p;for(let m=0;m<n;m++){const I=Be(i[m]);I!==0&&(i[m].area=Math.abs(I),p===void 0&&(p=I<0),p===I<0?(u&&o.push(u),u=[i[m]]):u.push(i[m]))}if(u&&o.push(u),e>1)for(let m=0;m<o.length;m++)o[m].length<=e||(Wd(o[m],e,1,o[m].length-1,Kd),o[m]=o[m].slice(0,e));return o}function Kd(i,e){return e.area-i.area}function Vc(i,e,n){const o=n.patternDependencies;let u=!1;for(const p of e){const m=p.paint.get(`${i}-pattern`);m.isConstant()||(u=!0);const I=m.constantOr(null);I&&(u=!0,o[I.to]=!0,o[I.from]=!0)}return u}function Uc(i,e,n,o,u){const p=u.patternDependencies;for(const m of e){const I=m.paint.get(`${i}-pattern`).value;if(I.kind!=="constant"){let T=I.evaluate({zoom:o-1},n,{},u.availableImages),C=I.evaluate({zoom:o},n,{},u.availableImages),L=I.evaluate({zoom:o+1},n,{},u.availableImages);T=T&&T.name?T.name:T,C=C&&C.name?C.name:C,L=L&&L.name?L.name:L,p[T]=!0,p[C]=!0,p[L]=!0,n.patterns[m.id]={min:T,mid:C,max:L}}}return n}class Nc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ht,this.indexArray=new Pn,this.indexArray2=new ur,this.programConfigurations=new qs(e.layers,e.zoom),this.segments=new ei,this.segments2=new ei,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,o){this.hasPattern=Vc("fill",this.layers,n);const u=this.layers[0].layout.get("fill-sort-key"),p=!u.isConstant(),m=[];for(const{feature:I,id:T,index:C,sourceLayerIndex:L}of e){const B=this.layers[0]._featureFilter.needGeometry,V=js(I,B);if(!this.layers[0]._featureFilter.filter(new ki(this.zoom),V,o))continue;const G=p?u.evaluate(V,{},o,n.availableImages):void 0,j={id:T,properties:I.properties,type:I.type,sourceLayerIndex:L,index:C,geometry:B?V.geometry:Gs(I),patterns:{},sortKey:G};m.push(j)}p&&m.sort((I,T)=>I.sortKey-T.sortKey);for(const I of m){const{geometry:T,index:C,sourceLayerIndex:L}=I;if(this.hasPattern){const B=Uc("fill",this.layers,I,this.zoom,n);this.patternFeatures.push(B)}else this.addFeature(I,T,C,o,{});n.featureIndex.insert(e[C].feature,T,C,L,this.index)}}update(e,n,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,o)}addFeatures(e,n,o){for(const u of this.patternFeatures)this.addFeature(u,u.geometry,u.index,n,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fd),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,n,o,u,p){for(const m of Oc(n,500)){let I=0;for(const G of m)I+=G.length;const T=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),C=T.vertexLength,L=[],B=[];for(const G of m){if(G.length===0)continue;G!==m[0]&&B.push(L.length/2);const j=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),te=j.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(te+G.length-1,te),L.push(G[0].x),L.push(G[0].y);for(let ie=1;ie<G.length;ie++)this.layoutVertexArray.emplaceBack(G[ie].x,G[ie].y),this.indexArray2.emplaceBack(te+ie-1,te+ie),L.push(G[ie].x),L.push(G[ie].y);j.vertexLength+=G.length,j.primitiveLength+=G.length}const V=Ku(L,B);for(let G=0;G<V.length;G+=3)this.indexArray.emplaceBack(C+V[G],C+V[G+1],C+V[G+2]);T.vertexLength+=I,T.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,p,u)}}dt("FillBucket",Nc,{omit:["layers","patternFeatures"]});const Yd=new nn({"fill-sort-key":new wt(Se.layout_fill["fill-sort-key"])});var Jd={paint:new nn({"fill-antialias":new _t(Se.paint_fill["fill-antialias"]),"fill-opacity":new wt(Se.paint_fill["fill-opacity"]),"fill-color":new wt(Se.paint_fill["fill-color"]),"fill-outline-color":new wt(Se.paint_fill["fill-outline-color"]),"fill-translate":new _t(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new _t(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Os(Se.paint_fill["fill-pattern"])}),layout:Yd};const Qd=rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:$d}=Qd;var ys={},ef=Ae,Ju=za;function za(i,e,n,o,u){this.properties={},this.extent=n,this.type=0,this._pbf=i,this._geometry=-1,this._keys=o,this._values=u,i.readFields(tf,this,e)}function tf(i,e,n){i==1?e.id=n.readVarint():i==2?function(o,u){for(var p=o.readVarint()+o.pos;o.pos<p;){var m=u._keys[o.readVarint()],I=u._values[o.readVarint()];u.properties[m]=I}}(n,e):i==3?e.type=n.readVarint():i==4&&(e._geometry=n.pos)}function nf(i){for(var e,n,o=0,u=0,p=i.length,m=p-1;u<p;m=u++)o+=((n=i[m]).x-(e=i[u]).x)*(e.y+n.y);return o}za.types=["Unknown","Point","LineString","Polygon"],za.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var e,n=i.readVarint()+i.pos,o=1,u=0,p=0,m=0,I=[];i.pos<n;){if(u<=0){var T=i.readVarint();o=7&T,u=T>>3}if(u--,o===1||o===2)p+=i.readSVarint(),m+=i.readSVarint(),o===1&&(e&&I.push(e),e=[]),e.push(new ef(p,m));else{if(o!==7)throw new Error("unknown command "+o);e&&e.push(e[0].clone())}}return e&&I.push(e),I},za.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var e=i.readVarint()+i.pos,n=1,o=0,u=0,p=0,m=1/0,I=-1/0,T=1/0,C=-1/0;i.pos<e;){if(o<=0){var L=i.readVarint();n=7&L,o=L>>3}if(o--,n===1||n===2)(u+=i.readSVarint())<m&&(m=u),u>I&&(I=u),(p+=i.readSVarint())<T&&(T=p),p>C&&(C=p);else if(n!==7)throw new Error("unknown command "+n)}return[m,T,I,C]},za.prototype.toGeoJSON=function(i,e,n){var o,u,p=this.extent*Math.pow(2,n),m=this.extent*i,I=this.extent*e,T=this.loadGeometry(),C=za.types[this.type];function L(G){for(var j=0;j<G.length;j++){var te=G[j];G[j]=[360*(te.x+m)/p-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+I)/p)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(o=0;o<T.length;o++)B[o]=T[o][0];L(T=B);break;case 2:for(o=0;o<T.length;o++)L(T[o]);break;case 3:for(T=function(G){var j=G.length;if(j<=1)return[G];for(var te,ie,de=[],ye=0;ye<j;ye++){var _e=nf(G[ye]);_e!==0&&(ie===void 0&&(ie=_e<0),ie===_e<0?(te&&de.push(te),te=[G[ye]]):te.push(G[ye]))}return te&&de.push(te),de}(T),o=0;o<T.length;o++)for(u=0;u<T[o].length;u++)L(T[o][u])}T.length===1?T=T[0]:C="Multi"+C;var V={type:"Feature",geometry:{type:C,coordinates:T},properties:this.properties};return"id"in this&&(V.id=this.id),V};var rf=Ju,Qu=$u;function $u(i,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(sf,this,e),this.length=this._features.length}function sf(i,e,n){i===15?e.version=n.readVarint():i===1?e.name=n.readString():i===5?e.extent=n.readVarint():i===2?e._features.push(n.pos):i===3?e._keys.push(n.readString()):i===4&&e._values.push(function(o){for(var u=null,p=o.readVarint()+o.pos;o.pos<p;){var m=o.readVarint()>>3;u=m===1?o.readString():m===2?o.readFloat():m===3?o.readDouble():m===4?o.readVarint64():m===5?o.readVarint():m===6?o.readSVarint():m===7?o.readBoolean():null}return u}(n))}$u.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var e=this._pbf.readVarint()+this._pbf.pos;return new rf(this._pbf,e,this.extent,this._keys,this._values)};var af=Qu;function of(i,e,n){if(i===3){var o=new af(n,n.readVarint()+n.pos);o.length&&(e[o.name]=o)}}ys.VectorTile=function(i,e){this.layers=i.readFields(of,{},e)},ys.VectorTileFeature=Ju,ys.VectorTileLayer=Qu;const lf=ys.VectorTileFeature.types,qc=Math.pow(2,13);function Bo(i,e,n,o,u,p,m,I){i.emplaceBack(e,n,2*Math.floor(o*qc)+m,u*qc*2,p*qc*2,Math.round(I))}class Gc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ri,this.indexArray=new Pn,this.programConfigurations=new qs(e.layers,e.zoom),this.segments=new ei,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,o){this.features=[],this.hasPattern=Vc("fill-extrusion",this.layers,n);for(const{feature:u,id:p,index:m,sourceLayerIndex:I}of e){const T=this.layers[0]._featureFilter.needGeometry,C=js(u,T);if(!this.layers[0]._featureFilter.filter(new ki(this.zoom),C,o))continue;const L={id:p,sourceLayerIndex:I,index:m,geometry:T?C.geometry:Gs(u),properties:u.properties,type:u.type,patterns:{}};this.hasPattern?this.features.push(Uc("fill-extrusion",this.layers,L,this.zoom,n)):this.addFeature(L,L.geometry,m,o,{}),n.featureIndex.insert(u,L.geometry,m,I,this.index,!0)}}addFeatures(e,n,o){for(const u of this.features){const{geometry:p}=u;this.addFeature(u,p,u.index,n,o)}}update(e,n,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$d),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,o,u,p){for(const m of Oc(n,500)){let I=0;for(const G of m)I+=G.length;let T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const G of m){if(G.length===0||uf(G))continue;let j=0;for(let te=0;te<G.length;te++){const ie=G[te];if(te>=1){const de=G[te-1];if(!cf(ie,de)){T.vertexLength+4>ei.MAX_VERTEX_ARRAY_LENGTH&&(T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ye=ie.sub(de)._perp()._unit(),_e=de.dist(ie);j+_e>32768&&(j=0),Bo(this.layoutVertexArray,ie.x,ie.y,ye.x,ye.y,0,0,j),Bo(this.layoutVertexArray,ie.x,ie.y,ye.x,ye.y,0,1,j),j+=_e,Bo(this.layoutVertexArray,de.x,de.y,ye.x,ye.y,0,0,j),Bo(this.layoutVertexArray,de.x,de.y,ye.x,ye.y,0,1,j);const Te=T.vertexLength;this.indexArray.emplaceBack(Te,Te+2,Te+1),this.indexArray.emplaceBack(Te+1,Te+2,Te+3),T.vertexLength+=4,T.primitiveLength+=2}}}}if(T.vertexLength+I>ei.MAX_VERTEX_ARRAY_LENGTH&&(T=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),lf[e.type]!=="Polygon")continue;const C=[],L=[],B=T.vertexLength;for(const G of m)if(G.length!==0){G!==m[0]&&L.push(C.length/2);for(let j=0;j<G.length;j++){const te=G[j];Bo(this.layoutVertexArray,te.x,te.y,0,0,1,1,0),C.push(te.x),C.push(te.y)}}const V=Ku(C,L);for(let G=0;G<V.length;G+=3)this.indexArray.emplaceBack(B+V[G],B+V[G+2],B+V[G+1]);T.primitiveLength+=V.length/3,T.vertexLength+=I}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,p,u)}}function cf(i,e){return i.x===e.x&&(i.x<0||i.x>sn)||i.y===e.y&&(i.y<0||i.y>sn)}function uf(i){return i.every(e=>e.x<0)||i.every(e=>e.x>sn)||i.every(e=>e.y<0)||i.every(e=>e.y>sn)}dt("FillExtrusionBucket",Gc,{omit:["layers","features"]});var hf={paint:new nn({"fill-extrusion-opacity":new _t(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wt(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _t(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _t(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Os(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wt(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wt(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _t(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Ro(i,e){return i.x*e.x+i.y*e.y}function e1(i,e){if(i.length===1){let n=0;const o=e[n++];let u;for(;!u||o.equals(u);)if(u=e[n++],!u)return 1/0;for(;n<e.length;n++){const p=e[n],m=i[0],I=u.sub(o),T=p.sub(o),C=m.sub(o),L=Ro(I,I),B=Ro(I,T),V=Ro(T,T),G=Ro(C,I),j=Ro(C,T),te=L*V-B*B,ie=(V*G-B*j)/te,de=(L*j-B*G)/te,ye=o.z*(1-ie-de)+u.z*ie+p.z*de;if(isFinite(ye))return ye}return 1/0}{let n=1/0;for(const o of e)n=Math.min(n,o.z);return n}}const df=rn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ff}=df,pf=rn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:mf}=pf,gf=ys.VectorTileFeature.types,_f=Math.cos(Math.PI/180*37.5),t1=Math.pow(2,14)/.5;class jc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new Mt,this.layoutVertexArray2=new $t,this.indexArray=new Pn,this.programConfigurations=new qs(e.layers,e.zoom),this.segments=new ei,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,o){this.hasPattern=Vc("line",this.layers,n);const u=this.layers[0].layout.get("line-sort-key"),p=!u.isConstant(),m=[];for(const{feature:I,id:T,index:C,sourceLayerIndex:L}of e){const B=this.layers[0]._featureFilter.needGeometry,V=js(I,B);if(!this.layers[0]._featureFilter.filter(new ki(this.zoom),V,o))continue;const G=p?u.evaluate(V,{},o):void 0,j={id:T,properties:I.properties,type:I.type,sourceLayerIndex:L,index:C,geometry:B?V.geometry:Gs(I),patterns:{},sortKey:G};m.push(j)}p&&m.sort((I,T)=>I.sortKey-T.sortKey);for(const I of m){const{geometry:T,index:C,sourceLayerIndex:L}=I;if(this.hasPattern){const B=Uc("line",this.layers,I,this.zoom,n);this.patternFeatures.push(B)}else this.addFeature(I,T,C,o,{});n.featureIndex.insert(e[C].feature,T,C,L,this.index)}}update(e,n,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,o)}addFeatures(e,n,o){for(const u of this.patternFeatures)this.addFeature(u,u.geometry,u.index,n,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,mf)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ff),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,n,o,u,p){const m=this.layers[0].layout,I=m.get("line-join").evaluate(e,{}),T=m.get("line-cap"),C=m.get("line-miter-limit"),L=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const B of n)this.addLine(B,e,I,T,C,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,p,u)}addLine(e,n,o,u,p,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<e.length-1;de++)this.totalDistance+=e[de].dist(e[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=gf[n.type]==="Polygon";let T=e.length;for(;T>=2&&e[T-1].equals(e[T-2]);)T--;let C=0;for(;C<T-1&&e[C].equals(e[C+1]);)C++;if(T<(I?3:2))return;o==="bevel"&&(p=1.05);const L=this.overscaling<=16?122880/(512*this.overscaling):0,B=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let V,G,j,te,ie;this.e1=this.e2=-1,I&&(V=e[T-2],ie=e[C].sub(V)._unit()._perp());for(let de=C;de<T;de++){if(j=de===T-1?I?e[C+1]:void 0:e[de+1],j&&e[de].equals(j))continue;ie&&(te=ie),V&&(G=V),V=e[de],ie=j?j.sub(V)._unit()._perp():te,te=te||ie;let ye=te.add(ie);ye.x===0&&ye.y===0||ye._unit();const _e=te.x*ie.x+te.y*ie.y,Te=ye.x*ie.x+ye.y*ie.y,Ue=Te!==0?1/Te:1/0,Le=2*Math.sqrt(2-2*Te),ft=Te<_f&&G&&j,yt=te.x*ie.y-te.y*ie.x>0;if(ft&&de>C){const nt=V.dist(G);if(nt>2*L){const ht=V.sub(V.sub(G)._mult(L/nt)._round());this.updateDistance(G,ht),this.addCurrentVertex(ht,te,0,0,B),G=ht}}const lt=G&&j;let ct=lt?o:I?"butt":u;if(lt&&ct==="round"&&(Ue<m?ct="miter":Ue<=2&&(ct="fakeround")),ct==="miter"&&Ue>p&&(ct="bevel"),ct==="bevel"&&(Ue>2&&(ct="flipbevel"),Ue<p&&(ct="miter")),G&&this.updateDistance(G,V),ct==="miter")ye._mult(Ue),this.addCurrentVertex(V,ye,0,0,B);else if(ct==="flipbevel"){if(Ue>100)ye=ie.mult(-1);else{const nt=Ue*te.add(ie).mag()/te.sub(ie).mag();ye._perp()._mult(nt*(yt?-1:1))}this.addCurrentVertex(V,ye,0,0,B),this.addCurrentVertex(V,ye.mult(-1),0,0,B)}else if(ct==="bevel"||ct==="fakeround"){const nt=-Math.sqrt(Ue*Ue-1),ht=yt?nt:0,ut=yt?0:nt;if(G&&this.addCurrentVertex(V,te,ht,ut,B),ct==="fakeround"){const We=Math.round(180*Le/Math.PI/20);for(let St=1;St<We;St++){let xt=St/We;if(xt!==.5){const ai=xt-.5;xt+=xt*ai*(xt-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*ai*ai+(.848013+_e*(.215638*_e-1.06021)))}const Wt=ie.sub(te)._mult(xt)._add(te)._unit()._mult(yt?-1:1);this.addHalfVertex(V,Wt.x,Wt.y,!1,yt,0,B)}}j&&this.addCurrentVertex(V,ie,-ht,-ut,B)}else if(ct==="butt")this.addCurrentVertex(V,ye,0,0,B);else if(ct==="square"){const nt=G?1:-1;this.addCurrentVertex(V,ye,nt,nt,B)}else ct==="round"&&(G&&(this.addCurrentVertex(V,te,0,0,B),this.addCurrentVertex(V,te,1,1,B,!0)),j&&(this.addCurrentVertex(V,ie,-1,-1,B,!0),this.addCurrentVertex(V,ie,0,0,B)));if(ft&&de<T-1){const nt=V.dist(j);if(nt>2*L){const ht=V.add(j.sub(V)._mult(L/nt)._round());this.updateDistance(V,ht),this.addCurrentVertex(ht,ie,0,0,B),V=ht}}}}addCurrentVertex(e,n,o,u,p,m=!1){const I=n.y*u-n.x,T=-n.y-n.x*u;this.addHalfVertex(e,n.x+n.y*o,n.y-n.x*o,m,!1,o,p),this.addHalfVertex(e,I,T,m,!0,-u,p),this.distance>t1/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,n,o,u,p,m))}addHalfVertex({x:e,y:n},o,u,p,m,I,T){const C=.5*(this.lineClips?this.scaledDistance*(t1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(p?1:0),(n<<1)+(m?1:0),Math.round(63*o)+128,Math.round(63*u)+128,1+(I===0?0:I<0?-1:1)|(63&C)<<2,C>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),T.primitiveLength++),m?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,n){this.distance+=e.dist(n),this.updateScaledDistance()}}dt("LineBucket",jc,{omit:["layers","patternFeatures"]});const yf=new nn({"line-cap":new _t(Se.layout_line["line-cap"]),"line-join":new wt(Se.layout_line["line-join"]),"line-miter-limit":new _t(Se.layout_line["line-miter-limit"]),"line-round-limit":new _t(Se.layout_line["line-round-limit"]),"line-sort-key":new wt(Se.layout_line["line-sort-key"])});var i1={paint:new nn({"line-opacity":new wt(Se.paint_line["line-opacity"]),"line-color":new wt(Se.paint_line["line-color"]),"line-translate":new _t(Se.paint_line["line-translate"]),"line-translate-anchor":new _t(Se.paint_line["line-translate-anchor"]),"line-width":new wt(Se.paint_line["line-width"]),"line-gap-width":new wt(Se.paint_line["line-gap-width"]),"line-offset":new wt(Se.paint_line["line-offset"]),"line-blur":new wt(Se.paint_line["line-blur"]),"line-dasharray":new Vs(Se.paint_line["line-dasharray"]),"line-pattern":new Os(Se.paint_line["line-pattern"]),"line-gradient":new Eo(Se.paint_line["line-gradient"])}),layout:yf};const n1=new class extends wt{possiblyEvaluate(i,e){return e=new ki(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(i,e)}evaluate(i,e,n,o){return e=ge({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(i,e,n,o)}}(i1.paint.properties["line-width"].specification);function r1(i,e){return e>0?e+2*i:i}n1.useIntegerZoom=!0;const vf=rn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xf=rn([{name:"a_projected_pos",components:3,type:"Float32"}],4);rn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const bf=rn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);rn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const s1=rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wf=rn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Sf(i,e,n){return i.sections.forEach(o=>{o.text=function(u,p,m){const I=p.layout.get("text-transform").evaluate(m,{});return I==="uppercase"?u=u.toLocaleUpperCase():I==="lowercase"&&(u=u.toLocaleLowerCase()),Xn.applyArabicShaping&&(u=Xn.applyArabicShaping(u)),u}(o.text,e,n)}),i}rn([{name:"triangle",components:3,type:"Uint16"}]),rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),rn([{type:"Float32",name:"offsetX"}]),rn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Fo={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var mn=24,Zc=fi,a1=function(i,e,n,o,u){var p,m,I=8*u-o-1,T=(1<<I)-1,C=T>>1,L=-7,B=n?u-1:0,V=n?-1:1,G=i[e+B];for(B+=V,p=G&(1<<-L)-1,G>>=-L,L+=I;L>0;p=256*p+i[e+B],B+=V,L-=8);for(m=p&(1<<-L)-1,p>>=-L,L+=o;L>0;m=256*m+i[e+B],B+=V,L-=8);if(p===0)p=1-C;else{if(p===T)return m?NaN:1/0*(G?-1:1);m+=Math.pow(2,o),p-=C}return(G?-1:1)*m*Math.pow(2,p-o)},o1=function(i,e,n,o,u,p){var m,I,T,C=8*p-u-1,L=(1<<C)-1,B=L>>1,V=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=o?0:p-1,j=o?1:-1,te=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(I=isNaN(e)?1:0,m=L):(m=Math.floor(Math.log(e)/Math.LN2),e*(T=Math.pow(2,-m))<1&&(m--,T*=2),(e+=m+B>=1?V/T:V*Math.pow(2,1-B))*T>=2&&(m++,T/=2),m+B>=L?(I=0,m=L):m+B>=1?(I=(e*T-1)*Math.pow(2,u),m+=B):(I=e*Math.pow(2,B-1)*Math.pow(2,u),m=0));u>=8;i[n+G]=255&I,G+=j,I/=256,u-=8);for(m=m<<u|I,C+=u;C>0;i[n+G]=255&m,G+=j,m/=256,C-=8);i[n+G-j]|=128*te};function fi(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}fi.Varint=0,fi.Fixed64=1,fi.Bytes=2,fi.Fixed32=5;var vs,Hc=4294967296,l1=1/Hc,c1=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Jr(i){return i.type===fi.Bytes?i.readVarint()+i.pos:i.pos+1}function Ca(i,e,n){return n?4294967296*e+(i>>>0):4294967296*(e>>>0)+(i>>>0)}function u1(i,e,n){var o=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(o);for(var u=n.pos-1;u>=i;u--)n.buf[u+o]=n.buf[u]}function If(i,e){for(var n=0;n<i.length;n++)e.writeVarint(i[n])}function Ef(i,e){for(var n=0;n<i.length;n++)e.writeSVarint(i[n])}function Tf(i,e){for(var n=0;n<i.length;n++)e.writeFloat(i[n])}function kf(i,e){for(var n=0;n<i.length;n++)e.writeDouble(i[n])}function Af(i,e){for(var n=0;n<i.length;n++)e.writeBoolean(i[n])}function zf(i,e){for(var n=0;n<i.length;n++)e.writeFixed32(i[n])}function Cf(i,e){for(var n=0;n<i.length;n++)e.writeSFixed32(i[n])}function Mf(i,e){for(var n=0;n<i.length;n++)e.writeFixed64(i[n])}function Pf(i,e){for(var n=0;n<i.length;n++)e.writeSFixed64(i[n])}function Vl(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+16777216*i[e+3]}function Ma(i,e,n){i[n]=e,i[n+1]=e>>>8,i[n+2]=e>>>16,i[n+3]=e>>>24}function h1(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function Lf(i,e,n){i===1&&n.readMessage(Df,e)}function Df(i,e,n){if(i===3){const{id:o,bitmap:u,width:p,height:m,left:I,top:T,advance:C}=n.readMessage(Bf,{});e.push({id:o,bitmap:new Co({width:p+6,height:m+6},u),metrics:{width:p,height:m,left:I,top:T,advance:C}})}}function Bf(i,e,n){i===1?e.id=n.readVarint():i===2?e.bitmap=n.readBytes():i===3?e.width=n.readVarint():i===4?e.height=n.readVarint():i===5?e.left=n.readSVarint():i===6?e.top=n.readSVarint():i===7&&(e.advance=n.readVarint())}function d1(i){let e=0,n=0;for(const m of i)e+=m.w*m.h,n=Math.max(n,m.w);i.sort((m,I)=>I.h-m.h);const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let u=0,p=0;for(const m of i)for(let I=o.length-1;I>=0;I--){const T=o[I];if(!(m.w>T.w||m.h>T.h)){if(m.x=T.x,m.y=T.y,p=Math.max(p,m.y+m.h),u=Math.max(u,m.x+m.w),m.w===T.w&&m.h===T.h){const C=o.pop();I<o.length&&(o[I]=C)}else m.h===T.h?(T.x+=m.w,T.w-=m.w):m.w===T.w?(T.y+=m.h,T.h-=m.h):(o.push({x:T.x+m.w,y:T.y,w:T.w-m.w,h:m.h}),T.y+=m.h,T.h-=m.h);break}}return{w:u,h:p,fill:e/(u*p)||0}}fi.prototype={destroy:function(){this.buf=null},readFields:function(i,e,n){for(n=n||this.length;this.pos<n;){var o=this.readVarint(),u=o>>3,p=this.pos;this.type=7&o,i(u,e,this),this.pos===p&&this.skip(o)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=Vl(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=h1(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Vl(this.buf,this.pos)+Vl(this.buf,this.pos+4)*Hc;return this.pos+=8,i},readSFixed64:function(){var i=Vl(this.buf,this.pos)+h1(this.buf,this.pos+4)*Hc;return this.pos+=8,i},readFloat:function(){var i=a1(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=a1(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e,n,o=this.buf;return e=127&(n=o[this.pos++]),n<128?e:(e|=(127&(n=o[this.pos++]))<<7,n<128?e:(e|=(127&(n=o[this.pos++]))<<14,n<128?e:(e|=(127&(n=o[this.pos++]))<<21,n<128?e:function(u,p,m){var I,T,C=m.buf;if(I=(112&(T=C[m.pos++]))>>4,T<128||(I|=(127&(T=C[m.pos++]))<<3,T<128)||(I|=(127&(T=C[m.pos++]))<<10,T<128)||(I|=(127&(T=C[m.pos++]))<<17,T<128)||(I|=(127&(T=C[m.pos++]))<<24,T<128)||(I|=(1&(T=C[m.pos++]))<<31,T<128))return Ca(u,I,p);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=o[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=12&&c1?function(n,o,u){return c1.decode(n.subarray(o,u))}(this.buf,e,i):function(n,o,u){for(var p="",m=o;m<u;){var I,T,C,L=n[m],B=null,V=L>239?4:L>223?3:L>191?2:1;if(m+V>u)break;V===1?L<128&&(B=L):V===2?(192&(I=n[m+1]))==128&&(B=(31&L)<<6|63&I)<=127&&(B=null):V===3?(T=n[m+2],(192&(I=n[m+1]))==128&&(192&T)==128&&((B=(15&L)<<12|(63&I)<<6|63&T)<=2047||B>=55296&&B<=57343)&&(B=null)):V===4&&(T=n[m+2],C=n[m+3],(192&(I=n[m+1]))==128&&(192&T)==128&&(192&C)==128&&((B=(15&L)<<18|(63&I)<<12|(63&T)<<6|63&C)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,V=1):B>65535&&(B-=65536,p+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),p+=String.fromCharCode(B),m+=V}return p}(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==fi.Bytes)return i.push(this.readVarint(e));var n=Jr(this);for(i=i||[];this.pos<n;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==fi.Bytes)return i.push(this.readSVarint());var e=Jr(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==fi.Bytes)return i.push(this.readBoolean());var e=Jr(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==fi.Bytes)return i.push(this.readFloat());var e=Jr(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==fi.Bytes)return i.push(this.readDouble());var e=Jr(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==fi.Bytes)return i.push(this.readFixed32());var e=Jr(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==fi.Bytes)return i.push(this.readSFixed32());var e=Jr(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==fi.Bytes)return i.push(this.readFixed64());var e=Jr(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==fi.Bytes)return i.push(this.readSFixed64());var e=Jr(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=7&i;if(e===fi.Varint)for(;this.buf[this.pos++]>127;);else if(e===fi.Bytes)this.pos=this.readVarint()+this.pos;else if(e===fi.Fixed32)this.pos+=4;else{if(e!==fi.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Ma(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Ma(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Ma(this.buf,-1&i,this.pos),Ma(this.buf,Math.floor(i*l1),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Ma(this.buf,-1&i,this.pos),Ma(this.buf,Math.floor(i*l1),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(e,n){var o,u;if(e>=0?(o=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(o=~(-e%4294967296))?o=o+1|0:(o=0,u=u+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(p,m,I){I.buf[I.pos++]=127&p|128,p>>>=7,I.buf[I.pos++]=127&p|128,p>>>=7,I.buf[I.pos++]=127&p|128,p>>>=7,I.buf[I.pos++]=127&p|128,I.buf[I.pos]=127&(p>>>=7)}(o,0,n),function(p,m){var I=(7&p)<<4;m.buf[m.pos++]|=I|((p>>>=3)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p)))))}(u,n)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var e=this.pos;this.pos=function(o,u,p){for(var m,I,T=0;T<u.length;T++){if((m=u.charCodeAt(T))>55295&&m<57344){if(!I){m>56319||T+1===u.length?(o[p++]=239,o[p++]=191,o[p++]=189):I=m;continue}if(m<56320){o[p++]=239,o[p++]=191,o[p++]=189,I=m;continue}m=I-55296<<10|m-56320|65536,I=null}else I&&(o[p++]=239,o[p++]=191,o[p++]=189,I=null);m<128?o[p++]=m:(m<2048?o[p++]=m>>6|192:(m<65536?o[p++]=m>>12|224:(o[p++]=m>>18|240,o[p++]=m>>12&63|128),o[p++]=m>>6&63|128),o[p++]=63&m|128)}return p}(this.buf,i,this.pos);var n=this.pos-e;n>=128&&u1(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(i){this.realloc(4),o1(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),o1(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=i[n]},writeRawMessage:function(i,e){this.pos++;var n=this.pos;i(e,this);var o=this.pos-n;o>=128&&u1(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeMessage:function(i,e,n){this.writeTag(i,fi.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,If,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,Ef,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,Af,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,Tf,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,kf,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,zf,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,Cf,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,Mf,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,Pf,e)},writeBytesField:function(i,e){this.writeTag(i,fi.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,fi.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,fi.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,fi.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,fi.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,fi.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,fi.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,fi.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,fi.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,fi.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,Boolean(e))}};class Wc{constructor(e,{pixelRatio:n,version:o,stretchX:u,stretchY:p,content:m}){this.paddedRect=e,this.pixelRatio=n,this.stretchX=u,this.stretchY=p,this.content=m,this.version=o}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class f1{constructor(e,n){const o={},u={};this.haveRenderCallbacks=[];const p=[];this.addImages(e,o,p),this.addImages(n,u,p);const{w:m,h:I}=d1(p),T=new ir({width:m||1,height:I||1});for(const C in e){const L=e[C],B=o[C].paddedRect;ir.copy(L.data,T,{x:0,y:0},{x:B.x+1,y:B.y+1},L.data)}for(const C in n){const L=n[C],B=u[C].paddedRect,V=B.x+1,G=B.y+1,j=L.data.width,te=L.data.height;ir.copy(L.data,T,{x:0,y:0},{x:V,y:G},L.data),ir.copy(L.data,T,{x:0,y:te-1},{x:V,y:G-1},{width:j,height:1}),ir.copy(L.data,T,{x:0,y:0},{x:V,y:G+te},{width:j,height:1}),ir.copy(L.data,T,{x:j-1,y:0},{x:V-1,y:G},{width:1,height:te}),ir.copy(L.data,T,{x:0,y:0},{x:V+j,y:G},{width:1,height:te})}this.image=T,this.iconPositions=o,this.patternPositions=u}addImages(e,n,o){for(const u in e){const p=e[u],m={x:0,y:0,w:p.data.width+2,h:p.data.height+2};o.push(m),n[u]=new Wc(m,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,n){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const o in e.updatedImages)this.patchUpdatedImage(this.iconPositions[o],e.getImage(o),n),this.patchUpdatedImage(this.patternPositions[o],e.getImage(o),n)}patchUpdatedImage(e,n,o){if(!e||!n||e.version===n.version)return;e.version=n.version;const[u,p]=e.tl;o.update(n.data,void 0,{x:u,y:p})}}dt("ImagePosition",Wc),dt("ImageAtlas",f1),a.WritingMode=void 0,(vs=a.WritingMode||(a.WritingMode={}))[vs.none=0]="none",vs[vs.horizontal=1]="horizontal",vs[vs.vertical=2]="vertical",vs[vs.horizontalOnly=3]="horizontalOnly";const Ul=-17;class Oo{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,n){const o=new Oo;return o.scale=e||1,o.fontStack=n,o}static forImage(e){const n=new Oo;return n.imageName=e,n}}class Pa{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,n){const o=new Pa;for(let u=0;u<e.sections.length;u++){const p=e.sections[u];p.image?o.addImageSection(p):o.addTextSection(p,n)}return o}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let n="";for(let o=0;o<e.length;o++){const u=e.charCodeAt(o+1)||null,p=e.charCodeAt(o-1)||null;n+=u&&Il(u)&&!Fo[e[o+1]]||p&&Il(p)&&!Fo[e[o-1]]||!Fo[e[o]]?e[o]:Fo[e[o]]}return n}(this.text)}trim(){let e=0;for(let o=0;o<this.text.length&&ql[this.text.charCodeAt(o)];o++)e++;let n=this.text.length;for(let o=this.text.length-1;o>=0&&o>=e&&ql[this.text.charCodeAt(o)];o--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}substring(e,n){const o=new Pa;return o.text=this.text.substring(e,n),o.sectionIndex=this.sectionIndex.slice(e,n),o.sections=this.sections,o}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,n)=>Math.max(e,this.sections[n].scale),0)}addTextSection(e,n){this.text+=e.text,this.sections.push(Oo.forText(e.scale,e.fontStack||n));const o=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(o)}addImageSection(e){const n=e.image?e.image.name:"";if(n.length===0)return void Pe("Can't add FormattedSection with an empty image.");const o=this.getNextImageSectionCharCode();o?(this.text+=String.fromCharCode(o),this.sections.push(Oo.forImage(n)),this.sectionIndex.push(this.sections.length-1)):Pe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Nl(i,e,n,o,u,p,m,I,T,C,L,B,V,G,j,te){const ie=Pa.fromFeature(i,u);let de;B===a.WritingMode.vertical&&ie.verticalizePunctuation();const{processBidirectionalText:ye,processStyledBidirectionalText:_e}=Xn;if(ye&&ie.sections.length===1){de=[];const Le=ye(ie.toString(),Xc(ie,C,p,e,o,G,j));for(const ft of Le){const yt=new Pa;yt.text=ft,yt.sections=ie.sections;for(let lt=0;lt<ft.length;lt++)yt.sectionIndex.push(0);de.push(yt)}}else if(_e){de=[];const Le=_e(ie.text,ie.sectionIndex,Xc(ie,C,p,e,o,G,j));for(const ft of Le){const yt=new Pa;yt.text=ft[0],yt.sectionIndex=ft[1],yt.sections=ie.sections,de.push(yt)}}else de=function(Le,ft){const yt=[],lt=Le.text;let ct=0;for(const nt of ft)yt.push(Le.substring(ct,nt)),ct=nt;return ct<lt.length&&yt.push(Le.substring(ct,lt.length)),yt}(ie,Xc(ie,C,p,e,o,G,j));const Te=[],Ue={positionedLines:Te,text:ie.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(Le,ft,yt,lt,ct,nt,ht,ut,We,St,xt,Wt){let ai=0,zi=Ul,Ci=0,gn=0;const $i=ut==="right"?1:ut==="left"?0:.5;let en=0;for(const tn of ct){tn.trim();const yn=tn.getMaxScale(),In=(yn-1)*mn,Ln={positionedGlyphs:[],lineOffset:0};Le.positionedLines[en]=Ln;const qn=Ln.positionedGlyphs;let Gn=0;if(!tn.length()){zi+=nt,++en;continue}for(let cn=0;cn<tn.length();cn++){const jt=tn.getSection(cn),Jn=tn.getSectionIndex(cn),vn=tn.getCharCode(cn);let En=0,pr=null,br=null,wr=null,$r=mn;const mr=!(We===a.WritingMode.horizontal||!xt&&!Fs(vn)||xt&&(ql[vn]||(ln=vn,at.Arabic(ln)||at["Arabic Supplement"](ln)||at["Arabic Extended-A"](ln)||at["Arabic Presentation Forms-A"](ln)||at["Arabic Presentation Forms-B"](ln))));if(jt.imageName){const nr=lt[jt.imageName];if(!nr)continue;wr=jt.imageName,Le.iconsInText=Le.iconsInText||!0,br=nr.paddedRect;const jn=nr.displaySize;jt.scale=jt.scale*mn/Wt,pr={width:jn[0],height:jn[1],left:1,top:-3,advance:mr?jn[1]:jn[0]},En=In+(mn-jn[1]*jt.scale),$r=pr.advance;const es=mr?jn[0]*jt.scale-mn*yn:jn[1]*jt.scale-mn*yn;es>0&&es>Gn&&(Gn=es)}else{const nr=yt[jt.fontStack],jn=nr&&nr[vn];if(jn&&jn.rect)br=jn.rect,pr=jn.metrics;else{const es=ft[jt.fontStack],No=es&&es[vn];if(!No)continue;pr=No.metrics}En=(yn-jt.scale)*mn}mr?(Le.verticalizable=!0,qn.push({glyph:vn,imageName:wr,x:ai,y:zi+En,vertical:mr,scale:jt.scale,fontStack:jt.fontStack,sectionIndex:Jn,metrics:pr,rect:br}),ai+=$r*jt.scale+St):(qn.push({glyph:vn,imageName:wr,x:ai,y:zi+En,vertical:mr,scale:jt.scale,fontStack:jt.fontStack,sectionIndex:Jn,metrics:pr,rect:br}),ai+=pr.advance*jt.scale+St)}qn.length!==0&&(Ci=Math.max(ai-St,Ci),Of(qn,0,qn.length-1,$i,Gn)),ai=0;const Li=nt*yn+Gn;Ln.lineOffset=Math.max(Gn,In),zi+=Li,gn=Math.max(Li,gn),++en}var ln;const _n=zi-Ul,{horizontalAlign:Sn,verticalAlign:Nn}=Kc(ht);(function(tn,yn,In,Ln,qn,Gn,Li,cn,jt){const Jn=(yn-In)*qn;let vn=0;vn=Gn!==Li?-cn*Ln-Ul:(-Ln*jt+.5)*Li;for(const En of tn)for(const pr of En.positionedGlyphs)pr.x+=Jn,pr.y+=vn})(Le.positionedLines,$i,Sn,Nn,Ci,gn,nt,_n,ct.length),Le.top+=-Nn*_n,Le.bottom=Le.top+_n,Le.left+=-Sn*Ci,Le.right=Le.left+Ci}(Ue,e,n,o,de,m,I,T,B,C,V,te),!function(Le){for(const ft of Le)if(ft.positionedGlyphs.length!==0)return!1;return!0}(Te)&&Ue}const ql={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Rf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function p1(i,e,n,o,u,p){if(e.imageName){const m=o[e.imageName];return m?m.displaySize[0]*e.scale*mn/p+u:0}{const m=n[e.fontStack],I=m&&m[i];return I?I.metrics.advance*e.scale+u:0}}function m1(i,e,n,o){const u=Math.pow(i-e,2);return o?i<e?u/2:2*u:u+Math.abs(n)*n}function Ff(i,e,n){let o=0;return i===10&&(o-=1e4),n&&(o+=150),i!==40&&i!==65288||(o+=50),e!==41&&e!==65289||(o+=50),o}function g1(i,e,n,o,u,p){let m=null,I=m1(e,n,u,p);for(const T of o){const C=m1(e-T.x,n,u,p)+T.badness;C<=I&&(m=T,I=C)}return{index:i,x:e,priorBreak:m,badness:I}}function _1(i){return i?_1(i.priorBreak).concat(i.index):[]}function Xc(i,e,n,o,u,p,m){if(p!=="point")return[];if(!i)return[];const I=[],T=function(V,G,j,te,ie,de){let ye=0;for(let _e=0;_e<V.length();_e++){const Te=V.getSection(_e);ye+=p1(V.getCharCode(_e),Te,te,ie,G,de)}return ye/Math.max(1,Math.ceil(ye/j))}(i,e,n,o,u,m),C=i.text.indexOf("\u200B")>=0;let L=0;for(let V=0;V<i.length();V++){const G=i.getSection(V),j=i.getCharCode(V);if(ql[j]||(L+=p1(j,G,o,u,e,m)),V<i.length()-1){const te=!((B=j)<11904||!(at["Bopomofo Extended"](B)||at.Bopomofo(B)||at["CJK Compatibility Forms"](B)||at["CJK Compatibility Ideographs"](B)||at["CJK Compatibility"](B)||at["CJK Radicals Supplement"](B)||at["CJK Strokes"](B)||at["CJK Symbols and Punctuation"](B)||at["CJK Unified Ideographs Extension A"](B)||at["CJK Unified Ideographs"](B)||at["Enclosed CJK Letters and Months"](B)||at["Halfwidth and Fullwidth Forms"](B)||at.Hiragana(B)||at["Ideographic Description Characters"](B)||at["Kangxi Radicals"](B)||at["Katakana Phonetic Extensions"](B)||at.Katakana(B)||at["Vertical Forms"](B)||at["Yi Radicals"](B)||at["Yi Syllables"](B)));(Rf[j]||te||G.imageName)&&I.push(g1(V+1,L,T,I,Ff(j,i.getCharCode(V+1),te&&C),!1))}}var B;return _1(g1(i.length(),L,T,I,0,!0))}function Kc(i){let e=.5,n=.5;switch(i){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Of(i,e,n,o,u){if(!o&&!u)return;const p=i[n],m=(i[n].x+p.metrics.advance*p.scale)*o;for(let I=e;I<=n;I++)i[I].x-=m,i[I].y+=u}function Vf(i,e,n){const{horizontalAlign:o,verticalAlign:u}=Kc(n),p=e[0]-i.displaySize[0]*o,m=e[1]-i.displaySize[1]*u;return{image:i,top:m,bottom:m+i.displaySize[1],left:p,right:p+i.displaySize[0]}}function y1(i,e,n,o,u,p){const m=i.image;let I;if(m.content){const ie=m.content,de=m.pixelRatio||1;I=[ie[0]/de,ie[1]/de,m.displaySize[0]-ie[2]/de,m.displaySize[1]-ie[3]/de]}const T=e.left*p,C=e.right*p;let L,B,V,G;n==="width"||n==="both"?(G=u[0]+T-o[3],B=u[0]+C+o[1]):(G=u[0]+(T+C-m.displaySize[0])/2,B=G+m.displaySize[0]);const j=e.top*p,te=e.bottom*p;return n==="height"||n==="both"?(L=u[1]+j-o[0],V=u[1]+te+o[2]):(L=u[1]+(j+te-m.displaySize[1])/2,V=L+m.displaySize[1]),{image:m,top:L,right:B,bottom:V,left:G,collisionPadding:I}}const Qr=128;function v1(i,e){const{expression:n}=e;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new ki(i+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:o,interpolationType:u}=n;let p=0;for(;p<o.length&&o[p]<=i;)p++;p=Math.max(0,p-1);let m=p;for(;m<o.length&&o[m]<i+1;)m++;m=Math.min(o.length-1,m);const I=o[p],T=o[m];return n.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:T,interpolationType:u}:{kind:"camera",minZoom:I,maxZoom:T,minSize:n.evaluate(new ki(I)),maxSize:n.evaluate(new ki(T)),interpolationType:u}}}class xs extends Ae{constructor(e,n,o,u){super(e,n),this.angle=o,u!==void 0&&(this.segment=u)}clone(){return new xs(this.x,this.y,this.angle,this.segment)}}function x1(i,e,n,o,u){if(e.segment===void 0)return!0;let p=e,m=e.segment+1,I=0;for(;I>-n/2;){if(m--,m<0)return!1;I-=i[m].dist(p),p=i[m]}I+=i[m].dist(i[m+1]),m++;const T=[];let C=0;for(;I<n/2;){const L=i[m],B=i[m+1];if(!B)return!1;let V=i[m-1].angleTo(L)-L.angleTo(B);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:I,angleDelta:V}),C+=V;I-T[0].distance>o;)C-=T.shift().angleDelta;if(C>u)return!1;m++,I+=L.dist(B)}return!0}function b1(i){let e=0;for(let n=0;n<i.length-1;n++)e+=i[n].dist(i[n+1]);return e}function w1(i,e,n){return i?.6*e*n:0}function S1(i,e){return Math.max(i?i.right-i.left:0,e?e.right-e.left:0)}function Uf(i,e,n,o,u,p){const m=w1(n,u,p),I=S1(n,o)*p;let T=0;const C=b1(i)/2;for(let L=0;L<i.length-1;L++){const B=i[L],V=i[L+1],G=B.dist(V);if(T+G>C){const j=(C-T)/G,te=Ji(B.x,V.x,j),ie=Ji(B.y,V.y,j),de=new xs(te,ie,V.angleTo(B),L);return de._round(),!m||x1(i,de,I,m,e)?de:void 0}T+=G}}function Nf(i,e,n,o,u,p,m,I,T){const C=w1(o,p,m),L=S1(o,u),B=L*m,V=i[0].x===0||i[0].x===T||i[0].y===0||i[0].y===T;return e-B<e/4&&(e=B+e/4),I1(i,V?e/2*I%e:(L/2+2*p)*m*I%e,e,C,n,B,V,!1,T)}function I1(i,e,n,o,u,p,m,I,T){const C=p/2,L=b1(i);let B=0,V=e-n,G=[];for(let j=0;j<i.length-1;j++){const te=i[j],ie=i[j+1],de=te.dist(ie),ye=ie.angleTo(te);for(;V+n<B+de;){V+=n;const _e=(V-B)/de,Te=Ji(te.x,ie.x,_e),Ue=Ji(te.y,ie.y,_e);if(Te>=0&&Te<T&&Ue>=0&&Ue<T&&V-C>=0&&V+C<=L){const Le=new xs(Te,Ue,ye,j);Le._round(),o&&!x1(i,Le,p,o,u)||G.push(Le)}}B+=de}return I||G.length||m||(G=I1(i,B/2,n,o,u,p,m,!0,T)),G}function E1(i,e,n,o,u){const p=[];for(let m=0;m<i.length;m++){const I=i[m];let T;for(let C=0;C<I.length-1;C++){let L=I[C],B=I[C+1];L.x<e&&B.x<e||(L.x<e?L=new Ae(e,L.y+(e-L.x)/(B.x-L.x)*(B.y-L.y))._round():B.x<e&&(B=new Ae(e,L.y+(e-L.x)/(B.x-L.x)*(B.y-L.y))._round()),L.y<n&&B.y<n||(L.y<n?L=new Ae(L.x+(n-L.y)/(B.y-L.y)*(B.x-L.x),n)._round():B.y<n&&(B=new Ae(L.x+(n-L.y)/(B.y-L.y)*(B.x-L.x),n)._round()),L.x>=o&&B.x>=o||(L.x>=o?L=new Ae(o,L.y+(o-L.x)/(B.x-L.x)*(B.y-L.y))._round():B.x>=o&&(B=new Ae(o,L.y+(o-L.x)/(B.x-L.x)*(B.y-L.y))._round()),L.y>=u&&B.y>=u||(L.y>=u?L=new Ae(L.x+(u-L.y)/(B.y-L.y)*(B.x-L.x),u)._round():B.y>=u&&(B=new Ae(L.x+(u-L.y)/(B.y-L.y)*(B.x-L.x),u)._round()),T&&L.equals(T[T.length-1])||(T=[L],p.push(T)),T.push(B)))))}}return p}function T1(i,e,n,o){const u=[],p=i.image,m=p.pixelRatio,I=p.paddedRect.w-2,T=p.paddedRect.h-2,C=i.right-i.left,L=i.bottom-i.top,B=p.stretchX||[[0,I]],V=p.stretchY||[[0,T]],G=(nt,ht)=>nt+ht[1]-ht[0],j=B.reduce(G,0),te=V.reduce(G,0),ie=I-j,de=T-te;let ye=0,_e=j,Te=0,Ue=te,Le=0,ft=ie,yt=0,lt=de;if(p.content&&o){const nt=p.content;ye=Gl(B,0,nt[0]),Te=Gl(V,0,nt[1]),_e=Gl(B,nt[0],nt[2]),Ue=Gl(V,nt[1],nt[3]),Le=nt[0]-ye,yt=nt[1]-Te,ft=nt[2]-nt[0]-_e,lt=nt[3]-nt[1]-Ue}const ct=(nt,ht,ut,We)=>{const St=jl(nt.stretch-ye,_e,C,i.left),xt=Zl(nt.fixed-Le,ft,nt.stretch,j),Wt=jl(ht.stretch-Te,Ue,L,i.top),ai=Zl(ht.fixed-yt,lt,ht.stretch,te),zi=jl(ut.stretch-ye,_e,C,i.left),Ci=Zl(ut.fixed-Le,ft,ut.stretch,j),gn=jl(We.stretch-Te,Ue,L,i.top),$i=Zl(We.fixed-yt,lt,We.stretch,te),en=new Ae(St,Wt),ln=new Ae(zi,Wt),_n=new Ae(zi,gn),Sn=new Ae(St,gn),Nn=new Ae(xt/m,ai/m),tn=new Ae(Ci/m,$i/m),yn=e*Math.PI/180;if(yn){const qn=Math.sin(yn),Gn=Math.cos(yn),Li=[Gn,-qn,qn,Gn];en._matMult(Li),ln._matMult(Li),Sn._matMult(Li),_n._matMult(Li)}const In=nt.stretch+nt.fixed,Ln=ht.stretch+ht.fixed;return{tl:en,tr:ln,bl:Sn,br:_n,tex:{x:p.paddedRect.x+1+In,y:p.paddedRect.y+1+Ln,w:ut.stretch+ut.fixed-In,h:We.stretch+We.fixed-Ln},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Nn,pixelOffsetBR:tn,minFontScaleX:ft/m/C,minFontScaleY:lt/m/L,isSDF:n}};if(o&&(p.stretchX||p.stretchY)){const nt=k1(B,ie,j),ht=k1(V,de,te);for(let ut=0;ut<nt.length-1;ut++){const We=nt[ut],St=nt[ut+1];for(let xt=0;xt<ht.length-1;xt++)u.push(ct(We,ht[xt],St,ht[xt+1]))}}else u.push(ct({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:T+1}));return u}function Gl(i,e,n){let o=0;for(const u of i)o+=Math.max(e,Math.min(n,u[1]))-Math.max(e,Math.min(n,u[0]));return o}function k1(i,e,n){const o=[{fixed:-1,stretch:0}];for(const[u,p]of i){const m=o[o.length-1];o.push({fixed:u-m.stretch,stretch:m.stretch}),o.push({fixed:u-m.stretch,stretch:m.stretch+(p-u)})}return o.push({fixed:e+1,stretch:n}),o}function jl(i,e,n,o){return i/e*n+o}function Zl(i,e,n,o){return i-e*n/o}dt("Anchor",xs);class Hl{constructor(e,n,o,u,p,m,I,T,C,L){if(this.boxStartIndex=e.length,C){let B=m.top,V=m.bottom;const G=m.collisionPadding;G&&(B-=G[1],V+=G[3]);let j=V-B;j>0&&(j=Math.max(10,j),this.circleDiameter=j)}else{let B=m.top*I-T,V=m.bottom*I+T,G=m.left*I-T,j=m.right*I+T;const te=m.collisionPadding;if(te&&(G-=te[0]*I,B-=te[1]*I,j+=te[2]*I,V+=te[3]*I),L){const ie=new Ae(G,B),de=new Ae(j,B),ye=new Ae(G,V),_e=new Ae(j,V),Te=L*Math.PI/180;ie._rotate(Te),de._rotate(Te),ye._rotate(Te),_e._rotate(Te),G=Math.min(ie.x,de.x,ye.x,_e.x),j=Math.max(ie.x,de.x,ye.x,_e.x),B=Math.min(ie.y,de.y,ye.y,_e.y),V=Math.max(ie.y,de.y,ye.y,_e.y)}e.emplaceBack(n.x,n.y,G,B,j,V,o,u,p)}this.boxEndIndex=e.length}}class qf{constructor(e=[],n=Gf){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:o}=this,u=n[e];for(;e>0;){const p=e-1>>1,m=n[p];if(o(u,m)>=0)break;n[e]=m,e=p}n[e]=u}_down(e){const{data:n,compare:o}=this,u=this.length>>1,p=n[e];for(;e<u;){let m=1+(e<<1),I=n[m];const T=m+1;if(T<this.length&&o(n[T],I)<0&&(m=T,I=n[T]),o(I,p)>=0)break;n[e]=I,e=m}n[e]=p}}function Gf(i,e){return i<e?-1:i>e?1:0}function jf(i,e=1,n=!1){let o=1/0,u=1/0,p=-1/0,m=-1/0;const I=i[0];for(let G=0;G<I.length;G++){const j=I[G];(!G||j.x<o)&&(o=j.x),(!G||j.y<u)&&(u=j.y),(!G||j.x>p)&&(p=j.x),(!G||j.y>m)&&(m=j.y)}const T=Math.min(p-o,m-u);let C=T/2;const L=new qf([],Zf);if(T===0)return new Ae(o,u);for(let G=o;G<p;G+=T)for(let j=u;j<m;j+=T)L.push(new La(G+C,j+C,C,i));let B=function(G){let j=0,te=0,ie=0;const de=G[0];for(let ye=0,_e=de.length,Te=_e-1;ye<_e;Te=ye++){const Ue=de[ye],Le=de[Te],ft=Ue.x*Le.y-Le.x*Ue.y;te+=(Ue.x+Le.x)*ft,ie+=(Ue.y+Le.y)*ft,j+=3*ft}return new La(te/j,ie/j,0,G)}(i),V=L.length;for(;L.length;){const G=L.pop();(G.d>B.d||!B.d)&&(B=G,n&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,V)),G.max-B.d<=e||(C=G.h/2,L.push(new La(G.p.x-C,G.p.y-C,C,i)),L.push(new La(G.p.x+C,G.p.y-C,C,i)),L.push(new La(G.p.x-C,G.p.y+C,C,i)),L.push(new La(G.p.x+C,G.p.y+C,C,i)),V+=4)}return n&&(console.log(`num probes: ${V}`),console.log(`best distance: ${B.d}`)),B.p}function Zf(i,e){return e.max-i.max}function La(i,e,n,o){this.p=new Ae(i,e),this.h=n,this.d=function(u,p){let m=!1,I=1/0;for(let T=0;T<p.length;T++){const C=p[T];for(let L=0,B=C.length,V=B-1;L<B;V=L++){const G=C[L],j=C[V];G.y>u.y!=j.y>u.y&&u.x<(j.x-G.x)*(u.y-G.y)/(j.y-G.y)+G.x&&(m=!m),I=Math.min(I,Ou(u,G,j))}}return(m?1:-1)*Math.sqrt(I)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}const Yc=Number.POSITIVE_INFINITY;function A1(i,e){return e[1]!==Yc?function(n,o,u){let p=0,m=0;switch(o=Math.abs(o),u=Math.abs(u),n){case"top-right":case"top-left":case"top":m=u-7;break;case"bottom-right":case"bottom-left":case"bottom":m=7-u}switch(n){case"top-right":case"bottom-right":case"right":p=-o;break;case"top-left":case"bottom-left":case"left":p=o}return[p,m]}(i,e[0],e[1]):function(n,o){let u=0,p=0;o<0&&(o=0);const m=o/Math.sqrt(2);switch(n){case"top-right":case"top-left":p=m-7;break;case"bottom-right":case"bottom-left":p=7-m;break;case"bottom":p=7-o;break;case"top":p=o-7}switch(n){case"top-right":case"bottom-right":u=-m;break;case"top-left":case"bottom-left":u=m;break;case"left":u=o;break;case"right":u=-o}return[u,p]}(i,e[0])}function Jc(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Hf(i,e,n,o,u,p,m,I,T,C,L){let B=p.textMaxSize.evaluate(e,{});B===void 0&&(B=m);const V=i.layers[0].layout,G=V.get("icon-offset").evaluate(e,{},L),j=C1(n.horizontal),te=m/24,ie=i.tilePixelRatio*te,de=i.tilePixelRatio*B/24,ye=i.tilePixelRatio*I,_e=i.tilePixelRatio*V.get("symbol-spacing"),Te=V.get("text-padding")*i.tilePixelRatio,Ue=V.get("icon-padding")*i.tilePixelRatio,Le=V.get("text-max-angle")/180*Math.PI,ft=V.get("text-rotation-alignment")!=="viewport"&&V.get("symbol-placement")!=="point",yt=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",lt=V.get("symbol-placement"),ct=_e/2,nt=V.get("icon-text-fit");let ht;o&&nt!=="none"&&(i.allowVerticalPlacement&&n.vertical&&(ht=y1(o,n.vertical,nt,V.get("icon-text-fit-padding"),G,te)),j&&(o=y1(o,j,nt,V.get("icon-text-fit-padding"),G,te)));const ut=(We,St)=>{St.x<0||St.x>=sn||St.y<0||St.y>=sn||function(xt,Wt,ai,zi,Ci,gn,$i,en,ln,_n,Sn,Nn,tn,yn,In,Ln,qn,Gn,Li,cn,jt,Jn,vn,En,pr){const br=xt.addToLineVertexArray(Wt,ai);let wr,$r,mr,nr,jn=0,es=0,No=0,H1=0,ou=-1,lu=-1;const ts={};let W1=To(""),cu=0,uu=0;if(en._unevaluatedLayout.getValue("text-radial-offset")===void 0?[cu,uu]=en.layout.get("text-offset").evaluate(jt,{},En).map(Zn=>Zn*mn):(cu=en.layout.get("text-radial-offset").evaluate(jt,{},En)*mn,uu=Yc),xt.allowVerticalPlacement&&zi.vertical){const Zn=en.layout.get("text-rotate").evaluate(jt,{},En)+90;mr=new Hl(ln,Wt,_n,Sn,Nn,zi.vertical,tn,yn,In,Zn),$i&&(nr=new Hl(ln,Wt,_n,Sn,Nn,$i,qn,Gn,In,Zn))}if(Ci){const Zn=en.layout.get("icon-rotate").evaluate(jt,{}),Dr=en.layout.get("icon-text-fit")!=="none",qo=T1(Ci,Zn,vn,Dr),Go=$i?T1($i,Zn,vn,Dr):void 0;$r=new Hl(ln,Wt,_n,Sn,Nn,Ci,qn,Gn,!1,Zn),jn=4*qo.length;const Y1=xt.iconSizeData;let Hs=null;Y1.kind==="source"?(Hs=[Qr*en.layout.get("icon-size").evaluate(jt,{})],Hs[0]>bs&&Pe(`${xt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Y1.kind==="composite"&&(Hs=[Qr*Jn.compositeIconSizes[0].evaluate(jt,{},En),Qr*Jn.compositeIconSizes[1].evaluate(jt,{},En)],(Hs[0]>bs||Hs[1]>bs)&&Pe(`${xt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),xt.addSymbols(xt.icon,qo,Hs,cn,Li,jt,a.WritingMode.none,Wt,br.lineStartIndex,br.lineLength,-1,En),ou=xt.icon.placedSymbolArray.length-1,Go&&(es=4*Go.length,xt.addSymbols(xt.icon,Go,Hs,cn,Li,jt,a.WritingMode.vertical,Wt,br.lineStartIndex,br.lineLength,-1,En),lu=xt.icon.placedSymbolArray.length-1)}const X1=Object.keys(zi.horizontal);for(const Zn of X1){const Dr=zi.horizontal[Zn];if(!wr){W1=To(Dr.text);const Go=en.layout.get("text-rotate").evaluate(jt,{},En);wr=new Hl(ln,Wt,_n,Sn,Nn,Dr,tn,yn,In,Go)}const qo=Dr.positionedLines.length===1;if(No+=z1(xt,Wt,Dr,gn,en,In,jt,Ln,br,zi.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,qo?X1:[Zn],ts,ou,Jn,En),qo)break}zi.vertical&&(H1+=z1(xt,Wt,zi.vertical,gn,en,In,jt,Ln,br,a.WritingMode.vertical,["vertical"],ts,lu,Jn,En));const sp=wr?wr.boxStartIndex:xt.collisionBoxArray.length,ap=wr?wr.boxEndIndex:xt.collisionBoxArray.length,op=mr?mr.boxStartIndex:xt.collisionBoxArray.length,lp=mr?mr.boxEndIndex:xt.collisionBoxArray.length,cp=$r?$r.boxStartIndex:xt.collisionBoxArray.length,up=$r?$r.boxEndIndex:xt.collisionBoxArray.length,hp=nr?nr.boxStartIndex:xt.collisionBoxArray.length,dp=nr?nr.boxEndIndex:xt.collisionBoxArray.length;let Sr=-1;const Jl=(Zn,Dr)=>Zn&&Zn.circleDiameter?Math.max(Zn.circleDiameter,Dr):Dr;Sr=Jl(wr,Sr),Sr=Jl(mr,Sr),Sr=Jl($r,Sr),Sr=Jl(nr,Sr);const K1=Sr>-1?1:0;K1&&(Sr*=pr/mn),xt.glyphOffsetArray.length>=Da.MAX_GLYPHS&&Pe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),jt.sortKey!==void 0&&xt.addToSortKeyRanges(xt.symbolInstances.length,jt.sortKey),xt.symbolInstances.emplaceBack(Wt.x,Wt.y,ts.right>=0?ts.right:-1,ts.center>=0?ts.center:-1,ts.left>=0?ts.left:-1,ts.vertical||-1,ou,lu,W1,sp,ap,op,lp,cp,up,hp,dp,_n,No,H1,jn,es,K1,0,tn,cu,uu,Sr)}(i,St,We,n,o,u,ht,i.layers[0],i.collisionBoxArray,e.index,e.sourceLayerIndex,i.index,ie,Te,ft,T,ye,Ue,yt,G,e,p,C,L,m)};if(lt==="line")for(const We of E1(e.geometry,0,0,sn,sn)){const St=Nf(We,_e,Le,n.vertical||j,o,24,de,i.overscaling,sn);for(const xt of St){const Wt=j;Wt&&Wf(i,Wt.text,ct,xt)||ut(We,xt)}}else if(lt==="line-center"){for(const We of e.geometry)if(We.length>1){const St=Uf(We,Le,n.vertical||j,o,24,de);St&&ut(We,St)}}else if(e.type==="Polygon")for(const We of Oc(e.geometry,0)){const St=jf(We,16);ut(We[0],new xs(St.x,St.y,0))}else if(e.type==="LineString")for(const We of e.geometry)ut(We,new xs(We[0].x,We[0].y,0));else if(e.type==="Point")for(const We of e.geometry)for(const St of We)ut([St],new xs(St.x,St.y,0))}const bs=32640;function z1(i,e,n,o,u,p,m,I,T,C,L,B,V,G,j){const te=function(ye,_e,Te,Ue,Le,ft,yt,lt){const ct=Ue.layout.get("text-rotate").evaluate(ft,{})*Math.PI/180,nt=[];for(const ht of _e.positionedLines)for(const ut of ht.positionedGlyphs){if(!ut.rect)continue;const We=ut.rect||{};let St=4,xt=!0,Wt=1,ai=0;const zi=(Le||lt)&&ut.vertical,Ci=ut.metrics.advance*ut.scale/2;if(lt&&_e.verticalizable){const Li=(ut.scale-1)*mn,cn=(mn-ut.metrics.width*ut.scale)/2;ai=ht.lineOffset/2-(ut.imageName?-cn:Li)}if(ut.imageName){const Li=yt[ut.imageName];xt=Li.sdf,Wt=Li.pixelRatio,St=1/Wt}const gn=Le?[ut.x+Ci,ut.y]:[0,0];let $i=Le?[0,0]:[ut.x+Ci+Te[0],ut.y+Te[1]-ai],en=[0,0];zi&&(en=$i,$i=[0,0]);const ln=(ut.metrics.left-St)*ut.scale-Ci+$i[0],_n=(-ut.metrics.top-St)*ut.scale+$i[1],Sn=ln+We.w*ut.scale/Wt,Nn=_n+We.h*ut.scale/Wt,tn=new Ae(ln,_n),yn=new Ae(Sn,_n),In=new Ae(ln,Nn),Ln=new Ae(Sn,Nn);if(zi){const Li=new Ae(-Ci,Ci-Ul),cn=-Math.PI/2,jt=12-Ci,Jn=new Ae(22-jt,-(ut.imageName?jt:0)),vn=new Ae(...en);tn._rotateAround(cn,Li)._add(Jn)._add(vn),yn._rotateAround(cn,Li)._add(Jn)._add(vn),In._rotateAround(cn,Li)._add(Jn)._add(vn),Ln._rotateAround(cn,Li)._add(Jn)._add(vn)}if(ct){const Li=Math.sin(ct),cn=Math.cos(ct),jt=[cn,-Li,Li,cn];tn._matMult(jt),yn._matMult(jt),In._matMult(jt),Ln._matMult(jt)}const qn=new Ae(0,0),Gn=new Ae(0,0);nt.push({tl:tn,tr:yn,bl:In,br:Ln,tex:We,writingMode:_e.writingMode,glyphOffset:gn,sectionIndex:ut.sectionIndex,isSDF:xt,pixelOffsetTL:qn,pixelOffsetBR:Gn,minFontScaleX:0,minFontScaleY:0})}return nt}(0,n,I,u,p,m,o,i.allowVerticalPlacement),ie=i.textSizeData;let de=null;ie.kind==="source"?(de=[Qr*u.layout.get("text-size").evaluate(m,{})],de[0]>bs&&Pe(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ie.kind==="composite"&&(de=[Qr*G.compositeTextSizes[0].evaluate(m,{},j),Qr*G.compositeTextSizes[1].evaluate(m,{},j)],(de[0]>bs||de[1]>bs)&&Pe(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,te,de,I,p,m,C,e,T.lineStartIndex,T.lineLength,V,j);for(const ye of L)B[ye]=i.text.placedSymbolArray.length-1;return 4*te.length}function C1(i){for(const e in i)return i[e];return null}function Wf(i,e,n,o){const u=i.compareText;if(e in u){const p=u[e];for(let m=p.length-1;m>=0;m--)if(o.dist(p[m])<n)return!0}else u[e]=[];return u[e].push(o),!1}const Xf=ys.VectorTileFeature.types,Kf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wl(i,e,n,o,u,p,m,I,T,C,L,B,V){const G=I?Math.min(bs,Math.round(I[0])):0,j=I?Math.min(bs,Math.round(I[1])):0;i.emplaceBack(e,n,Math.round(32*o),Math.round(32*u),p,m,(G<<1)+(T?1:0),j,16*C,16*L,256*B,256*V)}function Qc(i,e,n){i.emplaceBack(e.x,e.y,n),i.emplaceBack(e.x,e.y,n),i.emplaceBack(e.x,e.y,n),i.emplaceBack(e.x,e.y,n)}function Yf(i){for(const e of i.sections)if(Sc(e.text))return!0;return!1}class $c{constructor(e){this.layoutVertexArray=new pn,this.indexArray=new Pn,this.programConfigurations=e,this.segments=new ei,this.dynamicLayoutVertexArray=new Vn,this.opacityVertexArray=new Kn,this.placedSymbolArray=new je}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,n,o,u){this.isEmpty()||(o&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,vf.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,xf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Kf,!0),this.opacityVertexBuffer.itemSize=1),(o||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dt("SymbolBuffers",$c);class eu{constructor(e,n,o){this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new o,this.segments=new ei,this.collisionVertexArray=new Lr}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,bf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dt("CollisionBuffers",eu);class Da{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(m=>m.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Mc([]),this.placementViewportMatrix=Mc([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=v1(this.zoom,n["text-size"]),this.iconSizeData=v1(this.zoom,n["icon-size"]);const o=this.layers[0].layout,u=o.get("symbol-sort-key"),p=o.get("symbol-z-order");this.canOverlap=iu(o,"text-overlap","text-allow-overlap")!=="never"||iu(o,"icon-overlap","icon-allow-overlap")!=="never"||o.get("text-ignore-placement")||o.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&!u.isConstant(),this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,o.get("symbol-placement")==="point"&&(this.writingModes=o.get("text-writing-mode").map(m=>a.WritingMode[m])),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=e.sourceID}createArrays(){this.text=new $c(new qs(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new $c(new qs(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new gt,this.lineVertexArray=new ot,this.symbolInstances=new ze}calculateGlyphDependencies(e,n,o,u,p){for(let m=0;m<e.length;m++)if(n[e.charCodeAt(m)]=!0,(o||u)&&p){const I=Fo[e.charAt(m)];I&&(n[I.charCodeAt(0)]=!0)}}populate(e,n,o){const u=this.layers[0],p=u.layout,m=p.get("text-font"),I=p.get("text-field"),T=p.get("icon-image"),C=(I.value.kind!=="constant"||I.value.value instanceof J&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),L=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,B=p.get("symbol-sort-key");if(this.features=[],!C&&!L)return;const V=n.iconDependencies,G=n.glyphDependencies,j=n.availableImages,te=new ki(this.zoom);for(const{feature:ie,id:de,index:ye,sourceLayerIndex:_e}of e){const Te=u._featureFilter.needGeometry,Ue=js(ie,Te);if(!u._featureFilter.filter(te,Ue,o))continue;let Le,ft;if(Te||(Ue.geometry=Gs(ie)),C){const lt=u.getValueAndResolveTokens("text-field",Ue,o,j),ct=J.factory(lt);Yf(ct)&&(this.hasRTLText=!0),(!this.hasRTLText||So()==="unavailable"||this.hasRTLText&&Xn.isParsed())&&(Le=Sf(ct,u,Ue))}if(L){const lt=u.getValueAndResolveTokens("icon-image",Ue,o,j);ft=lt instanceof se?lt:se.fromString(lt)}if(!Le&&!ft)continue;const yt=this.sortFeaturesByKey?B.evaluate(Ue,{},o):void 0;if(this.features.push({id:de,text:Le,icon:ft,index:ye,sourceLayerIndex:_e,geometry:Ue.geometry,properties:ie.properties,type:Xf[ie.type],sortKey:yt}),ft&&(V[ft.name]=!0),Le){const lt=m.evaluate(Ue,{},o).join(","),ct=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const nt of Le.sections)if(nt.image)V[nt.image.name]=!0;else{const ht=yo(Le.toString()),ut=nt.fontStack||lt,We=G[ut]=G[ut]||{};this.calculateGlyphDependencies(nt.text,We,ct,this.allowVerticalPlacement,ht)}}}p.get("symbol-placement")==="line"&&(this.features=function(ie){const de={},ye={},_e=[];let Te=0;function Ue(lt){_e.push(ie[lt]),Te++}function Le(lt,ct,nt){const ht=ye[lt];return delete ye[lt],ye[ct]=ht,_e[ht].geometry[0].pop(),_e[ht].geometry[0]=_e[ht].geometry[0].concat(nt[0]),ht}function ft(lt,ct,nt){const ht=de[ct];return delete de[ct],de[lt]=ht,_e[ht].geometry[0].shift(),_e[ht].geometry[0]=nt[0].concat(_e[ht].geometry[0]),ht}function yt(lt,ct,nt){const ht=nt?ct[0][ct[0].length-1]:ct[0][0];return`${lt}:${ht.x}:${ht.y}`}for(let lt=0;lt<ie.length;lt++){const ct=ie[lt],nt=ct.geometry,ht=ct.text?ct.text.toString():null;if(!ht){Ue(lt);continue}const ut=yt(ht,nt),We=yt(ht,nt,!0);if(ut in ye&&We in de&&ye[ut]!==de[We]){const St=ft(ut,We,nt),xt=Le(ut,We,_e[St].geometry);delete de[ut],delete ye[We],ye[yt(ht,_e[xt].geometry,!0)]=xt,_e[St].geometry=null}else ut in ye?Le(ut,We,nt):We in de?ft(ut,We,nt):(Ue(lt),de[ut]=Te-1,ye[We]=Te-1)}return _e.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,de)=>ie.sortKey-de.sortKey)}update(e,n,o){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,n,this.layers,o),this.icon.programConfigurations.updatePaintArrays(e,n,this.layers,o))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,n){const o=this.lineVertexArray.length;if(e.segment!==void 0){let u=e.dist(n[e.segment+1]),p=e.dist(n[e.segment]);const m={};for(let I=e.segment+1;I<n.length;I++)m[I]={x:n[I].x,y:n[I].y,tileUnitDistanceFromAnchor:u},I<n.length-1&&(u+=n[I+1].dist(n[I]));for(let I=e.segment||0;I>=0;I--)m[I]={x:n[I].x,y:n[I].y,tileUnitDistanceFromAnchor:p},I>0&&(p+=n[I-1].dist(n[I]));for(let I=0;I<n.length;I++){const T=m[I];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}}addSymbols(e,n,o,u,p,m,I,T,C,L,B,V){const G=e.indexArray,j=e.layoutVertexArray,te=e.segments.prepareSegment(4*n.length,j,G,this.canOverlap?m.sortKey:void 0),ie=this.glyphOffsetArray.length,de=te.vertexLength,ye=this.allowVerticalPlacement&&I===a.WritingMode.vertical?Math.PI/2:0,_e=m.text&&m.text.sections;for(let Te=0;Te<n.length;Te++){const{tl:Ue,tr:Le,bl:ft,br:yt,tex:lt,pixelOffsetTL:ct,pixelOffsetBR:nt,minFontScaleX:ht,minFontScaleY:ut,glyphOffset:We,isSDF:St,sectionIndex:xt}=n[Te],Wt=te.vertexLength,ai=We[1];Wl(j,T.x,T.y,Ue.x,ai+Ue.y,lt.x,lt.y,o,St,ct.x,ct.y,ht,ut),Wl(j,T.x,T.y,Le.x,ai+Le.y,lt.x+lt.w,lt.y,o,St,nt.x,ct.y,ht,ut),Wl(j,T.x,T.y,ft.x,ai+ft.y,lt.x,lt.y+lt.h,o,St,ct.x,nt.y,ht,ut),Wl(j,T.x,T.y,yt.x,ai+yt.y,lt.x+lt.w,lt.y+lt.h,o,St,nt.x,nt.y,ht,ut),Qc(e.dynamicLayoutVertexArray,T,ye),G.emplaceBack(Wt,Wt+1,Wt+2),G.emplaceBack(Wt+1,Wt+2,Wt+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(We[0]),Te!==n.length-1&&xt===n[Te+1].sectionIndex||e.programConfigurations.populatePaintArrays(j.length,m,m.index,{},V,_e&&_e[xt])}e.placedSymbolArray.emplaceBack(T.x,T.y,ie,this.glyphOffsetArray.length-ie,de,C,L,T.segment,o?o[0]:0,o?o[1]:0,u[0],u[1],I,0,!1,0,B)}_addCollisionDebugVertex(e,n,o,u,p,m){return n.emplaceBack(0,0),e.emplaceBack(o.x,o.y,u,p,Math.round(m.x),Math.round(m.y))}addCollisionDebugVertices(e,n,o,u,p,m,I){const T=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),C=T.vertexLength,L=p.layoutVertexArray,B=p.collisionVertexArray,V=I.anchorX,G=I.anchorY;this._addCollisionDebugVertex(L,B,m,V,G,new Ae(e,n)),this._addCollisionDebugVertex(L,B,m,V,G,new Ae(o,n)),this._addCollisionDebugVertex(L,B,m,V,G,new Ae(o,u)),this._addCollisionDebugVertex(L,B,m,V,G,new Ae(e,u)),T.vertexLength+=4;const j=p.indexArray;j.emplaceBack(C,C+1),j.emplaceBack(C+1,C+2),j.emplaceBack(C+2,C+3),j.emplaceBack(C+3,C),T.primitiveLength+=4}addDebugCollisionBoxes(e,n,o,u){for(let p=e;p<n;p++){const m=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,u?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,o)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new eu(Yn,s1.members,ur),this.iconCollisionBox=new eu(Yn,s1.members,ur);for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(e,n,o,u,p,m,I,T,C){const L={};for(let B=n;B<o;B++){const V=e.get(B);L.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},L.textFeatureIndex=V.featureIndex;break}for(let B=u;B<p;B++){const V=e.get(B);L.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},L.verticalTextFeatureIndex=V.featureIndex;break}for(let B=m;B<I;B++){const V=e.get(B);L.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},L.iconFeatureIndex=V.featureIndex;break}for(let B=T;B<C;B++){const V=e.get(B);L.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},L.verticalIconFeatureIndex=V.featureIndex;break}return L}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const o=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,o.textBoxStartIndex,o.textBoxEndIndex,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,n){const o=e.placedSymbolArray.get(n),u=o.vertexStartIndex+4*o.numGlyphs;for(let p=o.vertexStartIndex;p<u;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(e),o=Math.cos(e),u=[],p=[],m=[];for(let I=0;I<this.symbolInstances.length;++I){m.push(I);const T=this.symbolInstances.get(I);u.push(0|Math.round(n*T.anchorX+o*T.anchorY)),p.push(T.featureIndex)}return m.sort((I,T)=>u[I]-u[T]||p[T]-p[I]),m}addToSortKeyRanges(e,n){const o=this.sortKeyRanges[this.sortKeyRanges.length-1];o&&o.sortKey===n?o.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const o=this.symbolInstances.get(n);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((u,p,m)=>{u>=0&&m.indexOf(u)===p&&this.addIndicesForPlacedSymbol(this.text,u)}),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}dt("SymbolBucket",Da,{omit:["layers","collisionBoxArray","features","compareText"]}),Da.MAX_GLYPHS=65535,Da.addDynamicAttributes=Qc;const Jf=new nn({"symbol-placement":new _t(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new _t(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _t(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wt(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _t(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _t(Se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new _t(Se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new _t(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new _t(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _t(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new wt(Se.layout_symbol["icon-size"]),"icon-text-fit":new _t(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _t(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new wt(Se.layout_symbol["icon-image"]),"icon-rotate":new wt(Se.layout_symbol["icon-rotate"]),"icon-padding":new _t(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new _t(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new wt(Se.layout_symbol["icon-offset"]),"icon-anchor":new wt(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _t(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _t(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _t(Se.layout_symbol["text-rotation-alignment"]),"text-field":new wt(Se.layout_symbol["text-field"]),"text-font":new wt(Se.layout_symbol["text-font"]),"text-size":new wt(Se.layout_symbol["text-size"]),"text-max-width":new wt(Se.layout_symbol["text-max-width"]),"text-line-height":new _t(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new wt(Se.layout_symbol["text-letter-spacing"]),"text-justify":new wt(Se.layout_symbol["text-justify"]),"text-radial-offset":new wt(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _t(Se.layout_symbol["text-variable-anchor"]),"text-anchor":new wt(Se.layout_symbol["text-anchor"]),"text-max-angle":new _t(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new _t(Se.layout_symbol["text-writing-mode"]),"text-rotate":new wt(Se.layout_symbol["text-rotate"]),"text-padding":new _t(Se.layout_symbol["text-padding"]),"text-keep-upright":new _t(Se.layout_symbol["text-keep-upright"]),"text-transform":new wt(Se.layout_symbol["text-transform"]),"text-offset":new wt(Se.layout_symbol["text-offset"]),"text-allow-overlap":new _t(Se.layout_symbol["text-allow-overlap"]),"text-overlap":new _t(Se.layout_symbol["text-overlap"]),"text-ignore-placement":new _t(Se.layout_symbol["text-ignore-placement"]),"text-optional":new _t(Se.layout_symbol["text-optional"])});var tu={paint:new nn({"icon-opacity":new wt(Se.paint_symbol["icon-opacity"]),"icon-color":new wt(Se.paint_symbol["icon-color"]),"icon-halo-color":new wt(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new wt(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wt(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new _t(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new _t(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new wt(Se.paint_symbol["text-opacity"]),"text-color":new wt(Se.paint_symbol["text-color"],{runtimeType:dn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new wt(Se.paint_symbol["text-halo-color"]),"text-halo-width":new wt(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new wt(Se.paint_symbol["text-halo-blur"]),"text-translate":new _t(Se.paint_symbol["text-translate"]),"text-translate-anchor":new _t(Se.paint_symbol["text-translate-anchor"])}),layout:Jf};class M1{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ci,this.defaultValue=e}evaluate(e){if(e.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(e.formattedSection))return n.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dt("FormatSectionOverride",M1,{omit:["defaultValue"]});class Xl extends Mn{constructor(e){super(e,tu)}recalculate(e,n){if(super.recalculate(e,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const o=this.layout.get("text-writing-mode");if(o){const u=[];for(const p of o)u.indexOf(p)<0&&u.push(p);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,n,o,u){const p=this.layout.get(e).evaluate(n,{},o,u),m=this._unevaluatedLayout._values[e];return m.isDataDriven()||oa(m.value)||!p?p:function(I,T){return T.replace(/{([^{}]+)}/g,(C,L)=>L in I?String(I[L]):"")}(n.properties,p)}createBucket(e){return new Da(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of tu.paint.overridableProperties){if(!Xl.hasPaintOverride(this.layout,e))continue;const n=this.paint.get(e),o=new M1(n),u=new ho(o,n.property.specification);let p=null;p=n.value.kind==="constant"||n.value.kind==="source"?new ca("source",u):new ua("composite",u,n.value.zoomStops,n.value._interpolationType),this.paint._values[e]=new cr(n.property,p,n.parameters)}}_handleOverridablePaintPropertyUpdate(e,n,o){return!(!this.layout||n.isDataDriven()||o.isDataDriven())&&Xl.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,n){const o=e.get("text-field"),u=tu.paint.properties[n];let p=!1;const m=I=>{for(const T of I)if(u.overrides&&u.overrides.hasOverride(T))return void(p=!0)};if(o.value.kind==="constant"&&o.value.value instanceof J)m(o.value.value.sections);else if(o.value.kind==="source"){const I=C=>{p||(C instanceof Re&&oe(C.value)===Bn?m(C.value.sections):C instanceof Fe?m(C.sections):C.eachChild(I))},T=o.value;T._styleExpression&&I(T._styleExpression.expression)}return p}}function iu(i,e,n){let o="never";const u=i.get(e);return u?o=u:i.get(n)&&(o="always"),o}var Qf={paint:new nn({"background-color":new _t(Se.paint_background["background-color"]),"background-pattern":new Vs(Se.paint_background["background-pattern"]),"background-opacity":new _t(Se.paint_background["background-opacity"])})},$f={paint:new nn({"raster-opacity":new _t(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new _t(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _t(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _t(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new _t(Se.paint_raster["raster-saturation"]),"raster-contrast":new _t(Se.paint_raster["raster-contrast"]),"raster-resampling":new _t(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new _t(Se.paint_raster["raster-fade-duration"])})};class ep extends Mn{constructor(e){super(e,{}),this.onAdd=n=>{this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},this.onRemove=n=>{this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const tp={circle:class extends Mn{constructor(i){super(i,Pd)}createBucket(i){return new Ac(i)}queryRadius(i){const e=i;return Ao("circle-radius",this,e)+Ao("circle-stroke-width",this,e)+Pl(this.paint.get("circle-translate"))}queryIntersectsFeature(i,e,n,o,u,p,m,I){const T=Ll(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),p.angle,m),C=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),L=this.paint.get("circle-pitch-alignment")==="map",B=L?T:function(G,j){return G.map(te=>Nu(te,j))}(T,I),V=L?C*m:C;for(const G of o)for(const j of G){const te=L?j:Nu(j,I);let ie=V;const de=Dl([],[j.x,j.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ie*=de[3]/p.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ie*=p.cameraToCenterDistance/de[3]),kd(B,te,ie))return!0}return!1}},heatmap:class extends Mn{constructor(i){super(i,Dd),this._updateColorRamp()}createBucket(i){return new qu(i)}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ju({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Mn{constructor(i){super(i,Bd)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Mn{constructor(i){super(i,Jd)}recalculate(i,e){super.recalculate(i,e);const n=this.paint._values["fill-outline-color"];n.value.kind==="constant"&&n.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Nc(i)}queryRadius(){return Pl(this.paint.get("fill-translate"))}queryIntersectsFeature(i,e,n,o,u,p,m){return Fu(Ll(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),p.angle,m),o)}isTileClipped(){return!0}},"fill-extrusion":class extends Mn{constructor(i){super(i,hf)}createBucket(i){return new Gc(i)}queryRadius(){return Pl(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,e,n,o,u,p,m,I){const T=Ll(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),p.angle,m),C=this.paint.get("fill-extrusion-height").evaluate(e,n),L=this.paint.get("fill-extrusion-base").evaluate(e,n),B=function(G,j,te,ie){const de=[];for(const ye of G){const _e=[ye.x,ye.y,0,1];Dl(_e,_e,j),de.push(new Ae(_e[0]/_e[3],_e[1]/_e[3]))}return de}(T,I),V=function(G,j,te,ie){const de=[],ye=[],_e=ie[8]*j,Te=ie[9]*j,Ue=ie[10]*j,Le=ie[11]*j,ft=ie[8]*te,yt=ie[9]*te,lt=ie[10]*te,ct=ie[11]*te;for(const nt of G){const ht=[],ut=[];for(const We of nt){const St=We.x,xt=We.y,Wt=ie[0]*St+ie[4]*xt+ie[12],ai=ie[1]*St+ie[5]*xt+ie[13],zi=ie[2]*St+ie[6]*xt+ie[14],Ci=ie[3]*St+ie[7]*xt+ie[15],gn=zi+Ue,$i=Ci+Le,en=Wt+ft,ln=ai+yt,_n=zi+lt,Sn=Ci+ct,Nn=new Ae((Wt+_e)/$i,(ai+Te)/$i);Nn.z=gn/$i,ht.push(Nn);const tn=new Ae(en/Sn,ln/Sn);tn.z=_n/Sn,ut.push(tn)}de.push(ht),ye.push(ut)}return[de,ye]}(o,L,C,I);return function(G,j,te){let ie=1/0;Fu(te,j)&&(ie=e1(te,j[0]));for(let de=0;de<j.length;de++){const ye=j[de],_e=G[de];for(let Te=0;Te<ye.length-1;Te++){const Ue=ye[Te],Le=[Ue,ye[Te+1],_e[Te+1],_e[Te],Ue];Ru(te,Le)&&(ie=Math.min(ie,e1(te,Le)))}}return ie!==1/0&&ie}(V[0],V[1],B)}},line:class extends Mn{constructor(i){super(i,i1),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ts,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,e){super.recalculate(i,e),this.paint._values["line-floorwidth"]=n1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new jc(i)}queryRadius(i){const e=i,n=r1(Ao("line-width",this,e),Ao("line-gap-width",this,e)),o=Ao("line-offset",this,e);return n/2+Math.abs(o)+Pl(this.paint.get("line-translate"))}queryIntersectsFeature(i,e,n,o,u,p,m){const I=Ll(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),p.angle,m),T=m/2*r1(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),C=this.paint.get("line-offset").evaluate(e,n);return C&&(o=function(L,B){const V=[];for(let G=0;G<L.length;G++){const j=L[G],te=[];for(let ie=0;ie<j.length;ie++){const de=j[ie-1],ye=j[ie],_e=j[ie+1],Te=ie===0?new Ae(0,0):ye.sub(de)._unit()._perp(),Ue=ie===j.length-1?new Ae(0,0):_e.sub(ye)._unit()._perp(),Le=Te._add(Ue)._unit(),ft=Le.x*Ue.x+Le.y*Ue.y;ft!==0&&Le._mult(1/ft),te.push(Le._mult(B)._add(ye))}V.push(te)}return V}(o,C*m)),function(L,B,V){for(let G=0;G<B.length;G++){const j=B[G];if(L.length>=3){for(let te=0;te<j.length;te++)if(Ta(L,j[te]))return!0}if(Ad(L,j,V))return!0}return!1}(I,o,T)}isTileClipped(){return!0}},symbol:Xl,background:class extends Mn{constructor(i){super(i,Qf)}},raster:class extends Mn{constructor(i){super(i,$f)}}};class ip{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const P1=63710088e-1;class qi{constructor(e,n){if(isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new qi(ee(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const n=Math.PI/180,o=this.lat*n,u=e.lat*n,p=Math.sin(o)*Math.sin(u)+Math.cos(o)*Math.cos(u)*Math.cos((e.lng-this.lng)*n);return P1*Math.acos(Math.min(p,1))}toBounds(e=0){const n=360*e/40075017,o=n/Math.cos(Math.PI/180*this.lat);return new Zs(new qi(this.lng-o,this.lat-n),new qi(this.lng+o,this.lat+n))}static convert(e){if(e instanceof qi)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new qi(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new qi(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Zs{constructor(e,n){e&&(n?this.setSouthWest(e).setNorthEast(n):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof qi?new qi(e.lng,e.lat):qi.convert(e),this}setSouthWest(e){return this._sw=e instanceof qi?new qi(e.lng,e.lat):qi.convert(e),this}extend(e){const n=this._sw,o=this._ne;let u,p;if(e instanceof qi)u=e,p=e;else{if(!(e instanceof Zs))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Zs.convert(e)):this.extend(qi.convert(e)):this;if(u=e._sw,p=e._ne,!u||!p)return this}return n||o?(n.lng=Math.min(u.lng,n.lng),n.lat=Math.min(u.lat,n.lat),o.lng=Math.max(p.lng,o.lng),o.lat=Math.max(p.lat,o.lat)):(this._sw=new qi(u.lng,u.lat),this._ne=new qi(p.lng,p.lat)),this}getCenter(){return new qi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new qi(this.getWest(),this.getNorth())}getSouthEast(){return new qi(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:o}=qi.convert(e);let u=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=o&&o<=this._ne.lat&&u}static convert(e){return e instanceof Zs?e:e&&new Zs(e)}}const L1=2*Math.PI*P1;function D1(i){return L1*Math.cos(i*Math.PI/180)}function B1(i){return(180+i)/360}function R1(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function F1(i,e){return i/D1(e)}function nu(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Kl{constructor(e,n,o=0){this.x=+e,this.y=+n,this.z=+o}static fromLngLat(e,n=0){const o=qi.convert(e);return new Kl(B1(o.lng),R1(o.lat),F1(n,o.lat))}toLngLat(){return new qi(360*this.x-180,nu(this.y))}toAltitude(){return this.z*D1(nu(this.y))}meterInMercatorCoordinateUnits(){return 1/L1*(e=nu(this.y),1/Math.cos(e*Math.PI/180));var e}}function O1(i,e,n){var o=2*Math.PI*6378137/256/Math.pow(2,n);return[i*o-2*Math.PI*6378137/2,e*o-2*Math.PI*6378137/2]}class ru{constructor(e,n,o){this.z=e,this.x=n,this.y=o,this.key=Vo(0,e,e,n,o)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,n,o){const u=(m=this.y,I=this.z,T=O1(256*(p=this.x),256*(m=Math.pow(2,I)-m-1),I),C=O1(256*(p+1),256*(m+1),I),T[0]+","+T[1]+","+C[0]+","+C[1]);var p,m,I,T,C;const L=function(B,V,G){let j,te="";for(let ie=B;ie>0;ie--)j=1<<ie-1,te+=(V&j?1:0)+(G&j?2:0);return te}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,u)}getTilePoint(e){const n=Math.pow(2,this.z);return new Ae((e.x*n-this.x)*sn,(e.y*n-this.y)*sn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class V1{constructor(e,n){this.wrap=e,this.canonical=n,this.key=Vo(e,n.z,n.z,n.x,n.y)}}class fr{constructor(e,n,o,u,p){this.overscaledZ=e,this.wrap=n,this.canonical=new ru(o,+u,+p),this.key=Vo(n,e,o,u,p)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const n=this.canonical.z-e;return e>this.canonical.z?new fr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fr(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(e,n){const o=this.canonical.z-e;return e>this.canonical.z?Vo(this.wrap*+n,e,this.canonical.z,this.canonical.x,this.canonical.y):Vo(this.wrap*+n,e,e,this.canonical.x>>o,this.canonical.y>>o)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const n=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>n&&e.canonical.y===this.canonical.y>>n}children(e){if(this.overscaledZ>=e)return[new fr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,o=2*this.canonical.x,u=2*this.canonical.y;return[new fr(n,this.wrap,n,o,u),new fr(n,this.wrap,n,o+1,u),new fr(n,this.wrap,n,o,u+1),new fr(n,this.wrap,n,o+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new fr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new fr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new V1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Kl(e.x-this.wrap,e.y))}}function Vo(i,e,n,o,u){(i*=2)<0&&(i=-1*i-1);const p=1<<n;return(p*p*i+p*u+o).toString(36)+n.toString(36)+e.toString(36)}dt("CanonicalTileID",ru),dt("OverscaledTileID",fr,{omit:["posMatrix"]});class U1{constructor(e,n,o){if(this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(o&&o!=="mapbox"&&o!=="terrarium")return void Pe(`"${o}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=n.height;const u=this.dim=n.height-2;this.data=new Uint32Array(n.data.buffer),this.encoding=o||"mapbox";for(let p=0;p<u;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(u,p)]=this.data[this._idx(u-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,u)]=this.data[this._idx(p,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]}get(e,n){const o=new Uint8Array(this.data.buffer),u=4*this._idx(e,n);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(o[u],o[u+1],o[u+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,n){if(e<-1||e>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(e+1)}_unpackMapbox(e,n,o){return(256*e*256+256*n+o)/10-1e4}_unpackTerrarium(e,n,o){return 256*e+n+o/256-32768}getPixels(){return new ir({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,n,o){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=n*this.dim,p=n*this.dim+this.dim,m=o*this.dim,I=o*this.dim+this.dim;switch(n){case-1:u=p-1;break;case 1:p=u+1}switch(o){case-1:m=I-1;break;case 1:I=m+1}const T=-n*this.dim,C=-o*this.dim;for(let L=m;L<I;L++)for(let B=u;B<p;B++)this.data[this._idx(B,L)]=e.data[this._idx(B+T,L+C)]}}dt("DEMData",U1);class N1{constructor(e){this._stringToNumber={},this._numberToString=[];for(let n=0;n<e.length;n++){const o=e[n];this._stringToNumber[o]=n,this._numberToString[n]=o}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class q1{constructor(e,n,o,u,p){this.type="Feature",this._vectorTileFeature=e,e._z=n,e._x=o,e._y=u,this.properties=e.properties,this.id=p}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&(e[n]=this[n]);return e}}class G1{constructor(e,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new jr(sn,16,0),this.grid3D=new jr(sn,16,0),this.featureIndexArray=new Kt,this.promoteId=n}insert(e,n,o,u,p,m){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,u,p);const T=m?this.grid3D:this.grid;for(let C=0;C<n.length;C++){const L=n[C],B=[1/0,1/0,-1/0,-1/0];for(let V=0;V<L.length;V++){const G=L[V];B[0]=Math.min(B[0],G.x),B[1]=Math.min(B[1],G.y),B[2]=Math.max(B[2],G.x),B[3]=Math.max(B[3],G.y)}B[0]<sn&&B[1]<sn&&B[2]>=0&&B[3]>=0&&T.insert(I,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ys.VectorTile(new Zc(this.rawTileData)).layers,this.sourceLayerCoder=new N1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,n,o,u){this.loadVTLayers();const p=e.params||{},m=sn/e.tileSize/e.scale,I=fa(p.filter),T=e.queryGeometry,C=e.queryPadding*m,L=Z1(T),B=this.grid.query(L.minX-C,L.minY-C,L.maxX+C,L.maxY+C),V=Z1(e.cameraQueryGeometry),G=this.grid3D.query(V.minX-C,V.minY-C,V.maxX+C,V.maxY+C,(ie,de,ye,_e)=>function(Te,Ue,Le,ft,yt){for(const ct of Te)if(Ue<=ct.x&&Le<=ct.y&&ft>=ct.x&&yt>=ct.y)return!0;const lt=[new Ae(Ue,Le),new Ae(Ue,yt),new Ae(ft,yt),new Ae(ft,Le)];if(Te.length>2){for(const ct of lt)if(Ta(Te,ct))return!0}for(let ct=0;ct<Te.length-1;ct++)if(Cd(Te[ct],Te[ct+1],lt))return!0;return!1}(e.cameraQueryGeometry,ie-C,de-C,ye+C,_e+C));for(const ie of G)B.push(ie);B.sort(np);const j={};let te;for(let ie=0;ie<B.length;ie++){const de=B[ie];if(de===te)continue;te=de;const ye=this.featureIndexArray.get(de);let _e=null;this.loadMatchingFeature(j,ye.bucketIndex,ye.sourceLayerIndex,ye.featureIndex,I,p.layers,p.availableImages,n,o,u,(Te,Ue,Le)=>(_e||(_e=Gs(Te)),Ue.queryIntersectsFeature(T,Te,Le,_e,this.z,e.transform,m,e.pixelPosMatrix)))}return j}loadMatchingFeature(e,n,o,u,p,m,I,T,C,L,B){const V=this.bucketLayerIDs[n];if(m&&!function(ie,de){for(let ye=0;ye<ie.length;ye++)if(de.indexOf(ie[ye])>=0)return!0;return!1}(m,V))return;const G=this.sourceLayerCoder.decode(o),j=this.vtLayers[G].feature(u);if(p.needGeometry){const ie=js(j,!0);if(!p.filter(new ki(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!p.filter(new ki(this.tileID.overscaledZ),j))return;const te=this.getId(j,G);for(let ie=0;ie<V.length;ie++){const de=V[ie];if(m&&m.indexOf(de)<0)continue;const ye=T[de];if(!ye)continue;let _e={};te&&L&&(_e=L.getState(ye.sourceLayer||"_geojsonTileLayer",te));const Te=ge({},C[de]);Te.paint=j1(Te.paint,ye.paint,j,_e,I),Te.layout=j1(Te.layout,ye.layout,j,_e,I);const Ue=!B||B(j,ye,_e);if(!Ue)continue;const Le=new q1(j,this.z,this.x,this.y,te);Le.layer=Te;let ft=e[de];ft===void 0&&(ft=e[de]=[]),ft.push({featureIndex:u,feature:Le,intersectionZ:Ue})}}lookupSymbolFeatures(e,n,o,u,p,m,I,T){const C={};this.loadVTLayers();const L=fa(p);for(const B of e)this.loadMatchingFeature(C,o,u,B,L,m,I,T,n);return C}hasLayer(e){for(const n of this.bucketLayerIDs)for(const o of n)if(e===o)return!0;return!1}getId(e,n){let o=e.id;return this.promoteId&&(o=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof o=="boolean"&&(o=Number(o))),o}}function j1(i,e,n,o,u){return me(i,(p,m)=>{const I=e instanceof ba?e.get(m):null;return I&&I.evaluate?I.evaluate(n,o,u):I})}function Z1(i){let e=1/0,n=1/0,o=-1/0,u=-1/0;for(const p of i)e=Math.min(e,p.x),n=Math.min(n,p.y),o=Math.max(o,p.x),u=Math.max(u,p.y);return{minX:e,minY:n,maxX:o,maxY:u}}function np(i,e){return e-i}var su;dt("FeatureIndex",G1,{omit:["rawTileData","sourceLayerCoder"]}),a.PerformanceMarkers=void 0,(su=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",su.load="load",su.fullLoad="fullLoad";let Yl=null,Uo=[];const au=1e3/30,rp={mark(i){performance.mark(i)},frame(i){const e=i;Yl!=null&&Uo.push(e-Yl),Yl=e},clearMetrics(){Yl=null,Uo=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const i in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[i])},getPerformanceMetrics(){performance.measure("loadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure("fullLoadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const i=performance.getEntriesByName("loadTime")[0].duration,e=performance.getEntriesByName("fullLoadTime")[0].duration,n=Uo.length,o=1/(Uo.reduce((p,m)=>p+m,0)/n/1e3),u=Uo.filter(p=>p>au).reduce((p,m)=>p+(m-au)/au,0);return{loadTime:i,fullLoadTime:e,fps:o,percentDroppedFrames:u/(n+u)*100}}};a.AJAXError=Pi,a.ARRAY_TYPE=ka,a.Actor=class{constructor(i,e,n){this.target=i,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},et(["receive","process"],this),this.invoker=new ip(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Qe()?i:window}send(i,e,n,o,u=!1){const p=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[p]=n);const m=pt(this.globalScope)?void 0:[];return this.target.postMessage({id:p,type:i,hasCallback:!!n,targetMapId:o,mustQueue:u,sourceMapId:this.mapId,data:Bs(e,m)},m),{cancel:()=>{n&&delete this.callbacks[p],this.target.postMessage({id:p,type:"<cancel>",targetMapId:o,sourceMapId:this.mapId})}}}receive(i){const e=i.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){delete this.tasks[n];const o=this.cancelCallbacks[n];delete this.cancelCallbacks[n],o&&o()}else Qe()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)}process(){if(!this.taskQueue.length)return;const i=this.taskQueue.shift(),e=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(i,e)}processTask(i,e){if(e.type==="<response>"){const n=this.callbacks[i];delete this.callbacks[i],n&&(e.error?n(Zr(e.error)):n(null,Zr(e.data)))}else{let n=!1;const o=pt(this.globalScope)?void 0:[],u=e.hasCallback?(I,T)=>{n=!0,delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:I?Bs(I):null,data:Bs(T,o)},o)}:I=>{n=!0};let p=null;const m=Zr(e.data);if(this.parent[e.type])p=this.parent[e.type](e.sourceMapId,m,u);else if(this.parent.getWorkerSource){const I=e.type.split(".");p=this.parent.getWorkerSource(e.sourceMapId,I[0],m.source)[I[1]](m,u)}else u(new Error(`Could not find function ${e.type}`));!n&&p&&p.cancel&&(this.cancelCallbacks[i]=p.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=Co,a.CanonicalTileID=ru,a.CollisionBoxArray=be,a.CollisionCircleLayoutArray=class extends P{},a.Color=D,a.DEMData=U1,a.DataConstantProperty=_t,a.DictionaryCoder=N1,a.EXTENT=sn,a.ErrorEvent=ar,a.EvaluationParameters=ki,a.Event=Hn,a.Evented=Cr,a.FeatureIndex=G1,a.FillBucket=Nc,a.FillExtrusionBucket=Gc,a.GeoJSONFeature=q1,a.ImageAtlas=f1,a.ImagePosition=Wc,a.LineBucket=jc,a.LineStripIndexArray=class extends pe{},a.LngLat=qi,a.LngLatBounds=Zs,a.MercatorCoordinate=Kl,a.ONE_EM=mn,a.OverscaledTileID=fr,a.PerformanceUtils=rp,a.PosArray=class extends ps{},a.Properties=nn,a.QuadTriangleArray=class extends q{},a.RGBAImage=ir,a.RasterBoundsArray=class extends Ns{},a.RequestPerformance=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},a.ResourceType=rr,a.SegmentVector=ei,a.SymbolBucket=Da,a.Transitionable=Io,a.TriangleIndexArray=Pn,a.Uniform1f=ms,a.Uniform1i=class extends dr{constructor(i,e){super(i,e),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},a.Uniform2f=class extends dr{constructor(i,e){super(i,e),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},a.Uniform3f=class extends dr{constructor(i,e){super(i,e),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},a.Uniform4f=Mu,a.UniformColor=Pu,a.UniformMatrix4f=class extends dr{constructor(i,e){super(i,e),this.current=Ed}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let e=1;e<16;e++)if(i[e]!==this.current[e]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},a.UnwrappedTileID=V1,a.ValidationError=st,a.ZoomHistory=Rs,a.addDynamicAttributes=Qc,a.asyncAll=function(i,e,n){if(!i.length)return n(null,[]);let o=i.length;const u=new Array(i.length);let p=null;i.forEach((m,I)=>{e(m,(T,C)=>{T&&(p=T),u[I]=C,--o==0&&n(p,u)})})},a.bezier=N,a.bindAll=et,a.cacheEntryPossiblyAdded=function(i){Yi++,Yi>Di&&(i.getActor().send("enforceCacheSizeLimit",hi),Yi=0)},a.clamp=F,a.clearTileCache=function(i){const e=caches.delete(kt);i&&e.catch(i).then(()=>i())},a.clipLine=E1,a.clone=function(i){var e=new ka(16);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},a.clone$1=Ee,a.collisionCircleLayout=wf,a.config=bi,a.create=function(){var i=new ka(16);return ka!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},a.createExpression=la,a.createFilter=fa,a.createLayout=rn,a.createStyleLayer=function(i){return i.type==="custom"?new ep(i):new tp[i.type](i)},a.dot=function(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]+i[3]*e[3]},a.ease=U,a.emitValidationErrors=wl,a.enforceCacheSizeLimit=function(i){Ii(),gi&&gi.then(e=>{e.keys().then(n=>{for(let o=0;o<n.length-i;o++)e.delete(n[o])})})},a.evaluateSizeForFeature=function(i,{uSize:e,uSizeT:n},{lowerSize:o,upperSize:u}){return i.kind==="source"?o/Qr:i.kind==="composite"?Ji(o/Qr,u/Qr,n):e},a.evaluateSizeForZoom=function(i,e){let n=0,o=0;if(i.kind==="constant")o=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:u,minZoom:p,maxZoom:m}=i,I=u?F(Fn.interpolationFactor(u,e,p,m),0,1):0;i.kind==="camera"?o=Ji(i.minSize,i.maxSize,I):n=I}return{uSizeT:n,uSize:o}},a.evaluateVariableOffset=A1,a.evented=fs,a.exported=De,a.exported$1=Ei,a.extend=ge,a.filterObject=Ve,a.getAnchorAlignment=Kc,a.getAnchorJustification=Jc,a.getArrayBuffer=bn,a.getImage=zr,a.getJSON=function(i,e){return Dn(ge(i,{type:"json"}),e)},a.getOverlapMode=iu,a.getRTLTextPluginStatus=So,a.getReferrer=xn,a.getVideo=function(i,e){const n=window.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let o=0;o<i.length;o++){const u=window.document.createElement("source");_r(i[o])||(n.crossOrigin="Anonymous"),u.src=i[o],n.appendChild(u)}return{cancel:()=>{}}},a.identity=Mc,a.invert=function(i,e){var n=e[0],o=e[1],u=e[2],p=e[3],m=e[4],I=e[5],T=e[6],C=e[7],L=e[8],B=e[9],V=e[10],G=e[11],j=e[12],te=e[13],ie=e[14],de=e[15],ye=n*I-o*m,_e=n*T-u*m,Te=n*C-p*m,Ue=o*T-u*I,Le=o*C-p*I,ft=u*C-p*T,yt=L*te-B*j,lt=L*ie-V*j,ct=L*de-G*j,nt=B*ie-V*te,ht=B*de-G*te,ut=V*de-G*ie,We=ye*ut-_e*ht+Te*nt+Ue*ct-Le*lt+ft*yt;return We?(i[0]=(I*ut-T*ht+C*nt)*(We=1/We),i[1]=(u*ht-o*ut-p*nt)*We,i[2]=(te*ft-ie*Le+de*Ue)*We,i[3]=(V*Le-B*ft-G*Ue)*We,i[4]=(T*ct-m*ut-C*lt)*We,i[5]=(n*ut-u*ct+p*lt)*We,i[6]=(ie*Te-j*ft-de*_e)*We,i[7]=(L*ft-V*Te+G*_e)*We,i[8]=(m*ht-I*ct+C*yt)*We,i[9]=(o*ct-n*ht-p*yt)*We,i[10]=(j*Le-te*Te+de*ye)*We,i[11]=(B*Te-L*Le-G*ye)*We,i[12]=(I*lt-m*nt-T*yt)*We,i[13]=(n*nt-o*lt+u*yt)*We,i[14]=(te*_e-j*Ue-ie*ye)*We,i[15]=(L*Ue-B*_e+V*ye)*We,i):null},a.isImageBitmap=bt,a.isSafari=pt,a.keysDifference=function(i,e){const n=[];for(const o in i)o in e||n.push(o);return n},a.lazyLoadRTLTextPlugin=function(){Xn.isLoading()||Xn.isLoaded()||So()!=="deferred"||ya()},a.makeRequest=Dn,a.mapObject=me,a.mercatorXfromLng=B1,a.mercatorYfromLat=R1,a.mercatorZfromAltitude=F1,a.mul=Ld,a.multiply=Uu,a.nextPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},a.number=Ji,a.ortho=function(i,e,n,o,u,p,m){var I=1/(e-n),T=1/(o-u),C=1/(p-m);return i[0]=-2*I,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*T,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*C,i[11]=0,i[12]=(e+n)*I,i[13]=(u+o)*T,i[14]=(m+p)*C,i[15]=1,i},a.parseCacheControl=ke,a.parseGlyphPBF=function(i){return new Zc(i).readFields(Lf,[])},a.pbf=Zc,a.performSymbolLayout=function(i,e,n,o,u,p,m){i.createArrays(),i.tilePixelRatio=sn/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const I=i.layers[0].layout,T=i.layers[0]._unevaluatedLayout._values,C={layoutIconSize:T["icon-size"].possiblyEvaluate(new ki(i.zoom+1),m),layoutTextSize:T["text-size"].possiblyEvaluate(new ki(i.zoom+1),m),textMaxSize:T["text-size"].possiblyEvaluate(new ki(18))};if(i.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:te}=i.textSizeData;C.compositeTextSizes=[T["text-size"].possiblyEvaluate(new ki(j),m),T["text-size"].possiblyEvaluate(new ki(te),m)]}if(i.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:te}=i.iconSizeData;C.compositeIconSizes=[T["icon-size"].possiblyEvaluate(new ki(j),m),T["icon-size"].possiblyEvaluate(new ki(te),m)]}const L=I.get("text-line-height")*mn,B=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point",V=I.get("text-keep-upright"),G=I.get("text-size");for(const j of i.features){const te=I.get("text-font").evaluate(j,{},m).join(","),ie=G.evaluate(j,{},m),de=C.layoutTextSize.evaluate(j,{},m),ye=C.layoutIconSize.evaluate(j,{},m),_e={horizontal:{},vertical:void 0},Te=j.text;let Ue,Le=[0,0];if(Te){const lt=Te.toString(),ct=I.get("text-letter-spacing").evaluate(j,{},m)*mn,nt=Sl(lt)?ct:0,ht=I.get("text-anchor").evaluate(j,{},m),ut=I.get("text-variable-anchor");if(!ut){const ai=I.get("text-radial-offset").evaluate(j,{},m);Le=ai?A1(ht,[ai*mn,Yc]):I.get("text-offset").evaluate(j,{},m).map(zi=>zi*mn)}let We=B?"center":I.get("text-justify").evaluate(j,{},m);const St=I.get("symbol-placement"),xt=St==="point"?I.get("text-max-width").evaluate(j,{},m)*mn:0,Wt=()=>{i.allowVerticalPlacement&&yo(lt)&&(_e.vertical=Nl(Te,e,n,u,te,xt,L,ht,"left",nt,Le,a.WritingMode.vertical,!0,St,de,ie))};if(!B&&ut){const ai=We==="auto"?ut.map(Ci=>Jc(Ci)):[We];let zi=!1;for(let Ci=0;Ci<ai.length;Ci++){const gn=ai[Ci];if(!_e.horizontal[gn])if(zi)_e.horizontal[gn]=_e.horizontal[0];else{const $i=Nl(Te,e,n,u,te,xt,L,"center",gn,nt,Le,a.WritingMode.horizontal,!1,St,de,ie);$i&&(_e.horizontal[gn]=$i,zi=$i.positionedLines.length===1)}}Wt()}else{We==="auto"&&(We=Jc(ht));const ai=Nl(Te,e,n,u,te,xt,L,ht,We,nt,Le,a.WritingMode.horizontal,!1,St,de,ie);ai&&(_e.horizontal[We]=ai),Wt(),yo(lt)&&B&&V&&(_e.vertical=Nl(Te,e,n,u,te,xt,L,ht,We,nt,Le,a.WritingMode.vertical,!1,St,de,ie))}}let ft=!1;if(j.icon&&j.icon.name){const lt=o[j.icon.name];lt&&(Ue=Vf(u[j.icon.name],I.get("icon-offset").evaluate(j,{},m),I.get("icon-anchor").evaluate(j,{},m)),ft=!!lt.sdf,i.sdfIcons===void 0?i.sdfIcons=ft:i.sdfIcons!==ft&&Pe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lt.pixelRatio!==i.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const yt=C1(_e.horizontal)||_e.vertical;i.iconsInText=!!yt&&yt.iconsInText,(yt||Ue)&&Hf(i,j,_e,Ue,o,C,de,ye,Le,ft,m)}p&&i.generateCollisionDebugBuffers()},a.perspective=function(i,e,n,o,u){var p,m=1/Math.tan(e/2);return i[0]=m/n,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=m,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,u!=null&&u!==1/0?(i[10]=(u+o)*(p=1/(o-u)),i[14]=2*u*o*p):(i[10]=-1,i[14]=-2*o),i},a.pick=function(i,e){const n={};for(let o=0;o<e.length;o++){const u=e[o];u in i&&(n[u]=i[u])}return n},a.plugin=Xn,a.pointGeometry=Ae,a.polygonIntersectsPolygon=Ru,a.potpack=d1,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=dt,a.registerForPluginStateChange=function(i){return i({pluginStatus:Cn,pluginURL:Pr}),fs.on("pluginStateChange",i),i},a.renderColorRamp=ju,a.rotateX=function(i,e,n){var o=Math.sin(n),u=Math.cos(n),p=e[4],m=e[5],I=e[6],T=e[7],C=e[8],L=e[9],B=e[10],V=e[11];return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[4]=p*u+C*o,i[5]=m*u+L*o,i[6]=I*u+B*o,i[7]=T*u+V*o,i[8]=C*u-p*o,i[9]=L*u-m*o,i[10]=B*u-I*o,i[11]=V*u-T*o,i},a.rotateZ=function(i,e,n){var o=Math.sin(n),u=Math.cos(n),p=e[0],m=e[1],I=e[2],T=e[3],C=e[4],L=e[5],B=e[6],V=e[7];return e!==i&&(i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=p*u+C*o,i[1]=m*u+L*o,i[2]=I*u+B*o,i[3]=T*u+V*o,i[4]=C*u-p*o,i[5]=L*u-m*o,i[6]=B*u-I*o,i[7]=V*u-T*o,i},a.scale=function(i,e,n){var o=n[0],u=n[1],p=n[2];return i[0]=e[0]*o,i[1]=e[1]*o,i[2]=e[2]*o,i[3]=e[3]*o,i[4]=e[4]*u,i[5]=e[5]*u,i[6]=e[6]*u,i[7]=e[7]*u,i[8]=e[8]*p,i[9]=e[9]*p,i[10]=e[10]*p,i[11]=e[11]*p,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},a.scale$1=function(i,e,n){return i[0]=e[0]*n,i[1]=e[1]*n,i[2]=e[2]*n,i[3]=e[3]*n,i},a.setCacheLimits=function(i,e){hi=i,Di=e},a.setRTLTextPlugin=function(i,e,n=!1){if(Cn===_a||Cn===vo||Cn===xo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Pr=De.resolveURL(i),Cn=_a,bo=e,wo(),n||ya()},a.spec=Se,a.sphericalToCartesian=function([i,e,n]){return e+=90,e*=Math.PI/180,n*=Math.PI/180,{x:i*Math.cos(e)*Math.sin(n),y:i*Math.sin(e)*Math.sin(n),z:i*Math.cos(n)}},a.toEvaluationFeature=js,a.transformMat4=Dl,a.translate=function(i,e,n){var o,u,p,m,I,T,C,L,B,V,G,j,te=n[0],ie=n[1],de=n[2];return e===i?(i[12]=e[0]*te+e[4]*ie+e[8]*de+e[12],i[13]=e[1]*te+e[5]*ie+e[9]*de+e[13],i[14]=e[2]*te+e[6]*ie+e[10]*de+e[14],i[15]=e[3]*te+e[7]*ie+e[11]*de+e[15]):(u=e[1],p=e[2],m=e[3],I=e[4],T=e[5],C=e[6],L=e[7],B=e[8],V=e[9],G=e[10],j=e[11],i[0]=o=e[0],i[1]=u,i[2]=p,i[3]=m,i[4]=I,i[5]=T,i[6]=C,i[7]=L,i[8]=B,i[9]=V,i[10]=G,i[11]=j,i[12]=o*te+I*ie+B*de+e[12],i[13]=u*te+T*ie+V*de+e[13],i[14]=p*te+C*ie+G*de+e[14],i[15]=m*te+L*ie+j*de+e[15]),i},a.triggerPluginCompletionEvent=Tl,a.unicodeBlockLookup=at,a.uniqueId=function(){return xe++},a.validateCustomStyleLayer=function(i){const e=[],n=i.id;return n===void 0&&e.push({message:`layers.${n}: missing required property "id"`}),i.render===void 0&&e.push({message:`layers.${n}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},a.validateLight=vc,a.validateStyle=Gr,a.vectorTile=ys,a.warnOnce=Pe,a.wrap=ee}),S(["./shared"],function(a){function A(X){const M=typeof X;if(M==="number"||M==="boolean"||M==="string"||X==null)return JSON.stringify(X);if(Array.isArray(X)){let Y="[";for(const J of X)Y+=`${A(J)},`;return`${Y}]`}const D=Object.keys(X).sort();let Z="{";for(let Y=0;Y<D.length;Y++)Z+=`${JSON.stringify(D[Y])}:${A(X[D[Y]])},`;return`${Z}}`}function O(X){let M="";for(const D of a.refProperties)M+=`/${A(X[D])}`;return M}class N{constructor(M){this.keyCache={},M&&this.replace(M)}replace(M){this._layerConfigs={},this._layers={},this.update(M,[])}update(M,D){for(const Y of M){this._layerConfigs[Y.id]=Y;const J=this._layers[Y.id]=a.createStyleLayer(Y);J._featureFilter=a.createFilter(J.filter),this.keyCache[Y.id]&&delete this.keyCache[Y.id]}for(const Y of D)delete this.keyCache[Y],delete this._layerConfigs[Y],delete this._layers[Y];this.familiesBySource={};const Z=function(Y,J){const se={};for(let re=0;re<Y.length;re++){const oe=J&&J[Y[re].id]||O(Y[re]);J&&(J[Y[re].id]=oe);let we=se[oe];we||(we=se[oe]=[]),we.push(Y[re])}const ne=[];for(const re in se)ne.push(se[re]);return ne}(Object.values(this._layerConfigs),this.keyCache);for(const Y of Z){const J=Y.map(Re=>this._layers[Re.id]),se=J[0];if(se.visibility==="none")continue;const ne=se.source||"";let re=this.familiesBySource[ne];re||(re=this.familiesBySource[ne]={});const oe=se.sourceLayer||"_geojsonTileLayer";let we=re[oe];we||(we=re[oe]=[]),we.push(J)}}}class U{constructor(M){const D={},Z=[];for(const ne in M){const re=M[ne],oe=D[ne]={};for(const we in re){const Re=re[+we];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;const ve={x:0,y:0,w:Re.bitmap.width+2,h:Re.bitmap.height+2};Z.push(ve),oe[we]={rect:ve,metrics:Re.metrics}}}const{w:Y,h:J}=a.potpack(Z),se=new a.AlphaImage({width:Y||1,height:J||1});for(const ne in M){const re=M[ne];for(const oe in re){const we=re[+oe];if(!we||we.bitmap.width===0||we.bitmap.height===0)continue;const Re=D[ne][oe].rect;a.AlphaImage.copy(we.bitmap,se,{x:0,y:0},{x:Re.x+1,y:Re.y+1},we.bitmap)}}this.image=se,this.positions=D}}a.register("GlyphAtlas",U);class F{constructor(M){this.tileID=new a.OverscaledTileID(M.tileID.overscaledZ,M.tileID.wrap,M.tileID.canonical.z,M.tileID.canonical.x,M.tileID.canonical.y),this.uid=M.uid,this.zoom=M.zoom,this.pixelRatio=M.pixelRatio,this.tileSize=M.tileSize,this.source=M.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=M.showCollisionBoxes,this.collectResourceTiming=!!M.collectResourceTiming,this.returnDependencies=!!M.returnDependencies,this.promoteId=M.promoteId}parse(M,D,Z,Y,J){this.status="parsing",this.data=M,this.collisionBoxArray=new a.CollisionBoxArray;const se=new a.DictionaryCoder(Object.keys(M.layers).sort()),ne=new a.FeatureIndex(this.tileID,this.promoteId);ne.bucketLayerIDs=[];const re={},oe={featureIndex:ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Z},we=D.familiesBySource[this.source];for(const At in we){const Ot=M.layers[At];if(!Ot)continue;Ot.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${At}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ft=se.encode(At),Zi=[];for(let Ui=0;Ui<Ot.length;Ui++){const on=Ot.feature(Ui),fn=ne.getId(on,At);Zi.push({feature:on,id:fn,index:Ui,sourceLayerIndex:Ft})}for(const Ui of we[At]){const on=Ui[0];on.minzoom&&this.zoom<Math.floor(on.minzoom)||on.maxzoom&&this.zoom>=on.maxzoom||on.visibility!=="none"&&(ee(Ui,this.zoom,Z),(re[on.id]=on.createBucket({index:ne.bucketLayerIDs.length,layers:Ui,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ft,sourceID:this.source})).populate(Zi,oe,this.tileID.canonical),ne.bucketLayerIDs.push(Ui.map(fn=>fn.id)))}}let Re,ve,mt,K;const Fe=a.mapObject(oe.glyphDependencies,At=>Object.keys(At).map(Number));Object.keys(Fe).length?Y.send("getGlyphs",{uid:this.uid,stacks:Fe},(At,Ot)=>{Re||(Re=At,ve=Ot,Bt.call(this))}):ve={};const rt=Object.keys(oe.iconDependencies);rt.length?Y.send("getImages",{icons:rt,source:this.source,tileID:this.tileID,type:"icons"},(At,Ot)=>{Re||(Re=At,mt=Ot,Bt.call(this))}):mt={};const Ct=Object.keys(oe.patternDependencies);function Bt(){if(Re)return J(Re);if(ve&&mt&&K){const At=new U(ve),Ot=new a.ImageAtlas(mt,K);for(const Ft in re){const Zi=re[Ft];Zi instanceof a.SymbolBucket?(ee(Zi.layers,this.zoom,Z),a.performSymbolLayout(Zi,ve,At.positions,mt,Ot.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Zi.hasPattern&&(Zi instanceof a.LineBucket||Zi instanceof a.FillBucket||Zi instanceof a.FillExtrusionBucket)&&(ee(Zi.layers,this.zoom,Z),Zi.addFeatures(oe,this.tileID.canonical,Ot.patternPositions))}this.status="done",J(null,{buckets:Object.values(re).filter(Ft=>!Ft.isEmpty()),featureIndex:ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:At.image,imageAtlas:Ot,glyphMap:this.returnDependencies?ve:null,iconMap:this.returnDependencies?mt:null,glyphPositions:this.returnDependencies?At.positions:null})}}Ct.length?Y.send("getImages",{icons:Ct,source:this.source,tileID:this.tileID,type:"patterns"},(At,Ot)=>{Re||(Re=At,K=Ot,Bt.call(this))}):K={},Bt.call(this)}}function ee(X,M,D){const Z=new a.EvaluationParameters(M);for(const Y of X)Y.recalculate(Z,D)}function ge(X,M){const D=a.getArrayBuffer(X.request,(Z,Y,J,se)=>{Z?M(Z):Y&&M(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Y)),rawData:Y,cacheControl:J,expires:se})});return()=>{D.cancel(),M()}}class xe{constructor(M,D,Z,Y){this.actor=M,this.layerIndex=D,this.availableImages=Z,this.loadVectorData=Y||ge,this.loading={},this.loaded={}}loadTile(M,D){const Z=M.uid;this.loading||(this.loading={});const Y=!!(M&&M.request&&M.request.collectResourceTiming)&&new a.RequestPerformance(M.request),J=this.loading[Z]=new F(M);J.abort=this.loadVectorData(M,(se,ne)=>{if(delete this.loading[Z],se||!ne)return J.status="done",this.loaded[Z]=J,D(se);const re=ne.rawData,oe={};ne.expires&&(oe.expires=ne.expires),ne.cacheControl&&(oe.cacheControl=ne.cacheControl);const we={};if(Y){const Re=Y.finish();Re&&(we.resourceTiming=JSON.parse(JSON.stringify(Re)))}J.vectorTile=ne.vectorTile,J.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,(Re,ve)=>{if(Re||!ve)return D(Re);D(null,a.extend({rawTileData:re.slice(0)},ve,oe,we))}),this.loaded=this.loaded||{},this.loaded[Z]=J})}reloadTile(M,D){const Z=this.loaded,Y=M.uid,J=this;if(Z&&Z[Y]){const se=Z[Y];se.showCollisionBoxes=M.showCollisionBoxes;const ne=(re,oe)=>{const we=se.reloadCallback;we&&(delete se.reloadCallback,se.parse(se.vectorTile,J.layerIndex,this.availableImages,J.actor,we)),D(re,oe)};se.status==="parsing"?se.reloadCallback=ne:se.status==="done"&&(se.vectorTile?se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,ne):ne())}}abortTile(M,D){const Z=this.loading,Y=M.uid;Z&&Z[Y]&&Z[Y].abort&&(Z[Y].abort(),delete Z[Y]),D()}removeTile(M,D){const Z=this.loaded,Y=M.uid;Z&&Z[Y]&&delete Z[Y],D()}}class et{constructor(){this.loaded={}}loadTile(M,D){const{uid:Z,encoding:Y,rawImageData:J}=M,se=a.isImageBitmap(J)?this.getImageData(J):J,ne=new a.DEMData(Z,se,Y);this.loaded=this.loaded||{},this.loaded[Z]=ne,D(null,ne)}getImageData(M){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(M.width,M.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=M.width,this.offscreenCanvas.height=M.height,this.offscreenCanvasContext.drawImage(M,0,0,M.width,M.height);const D=this.offscreenCanvasContext.getImageData(-1,-1,M.width+2,M.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:D.width,height:D.height},D.data)}removeTile(M){const D=this.loaded,Z=M.uid;D&&D[Z]&&delete D[Z]}}var me=function X(M,D){var Z,Y=M&&M.type;if(Y==="FeatureCollection")for(Z=0;Z<M.features.length;Z++)X(M.features[Z],D);else if(Y==="GeometryCollection")for(Z=0;Z<M.geometries.length;Z++)X(M.geometries[Z],D);else if(Y==="Feature")X(M.geometry,D);else if(Y==="Polygon")Ve(M.coordinates,D);else if(Y==="MultiPolygon")for(Z=0;Z<M.coordinates.length;Z++)Ve(M.coordinates[Z],D);return M};function Ve(X,M){if(X.length!==0){Ee(X[0],M);for(var D=1;D<X.length;D++)Ee(X[D],!M)}}function Ee(X,M){for(var D=0,Z=0,Y=0,J=X.length,se=J-1;Y<J;se=Y++){var ne=(X[Y][0]-X[se][0])*(X[se][1]+X[Y][1]),re=D+ne;Z+=Math.abs(D)>=Math.abs(ne)?D-re+ne:ne-re+D,D=re}D+Z>=0!=!!M&&X.reverse()}const fe=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Pe{constructor(M){this._feature=M,this.extent=a.EXTENT,this.type=M.type,this.properties=M.tags,"id"in M&&!isNaN(M.id)&&(this.id=parseInt(M.id,10))}loadGeometry(){if(this._feature.type===1){const M=[];for(const D of this._feature.geometry)M.push([new a.pointGeometry(D[0],D[1])]);return M}{const M=[];for(const D of this._feature.geometry){const Z=[];for(const Y of D)Z.push(new a.pointGeometry(Y[0],Y[1]));M.push(Z)}return M}}toGeoJSON(M,D,Z){return fe.call(this,M,D,Z)}}class He{constructor(M){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=M.length,this._features=M}feature(M){return new Pe(this._features[M])}}var Be={exports:{}},Qe=a.pointGeometry,ke=a.vectorTile.VectorTileFeature,Xe=It;function It(X,M){this.options=M||{},this.features=X,this.length=X.length}function vt(X,M){this.id=typeof X.id=="number"?X.id:void 0,this.type=X.type,this.rawGeometry=X.type===1?[X.geometry]:X.geometry,this.properties=X.tags,this.extent=M||4096}It.prototype.feature=function(X){return new vt(this.features[X],this.options.extent)},vt.prototype.loadGeometry=function(){var X=this.rawGeometry;this.geometry=[];for(var M=0;M<X.length;M++){for(var D=X[M],Z=[],Y=0;Y<D.length;Y++)Z.push(new Qe(D[Y][0],D[Y][1]));this.geometry.push(Z)}return this.geometry},vt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var X=this.geometry,M=1/0,D=-1/0,Z=1/0,Y=-1/0,J=0;J<X.length;J++)for(var se=X[J],ne=0;ne<se.length;ne++){var re=se[ne];M=Math.min(M,re.x),D=Math.max(D,re.x),Z=Math.min(Z,re.y),Y=Math.max(Y,re.y)}return[M,Z,D,Y]},vt.prototype.toGeoJSON=ke.prototype.toGeoJSON;var pt=a.pbf,bt=Xe;function De(X){var M=new pt;return function(D,Z){for(var Y in D.layers)Z.writeMessage(3,Ae,D.layers[Y])}(X,M),M.finish()}function Ae(X,M){var D;M.writeVarintField(15,X.version||1),M.writeStringField(1,X.name||""),M.writeVarintField(5,X.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(D=0;D<X.length;D++)Z.feature=X.feature(D),M.writeMessage(2,li,Z);var Y=Z.keys;for(D=0;D<Y.length;D++)M.writeStringField(3,Y[D]);var J=Z.values;for(D=0;D<J.length;D++)M.writeMessage(4,hi,J[D])}function li(X,M){var D=X.feature;D.id!==void 0&&M.writeVarintField(1,D.id),M.writeMessage(2,bi,X),M.writeVarintField(3,D.type),M.writeMessage(4,Mi,D)}function bi(X,M){var D=X.feature,Z=X.keys,Y=X.values,J=X.keycache,se=X.valuecache;for(var ne in D.properties){var re=D.properties[ne],oe=J[ne];if(re!==null){oe===void 0&&(Z.push(ne),J[ne]=oe=Z.length-1),M.writeVarint(oe);var we=typeof re;we!=="string"&&we!=="boolean"&&we!=="number"&&(re=JSON.stringify(re));var Re=we+":"+re,ve=se[Re];ve===void 0&&(Y.push(re),se[Re]=ve=Y.length-1),M.writeVarint(ve)}}}function kt(X,M){return(M<<3)+(7&X)}function gi(X){return X<<1^X>>31}function Mi(X,M){for(var D=X.loadGeometry(),Z=X.type,Y=0,J=0,se=D.length,ne=0;ne<se;ne++){var re=D[ne],oe=1;Z===1&&(oe=re.length),M.writeVarint(kt(1,oe));for(var we=Z===3?re.length-1:re.length,Re=0;Re<we;Re++){Re===1&&Z!==1&&M.writeVarint(kt(2,we-1));var ve=re[Re].x-Y,mt=re[Re].y-J;M.writeVarint(gi(ve)),M.writeVarint(gi(mt)),Y+=ve,J+=mt}Z===3&&M.writeVarint(kt(7,1))}}function hi(X,M){var D=typeof X;D==="string"?M.writeStringField(1,X):D==="boolean"?M.writeBooleanField(7,X):D==="number"&&(X%1!=0?M.writeDoubleField(3,X):X<0?M.writeSVarintField(6,X):M.writeVarintField(5,X))}Be.exports=De,Be.exports.fromVectorTileJs=De,Be.exports.fromGeojsonVt=function(X,M){M=M||{};var D={};for(var Z in X)D[Z]=new bt(X[Z].features,M),D[Z].name=Z,D[Z].version=M.version,D[Z].extent=M.extent;return De({layers:D})},Be.exports.GeoJSONWrapper=bt;var Di=Be.exports;function Ii(X,M,D,Z,Y,J){if(Y-Z<=D)return;const se=Z+Y>>1;Yi(X,M,se,Z,Y,J%2),Ii(X,M,D,Z,se-1,J+1),Ii(X,M,D,se+1,Y,J+1)}function Yi(X,M,D,Z,Y,J){for(;Y>Z;){if(Y-Z>600){const oe=Y-Z+1,we=D-Z+1,Re=Math.log(oe),ve=.5*Math.exp(2*Re/3),mt=.5*Math.sqrt(Re*ve*(oe-ve)/oe)*(we-oe/2<0?-1:1);Yi(X,M,D,Math.max(Z,Math.floor(D-we*ve/oe+mt)),Math.min(Y,Math.floor(D+(oe-we)*ve/oe+mt)),J)}const se=M[2*D+J];let ne=Z,re=Y;for(Ei(X,M,Z,D),M[2*Y+J]>se&&Ei(X,M,Z,Y);ne<re;){for(Ei(X,M,ne,re),ne++,re--;M[2*ne+J]<se;)ne++;for(;M[2*re+J]>se;)re--}M[2*Z+J]===se?Ei(X,M,Z,re):(re++,Ei(X,M,re,Y)),re<=D&&(Z=re+1),D<=re&&(Y=re-1)}}function Ei(X,M,D,Z){ji(X,D,Z),ji(M,2*D,2*Z),ji(M,2*D+1,2*Z+1)}function ji(X,M,D){const Z=X[M];X[M]=X[D],X[D]=Z}function Ze(X,M,D,Z){const Y=X-D,J=M-Z;return Y*Y+J*J}const Ce=X=>X[0],Zt=X=>X[1];class Bi{constructor(M,D=Ce,Z=Zt,Y=64,J=Float64Array){this.nodeSize=Y,this.points=M;const se=M.length<65536?Uint16Array:Uint32Array,ne=this.ids=new se(M.length),re=this.coords=new J(2*M.length);for(let oe=0;oe<M.length;oe++)ne[oe]=oe,re[2*oe]=D(M[oe]),re[2*oe+1]=Z(M[oe]);Ii(ne,re,Y,0,ne.length-1,0)}range(M,D,Z,Y){return function(J,se,ne,re,oe,we,Re){const ve=[0,J.length-1,0],mt=[];let K,Fe;for(;ve.length;){const rt=ve.pop(),Ct=ve.pop(),Bt=ve.pop();if(Ct-Bt<=Re){for(let Ft=Bt;Ft<=Ct;Ft++)K=se[2*Ft],Fe=se[2*Ft+1],K>=ne&&K<=oe&&Fe>=re&&Fe<=we&&mt.push(J[Ft]);continue}const At=Math.floor((Bt+Ct)/2);K=se[2*At],Fe=se[2*At+1],K>=ne&&K<=oe&&Fe>=re&&Fe<=we&&mt.push(J[At]);const Ot=(rt+1)%2;(rt===0?ne<=K:re<=Fe)&&(ve.push(Bt),ve.push(At-1),ve.push(Ot)),(rt===0?oe>=K:we>=Fe)&&(ve.push(At+1),ve.push(Ct),ve.push(Ot))}return mt}(this.ids,this.coords,M,D,Z,Y,this.nodeSize)}within(M,D,Z){return function(Y,J,se,ne,re,oe){const we=[0,Y.length-1,0],Re=[],ve=re*re;for(;we.length;){const mt=we.pop(),K=we.pop(),Fe=we.pop();if(K-Fe<=oe){for(let Ot=Fe;Ot<=K;Ot++)Ze(J[2*Ot],J[2*Ot+1],se,ne)<=ve&&Re.push(Y[Ot]);continue}const rt=Math.floor((Fe+K)/2),Ct=J[2*rt],Bt=J[2*rt+1];Ze(Ct,Bt,se,ne)<=ve&&Re.push(Y[rt]);const At=(mt+1)%2;(mt===0?se-re<=Ct:ne-re<=Bt)&&(we.push(Fe),we.push(rt-1),we.push(At)),(mt===0?se+re>=Ct:ne+re>=Bt)&&(we.push(rt+1),we.push(K),we.push(At))}return Re}(this.ids,this.coords,M,D,Z,this.nodeSize)}}const rr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:X=>X},Pi=Math.fround||(xn=new Float32Array(1),X=>(xn[0]=+X,xn[0]));var xn;class Qn{constructor(M){this.options=Vt(Object.create(rr),M),this.trees=new Array(this.options.maxZoom+1)}load(M){const{log:D,minZoom:Z,maxZoom:Y,nodeSize:J}=this.options;D&&console.time("total time");const se=`prepare ${M.length} points`;D&&console.time(se),this.points=M;let ne=[];for(let re=0;re<M.length;re++)M[re].geometry&&ne.push(bn(M[re],re));this.trees[Y+1]=new Bi(ne,sr,Hn,J,Float32Array),D&&console.timeEnd(se);for(let re=Y;re>=Z;re--){const oe=+Date.now();ne=this._cluster(ne,re),this.trees[re]=new Bi(ne,sr,Hn,J,Float32Array),D&&console.log("z%d: %d clusters in %dms",re,ne.length,+Date.now()-oe)}return D&&console.timeEnd("total time"),this}getClusters(M,D){let Z=((M[0]+180)%360+360)%360-180;const Y=Math.max(-90,Math.min(90,M[1]));let J=M[2]===180?180:((M[2]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,M[3]));if(M[2]-M[0]>=360)Z=-180,J=180;else if(Z>J){const we=this.getClusters([Z,Y,180,se],D),Re=this.getClusters([-180,Y,J,se],D);return we.concat(Re)}const ne=this.trees[this._limitZoom(D)],re=ne.range(vi(Z),hn(se),vi(J),hn(Y)),oe=[];for(const we of re){const Re=ne.points[we];oe.push(Re.numPoints?_r(Re):this.points[Re.index])}return oe}getChildren(M){const D=this._getOriginId(M),Z=this._getOriginZoom(M),Y="No cluster with the specified id.",J=this.trees[Z];if(!J)throw new Error(Y);const se=J.points[D];if(!se)throw new Error(Y);const ne=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),re=J.within(se.x,se.y,ne),oe=[];for(const we of re){const Re=J.points[we];Re.parentId===M&&oe.push(Re.numPoints?_r(Re):this.points[Re.index])}if(oe.length===0)throw new Error(Y);return oe}getLeaves(M,D,Z){const Y=[];return this._appendLeaves(Y,M,D=D||10,Z=Z||0,0),Y}getTile(M,D,Z){const Y=this.trees[this._limitZoom(M)],J=Math.pow(2,M),{extent:se,radius:ne}=this.options,re=ne/se,oe=(Z-re)/J,we=(Z+1+re)/J,Re={features:[]};return this._addTileFeatures(Y.range((D-re)/J,oe,(D+1+re)/J,we),Y.points,D,Z,J,Re),D===0&&this._addTileFeatures(Y.range(1-re/J,oe,1,we),Y.points,J,Z,J,Re),D===J-1&&this._addTileFeatures(Y.range(0,oe,re/J,we),Y.points,-1,Z,J,Re),Re.features.length?Re:null}getClusterExpansionZoom(M){let D=this._getOriginZoom(M)-1;for(;D<=this.options.maxZoom;){const Z=this.getChildren(M);if(D++,Z.length!==1)break;M=Z[0].properties.cluster_id}return D}_appendLeaves(M,D,Z,Y,J){const se=this.getChildren(D);for(const ne of se){const re=ne.properties;if(re&&re.cluster?J+re.point_count<=Y?J+=re.point_count:J=this._appendLeaves(M,re.cluster_id,Z,Y,J):J<Y?J++:M.push(ne),M.length===Z)break}return J}_addTileFeatures(M,D,Z,Y,J,se){for(const ne of M){const re=D[ne],oe=re.numPoints;let we,Re,ve;if(oe)we=qe(re),Re=re.x,ve=re.y;else{const Fe=this.points[re.index];we=Fe.properties,Re=vi(Fe.geometry.coordinates[0]),ve=hn(Fe.geometry.coordinates[1])}const mt={type:1,geometry:[[Math.round(this.options.extent*(Re*J-Z)),Math.round(this.options.extent*(ve*J-Y))]],tags:we};let K;oe?K=re.id:this.options.generateId?K=re.index:this.points[re.index].id&&(K=this.points[re.index].id),K!==void 0&&(mt.id=K),se.features.push(mt)}}_limitZoom(M){return Math.max(this.options.minZoom,Math.min(+M,this.options.maxZoom+1))}_cluster(M,D){const Z=[],{radius:Y,extent:J,reduce:se,minPoints:ne}=this.options,re=Y/(J*Math.pow(2,D));for(let oe=0;oe<M.length;oe++){const we=M[oe];if(we.zoom<=D)continue;we.zoom=D;const Re=this.trees[D+1],ve=Re.within(we.x,we.y,re),mt=we.numPoints||1;let K=mt;for(const Fe of ve){const rt=Re.points[Fe];rt.zoom>D&&(K+=rt.numPoints||1)}if(K>mt&&K>=ne){let Fe=we.x*mt,rt=we.y*mt,Ct=se&&mt>1?this._map(we,!0):null;const Bt=(oe<<5)+(D+1)+this.points.length;for(const At of ve){const Ot=Re.points[At];if(Ot.zoom<=D)continue;Ot.zoom=D;const Ft=Ot.numPoints||1;Fe+=Ot.x*Ft,rt+=Ot.y*Ft,Ot.parentId=Bt,se&&(Ct||(Ct=this._map(we,!0)),se(Ct,this._map(Ot)))}we.parentId=Bt,Z.push(Dn(Fe/K,rt/K,Bt,K,Ct))}else if(Z.push(we),K>1)for(const Fe of ve){const rt=Re.points[Fe];rt.zoom<=D||(rt.zoom=D,Z.push(rt))}}return Z}_getOriginId(M){return M-this.points.length>>5}_getOriginZoom(M){return(M-this.points.length)%32}_map(M,D){if(M.numPoints)return D?Vt({},M.properties):M.properties;const Z=this.points[M.index].properties,Y=this.options.map(Z);return D&&Y===Z?Vt({},Y):Y}}function Dn(X,M,D,Z,Y){return{x:Pi(X),y:Pi(M),zoom:1/0,id:D,parentId:-1,numPoints:Z,properties:Y}}function bn(X,M){const[D,Z]=X.geometry.coordinates;return{x:Pi(vi(D)),y:Pi(hn(Z)),zoom:1/0,index:M,parentId:-1}}function _r(X){return{type:"Feature",id:X.id,properties:qe(X),geometry:{type:"Point",coordinates:[(M=X.x,360*(M-.5)),zr(X.y)]}};var M}function qe(X){const M=X.numPoints,D=M>=1e4?`${Math.round(M/1e3)}k`:M>=1e3?Math.round(M/100)/10+"k":M;return Vt(Vt({},X.properties),{cluster:!0,cluster_id:X.id,point_count:M,point_count_abbreviated:D})}function vi(X){return X/360+.5}function hn(X){const M=Math.sin(X*Math.PI/180),D=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return D<0?0:D>1?1:D}function zr(X){const M=(180-360*X)*Math.PI/180;return 360*Math.atan(Math.exp(M))/Math.PI-90}function Vt(X,M){for(const D in M)X[D]=M[D];return X}function sr(X){return X.x}function Hn(X){return X.y}function ar(X,M,D,Z){for(var Y,J=Z,se=D-M>>1,ne=D-M,re=X[M],oe=X[M+1],we=X[D],Re=X[D+1],ve=M+3;ve<D;ve+=3){var mt=Cr(X[ve],X[ve+1],re,oe,we,Re);if(mt>J)Y=ve,J=mt;else if(mt===J){var K=Math.abs(ve-se);K<ne&&(Y=ve,ne=K)}}J>Z&&(Y-M>3&&ar(X,M,Y,Z),X[Y+2]=J,D-Y>3&&ar(X,Y,D,Z))}function Cr(X,M,D,Z,Y,J){var se=Y-D,ne=J-Z;if(se!==0||ne!==0){var re=((X-D)*se+(M-Z)*ne)/(se*se+ne*ne);re>1?(D=Y,Z=J):re>0&&(D+=se*re,Z+=ne*re)}return(se=X-D)*se+(ne=M-Z)*ne}function Se(X,M,D,Z){var Y={id:X===void 0?null:X,type:M,geometry:D,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(J){var se=J.geometry,ne=J.type;if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")st(J,se);else if(ne==="Polygon"||ne==="MultiLineString")for(var re=0;re<se.length;re++)st(J,se[re]);else if(ne==="MultiPolygon")for(re=0;re<se.length;re++)for(var oe=0;oe<se[re].length;oe++)st(J,se[re][oe])}(Y),Y}function st(X,M){for(var D=0;D<M.length;D+=3)X.minX=Math.min(X.minX,M[D]),X.minY=Math.min(X.minY,M[D+1]),X.maxX=Math.max(X.maxX,M[D]),X.maxY=Math.max(X.maxY,M[D+1])}function yr(X,M,D,Z){if(M.geometry){var Y=M.geometry.coordinates,J=M.geometry.type,se=Math.pow(D.tolerance/((1<<D.maxZoom)*D.extent),2),ne=[],re=M.id;if(D.promoteId?re=M.properties[D.promoteId]:D.generateId&&(re=Z||0),J==="Point")Wn(Y,ne);else if(J==="MultiPoint")for(var oe=0;oe<Y.length;oe++)Wn(Y[oe],ne);else if(J==="LineString")ri(Y,ne,se,!1);else if(J==="MultiLineString"){if(D.lineMetrics){for(oe=0;oe<Y.length;oe++)ri(Y[oe],ne=[],se,!1),X.push(Se(re,"LineString",ne,M.properties));return}Xt(Y,ne,se,!1)}else if(J==="Polygon")Xt(Y,ne,se,!0);else{if(J!=="MultiPolygon"){if(J==="GeometryCollection"){for(oe=0;oe<M.geometry.geometries.length;oe++)yr(X,{id:re,geometry:M.geometry.geometries[oe],properties:M.properties},D,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(oe=0;oe<Y.length;oe++){var we=[];Xt(Y[oe],we,se,!0),ne.push(we)}}X.push(Se(re,J,ne,M.properties))}}function Wn(X,M){M.push(Fi(X[0])),M.push($n(X[1])),M.push(0)}function ri(X,M,D,Z){for(var Y,J,se=0,ne=0;ne<X.length;ne++){var re=Fi(X[ne][0]),oe=$n(X[ne][1]);M.push(re),M.push(oe),M.push(0),ne>0&&(se+=Z?(Y*oe-re*J)/2:Math.sqrt(Math.pow(re-Y,2)+Math.pow(oe-J,2))),Y=re,J=oe}var we=M.length-3;M[2]=1,ar(M,0,we,D),M[we+2]=1,M.size=Math.abs(se),M.start=0,M.end=M.size}function Xt(X,M,D,Z){for(var Y=0;Y<X.length;Y++){var J=[];ri(X[Y],J,D,Z),M.push(J)}}function Fi(X){return X/360+.5}function $n(X){var M=Math.sin(X*Math.PI/180),D=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return D<0?0:D>1?1:D}function ci(X,M,D,Z,Y,J,se,ne){if(Z/=M,J>=(D/=M)&&se<Z)return X;if(se<D||J>=Z)return null;for(var re=[],oe=0;oe<X.length;oe++){var we=X[oe],Re=we.geometry,ve=we.type,mt=Y===0?we.minX:we.minY,K=Y===0?we.maxX:we.maxY;if(mt>=D&&K<Z)re.push(we);else if(!(K<D||mt>=Z)){var Fe=[];if(ve==="Point"||ve==="MultiPoint")tt(Re,Fe,D,Z,Y);else if(ve==="LineString")Pt(Re,Fe,D,Z,Y,!1,ne.lineMetrics);else if(ve==="MultiLineString")dn(Re,Fe,D,Z,Y,!1);else if(ve==="Polygon")dn(Re,Fe,D,Z,Y,!0);else if(ve==="MultiPolygon")for(var rt=0;rt<Re.length;rt++){var Ct=[];dn(Re[rt],Ct,D,Z,Y,!0),Ct.length&&Fe.push(Ct)}if(Fe.length){if(ne.lineMetrics&&ve==="LineString"){for(rt=0;rt<Fe.length;rt++)re.push(Se(we.id,ve,Fe[rt],we.tags));continue}ve!=="LineString"&&ve!=="MultiLineString"||(Fe.length===1?(ve="LineString",Fe=Fe[0]):ve="MultiLineString"),ve!=="Point"&&ve!=="MultiPoint"||(ve=Fe.length===3?"Point":"MultiPoint"),re.push(Se(we.id,ve,Fe,we.tags))}}}return re.length?re:null}function tt(X,M,D,Z,Y){for(var J=0;J<X.length;J+=3){var se=X[J+Y];se>=D&&se<=Z&&(M.push(X[J]),M.push(X[J+1]),M.push(X[J+2]))}}function Pt(X,M,D,Z,Y,J,se){for(var ne,re,oe=Lt(X),we=Y===0?Dt:vr,Re=X.start,ve=0;ve<X.length-3;ve+=3){var mt=X[ve],K=X[ve+1],Fe=X[ve+2],rt=X[ve+3],Ct=X[ve+4],Bt=Y===0?mt:K,At=Y===0?rt:Ct,Ot=!1;se&&(ne=Math.sqrt(Math.pow(mt-rt,2)+Math.pow(K-Ct,2))),Bt<D?At>D&&(re=we(oe,mt,K,rt,Ct,D),se&&(oe.start=Re+ne*re)):Bt>Z?At<Z&&(re=we(oe,mt,K,rt,Ct,Z),se&&(oe.start=Re+ne*re)):an(oe,mt,K,Fe),At<D&&Bt>=D&&(re=we(oe,mt,K,rt,Ct,D),Ot=!0),At>Z&&Bt<=Z&&(re=we(oe,mt,K,rt,Ct,Z),Ot=!0),!J&&Ot&&(se&&(oe.end=Re+ne*re),M.push(oe),oe=Lt(X)),se&&(Re+=ne)}var Ft=X.length-3;mt=X[Ft],K=X[Ft+1],Fe=X[Ft+2],(Bt=Y===0?mt:K)>=D&&Bt<=Z&&an(oe,mt,K,Fe),Ft=oe.length-3,J&&Ft>=3&&(oe[Ft]!==oe[0]||oe[Ft+1]!==oe[1])&&an(oe,oe[0],oe[1],oe[2]),oe.length&&M.push(oe)}function Lt(X){var M=[];return M.size=X.size,M.start=X.start,M.end=X.end,M}function dn(X,M,D,Z,Y,J){for(var se=0;se<X.length;se++)Pt(X[se],M,D,Z,Y,J,!1)}function an(X,M,D,Z){X.push(M),X.push(D),X.push(Z)}function Dt(X,M,D,Z,Y,J){var se=(J-M)/(Z-M);return X.push(J),X.push(D+(Y-D)*se),X.push(1),se}function vr(X,M,D,Z,Y,J){var se=(J-D)/(Y-D);return X.push(M+(Z-M)*se),X.push(J),X.push(1),se}function Bn(X,M){for(var D=[],Z=0;Z<X.length;Z++){var Y,J=X[Z],se=J.type;if(se==="Point"||se==="MultiPoint"||se==="LineString")Y=er(J.geometry,M);else if(se==="MultiLineString"||se==="Polygon"){Y=[];for(var ne=0;ne<J.geometry.length;ne++)Y.push(er(J.geometry[ne],M))}else if(se==="MultiPolygon")for(Y=[],ne=0;ne<J.geometry.length;ne++){for(var re=[],oe=0;oe<J.geometry[ne].length;oe++)re.push(er(J.geometry[ne][oe],M));Y.push(re)}D.push(Se(J.id,se,Y,J.tags))}return D}function er(X,M){var D=[];D.size=X.size,X.start!==void 0&&(D.start=X.start,D.end=X.end);for(var Z=0;Z<X.length;Z+=3)D.push(X[Z]+M,X[Z+1],X[Z+2]);return D}function Oi(X,M){if(X.transformed)return X;var D,Z,Y,J=1<<X.z,se=X.x,ne=X.y;for(D=0;D<X.features.length;D++){var re=X.features[D],oe=re.geometry,we=re.type;if(re.geometry=[],we===1)for(Z=0;Z<oe.length;Z+=2)re.geometry.push(ui(oe[Z],oe[Z+1],M,J,se,ne));else for(Z=0;Z<oe.length;Z++){var Re=[];for(Y=0;Y<oe[Z].length;Y+=2)Re.push(ui(oe[Z][Y],oe[Z][Y+1],M,J,se,ne));re.geometry.push(Re)}}return X.transformed=!0,X}function ui(X,M,D,Z,Y,J){return[Math.round(D*(X*Z-Y)),Math.round(D*(M*Z-J))]}function kn(X,M,D,Z,Y){for(var J=M===Y.maxZoom?0:Y.tolerance/((1<<M)*Y.extent),se={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:D,y:Z,z:M,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ne=0;ne<X.length;ne++){se.numFeatures++,or(se,X[ne],J,Y);var re=X[ne].minX,oe=X[ne].minY,we=X[ne].maxX,Re=X[ne].maxY;re<se.minX&&(se.minX=re),oe<se.minY&&(se.minY=oe),we>se.maxX&&(se.maxX=we),Re>se.maxY&&(se.maxY=Re)}return se}function or(X,M,D,Z){var Y=M.geometry,J=M.type,se=[];if(J==="Point"||J==="MultiPoint")for(var ne=0;ne<Y.length;ne+=3)se.push(Y[ne]),se.push(Y[ne+1]),X.numPoints++,X.numSimplified++;else if(J==="LineString")Vi(se,Y,X,D,!1,!1);else if(J==="MultiLineString"||J==="Polygon")for(ne=0;ne<Y.length;ne++)Vi(se,Y[ne],X,D,J==="Polygon",ne===0);else if(J==="MultiPolygon")for(var re=0;re<Y.length;re++){var oe=Y[re];for(ne=0;ne<oe.length;ne++)Vi(se,oe[ne],X,D,!0,ne===0)}if(se.length){var we=M.tags||null;if(J==="LineString"&&Z.lineMetrics){for(var Re in we={},M.tags)we[Re]=M.tags[Re];we.mapbox_clip_start=Y.start/Y.size,we.mapbox_clip_end=Y.end/Y.size}var ve={geometry:se,type:J==="Polygon"||J==="MultiPolygon"?3:J==="LineString"||J==="MultiLineString"?2:1,tags:we};M.id!==null&&(ve.id=M.id),X.features.push(ve)}}function Vi(X,M,D,Z,Y,J){var se=Z*Z;if(Z>0&&M.size<(Y?se:Z))D.numPoints+=M.length/3;else{for(var ne=[],re=0;re<M.length;re+=3)(Z===0||M[re+2]>se)&&(D.numSimplified++,ne.push(M[re]),ne.push(M[re+1])),D.numPoints++;Y&&function(oe,we){for(var Re=0,ve=0,mt=oe.length,K=mt-2;ve<mt;K=ve,ve+=2)Re+=(oe[ve]-oe[K])*(oe[ve+1]+oe[K+1]);if(Re>0===we)for(ve=0,mt=oe.length;ve<mt/2;ve+=2){var Fe=oe[ve],rt=oe[ve+1];oe[ve]=oe[mt-2-ve],oe[ve+1]=oe[mt-1-ve],oe[mt-2-ve]=Fe,oe[mt-1-ve]=rt}}(ne,J),X.push(ne)}}function Rn(X,M){var D=(M=this.options=function(Y,J){for(var se in J)Y[se]=J[se];return Y}(Object.create(this.options),M)).debug;if(D&&console.time("preprocess data"),M.maxZoom<0||M.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(M.promoteId&&M.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(Y,J){var se=[];if(Y.type==="FeatureCollection")for(var ne=0;ne<Y.features.length;ne++)yr(se,Y.features[ne],J,ne);else yr(se,Y.type==="Feature"?Y:{geometry:Y},J);return se}(X,M);this.tiles={},this.tileCoords=[],D&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",M.indexMaxZoom,M.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Z=function(Y,J){var se=J.buffer/J.extent,ne=Y,re=ci(Y,1,-1-se,se,0,-1,2,J),oe=ci(Y,1,1-se,2+se,0,-1,2,J);return(re||oe)&&(ne=ci(Y,1,-se,1+se,0,-1,2,J)||[],re&&(ne=Bn(re,1).concat(ne)),oe&&(ne=ne.concat(Bn(oe,-1)))),ne}(Z,M),Z.length&&this.splitTile(Z,0,0,0),D&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function An(X,M,D){return 32*((1<<X)*D+M)+X}function Or(X,M){const D=X.tileID.canonical;if(!this._geoJSONIndex)return M(null,null);const Z=this._geoJSONIndex.getTile(D.z,D.x,D.y);if(!Z)return M(null,null);const Y=new He(Z.features);let J=Di(Y);J.byteOffset===0&&J.byteLength===J.buffer.byteLength||(J=new Uint8Array(J)),M(null,{vectorTile:Y,rawData:J.buffer})}Rn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Rn.prototype.splitTile=function(X,M,D,Z,Y,J,se){for(var ne=[X,M,D,Z],re=this.options,oe=re.debug;ne.length;){Z=ne.pop(),D=ne.pop(),M=ne.pop(),X=ne.pop();var we=1<<M,Re=An(M,D,Z),ve=this.tiles[Re];if(!ve&&(oe>1&&console.time("creation"),ve=this.tiles[Re]=kn(X,M,D,Z,re),this.tileCoords.push({z:M,x:D,y:Z}),oe)){oe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",M,D,Z,ve.numFeatures,ve.numPoints,ve.numSimplified),console.timeEnd("creation"));var mt="z"+M;this.stats[mt]=(this.stats[mt]||0)+1,this.total++}if(ve.source=X,Y){if(M===re.maxZoom||M===Y)continue;var K=1<<Y-M;if(D!==Math.floor(J/K)||Z!==Math.floor(se/K))continue}else if(M===re.indexMaxZoom||ve.numPoints<=re.indexMaxPoints)continue;if(ve.source=null,X.length!==0){oe>1&&console.time("clipping");var Fe,rt,Ct,Bt,At,Ot,Ft=.5*re.buffer/re.extent,Zi=.5-Ft,Ui=.5+Ft,on=1+Ft;Fe=rt=Ct=Bt=null,At=ci(X,we,D-Ft,D+Ui,0,ve.minX,ve.maxX,re),Ot=ci(X,we,D+Zi,D+on,0,ve.minX,ve.maxX,re),X=null,At&&(Fe=ci(At,we,Z-Ft,Z+Ui,1,ve.minY,ve.maxY,re),rt=ci(At,we,Z+Zi,Z+on,1,ve.minY,ve.maxY,re),At=null),Ot&&(Ct=ci(Ot,we,Z-Ft,Z+Ui,1,ve.minY,ve.maxY,re),Bt=ci(Ot,we,Z+Zi,Z+on,1,ve.minY,ve.maxY,re),Ot=null),oe>1&&console.timeEnd("clipping"),ne.push(Fe||[],M+1,2*D,2*Z),ne.push(rt||[],M+1,2*D,2*Z+1),ne.push(Ct||[],M+1,2*D+1,2*Z),ne.push(Bt||[],M+1,2*D+1,2*Z+1)}}},Rn.prototype.getTile=function(X,M,D){var Z=this.options,Y=Z.extent,J=Z.debug;if(X<0||X>24)return null;var se=1<<X,ne=An(X,M=(M%se+se)%se,D);if(this.tiles[ne])return Oi(this.tiles[ne],Y);J>1&&console.log("drilling down to z%d-%d-%d",X,M,D);for(var re,oe=X,we=M,Re=D;!re&&oe>0;)oe--,we=Math.floor(we/2),Re=Math.floor(Re/2),re=this.tiles[An(oe,we,Re)];return re&&re.source?(J>1&&console.log("found parent tile z%d-%d-%d",oe,we,Re),J>1&&console.time("drilling down"),this.splitTile(re.source,oe,we,Re,X,M,D),J>1&&console.timeEnd("drilling down"),this.tiles[ne]?Oi(this.tiles[ne],Y):null):null};class lr extends xe{constructor(M,D,Z,Y){super(M,D,Z,Or),Y&&(this.loadGeoJSON=Y)}loadData(M,D){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=D,this._pendingLoadDataParams=M,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const M=this._pendingCallback,D=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const Z=!!(D&&D.request&&D.request.collectResourceTiming)&&new a.RequestPerformance(D.request);this.loadGeoJSON(D,(Y,J)=>{if(Y||!J)return M(Y);if(typeof J!="object")return M(new Error(`Input data given to '${D.source}' is not a valid GeoJSON object.`));{me(J,!0);try{if(D.filter){const ne=a.createExpression(D.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ne.result==="error")throw new Error(ne.value.map(oe=>`${oe.key}: ${oe.message}`).join(", "));J={type:"FeatureCollection",features:J.features.filter(oe=>ne.value.evaluate({zoom:0},oe))}}this._geoJSONIndex=D.cluster?new Qn(function({superclusterOptions:ne,clusterProperties:re}){if(!re||!ne)return ne;const oe={},we={},Re={accumulated:null,zoom:0},ve={properties:null},mt=Object.keys(re);for(const K of mt){const[Fe,rt]=re[K],Ct=a.createExpression(rt),Bt=a.createExpression(typeof Fe=="string"?[Fe,["accumulated"],["get",K]]:Fe);oe[K]=Ct.value,we[K]=Bt.value}return ne.map=K=>{ve.properties=K;const Fe={};for(const rt of mt)Fe[rt]=oe[rt].evaluate(Re,ve);return Fe},ne.reduce=(K,Fe)=>{ve.properties=Fe;for(const rt of mt)Re.accumulated=K[rt],K[rt]=we[rt].evaluate(Re,ve)},ne}(D)).load(J.features):function(ne,re){return new Rn(ne,re)}(J,D.geojsonVtOptions)}catch(ne){return M(ne)}this.loaded={};const se={};if(Z){const ne=Z.finish();ne&&(se.resourceTiming={},se.resourceTiming[D.source]=JSON.parse(JSON.stringify(ne)))}M(null,se)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(M,D){const Z=this.loaded;return Z&&Z[M.uid]?super.reloadTile(M,D):this.loadTile(M,D)}loadGeoJSON(M,D){if(M.request)a.getJSON(M.request,D);else{if(typeof M.data!="string")return D(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`));try{return D(null,JSON.parse(M.data))}catch{return D(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`))}}}removeSource(M,D){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),D()}getClusterExpansionZoom(M,D){try{D(null,this._geoJSONIndex.getClusterExpansionZoom(M.clusterId))}catch(Z){D(Z)}}getClusterChildren(M,D){try{D(null,this._geoJSONIndex.getChildren(M.clusterId))}catch(Z){D(Z)}}getClusterLeaves(M,D){try{D(null,this._geoJSONIndex.getLeaves(M.clusterId,M.limit,M.offset))}catch(Z){D(Z)}}}class Mr{constructor(M){this.self=M,this.actor=new a.Actor(M,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:xe,geojson:lr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(D,Z)=>{if(this.workerSourceTypes[D])throw new Error(`Worker source with name "${D}" already registered.`);this.workerSourceTypes[D]=Z},this.self.registerRTLTextPlugin=D=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=D.applyArabicShaping,a.plugin.processBidirectionalText=D.processBidirectionalText,a.plugin.processStyledBidirectionalText=D.processStyledBidirectionalText}}setReferrer(M,D){this.referrer=D}setImages(M,D,Z){this.availableImages[M]=D;for(const Y in this.workerSources[M]){const J=this.workerSources[M][Y];for(const se in J)J[se].availableImages=D}Z()}setLayers(M,D,Z){this.getLayerIndex(M).replace(D),Z()}updateLayers(M,D,Z){this.getLayerIndex(M).update(D.layers,D.removedIds),Z()}loadTile(M,D,Z){this.getWorkerSource(M,D.type,D.source).loadTile(D,Z)}loadDEMTile(M,D,Z){this.getDEMWorkerSource(M,D.source).loadTile(D,Z)}reloadTile(M,D,Z){this.getWorkerSource(M,D.type,D.source).reloadTile(D,Z)}abortTile(M,D,Z){this.getWorkerSource(M,D.type,D.source).abortTile(D,Z)}removeTile(M,D,Z){this.getWorkerSource(M,D.type,D.source).removeTile(D,Z)}removeDEMTile(M,D){this.getDEMWorkerSource(M,D.source).removeTile(D)}removeSource(M,D,Z){if(!this.workerSources[M]||!this.workerSources[M][D.type]||!this.workerSources[M][D.type][D.source])return;const Y=this.workerSources[M][D.type][D.source];delete this.workerSources[M][D.type][D.source],Y.removeSource!==void 0?Y.removeSource(D,Z):Z()}loadWorkerSource(M,D,Z){try{this.self.importScripts(D.url),Z()}catch(Y){Z(Y.toString())}}syncRTLPluginState(M,D,Z){try{a.plugin.setState(D);const Y=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Y!=null){this.self.importScripts(Y);const J=a.plugin.isParsed();Z(J?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Y}`),J)}}catch(Y){Z(Y.toString())}}getAvailableImages(M){let D=this.availableImages[M];return D||(D=[]),D}getLayerIndex(M){let D=this.layerIndexes[M];return D||(D=this.layerIndexes[M]=new N),D}getWorkerSource(M,D,Z){if(this.workerSources[M]||(this.workerSources[M]={}),this.workerSources[M][D]||(this.workerSources[M][D]={}),!this.workerSources[M][D][Z]){const Y={send:(J,se,ne)=>{this.actor.send(J,se,ne,M)}};this.workerSources[M][D][Z]=new this.workerSourceTypes[D](Y,this.getLayerIndex(M),this.getAvailableImages(M))}return this.workerSources[M][D][Z]}getDEMWorkerSource(M,D){return this.demWorkerSources[M]||(this.demWorkerSources[M]={}),this.demWorkerSources[M][D]||(this.demWorkerSources[M][D]=new et),this.demWorkerSources[M][D]}enforceCacheSizeLimit(M,D){a.enforceCacheSizeLimit(D)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Mr(self)),Mr}),S(["./shared"],function(a){var A=O;function O(h){return!function(t){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var l,d,_=new Blob([""],{type:"text/javascript"}),E=URL.createObjectURL(_);try{d=new Worker(E),l=!0}catch{l=!1}return d&&d.terminate(),URL.revokeObjectURL(E),l}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var l=document.createElement("canvas");l.width=l.height=1;var d=l.getContext("2d");if(!d)return!1;var _=d.getImageData(0,0,1,1);return _&&_.width===l.width}()?(N[s=t&&t.failIfMajorPerformanceCaveat]===void 0&&(N[s]=function(l){var d,_=function(E){var k=document.createElement("canvas"),z=Object.create(O.webGLContextAttributes);return z.failIfMajorPerformanceCaveat=E,k.getContext("webgl",z)||k.getContext("experimental-webgl",z)}(l);if(!_)return!1;try{d=_.createShader(_.VERTEX_SHADER)}catch{return!1}return!(!d||_.isContextLost())&&(_.shaderSource(d,"void main() {}"),_.compileShader(d),_.getShaderParameter(d,_.COMPILE_STATUS)===!0)}(s)),N[s]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var s}(h)}var N={};function U(h,t){if(Array.isArray(h)){if(!Array.isArray(t)||h.length!==t.length)return!1;for(let s=0;s<h.length;s++)if(!U(h[s],t[s]))return!1;return!0}if(typeof h=="object"&&h!==null&&t!==null){if(typeof t!="object"||Object.keys(h).length!==Object.keys(t).length)return!1;for(const s in h)if(!U(h[s],t[s]))return!1;return!0}return h===t}O.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class F{static testProp(t){if(!F.docStyle)return t[0];for(let s=0;s<t.length;s++)if(t[s]in F.docStyle)return t[s];return t[0]}static create(t,s,l){const d=window.document.createElement(t);return s!==void 0&&(d.className=s),l&&l.appendChild(d),d}static createNS(t,s){return window.document.createElementNS(t,s)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(t,s){t.style[F.transformProp]=s}static addEventListener(t,s,l,d={}){t.addEventListener(s,l,"passive"in d?d:d.capture)}static removeEventListener(t,s,l,d={}){t.removeEventListener(s,l,"passive"in d?d:d.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",F.suppressClickInternal,!0)},0)}static mousePos(t,s){const l=t.getBoundingClientRect();return new a.pointGeometry(s.clientX-l.left-t.clientLeft,s.clientY-l.top-t.clientTop)}static touchPos(t,s){const l=t.getBoundingClientRect(),d=[];for(let _=0;_<s.length;_++)d.push(new a.pointGeometry(s[_].clientX-l.left-t.clientLeft,s[_].clientY-l.top-t.clientTop));return d}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);class ee{constructor(t){this._transformRequestFn=t}transformRequest(t,s){return this._transformRequestFn&&this._transformRequestFn(t,s)||{url:t}}normalizeSpriteURL(t,s,l){const d=function(_){const E=_.match(ge);if(!E)throw new Error(`Unable to parse URL "${_}"`);return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}(t);return d.path+=`${s}${l}`,function(_){const E=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${E}`}(d)}setTransformRequest(t){this._transformRequestFn=t}}const ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function xe(h){var t=new a.ARRAY_TYPE(3);return t[0]=h[0],t[1]=h[1],t[2]=h[2],t}var et,me=function(h,t,s){return h[0]=t[0]-s[0],h[1]=t[1]-s[1],h[2]=t[2]-s[2],h};et=new a.ARRAY_TYPE(3),a.ARRAY_TYPE!=Float32Array&&(et[0]=0,et[1]=0,et[2]=0);var Ve=function(h){var t=h[0],s=h[1];return t*t+s*s};(function(){var h=new a.ARRAY_TYPE(2);a.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0)})();class Ee{constructor(t,s,l,d){this.context=t,this.format=l,this.texture=t.gl.createTexture(),this.update(s,d)}update(t,s,l){const{width:d,height:_}=t,E=!(this.size&&this.size[0]===d&&this.size[1]===_||l),{context:k}=this,{gl:z}=k;if(this.useMipmap=Boolean(s&&s.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!s||s.premultiply!==!1)),E)this.size=[d,_],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||a.isImageBitmap(t)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,t):z.texImage2D(z.TEXTURE_2D,0,this.format,d,_,0,this.format,z.UNSIGNED_BYTE,t.data);else{const{x:P,y:R}=l||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||a.isImageBitmap(t)?z.texSubImage2D(z.TEXTURE_2D,0,P,R,z.RGBA,z.UNSIGNED_BYTE,t):z.texSubImage2D(z.TEXTURE_2D,0,P,R,d,_,z.RGBA,z.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(t,s,l){const{context:d}=this,{gl:_}=d;_.bindTexture(_.TEXTURE_2D,this.texture),l!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=_.LINEAR),t!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,t),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,l||t),this.filter=t),s!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,s),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function fe(h){const{userImage:t}=h;return!!(t&&t.render&&t.render())&&(h.data.replace(new Uint8Array(t.data.buffer)),!0)}class Pe extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:s,callback:l}of this.requestors)this._notify(s,l);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,s){this._validate(t,s)&&(this.images[t]=s)}_validate(t,s){let l=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),l=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),l=!1),this._validateContent(s.content,s)||(this.fire(new a.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),l=!1),l}_validateStretch(t,s){if(!t)return!0;let l=0;for(const d of t){if(d[0]<l||d[1]<d[0]||s<d[1])return!1;l=d[1]}return!0}_validateContent(t,s){return!(t&&(t.length!==4||t[0]<0||s.data.width<t[0]||t[1]<0||s.data.height<t[1]||t[2]<0||s.data.width<t[2]||t[3]<0||s.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,s){s.version=this.images[t].version+1,this.images[t]=s,this.updatedImages[t]=!0}removeImage(t){const s=this.images[t];delete this.images[t],delete this.patterns[t],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,s){let l=!0;if(!this.isLoaded())for(const d of t)this.images[d]||(l=!1);this.isLoaded()||l?this._notify(t,s):this.requestors.push({ids:t,callback:s})}_notify(t,s){const l={};for(const d of t){this.images[d]||this.fire(new a.Event("styleimagemissing",{id:d}));const _=this.images[d];_?l[d]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:Boolean(_.userImage&&_.userImage.render)}:a.warnOnce(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}s(null,l)}getPixelSize(){const{width:t,height:s}=this.atlasImage;return{width:t,height:s}}getPattern(t){const s=this.patterns[t],l=this.getImage(t);if(!l)return null;if(s&&s.position.version===l.version)return s.position;if(s)s.position.version=l.version;else{const d={w:l.data.width+2,h:l.data.height+2,x:0,y:0},_=new a.ImagePosition(d,l);this.patterns[t]={bin:d,position:_}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const s=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ee(t,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const _ in this.patterns)t.push(this.patterns[_].bin);const{w:s,h:l}=a.potpack(t),d=this.atlasImage;d.resize({width:s||1,height:l||1});for(const _ in this.patterns){const{bin:E}=this.patterns[_],k=E.x+1,z=E.y+1,P=this.images[_].data,R=P.width,q=P.height;a.RGBAImage.copy(P,d,{x:0,y:0},{x:k,y:z},{width:R,height:q}),a.RGBAImage.copy(P,d,{x:0,y:q-1},{x:k,y:z-1},{width:R,height:1}),a.RGBAImage.copy(P,d,{x:0,y:0},{x:k,y:z+q},{width:R,height:1}),a.RGBAImage.copy(P,d,{x:R-1,y:0},{x:k-1,y:z},{width:1,height:q}),a.RGBAImage.copy(P,d,{x:0,y:0},{x:k+R,y:z},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const s of t){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const l=this.images[s];fe(l)&&this.updateImage(s,l)}}}const He=1e20;function Be(h,t,s,l,d,_,E,k,z){for(let P=t;P<t+l;P++)Qe(h,s*_+P,_,d,E,k,z);for(let P=s;P<s+d;P++)Qe(h,P*_+t,1,l,E,k,z)}function Qe(h,t,s,l,d,_,E){_[0]=0,E[0]=-He,E[1]=He,d[0]=h[t];for(let k=1,z=0,P=0;k<l;k++){d[k]=h[t+k*s];const R=k*k;do{const q=_[z];P=(d[k]-d[q]+R-q*q)/(k-q)/2}while(P<=E[z]&&--z>-1);z++,_[z]=k,E[z]=P,E[z+1]=He}for(let k=0,z=0;k<l;k++){for(;E[z+1]<k;)z++;const P=_[z],R=k-P;h[t+k*s]=d[P]+R*R}}class ke{constructor(t,s){this.requestManager=t,this.localIdeographFontFamily=s,this.entries={}}setURL(t){this.url=t}getGlyphs(t,s){const l=[];for(const d in t)for(const _ of t[d])l.push({stack:d,id:_});a.asyncAll(l,({stack:d,id:_},E)=>{let k=this.entries[d];k||(k=this.entries[d]={glyphs:{},requests:{},ranges:{}});let z=k.glyphs[_];if(z!==void 0)return void E(null,{stack:d,id:_,glyph:z});if(z=this._tinySDF(k,d,_),z)return k.glyphs[_]=z,void E(null,{stack:d,id:_,glyph:z});const P=Math.floor(_/256);if(256*P>65535)return void E(new Error("glyphs > 65535 not supported"));if(k.ranges[P])return void E(null,{stack:d,id:_,glyph:z});let R=k.requests[P];R||(R=k.requests[P]=[],ke.loadGlyphRange(d,P,this.url,this.requestManager,(q,H)=>{if(H){for(const $ in H)this._doesCharSupportLocalGlyph(+$)||(k.glyphs[+$]=H[+$]);k.ranges[P]=!0}for(const $ of R)$(q,H);delete k.requests[P]})),R.push((q,H)=>{q?E(q):H&&E(null,{stack:d,id:_,glyph:H[_]||null})})},(d,_)=>{if(d)s(d);else if(_){const E={};for(const{stack:k,id:z,glyph:P}of _)(E[k]||(E[k]={}))[z]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};s(null,E)}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](t)||a.unicodeBlockLookup["Hangul Syllables"](t)||a.unicodeBlockLookup.Hiragana(t)||a.unicodeBlockLookup.Katakana(t))}_tinySDF(t,s,l){const d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(l))return;let _=t.tinySDF;if(!_){let k="400";/bold/i.test(s)?k="900":/medium/i.test(s)?k="500":/light/i.test(s)&&(k="200"),_=t.tinySDF=new ke.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:d,fontWeight:k})}const E=_.draw(String.fromCharCode(l));return{id:l,bitmap:new a.AlphaImage({width:E.width||30,height:E.height||30},E.data),metrics:{width:E.glyphWidth||24,height:E.glyphHeight||24,left:E.glyphLeft||0,top:E.glyphTop-27||-8,advance:E.glyphAdvance||24}}}}ke.loadGlyphRange=function(h,t,s,l,d){const _=256*t,E=_+255,k=l.transformRequest(s.replace("{fontstack}",h).replace("{range}",`${_}-${E}`),a.ResourceType.Glyphs);a.getArrayBuffer(k,(z,P)=>{if(z)d(z);else if(P){const R={};for(const q of a.parseGlyphPBF(P))R[q.id]=q;d(null,R)}})},ke.TinySDF=class{constructor({fontSize:h=24,buffer:t=3,radius:s=8,cutoff:l=.25,fontFamily:d="sans-serif",fontWeight:_="normal",fontStyle:E="normal"}={}){this.buffer=t,this.cutoff=l,this.radius=s;const k=this.size=h+4*t,z=this._createCanvas(k),P=this.ctx=z.getContext("2d",{willReadFrequently:!0});P.font=`${E} ${_} ${h}px ${d}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(h){const t=document.createElement("canvas");return t.width=t.height=h,t}draw(h){const{width:t,actualBoundingBoxAscent:s,actualBoundingBoxDescent:l,actualBoundingBoxLeft:d,actualBoundingBoxRight:_}=this.ctx.measureText(h),E=Math.ceil(s),k=Math.min(this.size-this.buffer,Math.ceil(_-d)),z=Math.min(this.size-this.buffer,E+Math.ceil(l)),P=k+2*this.buffer,R=z+2*this.buffer,q=Math.max(P*R,0),H=new Uint8ClampedArray(q),$={data:H,width:P,height:R,glyphWidth:k,glyphHeight:z,glyphTop:E,glyphLeft:0,glyphAdvance:t};if(k===0||z===0)return $;const{ctx:W,buffer:Q,gridInner:le,gridOuter:ce}=this;W.clearRect(Q,Q,k,z),W.fillText(h,Q,Q+E);const pe=W.getImageData(Q,Q,k,z);ce.fill(He,0,q),le.fill(0,0,q);for(let he=0;he<z;he++)for(let Me=0;Me<k;Me++){const be=pe.data[4*(he*k+Me)+3]/255;if(be===0)continue;const Ie=(he+Q)*P+Me+Q;if(be===1)ce[Ie]=0,le[Ie]=He;else{const je=.5-be;ce[Ie]=je>0?je*je:0,le[Ie]=je<0?je*je:0}}Be(ce,0,0,P,R,P,this.f,this.v,this.z),Be(le,Q,Q,k,z,P,this.f,this.v,this.z);for(let he=0;he<q;he++){const Me=Math.sqrt(ce[he])-Math.sqrt(le[he]);H[he]=Math.round(255-255*(Me/this.radius+this.cutoff))}return $}};const Xe=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(h,t){return a.sphericalToCartesian(h.expression.evaluate(t))}interpolate(h,t,s){return{x:a.number(h.x,t.x,s),y:a.number(h.y,t.y,s),z:a.number(h.z,t.z,s)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),It="-transition";class vt extends a.Evented{constructor(t){super(),this._transitionable=new a.Transitionable(Xe),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,s={}){if(!this._validate(a.validateLight,t,s))for(const l in t){const d=t[l];l.endsWith(It)?this._transitionable.setTransition(l.slice(0,-It.length),d):this._transitionable.setValue(l,d)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,s,l){return(!l||l.validate!==!1)&&a.emitValidationErrors(this,t.call(a.validateStyle,a.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class pt{constructor(t,s){this.width=t,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,s){const l=t.join(",")+String(s);return this.dashEntry[l]||(this.dashEntry[l]=this.addDash(t,s)),this.dashEntry[l]}getDashRanges(t,s,l){const d=[];let _=t.length%2==1?-t[t.length-1]*l:0,E=t[0]*l,k=!0;d.push({left:_,right:E,isDash:k,zeroLength:t[0]===0});let z=t[0];for(let P=1;P<t.length;P++){k=!k;const R=t[P];_=z*l,z+=R,E=z*l,d.push({left:_,right:E,isDash:k,zeroLength:R===0})}return d}addRoundDash(t,s,l){const d=s/2;for(let _=-l;_<=l;_++){const E=this.width*(this.nextRow+l+_);let k=0,z=t[k];for(let P=0;P<this.width;P++){P/z.right>1&&(z=t[++k]);const R=Math.abs(P-z.left),q=Math.abs(P-z.right),H=Math.min(R,q);let $;const W=_/l*(d+1);if(z.isDash){const Q=d-Math.abs(W);$=Math.sqrt(H*H+Q*Q)}else $=d-Math.sqrt(H*H+W*W);this.data[E+P]=Math.max(0,Math.min(255,$+128))}}}addRegularDash(t){for(let k=t.length-1;k>=0;--k){const z=t[k],P=t[k+1];z.zeroLength?t.splice(k,1):P&&P.isDash===z.isDash&&(P.left=z.left,t.splice(k,1))}const s=t[0],l=t[t.length-1];s.isDash===l.isDash&&(s.left=l.left-this.width,l.right=s.right+this.width);const d=this.width*this.nextRow;let _=0,E=t[_];for(let k=0;k<this.width;k++){k/E.right>1&&(E=t[++_]);const z=Math.abs(k-E.left),P=Math.abs(k-E.right),R=Math.min(z,P);this.data[d+k]=Math.max(0,Math.min(255,(E.isDash?R:-R)+128))}}addDash(t,s){const l=s?7:0,d=2*l+1;if(this.nextRow+d>this.height)return a.warnOnce("LineAtlas out of space"),null;let _=0;for(let k=0;k<t.length;k++)_+=t[k];if(_!==0){const k=this.width/_,z=this.getDashRanges(t,this.width,k);s?this.addRoundDash(z,k,l):this.addRegularDash(z)}const E={y:(this.nextRow+l+.5)/this.height,height:2*l/this.height,width:_};return this.nextRow+=d,this.dirty=!0,E}bind(t){const s=t.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}class bt{constructor(t,s){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const l=this.workerPool.acquire(this.id);for(let d=0;d<l.length;d++){const _=new bt.Actor(l[d],s,this.id);_.name=`Worker ${d}`,this.actors.push(_)}}broadcast(t,s,l){a.asyncAll(this.actors,(d,_)=>{d.send(t,s,_)},l=l||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}function De(h,t,s){const l=function(d,_){if(d)return s(d);if(_){const E=a.pick(a.extend(_,h),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(E.vectorLayers=_.vector_layers,E.vectorLayerIds=E.vectorLayers.map(k=>k.id)),s(null,E)}};return h.url?a.getJSON(t.transformRequest(h.url,a.ResourceType.Source),l):a.exported.frame(()=>l(null,h))}bt.Actor=a.Actor;class Ae{constructor(t,s,l){this.bounds=a.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=s||0,this.maxzoom=l||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const s=Math.pow(2,t.z),l=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*s),d=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*s),_=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*s),E=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*s);return t.x>=l&&t.x<_&&t.y>=d&&t.y<E}}class li extends a.Evented{constructor(t,s,l,d){if(super(),this.id=t,this.dispatcher=l,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(s,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=De(this._options,this.map._requestManager,(t,s)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t?this.fire(new a.ErrorEvent(t)):s&&(a.extend(this,s),s.bounds&&(this.tileBounds=new Ae(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(t,s){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,a.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(E,k){return delete t.request,t.aborted?s(null):E&&E.status!==404?s(E):(k&&k.resourceTiming&&(t.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&t.setExpiryData(k),t.loadVectorData(k,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}d.request.collectResourceTiming=this._collectResourceTiming,t.actor&&t.state!=="expired"?t.state==="loading"?t.reloadCallback=s:t.request=t.actor.send("reloadTile",d,_.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",d,_.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class bi extends a.Evented{constructor(t,s,l,d){super(),this.id=t,this.dispatcher=l,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},s),a.extend(this,a.pick(s,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=De(this._options,this.map._requestManager,(t,s)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new a.ErrorEvent(t)):s&&(a.extend(this,s),s.bounds&&(this.tileBounds=new Ae(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,s){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=a.getImage(this.map._requestManager.transformRequest(l,a.ResourceType.Tile),(d,_,E)=>{if(delete t.request,t.aborted)t.state="unloaded",s(null);else if(d)t.state="errored",s(d);else if(_){this.map._refreshExpiredTiles&&t.setExpiryData(E);const k=this.map.painter.context,z=k.gl;t.texture=this.map.painter.getTileTexture(_.width),t.texture?t.texture.update(_,{useMipmap:!0}):(t.texture=new Ee(k,_,z.RGBA,{useMipmap:!0}),t.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),t.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),s(null)}})}abortTile(t,s){t.request&&(t.request.cancel(),delete t.request),s()}unloadTile(t,s){t.texture&&this.map.painter.saveTileTexture(t.texture),s()}hasTransition(){return!1}}let kt;class gi extends bi{constructor(t,s,l,d){super(t,s,l,d),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,s){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function d(_,E){_&&(t.state="errored",s(_)),E&&(t.dem=E,t.needsHillshadePrepare=!0,t.state="loaded",s(null))}t.request=a.getImage(this.map._requestManager.transformRequest(l,a.ResourceType.Tile),function(_,E){if(delete t.request,t.aborted)t.state="unloaded",s(null);else if(_)t.state="errored",s(_);else if(E){this.map._refreshExpiredTiles&&t.setExpiryData(E),delete E.cacheControl,delete E.expires;const k=a.isImageBitmap(E)&&(kt==null&&(kt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),kt)?E:a.exported.getImageData(E,1),z={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:k,encoding:this.encoding};t.actor&&t.state!=="expired"||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",z,d.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)}_getNeighboringTiles(t){const s=t.canonical,l=Math.pow(2,s.z),d=(s.x-1+l)%l,_=s.x===0?t.wrap-1:t.wrap,E=(s.x+1+l)%l,k=s.x+1===l?t.wrap+1:t.wrap,z={};return z[new a.OverscaledTileID(t.overscaledZ,_,s.z,d,s.y).key]={backfilled:!1},z[new a.OverscaledTileID(t.overscaledZ,k,s.z,E,s.y).key]={backfilled:!1},s.y>0&&(z[new a.OverscaledTileID(t.overscaledZ,_,s.z,d,s.y-1).key]={backfilled:!1},z[new a.OverscaledTileID(t.overscaledZ,t.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},z[new a.OverscaledTileID(t.overscaledZ,k,s.z,E,s.y-1).key]={backfilled:!1}),s.y+1<l&&(z[new a.OverscaledTileID(t.overscaledZ,_,s.z,d,s.y+1).key]={backfilled:!1},z[new a.OverscaledTileID(t.overscaledZ,t.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},z[new a.OverscaledTileID(t.overscaledZ,k,s.z,E,s.y+1).key]={backfilled:!1}),z}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class Mi extends a.Evented{constructor(t,s,l,d){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=l.getActor(),this.setEventedParent(d),this._data=s.data,this._options=a.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const _=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*_,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*_,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:a.EXTENT,radius:(s.clusterRadius||50)*_,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},s),this}getClusterChildren(t,s){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},s),this}getClusterLeaves(t,s,l,d){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:s,offset:l},d),this}_updateWorkerData(t){const s=a.extend({},this.workerOptions),l=this._data;typeof l=="string"?(s.request=this.map._requestManager.transformRequest(a.exported.resolveURL(l),a.ResourceType.Source),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(l),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,s,(d,_)=>{if(this._pendingLoads--,this._removed||_&&_.abandoned)return;let E=null;if(_&&_.resourceTiming&&_.resourceTiming[this.id]&&(E=_.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:s.source},null),d)return void this.fire(new a.ErrorEvent(d));const k={dataType:"source",sourceDataType:t};this._collectResourceTiming&&E&&E.length>0&&a.extend(k,{resourceTiming:E}),this.fire(new a.Event("data",k))})}loaded(){return this._pendingLoads===0}loadTile(t,s){const l=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const d={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(l,d,(_,E)=>(delete t.request,t.unloadVectorData(),t.aborted?s(null):_?s(_):(t.loadVectorData(E,this.map.painter,l==="reloadTile"),s(null))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var hi=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Di extends a.Evented{constructor(t,s,l,d){super(),this.id=t,this.dispatcher=l,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=s}load(t,s){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(l,d)=>{this._loaded=!0,l?this.fire(new a.ErrorEvent(l)):d&&(this.image=d,t&&(this.coordinates=t),s&&s(),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(t){this.coordinates=t;const s=t.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(d){let _=1/0,E=1/0,k=-1/0,z=-1/0;for(const H of d)_=Math.min(_,H.x),E=Math.min(E,H.y),k=Math.max(k,H.x),z=Math.max(z,H.y);const P=Math.max(k-_,z-E),R=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),q=Math.pow(2,R);return new a.CanonicalTileID(R,Math.floor((_+k)/2*q),Math.floor((E+z)/2*q))}(s),this.minzoom=this.maxzoom=this.tileID.z;const l=s.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(l[0].x,l[0].y,0,0),this._boundsArray.emplaceBack(l[1].x,l[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(l[3].x,l[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(l[2].x,l[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,s=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,hi.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ee(t,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const l in this.tiles){const d=this.tiles[l];d.state!=="loaded"&&(d.state="loaded",d.texture=this.texture)}}loadTile(t,s){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},s(null)):(t.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ii extends Di{constructor(t,s,l,d){super(t,s,l,d),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const s of t.urls)this.urls.push(this.map._requestManager.transformRequest(s,a.ResourceType.Source).url);a.getVideo(this.urls,(s,l)=>{this._loaded=!0,s?this.fire(new a.ErrorEvent(s)):l&&(this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const s=this.video.seekable;t<s.start(0)||t>s.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,s=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,hi.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new Ee(t,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const l in this.tiles){const d=this.tiles[l];d.state!=="loaded"&&(d.state="loaded",d.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Yi extends Di{constructor(t,s,l,d){super(t,s,l,d),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(E=>typeof E!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,l=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,hi.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ee(s,this.canvas,l.RGBA,{premultiply:!0});for(const d in this.tiles){const _=this.tiles[d];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const Ei={vector:li,raster:bi,"raster-dem":gi,geojson:Mi,video:Ii,image:Di,canvas:Yi};function ji(h,t){const s=a.create();return a.translate(s,s,[1,1,0]),a.scale(s,s,[.5*h.width,.5*h.height,1]),a.multiply(s,s,h.calculatePosMatrix(t.toUnwrapped()))}function Ze(h,t,s,l,d,_){const E=function(q,H,$){if(q)for(const W of q){const Q=H[W];if(Q&&Q.source===$&&Q.type==="fill-extrusion")return!0}else for(const W in H){const Q=H[W];if(Q.source===$&&Q.type==="fill-extrusion")return!0}return!1}(d&&d.layers,t,h.id),k=_.maxPitchScaleFactor(),z=h.tilesIn(l,k,E);z.sort(Ce);const P=[];for(const q of z)P.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(t,s,h._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,d,_,k,ji(h.transform,q.tileID))});const R=function(q){const H={},$={};for(const W of q){const Q=W.queryResults,le=W.wrappedTileID,ce=$[le]=$[le]||{};for(const pe in Q){const he=Q[pe],Me=ce[pe]=ce[pe]||{},be=H[pe]=H[pe]||[];for(const Ie of he)Me[Ie.featureIndex]||(Me[Ie.featureIndex]=!0,be.push(Ie))}}return H}(P);for(const q in R)R[q].forEach(H=>{const $=H.feature,W=h.getFeatureState($.layer["source-layer"],$.id);$.source=$.layer.source,$.layer["source-layer"]&&($.sourceLayer=$.layer["source-layer"]),$.state=W});return R}function Ce(h,t){const s=h.tileID,l=t.tileID;return s.overscaledZ-l.overscaledZ||s.canonical.y-l.canonical.y||s.wrap-l.wrap||s.canonical.x-l.canonical.x}class Zt{constructor(t,s){this.tileID=t,this.uid=a.uniqueId(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const s=t+this.timeAdded;s<a.exported.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(t,s,l){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(d,_){const E={};if(!_)return E;for(const k of d){const z=k.layerIds.map(P=>_.getLayer(P)).filter(Boolean);if(z.length!==0){k.layers=z,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(P=>z.filter(R=>R.id===P)[0]));for(const P of z)E[P.id]=k}}return E}(t.buckets,s.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const _=this.buckets[d];if(_ instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!l)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const _=this.buckets[d];if(_ instanceof a.SymbolBucket&&_.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const d in this.buckets){const _=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(d).queryRadius(_))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const l in this.buckets){const d=this.buckets[l];d.uploadPending()&&d.upload(t)}const s=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ee(t,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ee(t,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,s,l,d,_,E,k,z,P,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:_,scale:E,tileSize:this.tileSize,pixelPosMatrix:R,transform:z,params:k,queryPadding:this.queryPadding*P},t,s,l):{}}querySourceFeatures(t,s){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const d=l.loadVTLayers(),_=s?s.sourceLayer:"",E=d._geojsonTileLayer||d[_];if(!E)return;const k=a.createFilter(s&&s.filter),{z,x:P,y:R}=this.tileID.canonical,q={z,x:P,y:R};for(let H=0;H<E.length;H++){const $=E.feature(H);if(k.needGeometry){const le=a.toEvaluationFeature($,!0);if(!k.filter(new a.EvaluationParameters(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!k.filter(new a.EvaluationParameters(this.tileID.overscaledZ),$))continue;const W=l.getId($,_),Q=new a.GeoJSONFeature($,z,P,R,W);Q.tile=q,t.push(Q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const s=this.expirationTime;if(t.cacheControl){const l=a.parseCacheControl(t.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const l=Date.now();let d=!1;if(this.expirationTime>l)d=!1;else if(s)if(this.expirationTime<s)d=!0;else{const _=this.expirationTime-s;_?this.expirationTime=l+Math.max(_,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const l=this.latestFeatureIndex.loadVTLayers();for(const d in this.buckets){if(!s.style.hasLayer(d))continue;const _=this.buckets[d],E=_.layers[0].sourceLayer||"_geojsonTileLayer",k=l[E],z=t[E];if(!k||!z||Object.keys(z).length===0)continue;_.update(z,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=s&&s.style&&s.style.getLayer(d);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=a.exported.now()+t}setDependencies(t,s){const l={};for(const d of s)l[d]=!0;this.dependencies[t]=l}hasDependency(t,s){for(const l of t){const d=this.dependencies[l];if(d){for(const _ of s)if(d[_])return!0}}return!1}}class Bi{constructor(t,s){this.max=t,this.onRemove=s,this.reset()}reset(){for(const t in this.data)for(const s of this.data[t])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(t,s,l){const d=t.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const _={value:s,timeout:void 0};if(l!==void 0&&(_.timeout=setTimeout(()=>{this.remove(t,_)},l)),this.data[d].push(_),this.order.push(d),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const s=this.data[t].shift();return s.timeout&&clearTimeout(s.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),s.value}getByKey(t){const s=this.data[t];return s?s[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,s){if(!this.has(t))return this;const l=t.wrapped().key,d=s===void 0?0:this.data[l].indexOf(s),_=this.data[l][d];return this.data[l].splice(d,1),_.timeout&&clearTimeout(_.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(_.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(t){const s=[];for(const l in this.data)for(const d of this.data[l])t(d.value)||s.push(d);for(const l of s)this.remove(l.value.tileID,l)}}class rr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,s,l){const d=String(s);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][d]=this.stateChanges[t][d]||{},a.extend(this.stateChanges[t][d],l),this.deletedStates[t]===null){this.deletedStates[t]={};for(const _ in this.state[t])_!==d&&(this.deletedStates[t][_]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][d]===null){this.deletedStates[t][d]={};for(const _ in this.state[t][d])l[_]||(this.deletedStates[t][d][_]=null)}else for(const _ in l)this.deletedStates[t]&&this.deletedStates[t][d]&&this.deletedStates[t][d][_]===null&&delete this.deletedStates[t][d][_]}removeFeatureState(t,s,l){if(this.deletedStates[t]===null)return;const d=String(s);if(this.deletedStates[t]=this.deletedStates[t]||{},l&&s!==void 0)this.deletedStates[t][d]!==null&&(this.deletedStates[t][d]=this.deletedStates[t][d]||{},this.deletedStates[t][d][l]=null);else if(s!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][d])for(l in this.deletedStates[t][d]={},this.stateChanges[t][d])this.deletedStates[t][d][l]=null;else this.deletedStates[t][d]=null;else this.deletedStates[t]=null}getState(t,s){const l=String(s),d=a.extend({},(this.state[t]||{})[l],(this.stateChanges[t]||{})[l]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const _=this.deletedStates[t][s];if(_===null)return{};for(const E in _)delete d[E]}return d}initializeTileState(t,s){t.setFeatureState(this.state,s)}coalesceChanges(t,s){const l={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const _={};for(const E in this.stateChanges[d])this.state[d][E]||(this.state[d][E]={}),a.extend(this.state[d][E],this.stateChanges[d][E]),_[E]=this.state[d][E];l[d]=_}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const _={};if(this.deletedStates[d]===null)for(const E in this.state[d])_[E]={},this.state[d][E]={};else for(const E in this.deletedStates[d]){if(this.deletedStates[d][E]===null)this.state[d][E]={};else for(const k of Object.keys(this.deletedStates[d][E]))delete this.state[d][E][k];_[E]=this.state[d][E]}l[d]=l[d]||{},a.extend(l[d],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(const d in t)t[d].setFeatureState(l,s)}}class Pi extends a.Evented{constructor(t,s,l){super(),this.id=t,this.dispatcher=l,this.on("data",d=>{d.dataType==="source"&&d.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&d.dataType==="source"&&d.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(d,_,E,k){const z=new Ei[_.type](d,_,E,k);if(z.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${z.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],z),z}(t,s,l,this),this._tiles={},this._cache=new Bi(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new rr}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const s=this._tiles[t];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,s){return this._source.loadTile(t,s)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){this._source.abortTile&&this._source.abortTile(t,()=>{}),this._source.fire(new a.Event("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const l=this._tiles[s];l.upload(t),l.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(xn).map(t=>t.key)}getRenderableIds(t){const s=[];for(const l in this._tiles)this._isIdRenderable(l,t)&&s.push(this._tiles[l]);return t?s.sort((l,d)=>{const _=l.tileID,E=d.tileID,k=new a.pointGeometry(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),z=new a.pointGeometry(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-E.overscaledZ||z.y-k.y||z.x-k.x}).map(l=>l.tileID.key):s.map(l=>l.tileID).sort(xn).map(l=>l.key)}hasRenderableParent(t){const s=this.findLoadedParent(t,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(t,s){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(s||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(t,"reloading")}}_reloadTile(t,s){const l=this._tiles[t];l&&(l.state!=="loading"&&(l.state=s),this._loadTile(l,this._tileLoaded.bind(this,l,t,s)))}_tileLoaded(t,s,l,d){if(d)return t.state="errored",void(d.status!==404?this._source.fire(new a.ErrorEvent(d,{tile:t})):this.update(this.transform));t.timeAdded=a.exported.now(),l==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(s,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const s=this.getRenderableIds();for(let d=0;d<s.length;d++){const _=s[d];if(t.neighboringTiles&&t.neighboringTiles[_]){const E=this.getTileByID(_);l(t,E),l(E,t)}}function l(d,_){d.needsHillshadePrepare=!0;let E=_.tileID.canonical.x-d.tileID.canonical.x;const k=_.tileID.canonical.y-d.tileID.canonical.y,z=Math.pow(2,d.tileID.canonical.z),P=_.tileID.key;E===0&&k===0||Math.abs(k)>1||(Math.abs(E)>1&&(Math.abs(E+z)===1?E+=z:Math.abs(E-z)===1&&(E-=z)),_.dem&&d.dem&&(d.dem.backfillBorder(_.dem,E,k),d.neighboringTiles&&d.neighboringTiles[P]&&(d.neighboringTiles[P].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,s,l,d){for(const _ in this._tiles){let E=this._tiles[_];if(d[_]||!E.hasData()||E.tileID.overscaledZ<=s||E.tileID.overscaledZ>l)continue;let k=E.tileID;for(;E&&E.tileID.overscaledZ>s+1;){const P=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[P.key],E&&E.hasData()&&(k=P)}let z=k;for(;z.overscaledZ>s;)if(z=z.scaledTo(z.overscaledZ-1),t[z.key]){d[k.key]=k;break}}}findLoadedParent(t,s){if(t.key in this._loadedParentTiles){const l=this._loadedParentTiles[t.key];return l&&l.tileID.overscaledZ>=s?l:null}for(let l=t.overscaledZ-1;l>=s;l--){const d=t.scaledTo(l),_=this._getLoadedTile(d);if(_)return _}}_getLoadedTile(t){const s=this._tiles[t.key];return s&&s.hasData()?s:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const s=Math.ceil(t.width/this._source.tileSize)+1,l=Math.ceil(t.height/this._source.tileSize)+1,d=Math.floor(s*l*5),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(_)}handleWrapJump(t){const s=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,s){const l={};for(const d in this._tiles){const _=this._tiles[d];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+s),l[_.tileID.key]=_}this._tiles=l;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}update(t){if(this.transform=t,!this._sourceLoaded||this._paused)return;let s;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?s=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new a.OverscaledTileID(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(s=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(s=s.filter(z=>this._source.hasTile(z)))):s=[];const l=t.coveringZoomLevel(this._source),d=Math.max(l-Pi.maxOverzooming,this._source.minzoom),_=Math.max(l+Pi.maxUnderzooming,this._source.minzoom),E=this._updateRetainedTiles(s,l);if(Qn(this._source.type)){const z={},P={},R=Object.keys(E);for(const q of R){const H=E[q],$=this._tiles[q];if(!$||$.fadeEndTime&&$.fadeEndTime<=a.exported.now())continue;const W=this.findLoadedParent(H,d);W&&(this._addTile(W.tileID),z[W.tileID.key]=W.tileID),P[q]=H}this._retainLoadedChildren(P,l,_,E);for(const q in z)E[q]||(this._coveredTiles[q]=!0,E[q]=z[q])}for(const z in E)this._tiles[z].clearFadeHold();const k=a.keysDifference(this._tiles,E);for(const z of k){const P=this._tiles[z];P.hasSymbolBuckets&&!P.holdingForFade()?P.setHoldDuration(this.map._fadeDuration):P.hasSymbolBuckets&&!P.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,s){const l={},d={},_=Math.max(s-Pi.maxOverzooming,this._source.minzoom),E=Math.max(s+Pi.maxUnderzooming,this._source.minzoom),k={};for(const z of t){const P=this._addTile(z);l[z.key]=z,P.hasData()||s<this._source.maxzoom&&(k[z.key]=z)}this._retainLoadedChildren(k,s,E,l);for(const z of t){let P=this._tiles[z.key];if(P.hasData())continue;if(s+1>this._source.maxzoom){const q=z.children(this._source.maxzoom)[0],H=this.getTile(q);if(H&&H.hasData()){l[q.key]=q;continue}}else{const q=z.children(this._source.maxzoom);if(l[q[0].key]&&l[q[1].key]&&l[q[2].key]&&l[q[3].key])continue}let R=P.wasRequested();for(let q=z.overscaledZ-1;q>=_;--q){const H=z.scaledTo(q);if(d[H.key]||(d[H.key]=!0,P=this.getTile(H),!P&&R&&(P=this._addTile(H)),P&&(l[H.key]=H,R=P.wasRequested(),P.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const s=[];let l,d=this._tiles[t].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){l=this._loadedParentTiles[d.key];break}s.push(d.key);const _=d.scaledTo(d.overscaledZ-1);if(l=this._getLoadedTile(_),l)break;d=_}for(const _ of s)this._loadedParentTiles[_]=l}}_addTile(t){let s=this._tiles[t.key];if(s)return s;s=this._cache.getAndRemove(t),s&&(this._setTileReloadTimer(t.key,s),s.tileID=t,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,s)));const l=s;return s||(s=new Zt(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,t.key,s.state))),s.uses++,this._tiles[t.key]=s,l||this._source.fire(new a.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(t,s){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const l=s.getExpiryTimeout();l&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},l))}_removeTile(t){const s=this._tiles[t];s&&(s.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,s,l){const d=[],_=this.transform;if(!_)return d;const E=l?_.getCameraQueryGeometry(t):t,k=t.map(W=>_.pointCoordinate(W)),z=E.map(W=>_.pointCoordinate(W)),P=this.getIds();let R=1/0,q=1/0,H=-1/0,$=-1/0;for(const W of z)R=Math.min(R,W.x),q=Math.min(q,W.y),H=Math.max(H,W.x),$=Math.max($,W.y);for(let W=0;W<P.length;W++){const Q=this._tiles[P[W]];if(Q.holdingForFade())continue;const le=Q.tileID,ce=Math.pow(2,_.zoom-Q.tileID.overscaledZ),pe=s*Q.queryPadding*a.EXTENT/Q.tileSize/ce,he=[le.getTilePoint(new a.MercatorCoordinate(R,q)),le.getTilePoint(new a.MercatorCoordinate(H,$))];if(he[0].x-pe<a.EXTENT&&he[0].y-pe<a.EXTENT&&he[1].x+pe>=0&&he[1].y+pe>=0){const Me=k.map(Ie=>le.getTilePoint(Ie)),be=z.map(Ie=>le.getTilePoint(Ie));d.push({tile:Q,tileID:le,queryGeometry:Me,cameraQueryGeometry:be,scale:ce})}}return d}getVisibleCoordinates(t){const s=this.getRenderableIds(t).map(l=>this._tiles[l].tileID);for(const l of s)l.posMatrix=this.transform.calculatePosMatrix(l.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(Qn(this._source.type))for(const t in this._tiles){const s=this._tiles[t];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=a.exported.now())return!0}return!1}setFeatureState(t,s,l){this._state.updateState(t=t||"_geojsonTileLayer",s,l)}removeFeatureState(t,s,l){this._state.removeFeatureState(t=t||"_geojsonTileLayer",s,l)}getFeatureState(t,s){return this._state.getState(t=t||"_geojsonTileLayer",s)}setDependencies(t,s,l){const d=this._tiles[t];d&&d.setDependencies(s,l)}reloadTilesForDependencies(t,s){for(const l in this._tiles)this._tiles[l].hasDependency(t,s)&&this._reloadTile(l,"reloading");this._cache.filter(l=>!l.hasDependency(t,s))}}function xn(h,t){const s=Math.abs(2*h.wrap)-+(h.wrap<0),l=Math.abs(2*t.wrap)-+(t.wrap<0);return h.overscaledZ-t.overscaledZ||l-s||t.canonical.y-h.canonical.y||t.canonical.x-h.canonical.x}function Qn(h){return h==="raster"||h==="image"||h==="video"}Pi.maxOverzooming=10,Pi.maxUnderzooming=3;const Dn="mapboxgl_preloaded_worker_pool";class bn{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<bn.workerCount;)this.workers.push(new Worker(Ns.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Dn]}numActive(){return Object.keys(this.active).length}}const _r=Math.floor(a.exported.hardwareConcurrency/2);let qe;function vi(){return qe||(qe=new bn),qe}function hn(h,t){const s={};for(const l in h)l!=="ref"&&(s[l]=h[l]);return a.refProperties.forEach(l=>{l in t&&(s[l]=t[l])}),s}function zr(h){h=h.slice();const t=Object.create(null);for(let s=0;s<h.length;s++)t[h[s].id]=h[s];for(let s=0;s<h.length;s++)"ref"in h[s]&&(h[s]=hn(h[s],t[h[s].ref]));return h}bn.workerCount=Math.max(Math.min(_r,6),1);const Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function sr(h,t,s){s.push({command:Vt.addSource,args:[h,t[h]]})}function Hn(h,t,s){t.push({command:Vt.removeSource,args:[h]}),s[h]=!0}function ar(h,t,s,l){Hn(h,s,l),sr(h,t,s)}function Cr(h,t,s){let l;for(l in h[s])if(Object.prototype.hasOwnProperty.call(h[s],l)&&l!=="data"&&!U(h[s][l],t[s][l]))return!1;for(l in t[s])if(Object.prototype.hasOwnProperty.call(t[s],l)&&l!=="data"&&!U(h[s][l],t[s][l]))return!1;return!0}function Se(h,t,s,l,d,_){let E;for(E in t=t||{},h=h||{})Object.prototype.hasOwnProperty.call(h,E)&&(U(h[E],t[E])||s.push({command:_,args:[l,E,t[E],d]}));for(E in t)Object.prototype.hasOwnProperty.call(t,E)&&!Object.prototype.hasOwnProperty.call(h,E)&&(U(h[E],t[E])||s.push({command:_,args:[l,E,t[E],d]}))}function st(h){return h.id}function yr(h,t){return h[t.id]=t,h}class Wn{constructor(t,s){this.reset(t,s)}reset(t,s){this.points=t||[],this._distances=[0];for(let l=1;l<this.points.length;l++)this._distances[l]=this._distances[l-1]+this.points[l].dist(this.points[l-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=a.clamp(t,0,1);let s=1,l=this._distances[s];const d=t*this.paddedLength+this.padding;for(;l<d&&s<this._distances.length;)l=this._distances[++s];const _=s-1,E=this._distances[_],k=l-E,z=k>0?(d-E)/k:0;return this.points[_].mult(1-z).add(this.points[s].mult(z))}}function ri(h,t){let s=!0;return h==="always"||h!=="never"&&t!=="never"||(s=!1),s}class Xt{constructor(t,s,l){const d=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(t/l),this.yCellCount=Math.ceil(s/l);for(let E=0;E<this.xCellCount*this.yCellCount;E++)d.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=s,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,s,l,d,_){this._forEachCell(s,l,d,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(s),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(_)}insertCircle(t,s,l,d){this._forEachCell(s-d,l-d,s+d,l+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(s),this.circles.push(l),this.circles.push(d)}_insertBoxCell(t,s,l,d,_,E){this.boxCells[_].push(E)}_insertCircleCell(t,s,l,d,_,E){this.circleCells[_].push(E)}_query(t,s,l,d,_,E,k){if(l<0||t>this.width||d<0||s>this.height)return[];const z=[];if(t<=0&&s<=0&&this.width<=l&&this.height<=d){if(_)return[{key:null,x1:t,y1:s,x2:l,y2:d}];for(let P=0;P<this.boxKeys.length;P++)z.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const R=this.circles[3*P],q=this.circles[3*P+1],H=this.circles[3*P+2];z.push({key:this.circleKeys[P],x1:R-H,y1:q-H,x2:R+H,y2:q+H})}}else this._forEachCell(t,s,l,d,this._queryCell,z,{hitTest:_,overlapMode:E,seenUids:{box:{},circle:{}}},k);return z}query(t,s,l,d){return this._query(t,s,l,d,!1,null)}hitTest(t,s,l,d,_,E){return this._query(t,s,l,d,!0,_,E).length>0}hitTestCircle(t,s,l,d,_){const E=t-l,k=t+l,z=s-l,P=s+l;if(k<0||E>this.width||P<0||z>this.height)return!1;const R=[];return this._forEachCell(E,z,k,P,this._queryCellCircle,R,{hitTest:!0,overlapMode:d,circle:{x:t,y:s,radius:l},seenUids:{box:{},circle:{}}},_),R.length>0}_queryCell(t,s,l,d,_,E,k,z){const{seenUids:P,hitTest:R,overlapMode:q}=k,H=this.boxCells[_];if(H!==null){const W=this.bboxes;for(const Q of H)if(!P.box[Q]){P.box[Q]=!0;const le=4*Q,ce=this.boxKeys[Q];if(t<=W[le+2]&&s<=W[le+3]&&l>=W[le+0]&&d>=W[le+1]&&(!z||z(ce))&&(!R||!ri(q,ce.overlapMode))&&(E.push({key:ce,x1:W[le],y1:W[le+1],x2:W[le+2],y2:W[le+3]}),R))return!0}}const $=this.circleCells[_];if($!==null){const W=this.circles;for(const Q of $)if(!P.circle[Q]){P.circle[Q]=!0;const le=3*Q,ce=this.circleKeys[Q];if(this._circleAndRectCollide(W[le],W[le+1],W[le+2],t,s,l,d)&&(!z||z(ce))&&(!R||!ri(q,ce.overlapMode))){const pe=W[le],he=W[le+1],Me=W[le+2];if(E.push({key:ce,x1:pe-Me,y1:he-Me,x2:pe+Me,y2:he+Me}),R)return!0}}}return!1}_queryCellCircle(t,s,l,d,_,E,k,z){const{circle:P,seenUids:R,overlapMode:q}=k,H=this.boxCells[_];if(H!==null){const W=this.bboxes;for(const Q of H)if(!R.box[Q]){R.box[Q]=!0;const le=4*Q,ce=this.boxKeys[Q];if(this._circleAndRectCollide(P.x,P.y,P.radius,W[le+0],W[le+1],W[le+2],W[le+3])&&(!z||z(ce))&&!ri(q,ce.overlapMode))return E.push(!0),!0}}const $=this.circleCells[_];if($!==null){const W=this.circles;for(const Q of $)if(!R.circle[Q]){R.circle[Q]=!0;const le=3*Q,ce=this.circleKeys[Q];if(this._circlesCollide(W[le],W[le+1],W[le+2],P.x,P.y,P.radius)&&(!z||z(ce))&&!ri(q,ce.overlapMode))return E.push(!0),!0}}}_forEachCell(t,s,l,d,_,E,k,z){const P=this._convertToXCellCoord(t),R=this._convertToYCellCoord(s),q=this._convertToXCellCoord(l),H=this._convertToYCellCoord(d);for(let $=P;$<=q;$++)for(let W=R;W<=H;W++)if(_.call(this,t,s,l,d,this.xCellCount*W+$,E,k,z))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,s,l,d,_,E){const k=d-t,z=_-s,P=l+E;return P*P>k*k+z*z}_circleAndRectCollide(t,s,l,d,_,E,k){const z=(E-d)/2,P=Math.abs(t-(d+z));if(P>z+l)return!1;const R=(k-_)/2,q=Math.abs(s-(_+R));if(q>R+l)return!1;if(P<=z||q<=R)return!0;const H=P-z,$=q-R;return H*H+$*$<=l*l}}function Fi(h,t,s,l,d){const _=a.create();return t?(a.scale(_,_,[1/d,1/d,1]),s||a.rotateZ(_,_,l.angle)):a.multiply(_,l.labelPlaneMatrix,h),_}function $n(h,t,s,l,d){if(t){const _=a.clone(h);return a.scale(_,_,[d,d,1]),s||a.rotateZ(_,_,-l.angle),_}return l.glCoordMatrix}function ci(h,t){const s=[h.x,h.y,0,1];ui(s,s,t);const l=s[3];return{point:new a.pointGeometry(s[0]/l,s[1]/l),signedDistanceFromCamera:l}}function tt(h,t){return .5+h/t*.5}function Pt(h,t){const s=h[0]/h[3],l=h[1]/h[3];return s>=-t[0]&&s<=t[0]&&l>=-t[1]&&l<=t[1]}function Lt(h,t,s,l,d,_,E,k,z){const P=l?h.textSizeData:h.iconSizeData,R=a.evaluateSizeForZoom(P,s.transform.zoom),q=[256/s.width*2+1,256/s.height*2+1],H=l?h.text.dynamicLayoutVertexArray:h.icon.dynamicLayoutVertexArray;H.clear();const $=h.lineVertexArray,W=l?h.text.placedSymbolArray:h.icon.placedSymbolArray,Q=s.transform.width/s.transform.height;let le=!1;for(let ce=0;ce<W.length;ce++){const pe=W.get(ce);if(pe.hidden||pe.writingMode===a.WritingMode.vertical&&!le){Oi(pe.numGlyphs,H);continue}le=!1;const he=[pe.anchorX,pe.anchorY,0,1];if(a.transformMat4(he,he,t),!Pt(he,q)){Oi(pe.numGlyphs,H);continue}const Me=tt(s.transform.cameraToCenterDistance,he[3]),be=a.evaluateSizeForFeature(P,R,pe),Ie=E?be/Me:be*Me,je=new a.pointGeometry(pe.anchorX,pe.anchorY),it=ci(je,d).point,ze={},gt=Dt(pe,Ie,!1,k,t,d,_,h.glyphOffsetArray,$,H,it,je,ze,Q,z);le=gt.useVertical,(gt.notEnoughRoom||le||gt.needsFlipping&&Dt(pe,Ie,!0,k,t,d,_,h.glyphOffsetArray,$,H,it,je,ze,Q,z).notEnoughRoom)&&Oi(pe.numGlyphs,H)}l?h.text.dynamicLayoutVertexBuffer.updateData(H):h.icon.dynamicLayoutVertexBuffer.updateData(H)}function dn(h,t,s,l,d,_,E,k,z,P,R,q){const H=k.glyphStartIndex+k.numGlyphs,$=k.lineStartIndex,W=k.lineStartIndex+k.lineLength,Q=t.getoffsetX(k.glyphStartIndex),le=t.getoffsetX(H-1),ce=Bn(h*Q,s,l,d,_,E,k.segment,$,W,z,P,R,q);if(!ce)return null;const pe=Bn(h*le,s,l,d,_,E,k.segment,$,W,z,P,R,q);return pe?{first:ce,last:pe}:null}function an(h,t,s,l){return h===a.WritingMode.horizontal&&Math.abs(s.y-t.y)>Math.abs(s.x-t.x)*l?{useVertical:!0}:(h===a.WritingMode.vertical?t.y<s.y:t.x>s.x)?{needsFlipping:!0}:null}function Dt(h,t,s,l,d,_,E,k,z,P,R,q,H,$,W){const Q=t/24,le=h.lineOffsetX*Q,ce=h.lineOffsetY*Q;let pe;if(h.numGlyphs>1){const he=h.glyphStartIndex+h.numGlyphs,Me=h.lineStartIndex,be=h.lineStartIndex+h.lineLength,Ie=dn(Q,k,le,ce,s,R,q,h,z,_,H,W);if(!Ie)return{notEnoughRoom:!0};const je=ci(Ie.first.point,E).point,it=ci(Ie.last.point,E).point;if(l&&!s){const ze=an(h.writingMode,je,it,$);if(ze)return ze}pe=[Ie.first];for(let ze=h.glyphStartIndex+1;ze<he-1;ze++)pe.push(Bn(Q*k.getoffsetX(ze),le,ce,s,R,q,h.segment,Me,be,z,_,H,W));pe.push(Ie.last)}else{if(l&&!s){const Me=ci(q,d).point,be=h.lineStartIndex+h.segment+1,Ie=new a.pointGeometry(z.getx(be),z.gety(be)),je=ci(Ie,d),it=je.signedDistanceFromCamera>0?je.point:vr(q,Ie,Me,1,d),ze=an(h.writingMode,Me,it,$);if(ze)return ze}const he=Bn(Q*k.getoffsetX(h.glyphStartIndex),le,ce,s,R,q,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,z,_,H,W);if(!he)return{notEnoughRoom:!0};pe=[he]}for(const he of pe)a.addDynamicAttributes(P,he.point,he.angle);return{}}function vr(h,t,s,l,d){const _=ci(h.add(h.sub(t)._unit()),d).point,E=s.sub(_);return s.add(E._mult(l/E.mag()))}function Bn(h,t,s,l,d,_,E,k,z,P,R,q,H){const $=l?h-t:h+t;let W=$>0?1:-1,Q=0;l&&(W*=-1,Q=Math.PI),W<0&&(Q+=Math.PI);let le=W>0?k+E:k+E+1,ce=d,pe=d,he=0,Me=0;const be=Math.abs($),Ie=[];for(;he+Me<=be;){if(le+=W,le<k||le>=z)return null;if(pe=ce,Ie.push(ce),ce=q[le],ce===void 0){const ot=new a.pointGeometry(P.getx(le),P.gety(le)),zt=ci(ot,R);if(zt.signedDistanceFromCamera>0)ce=q[le]=zt.point;else{const Kt=le-W;ce=vr(he===0?_:new a.pointGeometry(P.getx(Kt),P.gety(Kt)),ot,pe,be-he+1,R)}}he+=Me,Me=pe.dist(ce)}const je=(be-he)/Me,it=ce.sub(pe),ze=it.mult(je)._add(pe);ze._add(it._unit()._perp()._mult(s*W));const gt=Q+Math.atan2(ce.y-pe.y,ce.x-pe.x);return Ie.push(ze),{point:ze,angle:H?gt:0,path:Ie}}const er=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Oi(h,t){for(let s=0;s<h;s++){const l=t.length;t.resize(l+4),t.float32.set(er,3*l)}}function ui(h,t,s){const l=t[0],d=t[1];return h[0]=s[0]*l+s[4]*d+s[12],h[1]=s[1]*l+s[5]*d+s[13],h[3]=s[3]*l+s[7]*d+s[15],h}const kn=100;class or{constructor(t,s=new Xt(t.width+200,t.height+200,25),l=new Xt(t.width+200,t.height+200,25)){this.transform=t,this.grid=s,this.ignoredGrid=l,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+kn,this.screenBottomBoundary=t.height+kn,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}placeCollisionBox(t,s,l,d,_){const E=this.projectAndGetPerspectiveRatio(d,t.anchorPointX,t.anchorPointY),k=l*E.perspectiveRatio,z=t.x1*k+E.point.x,P=t.y1*k+E.point.y,R=t.x2*k+E.point.x,q=t.y2*k+E.point.y;return!this.isInsideGrid(z,P,R,q)||s!=="always"&&this.grid.hitTest(z,P,R,q,s,_)?{box:[],offscreen:!1}:{box:[z,P,R,q],offscreen:this.isOffscreen(z,P,R,q)}}placeCollisionCircles(t,s,l,d,_,E,k,z,P,R,q,H,$){const W=[],Q=new a.pointGeometry(s.anchorX,s.anchorY),le=ci(Q,E),ce=tt(this.transform.cameraToCenterDistance,le.signedDistanceFromCamera),pe=(R?_/ce:_*ce)/a.ONE_EM,he=ci(Q,k).point,Me=dn(pe,d,s.lineOffsetX*pe,s.lineOffsetY*pe,!1,he,Q,s,l,k,{},!1);let be=!1,Ie=!1,je=!0;if(Me){const it=.5*H*ce+$,ze=new a.pointGeometry(-100,-100),gt=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ot=new Wn,zt=Me.first,Kt=Me.last;let Ut=[];for(let Mt=zt.path.length-1;Mt>=1;Mt--)Ut.push(zt.path[Mt]);for(let Mt=1;Mt<Kt.path.length;Mt++)Ut.push(Kt.path[Mt]);const Ht=2.5*it;if(z){const Mt=Ut.map($t=>ci($t,z));Ut=Mt.some($t=>$t.signedDistanceFromCamera<=0)?[]:Mt.map($t=>$t.point)}let Ri=[];if(Ut.length>0){const Mt=Ut[0].clone(),$t=Ut[0].clone();for(let di=1;di<Ut.length;di++)Mt.x=Math.min(Mt.x,Ut[di].x),Mt.y=Math.min(Mt.y,Ut[di].y),$t.x=Math.max($t.x,Ut[di].x),$t.y=Math.max($t.y,Ut[di].y);Ri=Mt.x>=ze.x&&$t.x<=gt.x&&Mt.y>=ze.y&&$t.y<=gt.y?[Ut]:$t.x<ze.x||Mt.x>gt.x||$t.y<ze.y||Mt.y>gt.y?[]:a.clipLine([Ut],ze.x,ze.y,gt.x,gt.y)}for(const Mt of Ri){ot.reset(Mt,.25*it);let $t=0;$t=ot.length<=.5*it?1:Math.ceil(ot.paddedLength/Ht)+1;for(let di=0;di<$t;di++){const pn=di/Math.max($t-1,1),Vn=ot.lerp(pn),Kn=Vn.x+kn,Yn=Vn.y+kn;W.push(Kn,Yn,it,0);const Lr=Kn-it,Pn=Yn-it,ur=Kn+it,Wr=Yn+it;if(je=je&&this.isOffscreen(Lr,Pn,ur,Wr),Ie=Ie||this.isInsideGrid(Lr,Pn,ur,Wr),t!=="always"&&this.grid.hitTestCircle(Kn,Yn,it,t,q)&&(be=!0,!P))return{circles:[],offscreen:!1,collisionDetected:be}}}}return{circles:!P&&be||!Ie?[]:W,offscreen:je,collisionDetected:be}}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let l=1/0,d=1/0,_=-1/0,E=-1/0;for(const R of t){const q=new a.pointGeometry(R.x+kn,R.y+kn);l=Math.min(l,q.x),d=Math.min(d,q.y),_=Math.max(_,q.x),E=Math.max(E,q.y),s.push(q)}const k=this.grid.query(l,d,_,E).concat(this.ignoredGrid.query(l,d,_,E)),z={},P={};for(const R of k){const q=R.key;if(z[q.bucketInstanceId]===void 0&&(z[q.bucketInstanceId]={}),z[q.bucketInstanceId][q.featureIndex])continue;const H=[new a.pointGeometry(R.x1,R.y1),new a.pointGeometry(R.x2,R.y1),new a.pointGeometry(R.x2,R.y2),new a.pointGeometry(R.x1,R.y2)];a.polygonIntersectsPolygon(s,H)&&(z[q.bucketInstanceId][q.featureIndex]=!0,P[q.bucketInstanceId]===void 0&&(P[q.bucketInstanceId]=[]),P[q.bucketInstanceId].push(q.featureIndex))}return P}insertCollisionBox(t,s,l,d,_,E){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:_,collisionGroupID:E,overlapMode:s},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,s,l,d,_,E){const k=l?this.ignoredGrid:this.grid,z={bucketInstanceId:d,featureIndex:_,collisionGroupID:E,overlapMode:s};for(let P=0;P<t.length;P+=4)k.insertCircle(z,t[P],t[P+1],t[P+2])}projectAndGetPerspectiveRatio(t,s,l){const d=[s,l,0,1];return ui(d,d,t),{point:new a.pointGeometry((d[0]/d[3]+1)/2*this.transform.width+kn,(-d[1]/d[3]+1)/2*this.transform.height+kn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/d[3]*.5}}isOffscreen(t,s,l,d){return l<kn||t>=this.screenRightBoundary||d<kn||s>this.screenBottomBoundary}isInsideGrid(t,s,l,d){return l>=0&&t<this.gridRightBoundary&&d>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const t=a.identity([]);return a.translate(t,t,[-100,-100,0]),t}}function Vi(h,t,s){return t*(a.EXTENT/(h.tileSize*Math.pow(2,s-h.tileID.overscaledZ)))}class Rn{constructor(t,s,l,d){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?s:-s))):d&&l?1:0,this.placed=l}isHidden(){return this.opacity===0&&!this.placed}}class An{constructor(t,s,l,d,_){this.text=new Rn(t?t.text:null,s,l,_),this.icon=new Rn(t?t.icon:null,s,d,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Or{constructor(t,s,l){this.text=t,this.icon=s,this.skipFade=l}}class lr{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Mr{constructor(t,s,l,d,_){this.bucketInstanceId=t,this.featureIndex=s,this.sourceLayerIndex=l,this.bucketIndex=d,this.tileID=_}}class X{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const s=++this.maxGroupID;this.collisionGroups[t]={ID:s,predicate:l=>l.collisionGroupID===s}}return this.collisionGroups[t]}}function M(h,t,s,l,d){const{horizontalAlign:_,verticalAlign:E}=a.getAnchorAlignment(h),k=-(_-.5)*t,z=-(E-.5)*s,P=a.evaluateVariableOffset(h,l);return new a.pointGeometry(k+P[0]*d,z+P[1]*d)}function D(h,t,s,l,d,_){const{x1:E,x2:k,y1:z,y2:P,anchorPointX:R,anchorPointY:q}=h,H=new a.pointGeometry(t,s);return l&&H._rotate(d?_:-_),{x1:E+H.x,y1:z+H.y,x2:k+H.x,y2:P+H.y,anchorPointX:R,anchorPointY:q}}class Z{constructor(t,s,l,d){this.transform=t.clone(),this.collisionIndex=new or(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new X(l),this.collisionCircleArrays={},this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,s,l,d){const _=l.getBucket(s),E=l.latestFeatureIndex;if(!_||!E||s.id!==_.layerIds[0])return;const k=l.collisionBoxArray,z=_.layers[0].layout,P=Math.pow(2,this.transform.zoom-l.tileID.overscaledZ),R=l.tileSize/a.EXTENT,q=this.transform.calculatePosMatrix(l.tileID.toUnwrapped()),H=z.get("text-pitch-alignment")==="map",$=z.get("text-rotation-alignment")==="map",W=Vi(l,1,this.transform.zoom),Q=Fi(q,H,$,this.transform,W);let le=null;if(H){const pe=$n(q,H,$,this.transform,W);le=a.multiply([],this.transform.labelPlaneMatrix,pe)}this.retainedQueryData[_.bucketInstanceId]=new Mr(_.bucketInstanceId,E,_.sourceLayerIndex,_.index,l.tileID);const ce={bucket:_,layout:z,posMatrix:q,textLabelPlaneMatrix:Q,labelToScreenMatrix:le,scale:P,textPixelRatio:R,holdingForFade:l.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(d)for(const pe of _.sortKeyRanges){const{sortKey:he,symbolInstanceStart:Me,symbolInstanceEnd:be}=pe;t.push({sortKey:he,symbolInstanceStart:Me,symbolInstanceEnd:be,parameters:ce})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:ce})}attemptAnchorPlacement(t,s,l,d,_,E,k,z,P,R,q,H,$,W,Q){const le=[H.textOffset0,H.textOffset1],ce=M(t,l,d,le,_),pe=this.collisionIndex.placeCollisionBox(D(s,ce.x,ce.y,E,k,this.transform.angle),q,z,P,R.predicate);if((!Q||this.collisionIndex.placeCollisionBox(D(Q,ce.x,ce.y,E,k,this.transform.angle),q,z,P,R.predicate).box.length!==0)&&pe.box.length>0){let he;return this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(he=this.prevPlacement.variableOffsets[H.crossTileID].anchor),this.variableOffsets[H.crossTileID]={textOffset:le,width:l,height:d,anchor:t,textBoxScale:_,prevAnchor:he},this.markUsedJustification($,t,H,W),$.allowVerticalPlacement&&(this.markUsedOrientation($,W,H),this.placedOrientations[H.crossTileID]=W),{shift:ce,placedGlyphBoxes:pe}}}placeLayerBucketPart(t,s,l){const{bucket:d,layout:_,posMatrix:E,textLabelPlaneMatrix:k,labelToScreenMatrix:z,textPixelRatio:P,holdingForFade:R,collisionBoxArray:q,partiallyEvaluatedTextSize:H,collisionGroup:$}=t.parameters,W=_.get("text-optional"),Q=_.get("icon-optional"),le=a.getOverlapMode(_,"text-overlap","text-allow-overlap"),ce=le==="always",pe=a.getOverlapMode(_,"icon-overlap","icon-allow-overlap"),he=pe==="always",Me=_.get("text-rotation-alignment")==="map",be=_.get("text-pitch-alignment")==="map",Ie=_.get("icon-text-fit")!=="none",je=_.get("symbol-z-order")==="viewport-y",it=ce&&(he||!d.hasIconData()||Q),ze=he&&(ce||!d.hasTextData()||W);!d.collisionArrays&&q&&d.deserializeCollisionBoxes(q);const gt=(ot,zt)=>{if(s[ot.crossTileID])return;if(R)return void(this.placements[ot.crossTileID]=new Or(!1,!1,!1));let Kt=!1,Ut=!1,Ht=!0,Ri=null,Mt={box:null,offscreen:null},$t={box:null,offscreen:null},di=null,pn=null,Vn=null,Kn=0,Yn=0,Lr=0;zt.textFeatureIndex?Kn=zt.textFeatureIndex:ot.useRuntimeCollisionCircles&&(Kn=ot.featureIndex),zt.verticalTextFeatureIndex&&(Yn=zt.verticalTextFeatureIndex);const Pn=zt.textBox;if(Pn){const Un=si=>{let Qi=a.WritingMode.horizontal;if(d.allowVerticalPlacement&&!si&&this.prevPlacement){const wn=this.prevPlacement.placedOrientations[ot.crossTileID];wn&&(this.placedOrientations[ot.crossTileID]=wn,Qi=wn,this.markUsedOrientation(d,Qi,ot))}return Qi},ei=(si,Qi)=>{if(d.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&zt.verticalTextBox){for(const wn of d.writingModes)if(wn===a.WritingMode.vertical?(Mt=Qi(),$t=Mt):Mt=si(),Mt&&Mt.box&&Mt.box.length)break}else Mt=si()};if(_.get("text-variable-anchor")){let si=_.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ot.crossTileID]){const Ai=this.prevPlacement.variableOffsets[ot.crossTileID];si.indexOf(Ai.anchor)>0&&(si=si.filter(Xr=>Xr!==Ai.anchor),si.unshift(Ai.anchor))}const Qi=(Ai,Xr,hr)=>{const wa=Ai.x2-Ai.x1,To=Ai.y2-Ai.y1,Sa=ot.textBoxScale,Cl=Ie&&pe==="never"?Xr:null;let Kr={box:[],offscreen:!1};const Ia=le!=="never"?2*si.length:si.length;for(let dr=0;dr<Ia;++dr){const ms=this.attemptAnchorPlacement(si[dr%si.length],Ai,wa,To,Sa,Me,be,P,E,$,dr>=si.length?le:"never",ot,d,hr,Cl);if(ms&&(Kr=ms.placedGlyphBoxes,Kr&&Kr.box&&Kr.box.length)){Kt=!0,Ri=ms.shift;break}}return Kr};ei(()=>Qi(Pn,zt.iconBox,a.WritingMode.horizontal),()=>{const Ai=zt.verticalTextBox;return d.allowVerticalPlacement&&!(Mt&&Mt.box&&Mt.box.length)&&ot.numVerticalGlyphVertices>0&&Ai?Qi(Ai,zt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Mt&&(Kt=Mt.box,Ht=Mt.offscreen);const wn=Un(Mt&&Mt.box);if(!Kt&&this.prevPlacement){const Ai=this.prevPlacement.variableOffsets[ot.crossTileID];Ai&&(this.variableOffsets[ot.crossTileID]=Ai,this.markUsedJustification(d,Ai.anchor,ot,wn))}}else{const si=(Qi,wn)=>{const Ai=this.collisionIndex.placeCollisionBox(Qi,le,P,E,$.predicate);return Ai&&Ai.box&&Ai.box.length&&(this.markUsedOrientation(d,wn,ot),this.placedOrientations[ot.crossTileID]=wn),Ai};ei(()=>si(Pn,a.WritingMode.horizontal),()=>{const Qi=zt.verticalTextBox;return d.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&Qi?si(Qi,a.WritingMode.vertical):{box:null,offscreen:null}}),Un(Mt&&Mt.box&&Mt.box.length)}}if(di=Mt,Kt=di&&di.box&&di.box.length>0,Ht=di&&di.offscreen,ot.useRuntimeCollisionCircles){const Un=d.text.placedSymbolArray.get(ot.centerJustifiedTextSymbolIndex),ei=a.evaluateSizeForFeature(d.textSizeData,H,Un),si=_.get("text-padding");pn=this.collisionIndex.placeCollisionCircles(le,Un,d.lineVertexArray,d.glyphOffsetArray,ei,E,k,z,l,be,$.predicate,ot.collisionCircleDiameter,si),Kt=ce||pn.circles.length>0&&!pn.collisionDetected,Ht=Ht&&pn.offscreen}if(zt.iconFeatureIndex&&(Lr=zt.iconFeatureIndex),zt.iconBox){const Un=ei=>{const si=Ie&&Ri?D(ei,Ri.x,Ri.y,Me,be,this.transform.angle):ei;return this.collisionIndex.placeCollisionBox(si,pe,P,E,$.predicate)};$t&&$t.box&&$t.box.length&&zt.verticalIconBox?(Vn=Un(zt.verticalIconBox),Ut=Vn.box.length>0):(Vn=Un(zt.iconBox),Ut=Vn.box.length>0),Ht=Ht&&Vn.offscreen}const ur=W||ot.numHorizontalGlyphVertices===0&&ot.numVerticalGlyphVertices===0,Wr=Q||ot.numIconVertices===0;if(ur||Wr?Wr?ur||(Ut=Ut&&Kt):Kt=Ut&&Kt:Ut=Kt=Ut&&Kt,Kt&&di&&di.box&&this.collisionIndex.insertCollisionBox(di.box,le,_.get("text-ignore-placement"),d.bucketInstanceId,$t&&$t.box&&Yn?Yn:Kn,$.ID),Ut&&Vn&&this.collisionIndex.insertCollisionBox(Vn.box,pe,_.get("icon-ignore-placement"),d.bucketInstanceId,Lr,$.ID),pn&&(Kt&&this.collisionIndex.insertCollisionCircles(pn.circles,le,_.get("text-ignore-placement"),d.bucketInstanceId,Kn,$.ID),l)){const Un=d.bucketInstanceId;let ei=this.collisionCircleArrays[Un];ei===void 0&&(ei=this.collisionCircleArrays[Un]=new lr);for(let si=0;si<pn.circles.length;si+=4)ei.circles.push(pn.circles[si+0]),ei.circles.push(pn.circles[si+1]),ei.circles.push(pn.circles[si+2]),ei.circles.push(pn.collisionDetected?1:0)}this.placements[ot.crossTileID]=new Or(Kt||it,Ut||ze,Ht||d.justReloaded),s[ot.crossTileID]=!0};if(je){const ot=d.getSortedSymbolIndexes(this.transform.angle);for(let zt=ot.length-1;zt>=0;--zt){const Kt=ot[zt];gt(d.symbolInstances.get(Kt),d.collisionArrays[Kt])}}else for(let ot=t.symbolInstanceStart;ot<t.symbolInstanceEnd;ot++)gt(d.symbolInstances.get(ot),d.collisionArrays[ot]);if(l&&d.bucketInstanceId in this.collisionCircleArrays){const ot=this.collisionCircleArrays[d.bucketInstanceId];a.invert(ot.invProjMatrix,E),ot.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}markUsedJustification(t,s,l,d){let _;_=d===a.WritingMode.vertical?l.verticalPlacedTextSymbolIndex:{left:l.leftJustifiedTextSymbolIndex,center:l.centerJustifiedTextSymbolIndex,right:l.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(s)];const E=[l.leftJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.rightJustifiedTextSymbolIndex,l.verticalPlacedTextSymbolIndex];for(const k of E)k>=0&&(t.text.placedSymbolArray.get(k).crossTileID=_>=0&&k!==_?0:l.crossTileID)}markUsedOrientation(t,s,l){const d=s===a.WritingMode.horizontal||s===a.WritingMode.horizontalOnly?s:0,_=s===a.WritingMode.vertical?s:0,E=[l.leftJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.rightJustifiedTextSymbolIndex];for(const k of E)t.text.placedSymbolArray.get(k).placedOrientation=d;l.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let l=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const d=s?s.symbolFadeChange(t):1,_=s?s.opacities:{},E=s?s.variableOffsets:{},k=s?s.placedOrientations:{};for(const z in this.placements){const P=this.placements[z],R=_[z];R?(this.opacities[z]=new An(R,d,P.text,P.icon),l=l||P.text!==R.text.placed||P.icon!==R.icon.placed):(this.opacities[z]=new An(null,d,P.text,P.icon,P.skipFade),l=l||P.text||P.icon)}for(const z in _){const P=_[z];if(!this.opacities[z]){const R=new An(P,d,!1,!1);R.isHidden()||(this.opacities[z]=R,l=l||P.text.placed||P.icon.placed)}}for(const z in E)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=E[z]);for(const z in k)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=k[z]);l?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:t)}updateLayerOpacities(t,s){const l={};for(const d of s){const _=d.getBucket(t);_&&d.latestFeatureIndex&&t.id===_.layerIds[0]&&this.updateBucketOpacities(_,l,d.collisionBoxArray)}}updateBucketOpacities(t,s,l){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const d=t.layers[0].layout,_=new An(null,0,!1,!1,!0),E=d.get("text-allow-overlap"),k=d.get("icon-allow-overlap"),z=d.get("text-variable-anchor"),P=d.get("text-rotation-alignment")==="map",R=d.get("text-pitch-alignment")==="map",q=d.get("icon-text-fit")!=="none",H=new An(null,0,E&&(k||!t.hasIconData()||d.get("icon-optional")),k&&(E||!t.hasTextData()||d.get("text-optional")),!0);!t.collisionArrays&&l&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(l);const $=(W,Q,le)=>{for(let ce=0;ce<Q/4;ce++)W.opacityVertexArray.emplaceBack(le)};for(let W=0;W<t.symbolInstances.length;W++){const Q=t.symbolInstances.get(W),{numHorizontalGlyphVertices:le,numVerticalGlyphVertices:ce,crossTileID:pe}=Q;let he=this.opacities[pe];s[pe]?he=_:he||(he=H,this.opacities[pe]=he),s[pe]=!0;const Me=Q.numIconVertices>0,be=this.placedOrientations[Q.crossTileID],Ie=be===a.WritingMode.vertical,je=be===a.WritingMode.horizontal||be===a.WritingMode.horizontalOnly;if(le>0||ce>0){const it=ve(he.text);$(t.text,le,Ie?mt:it),$(t.text,ce,je?mt:it);const ze=he.text.isHidden();[Q.rightJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.leftJustifiedTextSymbolIndex].forEach(zt=>{zt>=0&&(t.text.placedSymbolArray.get(zt).hidden=ze||Ie?1:0)}),Q.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).hidden=ze||je?1:0);const gt=this.variableOffsets[Q.crossTileID];gt&&this.markUsedJustification(t,gt.anchor,Q,be);const ot=this.placedOrientations[Q.crossTileID];ot&&(this.markUsedJustification(t,"left",Q,ot),this.markUsedOrientation(t,ot,Q))}if(Me){const it=ve(he.icon),ze=!(q&&Q.verticalPlacedIconSymbolIndex&&Ie);Q.placedIconSymbolIndex>=0&&($(t.icon,Q.numIconVertices,ze?it:mt),t.icon.placedSymbolArray.get(Q.placedIconSymbolIndex).hidden=he.icon.isHidden()),Q.verticalPlacedIconSymbolIndex>=0&&($(t.icon,Q.numVerticalIconVertices,ze?mt:it),t.icon.placedSymbolArray.get(Q.verticalPlacedIconSymbolIndex).hidden=he.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const it=t.collisionArrays[W];if(it){let ze=new a.pointGeometry(0,0);if(it.textBox||it.verticalTextBox){let ot=!0;if(z){const zt=this.variableOffsets[pe];zt?(ze=M(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),P&&ze._rotate(R?this.transform.angle:-this.transform.angle)):ot=!1}it.textBox&&Y(t.textCollisionBox.collisionVertexArray,he.text.placed,!ot||Ie,ze.x,ze.y),it.verticalTextBox&&Y(t.textCollisionBox.collisionVertexArray,he.text.placed,!ot||je,ze.x,ze.y)}const gt=Boolean(!je&&it.verticalIconBox);it.iconBox&&Y(t.iconCollisionBox.collisionVertexArray,he.icon.placed,gt,q?ze.x:0,q?ze.y:0),it.verticalIconBox&&Y(t.iconCollisionBox.collisionVertexArray,he.icon.placed,!gt,q?ze.x:0,q?ze.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const W=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=W.invProjMatrix,t.placementViewportMatrix=W.viewportMatrix,t.collisionCircleArray=W.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,s){const l=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*l>t}setStale(){this.stale=!0}}function Y(h,t,s,l,d){h.emplaceBack(t?1:0,s?1:0,l||0,d||0),h.emplaceBack(t?1:0,s?1:0,l||0,d||0),h.emplaceBack(t?1:0,s?1:0,l||0,d||0),h.emplaceBack(t?1:0,s?1:0,l||0,d||0)}const J=Math.pow(2,25),se=Math.pow(2,24),ne=Math.pow(2,17),re=Math.pow(2,16),oe=Math.pow(2,9),we=Math.pow(2,8),Re=Math.pow(2,1);function ve(h){if(h.opacity===0&&!h.placed)return 0;if(h.opacity===1&&h.placed)return 4294967295;const t=h.placed?1:0,s=Math.floor(127*h.opacity);return s*J+t*se+s*ne+t*re+s*oe+t*we+s*Re+t}const mt=0;class K{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,s,l,d,_){const E=this._bucketParts;for(;this._currentTileIndex<t.length;)if(s.getBucketParts(E,d,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((k,z)=>k.sortKey-z.sortKey));this._currentPartIndex<E.length;)if(s.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,l),this._currentPartIndex++,_())return!0;return!1}}class Fe{constructor(t,s,l,d,_,E,k){this.placement=new Z(t,_,E,k),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=l,this._showCollisionBoxes=d,this._done=!1}isDone(){return this._done}continuePlacement(t,s,l){const d=a.exported.now(),_=()=>{const E=a.exported.now()-d;return!this._forceFullPlacement&&E>2};for(;this._currentPlacementIndex>=0;){const E=s[t[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=k)&&(!E.maxzoom||E.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new K(E)),this._inProgressLayer.continuePlacement(l[E.source],this.placement,this._showCollisionBoxes,E,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const rt=512/a.EXTENT/2;class Ct{constructor(t,s,l){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=l;for(let d=0;d<s.length;d++){const _=s.get(d),E=_.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:_.crossTileID,coord:this.getScaledCoordinates(_,t)})}}getScaledCoordinates(t,s){const l=rt/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*a.EXTENT+t.anchorX)*l),y:Math.floor((s.canonical.y*a.EXTENT+t.anchorY)*l)}}findMatches(t,s,l){const d=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let _=0;_<t.length;_++){const E=t.get(_);if(E.crossTileID)continue;const k=this.indexedSymbolInstances[E.key];if(!k)continue;const z=this.getScaledCoordinates(E,s);for(const P of k)if(Math.abs(P.coord.x-z.x)<=d&&Math.abs(P.coord.y-z.y)<=d&&!l[P.crossTileID]){l[P.crossTileID]=!0,E.crossTileID=P.crossTileID;break}}}}class Bt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class At{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const s=Math.round((t-this.lng)/360);if(s!==0)for(const l in this.indexes){const d=this.indexes[l],_={};for(const E in d){const k=d[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+s),_[k.tileID.key]=k}this.indexes[l]=_}this.lng=t}addBucket(t,s,l){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let _=0;_<s.symbolInstances.length;_++)s.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const d=this.usedCrossTileIDs[t.overscaledZ];for(const _ in this.indexes){const E=this.indexes[_];if(Number(_)>t.overscaledZ)for(const k in E){const z=E[k];z.tileID.isChildOf(t)&&z.findMatches(s.symbolInstances,t,d)}else{const k=E[t.scaledTo(Number(_)).key];k&&k.findMatches(s.symbolInstances,t,d)}}for(let _=0;_<s.symbolInstances.length;_++){const E=s.symbolInstances.get(_);E.crossTileID||(E.crossTileID=l.generate(),d[E.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ct(t,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(t,s){for(const l in s.indexedSymbolInstances)for(const d of s.indexedSymbolInstances[l])delete this.usedCrossTileIDs[t][d.crossTileID]}removeStaleBuckets(t){let s=!1;for(const l in this.indexes){const d=this.indexes[l];for(const _ in d)t[d[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(l,d[_]),delete d[_],s=!0)}return s}}class Ot{constructor(){this.layerIndexes={},this.crossTileIDs=new Bt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,s,l){let d=this.layerIndexes[t.id];d===void 0&&(d=this.layerIndexes[t.id]=new At);let _=!1;const E={};d.handleWrapJump(l);for(const k of s){const z=k.getBucket(t);z&&t.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(k.tileID,z,this.crossTileIDs)&&(_=!0),E[z.bucketInstanceId]=!0)}return d.removeStaleBuckets(E)&&(_=!0),_}pruneUnusedLayers(t){const s={};t.forEach(l=>{s[l]=!0});for(const l in this.layerIndexes)s[l]||delete this.layerIndexes[l]}}const Ft=(h,t)=>a.emitValidationErrors(h,t&&t.filter(s=>s.identifier!=="source.canvas")),Zi=a.pick(Vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ui=a.pick(Vt,["setCenter","setZoom","setBearing","setPitch"]),on=function(){const h={},t=a.spec.$version;for(const s in a.spec.$root){const l=a.spec.$root[s];if(l.required){let d=null;d=s==="version"?t:l.type==="array"?[]:{},d!=null&&(h[s]=d)}}return h}();class fn extends a.Evented{constructor(t,s={}){super(),this.map=t,this.dispatcher=new bt(vi(),this),this.imageManager=new Pe,this.imageManager.setEventedParent(this),this.glyphManager=new ke(t._requestManager,s.localIdeographFontFamily),this.lineAtlas=new pt(256,512),this.crossTileSymbolIndex=new Ot,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const l=this;this._rtlTextPluginCallback=fn.registerForPluginStateChange(d=>{l.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:d.pluginStatus,pluginURL:d.pluginURL},(_,E)=>{if(a.triggerPluginCompletionEvent(_),E&&E.every(k=>k))for(const k in l.sourceCaches)l.sourceCaches[k].reload()})}),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const _=this.sourceCaches[d.sourceId];if(!_)return;const E=_.getSource();if(E&&E.vectorLayerIds)for(const k in this._layers){const z=this._layers[k];z.source===E.id&&this._validateLayer(z)}})}loadURL(t,s={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const l=typeof s.validate!="boolean"||s.validate,d=this.map._requestManager.transformRequest(t,a.ResourceType.Style);this._request=a.getJSON(d,(_,E)=>{this._request=null,_?this.fire(new a.ErrorEvent(_)):E&&this._load(E,l)})}loadJSON(t,s={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(t,s.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(on,!1)}_load(t,s){if(s&&Ft(this,a.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const d in t.sources)this.addSource(d,t.sources[d],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);const l=zr(this.stylesheet.layers);this._order=l.map(d=>d.id),this._layers={},this._serializedLayers={};for(let d of l)d=a.createStyleLayer(d),d.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=d,this._serializedLayers[d.id]=d.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new vt(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(s,l,d,_){let E,k,z;const P=d>1?"@2x":"";let R=a.getJSON(l.transformRequest(l.normalizeSpriteURL(s,P,".json"),a.ResourceType.SpriteJSON),($,W)=>{R=null,z||(z=$,E=W,H())}),q=a.getImage(l.transformRequest(l.normalizeSpriteURL(s,P,".png"),a.ResourceType.SpriteImage),($,W)=>{q=null,z||(z=$,k=W,H())});function H(){if(z)_(z);else if(E&&k){const $=a.exported.getImageData(k),W={};for(const Q in E){const{width:le,height:ce,x:pe,y:he,sdf:Me,pixelRatio:be,stretchX:Ie,stretchY:je,content:it}=E[Q],ze=new a.RGBAImage({width:le,height:ce});a.RGBAImage.copy($,ze,{x:pe,y:he},{x:0,y:0},{width:le,height:ce}),W[Q]={data:ze,pixelRatio:be,sdf:Me,stretchX:Ie,stretchY:je,content:it}}_(null,W)}}return{cancel(){R&&(R.cancel(),R=null),q&&(q.cancel(),q=null)}}}(t,this.map._requestManager,this.map.getPixelRatio(),(s,l)=>{if(this._spriteRequest=null,s)this.fire(new a.ErrorEvent(s));else if(l)for(const d in l)this.imageManager.addImage(d,l[d]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(t){const s=this.sourceCaches[t.source];if(!s)return;const l=t.sourceLayer;if(!l)return;const d=s.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(l)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${l}" does not exist on source "${d.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const s=[];for(const l of t){const d=this._layers[l];d.type!=="custom"&&s.push(d.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const s=this._changed;if(this._changed){const d=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(d.length||_.length)&&this._updateWorkerLayers(d,_);for(const E in this._updatedSources){const k=this._updatedSources[E];k==="reload"?this._reloadSource(E):k==="clear"&&this._clearSource(E)}this._updateTilesForChangedImages();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const l={};for(const d in this.sourceCaches){const _=this.sourceCaches[d];l[d]=_.used,_.used=!1}for(const d of this._order){const _=this._layers[d];_.recalculate(t,this._availableImages),!_.isHidden(t.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const d in l){const _=this.sourceCaches[d];l[d]!==_.used&&_.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(t),this.z=t.zoom,s&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,s){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Ft(this,a.validateStyle(t)))return!1;(t=a.clone$1(t)).layers=zr(t.layers);const s=function(d,_){if(!d)return[{command:Vt.setStyle,args:[_]}];let E=[];try{if(!U(d.version,_.version))return[{command:Vt.setStyle,args:[_]}];U(d.center,_.center)||E.push({command:Vt.setCenter,args:[_.center]}),U(d.zoom,_.zoom)||E.push({command:Vt.setZoom,args:[_.zoom]}),U(d.bearing,_.bearing)||E.push({command:Vt.setBearing,args:[_.bearing]}),U(d.pitch,_.pitch)||E.push({command:Vt.setPitch,args:[_.pitch]}),U(d.sprite,_.sprite)||E.push({command:Vt.setSprite,args:[_.sprite]}),U(d.glyphs,_.glyphs)||E.push({command:Vt.setGlyphs,args:[_.glyphs]}),U(d.transition,_.transition)||E.push({command:Vt.setTransition,args:[_.transition]}),U(d.light,_.light)||E.push({command:Vt.setLight,args:[_.light]});const k={},z=[];(function(R,q,H,$){let W;for(W in q=q||{},R=R||{})Object.prototype.hasOwnProperty.call(R,W)&&(Object.prototype.hasOwnProperty.call(q,W)||Hn(W,H,$));for(W in q)Object.prototype.hasOwnProperty.call(q,W)&&(Object.prototype.hasOwnProperty.call(R,W)?U(R[W],q[W])||(R[W].type==="geojson"&&q[W].type==="geojson"&&Cr(R,q,W)?H.push({command:Vt.setGeoJSONSourceData,args:[W,q[W].data]}):ar(W,q,H,$)):sr(W,q,H))})(d.sources,_.sources,z,k);const P=[];d.layers&&d.layers.forEach(R=>{k[R.source]?E.push({command:Vt.removeLayer,args:[R.id]}):P.push(R)}),E=E.concat(z),function(R,q,H){q=q||[];const $=(R=R||[]).map(st),W=q.map(st),Q=R.reduce(yr,{}),le=q.reduce(yr,{}),ce=$.slice(),pe=Object.create(null);let he,Me,be,Ie,je,it,ze;for(he=0,Me=0;he<$.length;he++)be=$[he],Object.prototype.hasOwnProperty.call(le,be)?Me++:(H.push({command:Vt.removeLayer,args:[be]}),ce.splice(ce.indexOf(be,Me),1));for(he=0,Me=0;he<W.length;he++)be=W[W.length-1-he],ce[ce.length-1-he]!==be&&(Object.prototype.hasOwnProperty.call(Q,be)?(H.push({command:Vt.removeLayer,args:[be]}),ce.splice(ce.lastIndexOf(be,ce.length-Me),1)):Me++,it=ce[ce.length-he],H.push({command:Vt.addLayer,args:[le[be],it]}),ce.splice(ce.length-he,0,be),pe[be]=!0);for(he=0;he<W.length;he++)if(be=W[he],Ie=Q[be],je=le[be],!pe[be]&&!U(Ie,je))if(U(Ie.source,je.source)&&U(Ie["source-layer"],je["source-layer"])&&U(Ie.type,je.type)){for(ze in Se(Ie.layout,je.layout,H,be,null,Vt.setLayoutProperty),Se(Ie.paint,je.paint,H,be,null,Vt.setPaintProperty),U(Ie.filter,je.filter)||H.push({command:Vt.setFilter,args:[be,je.filter]}),U(Ie.minzoom,je.minzoom)&&U(Ie.maxzoom,je.maxzoom)||H.push({command:Vt.setLayerZoomRange,args:[be,je.minzoom,je.maxzoom]}),Ie)Object.prototype.hasOwnProperty.call(Ie,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?Se(Ie[ze],je[ze],H,be,ze.slice(6),Vt.setPaintProperty):U(Ie[ze],je[ze])||H.push({command:Vt.setLayerProperty,args:[be,ze,je[ze]]}));for(ze in je)Object.prototype.hasOwnProperty.call(je,ze)&&!Object.prototype.hasOwnProperty.call(Ie,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?Se(Ie[ze],je[ze],H,be,ze.slice(6),Vt.setPaintProperty):U(Ie[ze],je[ze])||H.push({command:Vt.setLayerProperty,args:[be,ze,je[ze]]}))}else H.push({command:Vt.removeLayer,args:[be]}),it=ce[ce.lastIndexOf(be)+1],H.push({command:Vt.addLayer,args:[je,it]})}(P,_.layers,E)}catch(k){console.warn("Unable to compute style diff:",k),E=[{command:Vt.setStyle,args:[_]}]}return E}(this.serialize(),t).filter(d=>!(d.command in Ui));if(s.length===0)return!1;const l=s.filter(d=>!(d.command in Zi));if(l.length>0)throw new Error(`Unimplemented: ${l.map(d=>d.command).join(", ")}.`);return s.forEach(d=>{d.command!=="setTransition"&&this[d.command].apply(this,d.args)}),this.stylesheet=t,!0}addImage(t,s){if(this.getImage(t))return this.fire(new a.ErrorEvent(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,s),this._afterImageUpdated(t)}updateImage(t,s){this.imageManager.updateImage(t,s)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new a.ErrorEvent(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,s,l={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(a.validateStyle.source,`sources.${t}`,s,null,l))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const d=this.sourceCaches[t]=new Pi(t,s,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:d.serialize(),sourceId:t})),d.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const l in this._layers)if(this._layers[l].source===t)return this.fire(new a.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${l}" is using it.`)));const s=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],s.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,s){this._checkLoaded(),this.sourceCaches[t].getSource().setData(s),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,s,l={}){this._checkLoaded();const d=t.id;if(this.getLayer(d))return void this.fire(new a.ErrorEvent(new Error(`Layer "${d}" already exists on this map.`)));let _;if(t.type==="custom"){if(Ft(this,a.validateCustomStyleLayer(t)))return;_=a.createStyleLayer(t)}else{if(typeof t.source=="object"&&(this.addSource(d,t.source),t=a.clone$1(t),t=a.extend(t,{source:d})),this._validate(a.validateStyle.layer,`layers.${d}`,t,{arrayIndex:-1},l))return;_=a.createStyleLayer(t),this._validateLayer(_),_.setEventedParent(this,{layer:{id:d}}),this._serializedLayers[_.id]=_.serialize()}const E=s?this._order.indexOf(s):this._order.length;if(s&&E===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${d}" before non-existing layer "${s}".`)));else{if(this._order.splice(E,0,d),this._layerOrderChanged=!0,this._layers[d]=_,this._removedLayers[d]&&_.source&&_.type!=="custom"){const k=this._removedLayers[d];delete this._removedLayers[d],k.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(t,s){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new a.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===s)return;const l=this._order.indexOf(t);this._order.splice(l,1);const d=s?this._order.indexOf(s):this._order.length;s&&d===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${t}" before non-existing layer "${s}".`))):(this._order.splice(d,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const s=this._layers[t];if(!s)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${t}".`)));s.setEventedParent(null);const l=this._order.indexOf(t);this._order.splice(l,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=s,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],s.onRemove&&s.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,s,l){this._checkLoaded();const d=this.getLayer(t);d?d.minzoom===s&&d.maxzoom===l||(s!=null&&(d.minzoom=s),l!=null&&(d.maxzoom=l),this._updateLayer(d)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,s,l={}){this._checkLoaded();const d=this.getLayer(t);if(d){if(!U(d.filter,s))return s==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(a.validateStyle.filter,`layers.${d.id}.filter`,s,null,l)||(d.filter=a.clone$1(s),this._updateLayer(d)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return a.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,s,l,d={}){this._checkLoaded();const _=this.getLayer(t);_?U(_.getLayoutProperty(s),l)||(_.setLayoutProperty(s,l,d),this._updateLayer(_)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,s){const l=this.getLayer(t);if(l)return l.getLayoutProperty(s);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,s,l,d={}){this._checkLoaded();const _=this.getLayer(t);_?U(_.getPaintProperty(s),l)||(_.setPaintProperty(s,l,d)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,s){return this.getLayer(t).getPaintProperty(s)}setFeatureState(t,s){this._checkLoaded();const l=t.source,d=t.sourceLayer,_=this.sourceCaches[l];if(_===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)));const E=_.getSource().type;E==="geojson"&&d?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||d?(t.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),_.setFeatureState(d,t.id,s)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,s){this._checkLoaded();const l=t.source,d=this.sourceCaches[l];if(d===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)));const _=d.getSource().type,E=_==="vector"?t.sourceLayer:void 0;_!=="vector"||E?s&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(E,t.id,s):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const s=t.source,l=t.sourceLayer,d=this.sourceCaches[s];if(d!==void 0)return d.getSource().type!=="vector"||l?(t.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),d.getFeatureState(l,t.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,t=>t.serialize()),layers:this._serializeLayers(this._order)},t=>t!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const s=E=>this._layers[E].type==="fill-extrusion",l={},d=[];for(let E=this._order.length-1;E>=0;E--){const k=this._order[E];if(s(k)){l[k]=E;for(const z of t){const P=z[k];if(P)for(const R of P)d.push(R)}}}d.sort((E,k)=>k.intersectionZ-E.intersectionZ);const _=[];for(let E=this._order.length-1;E>=0;E--){const k=this._order[E];if(s(k))for(let z=d.length-1;z>=0;z--){const P=d[z].feature;if(l[P.layer.id]<E)break;_.push(P),d.pop()}else for(const z of t){const P=z[k];if(P)for(const R of P)_.push(R.feature)}}return _}queryRenderedFeatures(t,s,l){s&&s.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);const d={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const E of s.layers){const k=this._layers[E];if(!k)return this.fire(new a.ErrorEvent(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];d[k.source]=!0}}const _=[];s.availableImages=this._availableImages;for(const E in this.sourceCaches)s.layers&&!d[E]||_.push(Ze(this.sourceCaches[E],this._layers,this._serializedLayers,t,s,l));return this.placement&&_.push(function(E,k,z,P,R,q,H){const $={},W=q.queryRenderedSymbols(P),Q=[];for(const le of Object.keys(W).map(Number))Q.push(H[le]);Q.sort(Ce);for(const le of Q){const ce=le.featureIndex.lookupSymbolFeatures(W[le.bucketInstanceId],k,le.bucketIndex,le.sourceLayerIndex,R.filter,R.layers,R.availableImages,E);for(const pe in ce){const he=$[pe]=$[pe]||[],Me=ce[pe];Me.sort((be,Ie)=>{const je=le.featureSortOrder;if(je){const it=je.indexOf(be.featureIndex);return je.indexOf(Ie.featureIndex)-it}return Ie.featureIndex-be.featureIndex});for(const be of Me)he.push(be)}}for(const le in $)$[le].forEach(ce=>{const pe=ce.feature,he=z[E[le].source].getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=he});return $}(this._layers,this._serializedLayers,this.sourceCaches,t,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(t,s){s&&s.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);const l=this.sourceCaches[t];return l?function(d,_){const E=d.getRenderableIds().map(P=>d.getTileByID(P)),k=[],z={};for(let P=0;P<E.length;P++){const R=E[P],q=R.tileID.canonical.key;z[q]||(z[q]=!0,R.querySourceFeatures(k,_))}return k}(l,s):[]}addSourceType(t,s,l){return fn.getSourceType(t)?l(new Error(`A source type called "${t}" already exists.`)):(fn.setSourceType(t,s),s.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:s.workerSourceURL},l):l(null,null))}getLight(){return this.light.getLight()}setLight(t,s={}){this._checkLoaded();const l=this.light.getLight();let d=!1;for(const E in t)if(!U(t[E],l[E])){d=!0;break}if(!d)return;const _={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,s),this.light.updateTransitions(_)}_validate(t,s,l,d,_={}){return(!_||_.validate!==!1)&&Ft(this,t.call(a.validateStyle,a.extend({key:s,style:this.serialize(),value:l,styleSpec:a.spec},d)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const s=this.sourceCaches[t];s.setEventedParent(null),s.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const s in this.sourceCaches)this.sourceCaches[s].update(t)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,s,l,d,_=!1){let E=!1,k=!1;const z={};for(const P of this._order){const R=this._layers[P];if(R.type!=="symbol")continue;if(!z[R.source]){const H=this.sourceCaches[R.source];z[R.source]=H.getRenderableIds(!0).map($=>H.getTileByID($)).sort(($,W)=>W.tileID.overscaledZ-$.tileID.overscaledZ||($.tileID.isLessThan(W.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(R,z[R.source],t.center.lng);E=E||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||l===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),t.zoom))&&(this.pauseablePlacement=new Fe(t,this._order,_,s,l,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),k=!0),E&&this.pauseablePlacement.placement.setStale()),k||E)for(const P of this._order){const R=this._layers[P];R.type==="symbol"&&this.placement.updateLayerOpacities(R,z[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,s,l){this.imageManager.getImages(s.icons,l),this._updateTilesForChangedImages();const d=this.sourceCaches[s.source];d&&d.setDependencies(s.tileID.key,s.type,s.icons)}getGlyphs(t,s,l){this.glyphManager.getGlyphs(s.stacks,l)}getResource(t,s,l){return a.makeRequest(s,l)}}fn.getSourceType=function(h){return Ei[h]},fn.setSourceType=function(h,t){Ei[h]=t},fn.registerForPluginStateChange=a.registerForPluginStateChange;var qa=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ga={prelude:_i(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:_i(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_i(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_i(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_i("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_i(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:_i(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_i("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_i("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_i("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:_i(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_i(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_i(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_i(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_i(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_i(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_i(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_i(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_i(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:_i(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_i(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function _i(h,t){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,l=t.match(/attribute ([\w]+) ([\w]+)/g),d=h.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=_?_.concat(d):d,k={};return{fragmentSource:h=h.replace(s,(z,P,R,q,H)=>(k[H]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${H}
varying ${R} ${q} ${H};
#else
uniform ${R} ${q} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${R} ${q} ${H} = u_${H};
#endif
`)),vertexSource:t=t.replace(s,(z,P,R,q,H)=>{const $=q==="float"?"vec2":"vec4",W=H.match(/color/)?"color":$;return k[H]?P==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${R} ${$} a_${H};
varying ${R} ${q} ${H};
#else
uniform ${R} ${q} u_${H};
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${R} ${q} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${W}(a_${H}, u_${H}_t);
#else
    ${R} ${q} ${H} = u_${H};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${R} ${$} a_${H};
#else
uniform ${R} ${q} u_${H};
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${R} ${q} ${H} = a_${H};
#else
    ${R} ${q} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${R} ${q} ${H} = unpack_mix_${W}(a_${H}, u_${H}_t);
#else
    ${R} ${q} ${H} = u_${H};
#endif
`}),staticAttributes:l,staticUniforms:E}}class ac{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,s,l,d,_,E,k,z){this.context=t;let P=this.boundPaintVertexBuffers.length!==d.length;for(let R=0;!P&&R<d.length;R++)this.boundPaintVertexBuffers[R]!==d[R]&&(P=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===l&&!P&&this.boundIndexBuffer===_&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===z?(t.bindVertexArrayOES.set(this.vao),k&&k.bind(),_&&_.dynamicDraw&&_.bind(),z&&z.bind()):this.freshBind(s,l,d,_,E,k,z)}freshBind(t,s,l,d,_,E,k){let z;const P=t.numAttributes,R=this.context,q=R.gl;if(R.extVertexArrayObject)this.vao&&this.destroy(),this.vao=R.extVertexArrayObject.createVertexArrayOES(),R.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=t,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=l,this.boundIndexBuffer=d,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=k;else{z=R.currentNumAttributes||0;for(let H=P;H<z;H++)q.disableVertexAttribArray(H)}s.enableAttributes(q,t);for(const H of l)H.enableAttributes(q,t);E&&E.enableAttributes(q,t),k&&k.enableAttributes(q,t),s.bind(),s.setVertexAttribPointers(q,t,_);for(const H of l)H.bind(),H.setVertexAttribPointers(q,t,_);E&&(E.bind(),E.setVertexAttribPointers(q,t,_)),d&&d.bind(),k&&(k.bind(),k.setVertexAttribPointers(q,t,_)),R.currentNumAttributes=P}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ja(h){const t=[];for(let s=0;s<h.length;s++){if(h[s]===null)continue;const l=h[s].split(" ");t.push(l.pop())}return t}class oc{constructor(t,s,l,d,_,E){const k=t.gl;this.program=k.createProgram();const z=ja(l.staticAttributes),P=d?d.getBinderAttributes():[],R=z.concat(P),q=l.staticUniforms?ja(l.staticUniforms):[],H=d?d.getBinderUniforms():[],$=q.concat(H),W=[];for(const be of $)W.indexOf(be)<0&&W.push(be);const Q=d?d.defines():[];E&&Q.push("#define OVERDRAW_INSPECTOR;");const le=Q.concat(Ga.prelude.fragmentSource,l.fragmentSource).join(`
`),ce=Q.concat(Ga.prelude.vertexSource,l.vertexSource).join(`
`),pe=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(pe,le),k.compileShader(pe),k.attachShader(this.program,pe);const he=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(he,ce),k.compileShader(he),k.attachShader(this.program,he),this.attributes={};const Me={};this.numAttributes=R.length;for(let be=0;be<this.numAttributes;be++)R[be]&&(k.bindAttribLocation(this.program,be,R[be]),this.attributes[R[be]]=be);k.linkProgram(this.program),k.deleteShader(he),k.deleteShader(pe);for(let be=0;be<W.length;be++){const Ie=W[be];if(Ie&&!Me[Ie]){const je=k.getUniformLocation(this.program,Ie);je&&(Me[Ie]=je)}}this.fixedUniforms=_(t,Me),this.binderUniforms=d?d.getUniforms(t,Me):[]}draw(t,s,l,d,_,E,k,z,P,R,q,H,$,W,Q,le){const ce=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(l),t.setStencilMode(d),t.setColorMode(_),t.setCullFace(E);for(const he in this.fixedUniforms)this.fixedUniforms[he].set(k[he]);W&&W.setUniforms(t,this.binderUniforms,H,{zoom:$});const pe={[ce.LINES]:2,[ce.TRIANGLES]:3,[ce.LINE_STRIP]:1}[s];for(const he of q.get()){const Me=he.vaos||(he.vaos={});(Me[z]||(Me[z]=new ac)).bind(t,this,P,W?W.getPaintVertexBuffers():[],R,he.vertexOffset,Q,le),ce.drawElements(s,he.primitiveLength*pe,ce.UNSIGNED_SHORT,he.primitiveOffset*pe*2)}}}function Za(h,t,s){const l=1/Vi(s,1,t.transform.tileZoom),d=Math.pow(2,s.tileID.overscaledZ),_=s.tileSize*Math.pow(2,t.transform.tileZoom)/d,E=_*(s.tileID.canonical.x+s.tileID.wrap*d),k=_*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[l,h.fromScale,h.toScale],u_fade:h.t,u_pixel_coord_upper:[E>>16,k>>16],u_pixel_coord_lower:[65535&E,65535&k]}}const Qo=(h,t,s,l)=>{const d=t.style.light,_=d.properties.get("position"),E=[_.x,_.y,_.z],k=function(){var P=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();d.properties.get("anchor")==="viewport"&&function(P,R){var q=Math.sin(R),H=Math.cos(R);P[0]=H,P[1]=q,P[2]=0,P[3]=-q,P[4]=H,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(k,-t.transform.angle),function(P,R,q){var H=R[0],$=R[1],W=R[2];P[0]=H*q[0]+$*q[3]+W*q[6],P[1]=H*q[1]+$*q[4]+W*q[7],P[2]=H*q[2]+$*q[5]+W*q[8]}(E,E,k);const z=d.properties.get("color");return{u_matrix:h,u_lightpos:E,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+s,u_opacity:l}},Ha=(h,t,s,l,d,_,E)=>a.extend(Qo(h,t,s,l),Za(_,t,E),{u_height_factor:-Math.pow(2,d.overscaledZ)/E.tileSize/8}),Wa=h=>({u_matrix:h}),Xa=(h,t,s,l)=>a.extend(Wa(h),Za(s,t,l)),$o=(h,t)=>({u_matrix:h,u_world:t}),el=(h,t,s,l,d)=>a.extend(Xa(h,t,s,l),{u_world:d}),Vr=(h,t,s,l)=>{const d=h.transform;let _,E;if(l.paint.get("circle-pitch-alignment")==="map"){const k=Vi(s,1,d.zoom);_=!0,E=[k,k]}else _=!1,E=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_matrix:h.translatePosMatrix(t.posMatrix,s,l.paint.get("circle-translate"),l.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:h.pixelRatio,u_extrude_scale:E}},Ks=(h,t,s)=>{const l=Vi(s,1,t.zoom),d=Math.pow(2,t.zoom-s.tileID.overscaledZ),_=s.tileID.overscaleFactor();return{u_matrix:h,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:l,u_extrude_scale:[t.pixelsToGLUnits[0]/(l*d),t.pixelsToGLUnits[1]/(l*d)],u_overscale_factor:_}},ns=(h,t,s=1)=>({u_matrix:h,u_color:t,u_overlay:0,u_overlay_scale:s}),Is=h=>({u_matrix:h}),Ys=(h,t,s,l)=>({u_matrix:h,u_extrude_scale:Vi(t,1,s),u_intensity:l});function Js(h,t){const s=Math.pow(2,t.canonical.z),l=t.canonical.y;return[new a.MercatorCoordinate(0,l/s).toLngLat().lat,new a.MercatorCoordinate(0,(l+1)/s).toLngLat().lat]}const Es=(h,t,s)=>{const l=h.transform;return{u_matrix:Ka(h,t,s),u_ratio:1/Vi(t,1,l.zoom),u_device_pixel_ratio:h.pixelRatio,u_units_to_pixels:[1/l.pixelsToGLUnits[0],1/l.pixelsToGLUnits[1]]}},Qs=(h,t,s,l)=>a.extend(Es(h,t,s),{u_image:0,u_image_height:l}),Ts=(h,t,s,l)=>{const d=h.transform,_=ks(t,d);return{u_matrix:Ka(h,t,s),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Vi(t,1,d.zoom),u_device_pixel_ratio:h.pixelRatio,u_image:0,u_scale:[_,l.fromScale,l.toScale],u_fade:l.t,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Ji=(h,t,s,l,d)=>{const _=h.lineAtlas,E=ks(t,h.transform),k=s.layout.get("line-cap")==="round",z=_.getDash(l.from,k),P=_.getDash(l.to,k),R=z.width*d.fromScale,q=P.width*d.toScale;return a.extend(Es(h,t,s),{u_patternscale_a:[E/R,-z.height/2],u_patternscale_b:[E/q,-P.height/2],u_sdfgamma:_.width/(256*Math.min(R,q)*h.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:P.y,u_mix:d.t})};function ks(h,t){return 1/Vi(h,1,t.tileZoom)}function Ka(h,t,s){return h.translatePosMatrix(t.tileID.posMatrix,t,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const tl=(h,t,s,l,d)=>{return{u_matrix:h,u_tl_parent:t,u_scale_parent:s,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(E=d.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(_=d.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:il(d.paint.get("raster-hue-rotate"))};var _,E};function il(h){h*=Math.PI/180;const t=Math.sin(h),s=Math.cos(h);return[(2*s+1)/3,(-Math.sqrt(3)*t-s+1)/3,(Math.sqrt(3)*t-s+1)/3]}const $s=(h,t,s,l,d,_,E,k,z,P)=>{const R=d.transform;return{u_is_size_zoom_constant:+(h==="constant"||h==="source"),u_is_size_feature_constant:+(h==="constant"||h==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:R.cameraToCenterDistance,u_pitch:R.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:R.width/R.height,u_fade_change:d.options.fadeDuration?d.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+z,u_pitch_with_map:+l,u_texsize:P,u_texture:0}},Ya=(h,t,s,l,d,_,E,k,z,P,R)=>{const q=d.transform;return a.extend($s(h,t,s,l,d,_,E,k,z,P),{u_gamma_scale:l?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:d.pixelRatio,u_is_halo:+R})},lc=(h,t,s,l,d,_,E,k,z,P)=>a.extend(Ya(h,t,s,l,d,_,E,k,!0,z,!0),{u_texsize_icon:P,u_texture_icon:1}),cc=(h,t,s)=>({u_matrix:h,u_opacity:t,u_color:s}),Ja=(h,t,s,l,d,_)=>a.extend(function(E,k,z,P){const R=z.imageManager.getPattern(E.from.toString()),q=z.imageManager.getPattern(E.to.toString()),{width:H,height:$}=z.imageManager.getPixelSize(),W=Math.pow(2,P.tileID.overscaledZ),Q=P.tileSize*Math.pow(2,z.transform.tileZoom)/W,le=Q*(P.tileID.canonical.x+P.tileID.wrap*W),ce=Q*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[H,$],u_mix:k.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/Vi(P,1,z.transform.tileZoom),u_pixel_coord_upper:[le>>16,ce>>16],u_pixel_coord_lower:[65535&le,65535&ce]}}(l,_,s,d),{u_matrix:h,u_opacity:t}),Qa={fillExtrusion:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_lightpos:new a.Uniform3f(h,t.u_lightpos),u_lightintensity:new a.Uniform1f(h,t.u_lightintensity),u_lightcolor:new a.Uniform3f(h,t.u_lightcolor),u_vertical_gradient:new a.Uniform1f(h,t.u_vertical_gradient),u_opacity:new a.Uniform1f(h,t.u_opacity)}),fillExtrusionPattern:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_lightpos:new a.Uniform3f(h,t.u_lightpos),u_lightintensity:new a.Uniform1f(h,t.u_lightintensity),u_lightcolor:new a.Uniform3f(h,t.u_lightcolor),u_vertical_gradient:new a.Uniform1f(h,t.u_vertical_gradient),u_height_factor:new a.Uniform1f(h,t.u_height_factor),u_image:new a.Uniform1i(h,t.u_image),u_texsize:new a.Uniform2f(h,t.u_texsize),u_pixel_coord_upper:new a.Uniform2f(h,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(h,t.u_pixel_coord_lower),u_scale:new a.Uniform3f(h,t.u_scale),u_fade:new a.Uniform1f(h,t.u_fade),u_opacity:new a.Uniform1f(h,t.u_opacity)}),fill:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix)}),fillPattern:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_image:new a.Uniform1i(h,t.u_image),u_texsize:new a.Uniform2f(h,t.u_texsize),u_pixel_coord_upper:new a.Uniform2f(h,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(h,t.u_pixel_coord_lower),u_scale:new a.Uniform3f(h,t.u_scale),u_fade:new a.Uniform1f(h,t.u_fade)}),fillOutline:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_world:new a.Uniform2f(h,t.u_world)}),fillOutlinePattern:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_world:new a.Uniform2f(h,t.u_world),u_image:new a.Uniform1i(h,t.u_image),u_texsize:new a.Uniform2f(h,t.u_texsize),u_pixel_coord_upper:new a.Uniform2f(h,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(h,t.u_pixel_coord_lower),u_scale:new a.Uniform3f(h,t.u_scale),u_fade:new a.Uniform1f(h,t.u_fade)}),circle:(h,t)=>({u_camera_to_center_distance:new a.Uniform1f(h,t.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(h,t.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(h,t.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(h,t.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(h,t.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(h,t.u_matrix)}),collisionBox:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_camera_to_center_distance:new a.Uniform1f(h,t.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(h,t.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(h,t.u_extrude_scale),u_overscale_factor:new a.Uniform1f(h,t.u_overscale_factor)}),collisionCircle:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_inv_matrix:new a.UniformMatrix4f(h,t.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(h,t.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(h,t.u_viewport_size)}),debug:(h,t)=>({u_color:new a.UniformColor(h,t.u_color),u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_overlay:new a.Uniform1i(h,t.u_overlay),u_overlay_scale:new a.Uniform1f(h,t.u_overlay_scale)}),clippingMask:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix)}),heatmap:(h,t)=>({u_extrude_scale:new a.Uniform1f(h,t.u_extrude_scale),u_intensity:new a.Uniform1f(h,t.u_intensity),u_matrix:new a.UniformMatrix4f(h,t.u_matrix)}),heatmapTexture:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_world:new a.Uniform2f(h,t.u_world),u_image:new a.Uniform1i(h,t.u_image),u_color_ramp:new a.Uniform1i(h,t.u_color_ramp),u_opacity:new a.Uniform1f(h,t.u_opacity)}),hillshade:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_image:new a.Uniform1i(h,t.u_image),u_latrange:new a.Uniform2f(h,t.u_latrange),u_light:new a.Uniform2f(h,t.u_light),u_shadow:new a.UniformColor(h,t.u_shadow),u_highlight:new a.UniformColor(h,t.u_highlight),u_accent:new a.UniformColor(h,t.u_accent)}),hillshadePrepare:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_image:new a.Uniform1i(h,t.u_image),u_dimension:new a.Uniform2f(h,t.u_dimension),u_zoom:new a.Uniform1f(h,t.u_zoom),u_unpack:new a.Uniform4f(h,t.u_unpack)}),line:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_ratio:new a.Uniform1f(h,t.u_ratio),u_device_pixel_ratio:new a.Uniform1f(h,t.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(h,t.u_units_to_pixels)}),lineGradient:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_ratio:new a.Uniform1f(h,t.u_ratio),u_device_pixel_ratio:new a.Uniform1f(h,t.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(h,t.u_units_to_pixels),u_image:new a.Uniform1i(h,t.u_image),u_image_height:new a.Uniform1f(h,t.u_image_height)}),linePattern:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_texsize:new a.Uniform2f(h,t.u_texsize),u_ratio:new a.Uniform1f(h,t.u_ratio),u_device_pixel_ratio:new a.Uniform1f(h,t.u_device_pixel_ratio),u_image:new a.Uniform1i(h,t.u_image),u_units_to_pixels:new a.Uniform2f(h,t.u_units_to_pixels),u_scale:new a.Uniform3f(h,t.u_scale),u_fade:new a.Uniform1f(h,t.u_fade)}),lineSDF:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_ratio:new a.Uniform1f(h,t.u_ratio),u_device_pixel_ratio:new a.Uniform1f(h,t.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(h,t.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(h,t.u_patternscale_a),u_patternscale_b:new a.Uniform2f(h,t.u_patternscale_b),u_sdfgamma:new a.Uniform1f(h,t.u_sdfgamma),u_image:new a.Uniform1i(h,t.u_image),u_tex_y_a:new a.Uniform1f(h,t.u_tex_y_a),u_tex_y_b:new a.Uniform1f(h,t.u_tex_y_b),u_mix:new a.Uniform1f(h,t.u_mix)}),raster:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_tl_parent:new a.Uniform2f(h,t.u_tl_parent),u_scale_parent:new a.Uniform1f(h,t.u_scale_parent),u_buffer_scale:new a.Uniform1f(h,t.u_buffer_scale),u_fade_t:new a.Uniform1f(h,t.u_fade_t),u_opacity:new a.Uniform1f(h,t.u_opacity),u_image0:new a.Uniform1i(h,t.u_image0),u_image1:new a.Uniform1i(h,t.u_image1),u_brightness_low:new a.Uniform1f(h,t.u_brightness_low),u_brightness_high:new a.Uniform1f(h,t.u_brightness_high),u_saturation_factor:new a.Uniform1f(h,t.u_saturation_factor),u_contrast_factor:new a.Uniform1f(h,t.u_contrast_factor),u_spin_weights:new a.Uniform3f(h,t.u_spin_weights)}),symbolIcon:(h,t)=>({u_is_size_zoom_constant:new a.Uniform1i(h,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(h,t.u_is_size_feature_constant),u_size_t:new a.Uniform1f(h,t.u_size_t),u_size:new a.Uniform1f(h,t.u_size),u_camera_to_center_distance:new a.Uniform1f(h,t.u_camera_to_center_distance),u_pitch:new a.Uniform1f(h,t.u_pitch),u_rotate_symbol:new a.Uniform1i(h,t.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(h,t.u_aspect_ratio),u_fade_change:new a.Uniform1f(h,t.u_fade_change),u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(h,t.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(h,t.u_coord_matrix),u_is_text:new a.Uniform1i(h,t.u_is_text),u_pitch_with_map:new a.Uniform1i(h,t.u_pitch_with_map),u_texsize:new a.Uniform2f(h,t.u_texsize),u_texture:new a.Uniform1i(h,t.u_texture)}),symbolSDF:(h,t)=>({u_is_size_zoom_constant:new a.Uniform1i(h,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(h,t.u_is_size_feature_constant),u_size_t:new a.Uniform1f(h,t.u_size_t),u_size:new a.Uniform1f(h,t.u_size),u_camera_to_center_distance:new a.Uniform1f(h,t.u_camera_to_center_distance),u_pitch:new a.Uniform1f(h,t.u_pitch),u_rotate_symbol:new a.Uniform1i(h,t.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(h,t.u_aspect_ratio),u_fade_change:new a.Uniform1f(h,t.u_fade_change),u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(h,t.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(h,t.u_coord_matrix),u_is_text:new a.Uniform1i(h,t.u_is_text),u_pitch_with_map:new a.Uniform1i(h,t.u_pitch_with_map),u_texsize:new a.Uniform2f(h,t.u_texsize),u_texture:new a.Uniform1i(h,t.u_texture),u_gamma_scale:new a.Uniform1f(h,t.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(h,t.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(h,t.u_is_halo)}),symbolTextAndIcon:(h,t)=>({u_is_size_zoom_constant:new a.Uniform1i(h,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(h,t.u_is_size_feature_constant),u_size_t:new a.Uniform1f(h,t.u_size_t),u_size:new a.Uniform1f(h,t.u_size),u_camera_to_center_distance:new a.Uniform1f(h,t.u_camera_to_center_distance),u_pitch:new a.Uniform1f(h,t.u_pitch),u_rotate_symbol:new a.Uniform1i(h,t.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(h,t.u_aspect_ratio),u_fade_change:new a.Uniform1f(h,t.u_fade_change),u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(h,t.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(h,t.u_coord_matrix),u_is_text:new a.Uniform1i(h,t.u_is_text),u_pitch_with_map:new a.Uniform1i(h,t.u_pitch_with_map),u_texsize:new a.Uniform2f(h,t.u_texsize),u_texsize_icon:new a.Uniform2f(h,t.u_texsize_icon),u_texture:new a.Uniform1i(h,t.u_texture),u_texture_icon:new a.Uniform1i(h,t.u_texture_icon),u_gamma_scale:new a.Uniform1f(h,t.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(h,t.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(h,t.u_is_halo)}),background:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_opacity:new a.Uniform1f(h,t.u_opacity),u_color:new a.UniformColor(h,t.u_color)}),backgroundPattern:(h,t)=>({u_matrix:new a.UniformMatrix4f(h,t.u_matrix),u_opacity:new a.Uniform1f(h,t.u_opacity),u_image:new a.Uniform1i(h,t.u_image),u_pattern_tl_a:new a.Uniform2f(h,t.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(h,t.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(h,t.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(h,t.u_pattern_br_b),u_texsize:new a.Uniform2f(h,t.u_texsize),u_mix:new a.Uniform1f(h,t.u_mix),u_pattern_size_a:new a.Uniform2f(h,t.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(h,t.u_pattern_size_b),u_scale_a:new a.Uniform1f(h,t.u_scale_a),u_scale_b:new a.Uniform1f(h,t.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(h,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(h,t.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(h,t.u_tile_units_to_pixels)})};class $a{constructor(t,s,l){this.context=t;const d=t.gl;this.buffer=d.createBuffer(),this.dynamicDraw=Boolean(l),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const eo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class nl{constructor(t,s,l,d){this.length=s.length,this.attributes=l,this.itemSize=s.bytesPerElement,this.dynamicDraw=d,this.context=t;const _=t.gl;this.buffer=_.createBuffer(),t.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,s){for(let l=0;l<this.attributes.length;l++){const d=s.attributes[this.attributes[l].name];d!==void 0&&t.enableVertexAttribArray(d)}}setVertexAttribPointers(t,s,l){for(let d=0;d<this.attributes.length;d++){const _=this.attributes[d],E=s.attributes[_.name];E!==void 0&&t.vertexAttribPointer(E,_.components,t[eo[_.type]],!1,this.itemSize,_.offset+this.itemSize*(l||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ii{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class uc extends ii{getDefault(){return a.Color.transparent}set(t){const s=this.current;(t.r!==s.r||t.g!==s.g||t.b!==s.b||t.a!==s.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class As extends ii{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class zs extends ii{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class rl extends ii{getDefault(){return[!0,!0,!0,!0]}set(t){const s=this.current;(t[0]!==s[0]||t[1]!==s[1]||t[2]!==s[2]||t[3]!==s[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Fn extends ii{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class to extends ii{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class ea extends ii{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const s=this.current;(t.func!==s.func||t.ref!==s.ref||t.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class ta extends ii{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const s=this.current;(t[0]!==s[0]||t[1]!==s[1]||t[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class io extends ii{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;t?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=t,this.dirty=!1}}class no extends ii{getDefault(){return[0,1]}set(t){const s=this.current;(t[0]!==s[0]||t[1]!==s[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class ia extends ii{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;t?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=t,this.dirty=!1}}class ro extends ii{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class so extends ii{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;t?s.enable(s.BLEND):s.disable(s.BLEND),this.current=t,this.dirty=!1}}class na extends ii{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const s=this.current;(t[0]!==s[0]||t[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class sl extends ii{getDefault(){return a.Color.transparent}set(t){const s=this.current;(t.r!==s.r||t.g!==s.g||t.b!==s.b||t.a!==s.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class al extends ii{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class rs extends ii{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;t?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=t,this.dirty=!1}}class hc extends ii{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class dc extends ii{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class fc extends ii{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class pc extends ii{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class mc extends ii{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const s=this.current;(t[0]!==s[0]||t[1]!==s[1]||t[2]!==s[2]||t[3]!==s[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class gc extends ii{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class ao extends ii{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class oo extends ii{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ss extends ii{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ol extends ii{getDefault(){return null}set(t){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ll extends ii{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class lo extends ii{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Ur extends ii{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class cl extends ii{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Nr extends ii{constructor(t,s){super(t),this.context=t,this.parent=s}getDefault(){return null}}class as extends Nr{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class ul extends Nr{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class co{constructor(t,s,l,d){this.context=t,this.width=s,this.height=l;const _=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new as(t,_),d&&(this.depthAttachment=new ul(t,_))}destroy(){const t=this.context.gl,s=this.colorAttachment.get();if(s&&t.deleteTexture(s),this.depthAttachment){const l=this.depthAttachment.get();l&&t.deleteRenderbuffer(l)}t.deleteFramebuffer(this.framebuffer)}}class Rt{constructor(t,s,l){this.blendFunction=t,this.blendColor=s,this.mask=l}}Rt.Replace=[1,0],Rt.disabled=new Rt(Rt.Replace,a.Color.transparent,[!1,!1,!1,!1]),Rt.unblended=new Rt(Rt.Replace,a.Color.transparent,[!0,!0,!0,!0]),Rt.alphaBlended=new Rt([1,771],a.Color.transparent,[!0,!0,!0,!0]);class ra{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new uc(this),this.clearDepth=new As(this),this.clearStencil=new zs(this),this.colorMask=new rl(this),this.depthMask=new Fn(this),this.stencilMask=new to(this),this.stencilFunc=new ea(this),this.stencilOp=new ta(this),this.stencilTest=new io(this),this.depthRange=new no(this),this.depthTest=new ia(this),this.depthFunc=new ro(this),this.blend=new so(this),this.blendFunc=new na(this),this.blendColor=new sl(this),this.blendEquation=new al(this),this.cullFace=new rs(this),this.cullFaceSide=new hc(this),this.frontFace=new dc(this),this.program=new fc(this),this.activeTexture=new pc(this),this.viewport=new mc(this),this.bindFramebuffer=new gc(this),this.bindRenderbuffer=new ao(this),this.bindTexture=new oo(this),this.bindVertexBuffer=new ss(this),this.bindElementBuffer=new ol(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ll(this),this.pixelStoreUnpack=new lo(this),this.pixelStoreUnpackPremultiplyAlpha=new Ur(this),this.pixelStoreUnpackFlipY=new cl(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,s){return new $a(this,t,s)}createVertexBuffer(t,s,l){return new nl(this,t,s,l)}createRenderbuffer(t,s,l){const d=this.gl,_=d.createRenderbuffer();return this.bindRenderbuffer.set(_),d.renderbufferStorage(d.RENDERBUFFER,t,s,l),this.bindRenderbuffer.set(null),_}createFramebuffer(t,s,l){return new co(this,t,s,l)}clear({color:t,depth:s}){const l=this.gl;let d=0;t&&(d|=l.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(d|=l.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),l.clear(d)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){U(t.blendFunction,Rt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class oi{constructor(t,s,l){this.func=t,this.mask=s,this.range=l}}oi.ReadOnly=!1,oi.ReadWrite=!0,oi.disabled=new oi(519,oi.ReadOnly,[0,1]);const sa=7680;class Ti{constructor(t,s,l,d,_,E){this.test=t,this.ref=s,this.mask=l,this.fail=d,this.depthFail=_,this.pass=E}}Ti.disabled=new Ti({func:519,mask:0},0,0,sa,sa,sa);class Ni{constructor(t,s,l){this.enable=t,this.mode=s,this.frontFace=l}}let aa;function uo(h,t,s,l,d,_,E){const k=h.context,z=k.gl,P=h.useProgram("collisionBox"),R=[];let q=0,H=0;for(let he=0;he<l.length;he++){const Me=l[he],be=t.getTile(Me),Ie=be.getBucket(s);if(!Ie)continue;let je=Me.posMatrix;d[0]===0&&d[1]===0||(je=h.translatePosMatrix(Me.posMatrix,be,d,_));const it=E?Ie.textCollisionBox:Ie.iconCollisionBox,ze=Ie.collisionCircleArray;if(ze.length>0){const gt=a.create(),ot=je;a.mul(gt,Ie.placementInvProjMatrix,h.transform.glCoordMatrix),a.mul(gt,gt,Ie.placementViewportMatrix),R.push({circleArray:ze,circleOffset:H,transform:ot,invTransform:gt}),q+=ze.length/4,H=q}it&&P.draw(k,z.LINES,oi.disabled,Ti.disabled,h.colorModeForRenderPass(),Ni.disabled,Ks(je,h.transform,be),s.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,null,h.transform.zoom,null,null,it.collisionVertexBuffer)}if(!E||!R.length)return;const $=h.useProgram("collisionCircle"),W=new a.CollisionCircleLayoutArray;W.resize(4*q),W._trim();let Q=0;for(const he of R)for(let Me=0;Me<he.circleArray.length/4;Me++){const be=4*Me,Ie=he.circleArray[be+0],je=he.circleArray[be+1],it=he.circleArray[be+2],ze=he.circleArray[be+3];W.emplace(Q++,Ie,je,it,ze,0),W.emplace(Q++,Ie,je,it,ze,1),W.emplace(Q++,Ie,je,it,ze,2),W.emplace(Q++,Ie,je,it,ze,3)}(!aa||aa.length<2*q)&&(aa=function(he){const Me=2*he,be=new a.QuadTriangleArray;be.resize(Me),be._trim();for(let Ie=0;Ie<Me;Ie++){const je=6*Ie;be.uint16[je+0]=4*Ie+0,be.uint16[je+1]=4*Ie+1,be.uint16[je+2]=4*Ie+2,be.uint16[je+3]=4*Ie+2,be.uint16[je+4]=4*Ie+3,be.uint16[je+5]=4*Ie+0}return be}(q));const le=k.createIndexBuffer(aa,!0),ce=k.createVertexBuffer(W,a.collisionCircleLayout.members,!0);for(const he of R){const Me={u_matrix:he.transform,u_inv_matrix:he.invTransform,u_camera_to_center_distance:(pe=h.transform).cameraToCenterDistance,u_viewport_size:[pe.width,pe.height]};$.draw(k,z.TRIANGLES,oi.disabled,Ti.disabled,h.colorModeForRenderPass(),Ni.disabled,Me,s.id,ce,le,a.SegmentVector.simpleSegment(0,2*he.circleOffset,he.circleArray.length,he.circleArray.length/2),null,h.transform.zoom,null,null,null)}var pe;ce.destroy(),le.destroy()}Ni.disabled=new Ni(!1,1029,2305),Ni.backCCW=new Ni(!0,1029,2305);const _c=a.identity(new Float32Array(16));function ho(h,t,s,l,d,_){const{horizontalAlign:E,verticalAlign:k}=a.getAnchorAlignment(h),z=-(E-.5)*t,P=-(k-.5)*s,R=a.evaluateVariableOffset(h,l);return new a.pointGeometry((z/d+R[0])*_,(P/d+R[1])*_)}function oa(h,t,s,l,d,_,E,k,z,P){const R=h.text.placedSymbolArray,q=h.text.dynamicLayoutVertexArray,H=h.icon.dynamicLayoutVertexArray,$={};q.clear();for(let W=0;W<R.length;W++){const Q=R.get(W),le=h.allowVerticalPlacement&&!Q.placedOrientation,ce=Q.hidden||!Q.crossTileID||le?null:l[Q.crossTileID];if(ce){const pe=new a.pointGeometry(Q.anchorX,Q.anchorY),he=ci(pe,s?E:_),Me=tt(d.cameraToCenterDistance,he.signedDistanceFromCamera);let be=a.evaluateSizeForFeature(h.textSizeData,z,Q)*Me/a.ONE_EM;s&&(be*=h.tilePixelRatio/k);const{width:Ie,height:je,anchor:it,textOffset:ze,textBoxScale:gt}=ce,ot=ho(it,Ie,je,ze,gt,be),zt=s?ci(pe.add(ot),_).point:he.point.add(t?ot.rotate(-d.angle):ot),Kt=h.allowVerticalPlacement&&Q.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let Ut=0;Ut<Q.numGlyphs;Ut++)a.addDynamicAttributes(q,zt,Kt);P&&Q.associatedIconIndex>=0&&($[Q.associatedIconIndex]={shiftedAnchor:zt,angle:Kt})}else Oi(Q.numGlyphs,q)}if(P){H.clear();const W=h.icon.placedSymbolArray;for(let Q=0;Q<W.length;Q++){const le=W.get(Q);if(le.hidden)Oi(le.numGlyphs,H);else{const ce=$[Q];if(ce)for(let pe=0;pe<le.numGlyphs;pe++)a.addDynamicAttributes(H,ce.shiftedAnchor,ce.angle);else Oi(le.numGlyphs,H)}}h.icon.dynamicLayoutVertexBuffer.updateData(H)}h.text.dynamicLayoutVertexBuffer.updateData(q)}function la(h,t,s){return s.iconsInText&&t?"symbolTextAndIcon":h?"symbolSDF":"symbolIcon"}function ca(h,t,s,l,d,_,E,k,z,P,R,q){const H=h.context,$=H.gl,W=h.transform,Q=k==="map",le=z==="map",ce=k!=="viewport"&&s.layout.get("symbol-placement")!=="point",pe=Q&&!le&&!ce,he=!s.layout.get("symbol-sort-key").isConstant();let Me=!1;const be=h.depthModeForSublayer(0,oi.ReadOnly),Ie=s.layout.get("text-variable-anchor"),je=[];for(const it of l){const ze=t.getTile(it),gt=ze.getBucket(s);if(!gt)continue;const ot=d?gt.text:gt.icon;if(!ot||!ot.segments.get().length)continue;const zt=ot.programConfigurations.get(s.id),Kt=d||gt.sdfIcons,Ut=d?gt.textSizeData:gt.iconSizeData,Ht=le||W.pitch!==0,Ri=h.useProgram(la(Kt,d,gt),zt),Mt=a.evaluateSizeForZoom(Ut,W.zoom);let $t,di,pn,Vn,Kn=[0,0],Yn=null;if(d){if(di=ze.glyphAtlasTexture,pn=$.LINEAR,$t=ze.glyphAtlasTexture.size,gt.iconsInText){Kn=ze.imageAtlasTexture.size,Yn=ze.imageAtlasTexture;const hr=Ut.kind==="composite"||Ut.kind==="camera";Vn=Ht||h.options.rotating||h.options.zooming||hr?$.LINEAR:$.NEAREST}}else{const hr=s.layout.get("icon-size").constantOr(0)!==1||gt.iconsNeedLinear;di=ze.imageAtlasTexture,pn=Kt||h.options.rotating||h.options.zooming||hr||Ht?$.LINEAR:$.NEAREST,$t=ze.imageAtlasTexture.size}const Lr=Vi(ze,1,h.transform.zoom),Pn=Fi(it.posMatrix,le,Q,h.transform,Lr),ur=$n(it.posMatrix,le,Q,h.transform,Lr),Wr=Ie&&gt.hasTextData(),Un=s.layout.get("icon-text-fit")!=="none"&&Wr&&gt.hasIconData();if(ce){const hr=s.layout.get("text-rotation-alignment")==="map";Lt(gt,it.posMatrix,h,d,Pn,ur,le,P,hr)}const ei=h.translatePosMatrix(it.posMatrix,ze,_,E),si=ce||d&&Ie||Un?_c:Pn,Qi=h.translatePosMatrix(ur,ze,_,E,!0),wn=Kt&&s.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ai;Ai=Kt?gt.iconsInText?lc(Ut.kind,Mt,pe,le,h,ei,si,Qi,$t,Kn):Ya(Ut.kind,Mt,pe,le,h,ei,si,Qi,d,$t,!0):$s(Ut.kind,Mt,pe,le,h,ei,si,Qi,d,$t);const Xr={program:Ri,buffers:ot,uniformValues:Ai,atlasTexture:di,atlasTextureIcon:Yn,atlasInterpolation:pn,atlasInterpolationIcon:Vn,isSDF:Kt,hasHalo:wn};if(he&&gt.canOverlap){Me=!0;const hr=ot.segments.get();for(const wa of hr)je.push({segments:new a.SegmentVector([wa]),sortKey:wa.sortKey,state:Xr})}else je.push({segments:ot.segments,sortKey:0,state:Xr})}Me&&je.sort((it,ze)=>it.sortKey-ze.sortKey);for(const it of je){const ze=it.state;if(H.activeTexture.set($.TEXTURE0),ze.atlasTexture.bind(ze.atlasInterpolation,$.CLAMP_TO_EDGE),ze.atlasTextureIcon&&(H.activeTexture.set($.TEXTURE1),ze.atlasTextureIcon&&ze.atlasTextureIcon.bind(ze.atlasInterpolationIcon,$.CLAMP_TO_EDGE)),ze.isSDF){const gt=ze.uniformValues;ze.hasHalo&&(gt.u_is_halo=1,ua(ze.buffers,it.segments,s,h,ze.program,be,R,q,gt)),gt.u_is_halo=0}ua(ze.buffers,it.segments,s,h,ze.program,be,R,q,ze.uniformValues)}}function ua(h,t,s,l,d,_,E,k,z){const P=l.context;d.draw(P,P.gl.TRIANGLES,_,E,k,Ni.disabled,z,s.id,h.layoutVertexBuffer,h.indexBuffer,t,s.paint,l.transform.zoom,h.programConfigurations.get(s.id),h.dynamicLayoutVertexBuffer,h.opacityVertexBuffer)}function fo(h,t,s,l,d,_,E){const k=h.context.gl,z=s.paint.get("fill-pattern"),P=z&&z.constantOr(1),R=s.getCrossfadeParameters();let q,H,$,W,Q;E?(H=P&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=k.LINES):(H=P?"fillPattern":"fill",q=k.TRIANGLES);for(const le of l){const ce=t.getTile(le);if(P&&!ce.patternsLoaded())continue;const pe=ce.getBucket(s);if(!pe)continue;const he=pe.programConfigurations.get(s.id),Me=h.useProgram(H,he);P&&(h.context.activeTexture.set(k.TEXTURE0),ce.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),he.updatePaintBuffers(R));const be=z.constantOr(null);if(be&&ce.imageAtlas){const je=ce.imageAtlas,it=je.patternPositions[be.to.toString()],ze=je.patternPositions[be.from.toString()];it&&ze&&he.setConstantPatternPositions(it,ze)}const Ie=h.translatePosMatrix(le.posMatrix,ce,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(E){W=pe.indexBuffer2,Q=pe.segments2;const je=[k.drawingBufferWidth,k.drawingBufferHeight];$=H==="fillOutlinePattern"&&P?el(Ie,h,R,ce,je):$o(Ie,je)}else W=pe.indexBuffer,Q=pe.segments,$=P?Xa(Ie,h,R,ce):Wa(Ie);Me.draw(h.context,q,d,h.stencilModeForClipping(le),_,Ni.disabled,$,s.id,pe.layoutVertexBuffer,W,Q,s.paint,h.transform.zoom,he)}}function os(h,t,s,l,d,_,E){const k=h.context,z=k.gl,P=s.paint.get("fill-extrusion-pattern"),R=P.constantOr(1),q=s.getCrossfadeParameters(),H=s.paint.get("fill-extrusion-opacity");for(const $ of l){const W=t.getTile($),Q=W.getBucket(s);if(!Q)continue;const le=Q.programConfigurations.get(s.id),ce=h.useProgram(R?"fillExtrusionPattern":"fillExtrusion",le);R&&(h.context.activeTexture.set(z.TEXTURE0),W.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),le.updatePaintBuffers(q));const pe=P.constantOr(null);if(pe&&W.imageAtlas){const Ie=W.imageAtlas,je=Ie.patternPositions[pe.to.toString()],it=Ie.patternPositions[pe.from.toString()];je&&it&&le.setConstantPatternPositions(je,it)}const he=h.translatePosMatrix($.posMatrix,W,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Me=s.paint.get("fill-extrusion-vertical-gradient"),be=R?Ha(he,h,Me,H,$,q,W):Qo(he,h,Me,H);ce.draw(k,k.gl.TRIANGLES,d,_,E,Ni.backCCW,be,s.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,s.paint,h.transform.zoom,le)}}function ha(h,t,s,l,d,_){const E=h.context,k=E.gl,z=t.fbo;if(!z)return;const P=h.useProgram("hillshade");E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,z.colorAttachment.get());const R=((q,H,$)=>{const W=$.paint.get("hillshade-shadow-color"),Q=$.paint.get("hillshade-highlight-color"),le=$.paint.get("hillshade-accent-color");let ce=$.paint.get("hillshade-illumination-direction")*(Math.PI/180);$.paint.get("hillshade-illumination-anchor")==="viewport"&&(ce-=q.transform.angle);const pe=!q.options.moving;return{u_matrix:q.transform.calculatePosMatrix(H.tileID.toUnwrapped(),pe),u_image:0,u_latrange:Js(0,H.tileID),u_light:[$.paint.get("hillshade-exaggeration"),ce],u_shadow:W,u_highlight:Q,u_accent:le}})(h,t,s);P.draw(E,k.TRIANGLES,l,d,_,Ni.disabled,R,s.id,h.rasterBoundsBuffer,h.quadTriangleIndexBuffer,h.rasterBoundsSegments)}function tr(h,t,s,l,d,_){const E=h.context,k=E.gl,z=t.dem;if(z&&z.data){const P=z.dim,R=z.stride,q=z.getPixels();if(E.activeTexture.set(k.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||h.getTileTexture(R),t.demTexture){const $=t.demTexture;$.update(q,{premultiply:!1}),$.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else t.demTexture=new Ee(E,q,k.RGBA,{premultiply:!1}),t.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);E.activeTexture.set(k.TEXTURE0);let H=t.fbo;if(!H){const $=new Ee(E,{width:P,height:P,data:null},k.RGBA);$.bind(k.LINEAR,k.CLAMP_TO_EDGE),H=t.fbo=E.createFramebuffer(P,P,!0),H.colorAttachment.set($.texture)}E.bindFramebuffer.set(H.framebuffer),E.viewport.set([0,0,P,P]),h.useProgram("hillshadePrepare").draw(E,k.TRIANGLES,l,d,_,Ni.disabled,(($,W)=>{const Q=W.stride,le=a.create();return a.ortho(le,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(le,le,[0,-a.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[Q,Q],u_zoom:$.overscaledZ,u_unpack:W.getUnpackVector()}})(t.tileID,z),s.id,h.rasterBoundsBuffer,h.quadTriangleIndexBuffer,h.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function hl(h,t,s,l,d){const _=l.paint.get("raster-fade-duration");if(_>0){const E=a.exported.now(),k=(E-h.timeAdded)/_,z=t?(E-t.timeAdded)/_:-1,P=s.getSource(),R=d.coveringZoomLevel({tileSize:P.tileSize,roundZoom:P.roundZoom}),q=!t||Math.abs(t.tileID.overscaledZ-R)>Math.abs(h.tileID.overscaledZ-R),H=q&&h.refreshedUponExpiration?1:a.clamp(q?k:1-z,0,1);return h.refreshedUponExpiration&&k>=1&&(h.refreshedUponExpiration=!1),t?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}const dl=new a.Color(1,0,0,1),fl=new a.Color(0,1,0,1),ls=new a.Color(0,0,1,1),da=new a.Color(1,0,1,1),po=new a.Color(0,1,1,1);function pl(h,t,s,l){pa(h,0,t+s/2,h.transform.width,s,l)}function fa(h,t,s,l){pa(h,t-s/2,0,s,h.transform.height,l)}function pa(h,t,s,l,d,_){const E=h.context,k=E.gl;k.enable(k.SCISSOR_TEST),k.scissor(t*h.pixelRatio,s*h.pixelRatio,l*h.pixelRatio,d*h.pixelRatio),E.clear({color:_}),k.disable(k.SCISSOR_TEST)}function ml(h,t,s){const l=h.context,d=l.gl,_=s.posMatrix,E=h.useProgram("debug"),k=oi.disabled,z=Ti.disabled,P=h.colorModeForRenderPass(),R="$debug";l.activeTexture.set(d.TEXTURE0),h.emptyTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),E.draw(l,d.LINE_STRIP,k,z,P,Ni.disabled,ns(_,a.Color.red),R,h.debugBuffer,h.tileBorderIndexBuffer,h.debugSegments);const q=t.getTileByID(s.key).latestRawTileData,H=Math.floor((q&&q.byteLength||0)/1024),$=t.getTile(s).tileSize,W=512/Math.min($,512)*(s.overscaledZ/h.transform.zoom)*.5;let Q=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(Q+=` => ${s.overscaledZ}`),function(le,ce){le.initDebugOverlayCanvas();const pe=le.debugOverlayCanvas,he=le.context.gl,Me=le.debugOverlayCanvas.getContext("2d");Me.clearRect(0,0,pe.width,pe.height),Me.shadowColor="white",Me.shadowBlur=2,Me.lineWidth=1.5,Me.strokeStyle="white",Me.textBaseline="top",Me.font="bold 36px Open Sans, sans-serif",Me.fillText(ce,5,5),Me.strokeText(ce,5,5),le.debugOverlayTexture.update(pe),le.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}(h,`${Q} ${H}kb`),E.draw(l,d.TRIANGLES,k,z,Rt.alphaBlended,Ni.disabled,ns(_,a.Color.transparent,W),R,h.debugBuffer,h.quadTriangleIndexBuffer,h.debugSegments)}const Cs={symbol:function(h,t,s,l,d){if(h.renderPass!=="translucent")return;const _=Ti.disabled,E=h.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&function(k,z,P,R,q,H,$){const W=z.transform,Q=q==="map",le=H==="map";for(const ce of k){const pe=R.getTile(ce),he=pe.getBucket(P);if(!he||!he.text||!he.text.segments.get().length)continue;const Me=a.evaluateSizeForZoom(he.textSizeData,W.zoom),be=Vi(pe,1,z.transform.zoom),Ie=Fi(ce.posMatrix,le,Q,z.transform,be),je=P.layout.get("icon-text-fit")!=="none"&&he.hasIconData();if(Me){const it=Math.pow(2,W.zoom-pe.tileID.overscaledZ);oa(he,Q,le,$,W,Ie,ce.posMatrix,it,Me,je)}}}(l,h,s,t,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),d),s.paint.get("icon-opacity").constantOr(1)!==0&&ca(h,t,s,l,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),_,E),s.paint.get("text-opacity").constantOr(1)!==0&&ca(h,t,s,l,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),_,E),t.map.showCollisionBoxes&&(uo(h,t,s,l,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),uo(h,t,s,l,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))},circle:function(h,t,s,l){if(h.renderPass!=="translucent")return;const d=s.paint.get("circle-opacity"),_=s.paint.get("circle-stroke-width"),E=s.paint.get("circle-stroke-opacity"),k=!s.layout.get("circle-sort-key").isConstant();if(d.constantOr(1)===0&&(_.constantOr(1)===0||E.constantOr(1)===0))return;const z=h.context,P=z.gl,R=h.depthModeForSublayer(0,oi.ReadOnly),q=Ti.disabled,H=h.colorModeForRenderPass(),$=[];for(let W=0;W<l.length;W++){const Q=l[W],le=t.getTile(Q),ce=le.getBucket(s);if(!ce)continue;const pe=ce.programConfigurations.get(s.id),he={programConfiguration:pe,program:h.useProgram("circle",pe),layoutVertexBuffer:ce.layoutVertexBuffer,indexBuffer:ce.indexBuffer,uniformValues:Vr(h,Q,le,s)};if(k){const Me=ce.segments.get();for(const be of Me)$.push({segments:new a.SegmentVector([be]),sortKey:be.sortKey,state:he})}else $.push({segments:ce.segments,sortKey:0,state:he})}k&&$.sort((W,Q)=>W.sortKey-Q.sortKey);for(const W of $){const{programConfiguration:Q,program:le,layoutVertexBuffer:ce,indexBuffer:pe,uniformValues:he}=W.state;le.draw(z,P.TRIANGLES,R,q,H,Ni.disabled,he,s.id,ce,pe,W.segments,s.paint,h.transform.zoom,Q)}},heatmap:function(h,t,s,l){if(s.paint.get("heatmap-opacity")!==0)if(h.renderPass==="offscreen"){const d=h.context,_=d.gl,E=Ti.disabled,k=new Rt([_.ONE,_.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(z,P,R){const q=z.gl;z.activeTexture.set(q.TEXTURE1),z.viewport.set([0,0,P.width/4,P.height/4]);let H=R.heatmapFbo;if(H)q.bindTexture(q.TEXTURE_2D,H.colorAttachment.get()),z.bindFramebuffer.set(H.framebuffer);else{const $=q.createTexture();q.bindTexture(q.TEXTURE_2D,$),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),H=R.heatmapFbo=z.createFramebuffer(P.width/4,P.height/4,!1),function(W,Q,le,ce){const pe=W.gl;pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,Q.width/4,Q.height/4,0,pe.RGBA,W.extRenderToTextureHalfFloat?W.extTextureHalfFloat.HALF_FLOAT_OES:pe.UNSIGNED_BYTE,null),ce.colorAttachment.set(le)}(z,P,$,H)}})(d,h,s),d.clear({color:a.Color.transparent});for(let z=0;z<l.length;z++){const P=l[z];if(t.hasRenderableParent(P))continue;const R=t.getTile(P),q=R.getBucket(s);if(!q)continue;const H=q.programConfigurations.get(s.id),$=h.useProgram("heatmap",H),{zoom:W}=h.transform;$.draw(d,_.TRIANGLES,oi.disabled,E,k,Ni.disabled,Ys(P.posMatrix,R,W,s.paint.get("heatmap-intensity")),s.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,s.paint,h.transform.zoom,H)}d.viewport.set([0,0,h.width,h.height])}else h.renderPass==="translucent"&&(h.context.setColorMode(h.colorModeForRenderPass()),function(d,_){const E=d.context,k=E.gl,z=_.heatmapFbo;if(!z)return;E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,z.colorAttachment.get()),E.activeTexture.set(k.TEXTURE1);let P=_.colorRampTexture;P||(P=_.colorRampTexture=new Ee(E,_.colorRamp,k.RGBA)),P.bind(k.LINEAR,k.CLAMP_TO_EDGE),d.useProgram("heatmapTexture").draw(E,k.TRIANGLES,oi.disabled,Ti.disabled,d.colorModeForRenderPass(),Ni.disabled,((R,q,H,$)=>{const W=a.create();a.ortho(W,0,R.width,R.height,0,0,1);const Q=R.context.gl;return{u_matrix:W,u_world:[Q.drawingBufferWidth,Q.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}})(d,_),_.id,d.viewportBuffer,d.quadTriangleIndexBuffer,d.viewportSegments,_.paint,d.transform.zoom)}(h,s))},line:function(h,t,s,l){if(h.renderPass!=="translucent")return;const d=s.paint.get("line-opacity"),_=s.paint.get("line-width");if(d.constantOr(1)===0||_.constantOr(1)===0)return;const E=h.depthModeForSublayer(0,oi.ReadOnly),k=h.colorModeForRenderPass(),z=s.paint.get("line-dasharray"),P=s.paint.get("line-pattern"),R=P.constantOr(1),q=s.paint.get("line-gradient"),H=s.getCrossfadeParameters(),$=R?"linePattern":z?"lineSDF":q?"lineGradient":"line",W=h.context,Q=W.gl;let le=!0;for(const ce of l){const pe=t.getTile(ce);if(R&&!pe.patternsLoaded())continue;const he=pe.getBucket(s);if(!he)continue;const Me=he.programConfigurations.get(s.id),be=h.context.program.get(),Ie=h.useProgram($,Me),je=le||Ie.program!==be,it=P.constantOr(null);if(it&&pe.imageAtlas){const gt=pe.imageAtlas,ot=gt.patternPositions[it.to.toString()],zt=gt.patternPositions[it.from.toString()];ot&&zt&&Me.setConstantPatternPositions(ot,zt)}const ze=R?Ts(h,pe,s,H):z?Ji(h,pe,s,z,H):q?Qs(h,pe,s,he.lineClipsArray.length):Es(h,pe,s);if(R)W.activeTexture.set(Q.TEXTURE0),pe.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Me.updatePaintBuffers(H);else if(z&&(je||h.lineAtlas.dirty))W.activeTexture.set(Q.TEXTURE0),h.lineAtlas.bind(W);else if(q){const gt=he.gradients[s.id];let ot=gt.texture;if(s.gradientVersion!==gt.version){let zt=256;if(s.stepInterpolant){const Kt=t.getSource().maxzoom,Ut=ce.canonical.z===Kt?Math.ceil(1<<h.transform.maxZoom-ce.canonical.z):1;zt=a.clamp(a.nextPowerOfTwo(he.maxLineLength/a.EXTENT*1024*Ut),256,W.maxTextureSize)}gt.gradient=a.renderColorRamp({expression:s.gradientExpression(),evaluationKey:"lineProgress",resolution:zt,image:gt.gradient||void 0,clips:he.lineClipsArray}),gt.texture?gt.texture.update(gt.gradient):gt.texture=new Ee(W,gt.gradient,Q.RGBA),gt.version=s.gradientVersion,ot=gt.texture}W.activeTexture.set(Q.TEXTURE0),ot.bind(s.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}Ie.draw(W,Q.TRIANGLES,E,h.stencilModeForClipping(ce),k,Ni.disabled,ze,s.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,s.paint,h.transform.zoom,Me,he.layoutVertexBuffer2),le=!1}},fill:function(h,t,s,l){const d=s.paint.get("fill-color"),_=s.paint.get("fill-opacity");if(_.constantOr(1)===0)return;const E=h.colorModeForRenderPass(),k=s.paint.get("fill-pattern"),z=h.opaquePassEnabledForLayer()&&!k.constantOr(1)&&d.constantOr(a.Color.transparent).a===1&&_.constantOr(0)===1?"opaque":"translucent";if(h.renderPass===z){const P=h.depthModeForSublayer(1,h.renderPass==="opaque"?oi.ReadWrite:oi.ReadOnly);fo(h,t,s,l,P,E,!1)}if(h.renderPass==="translucent"&&s.paint.get("fill-antialias")){const P=h.depthModeForSublayer(s.getPaintProperty("fill-outline-color")?2:0,oi.ReadOnly);fo(h,t,s,l,P,E,!0)}},"fill-extrusion":function(h,t,s,l){const d=s.paint.get("fill-extrusion-opacity");if(d!==0&&h.renderPass==="translucent"){const _=new oi(h.context.gl.LEQUAL,oi.ReadWrite,h.depthRangeFor3D);if(d!==1||s.paint.get("fill-extrusion-pattern").constantOr(1))os(h,t,s,l,_,Ti.disabled,Rt.disabled),os(h,t,s,l,_,h.stencilModeFor3D(),h.colorModeForRenderPass());else{const E=h.colorModeForRenderPass();os(h,t,s,l,_,Ti.disabled,E)}}},hillshade:function(h,t,s,l){if(h.renderPass!=="offscreen"&&h.renderPass!=="translucent")return;const d=h.context,_=h.depthModeForSublayer(0,oi.ReadOnly),E=h.colorModeForRenderPass(),[k,z]=h.renderPass==="translucent"?h.stencilConfigForOverlap(l):[{},l];for(const P of z){const R=t.getTile(P);R.needsHillshadePrepare&&h.renderPass==="offscreen"?tr(h,R,s,_,Ti.disabled,E):h.renderPass==="translucent"&&ha(h,R,s,_,k[P.overscaledZ],E)}d.viewport.set([0,0,h.width,h.height])},raster:function(h,t,s,l){if(h.renderPass!=="translucent"||s.paint.get("raster-opacity")===0||!l.length)return;const d=h.context,_=d.gl,E=t.getSource(),k=h.useProgram("raster"),z=h.colorModeForRenderPass(),[P,R]=E instanceof Di?[{},l]:h.stencilConfigForOverlap(l),q=R[R.length-1].overscaledZ,H=!h.options.moving;for(const $ of R){const W=h.depthModeForSublayer($.overscaledZ-q,s.paint.get("raster-opacity")===1?oi.ReadWrite:oi.ReadOnly,_.LESS),Q=t.getTile($),le=h.transform.calculatePosMatrix($.toUnwrapped(),H);Q.registerFadeDuration(s.paint.get("raster-fade-duration"));const ce=t.findLoadedParent($,0),pe=hl(Q,ce,t,s,h.transform);let he,Me;const be=s.paint.get("raster-resampling")==="nearest"?_.NEAREST:_.LINEAR;d.activeTexture.set(_.TEXTURE0),Q.texture.bind(be,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),d.activeTexture.set(_.TEXTURE1),ce?(ce.texture.bind(be,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),he=Math.pow(2,ce.tileID.overscaledZ-Q.tileID.overscaledZ),Me=[Q.tileID.canonical.x*he%1,Q.tileID.canonical.y*he%1]):Q.texture.bind(be,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST);const Ie=tl(le,Me||[0,0],he||1,pe,s);E instanceof Di?k.draw(d,_.TRIANGLES,W,Ti.disabled,z,Ni.disabled,Ie,s.id,E.boundsBuffer,h.quadTriangleIndexBuffer,E.boundsSegments):k.draw(d,_.TRIANGLES,W,P[$.overscaledZ],z,Ni.disabled,Ie,s.id,h.rasterBoundsBuffer,h.quadTriangleIndexBuffer,h.rasterBoundsSegments)}},background:function(h,t,s){const l=s.paint.get("background-color"),d=s.paint.get("background-opacity");if(d===0)return;const _=h.context,E=_.gl,k=h.transform,z=k.tileSize,P=s.paint.get("background-pattern");if(h.isPatternMissing(P))return;const R=!P&&l.a===1&&d===1&&h.opaquePassEnabledForLayer()?"opaque":"translucent";if(h.renderPass!==R)return;const q=Ti.disabled,H=h.depthModeForSublayer(0,R==="opaque"?oi.ReadWrite:oi.ReadOnly),$=h.colorModeForRenderPass(),W=h.useProgram(P?"backgroundPattern":"background"),Q=k.coveringTiles({tileSize:z});P&&(_.activeTexture.set(E.TEXTURE0),h.imageManager.bind(h.context));const le=s.getCrossfadeParameters();for(const ce of Q){const pe=h.transform.calculatePosMatrix(ce.toUnwrapped()),he=P?Ja(pe,d,h,P,{tileID:ce,tileSize:z},le):cc(pe,d,l);W.draw(_,E.TRIANGLES,H,q,$,Ni.disabled,he,s.id,h.tileExtentBuffer,h.quadTriangleIndexBuffer,h.tileExtentSegments)}},debug:function(h,t,s){for(let l=0;l<s.length;l++)ml(h,t,s[l])},custom:function(h,t,s){const l=h.context,d=s.implementation;if(h.renderPass==="offscreen"){const _=d.prerender;_&&(h.setCustomLayerDefaults(),l.setColorMode(h.colorModeForRenderPass()),_.call(d,l.gl,h.transform.customLayerMatrix()),l.setDirty(),h.setBaseState())}else if(h.renderPass==="translucent"){h.setCustomLayerDefaults(),l.setColorMode(h.colorModeForRenderPass()),l.setStencilMode(Ti.disabled);const _=d.renderingMode==="3d"?new oi(h.context.gl.LEQUAL,oi.ReadWrite,h.depthRangeFor3D):h.depthModeForSublayer(0,oi.ReadOnly);l.setDepthMode(_),d.render(l.gl,h.transform.customLayerMatrix()),l.setDirty(),h.setBaseState(),l.bindFramebuffer.set(null)}}};class mo{constructor(t,s){this.context=new ra(t),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=Pi.maxUnderzooming+Pi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ot,this.gpuTimers={}}resize(t,s,l){if(this.width=t*l,this.height=s*l,this.pixelRatio=l,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style._order)this.style._layers[d].resize()}setup(){const t=this.context,s=new a.PosArray;s.emplaceBack(0,0),s.emplaceBack(a.EXTENT,0),s.emplaceBack(0,a.EXTENT),s.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(s,qa.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const l=new a.PosArray;l.emplaceBack(0,0),l.emplaceBack(a.EXTENT,0),l.emplaceBack(0,a.EXTENT),l.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=t.createVertexBuffer(l,qa.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const d=new a.RasterBoundsArray;d.emplaceBack(0,0,0,0),d.emplaceBack(a.EXTENT,0,a.EXTENT,0),d.emplaceBack(0,a.EXTENT,0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(d,hi.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const _=new a.PosArray;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(_,qa.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const E=new a.LineStripIndexArray;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(E);const k=new a.TriangleIndexArray;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(k),this.emptyTexture=new Ee(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);const z=this.context.gl;this.stencilClearMode=new Ti({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const t=this.context,s=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const l=a.create();a.ortho(l,0,this.width,this.height,0,0,1),a.scale(l,l,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,s.TRIANGLES,oi.disabled,this.stencilClearMode,Rt.disabled,Ni.disabled,Is(l),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,s){if(this.currentStencilSource===t.source||!t.isTileClipped()||!s||!s.length)return;this.currentStencilSource=t.source;const l=this.context,d=l.gl;this.nextStencilID+s.length>256&&this.clearStencil(),l.setColorMode(Rt.disabled),l.setDepthMode(oi.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of s){const k=this._tileClippingMaskIDs[E.key]=this.nextStencilID++;_.draw(l,d.TRIANGLES,oi.disabled,new Ti({func:d.ALWAYS,mask:0},k,255,d.KEEP,d.KEEP,d.REPLACE),Rt.disabled,Ni.disabled,Is(E.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,s=this.context.gl;return new Ti({func:s.NOTEQUAL,mask:255},t,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(t){const s=this.context.gl;return new Ti({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(t){const s=this.context.gl,l=t.sort((E,k)=>k.overscaledZ-E.overscaledZ),d=l[l.length-1].overscaledZ,_=l[0].overscaledZ-d+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const E={};for(let k=0;k<_;k++)E[k+d]=new Ti({func:s.GEQUAL,mask:255},k+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=_,[E,l]}return[{[d]:Ti.disabled},l]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Rt([t.CONSTANT_COLOR,t.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Rt.unblended:Rt.alphaBlended}depthModeForSublayer(t,s,l){if(!this.opaquePassEnabledForLayer())return oi.disabled;const d=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new oi(l||this.context.gl.LEQUAL,s,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,s){this.style=t,this.options=s,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const l=this.style._order,d=this.style.sourceCaches;for(const z in d){const P=d[z];P.used&&P.prepare(this.context)}const _={},E={},k={};for(const z in d){const P=d[z];_[z]=P.getVisibleCoordinates(),E[z]=_[z].slice().reverse(),k[z]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<l.length;z++)if(this.style._layers[l[z]].is3D()){this.opaquePassCutoff=z;break}this.renderPass="offscreen";for(const z of l){const P=this.style._layers[z];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;const R=E[P.source];(P.type==="custom"||R.length)&&this.renderLayer(this,d[P.source],P,R)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=l.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[l[this.currentLayer]],P=d[z.source],R=_[z.source];this._renderTileClippingMasks(z,R),this.renderLayer(this,P,z,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<l.length;this.currentLayer++){const z=this.style._layers[l[this.currentLayer]],P=d[z.source],R=(z.type==="symbol"?k:E)[z.source];this._renderTileClippingMasks(z,_[z.source]),this.renderLayer(this,P,z,R)}if(this.options.showTileBoundaries){let z,P;Object.values(this.style._layers).forEach(R=>{R.source&&!R.isHidden(this.transform.zoom)&&(R.source!==(P&&P.id)&&(P=this.style.sourceCaches[R.source]),(!z||z.getSource().maxzoom<P.getSource().maxzoom)&&(z=P))}),z&&Cs.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const P=z.transform.padding;pl(z,z.transform.height-(P.top||0),3,dl),pl(z,P.bottom||0,3,fl),fa(z,P.left||0,3,ls),fa(z,z.transform.width-(P.right||0),3,da);const R=z.transform.centerPoint;(function(q,H,$,W){pa(q,H-1,$-10,2,20,W),pa(q,H-10,$-1,20,2,W)})(z,R.x,z.transform.height-R.y,po)}(this),this.context.setDefault()}renderLayer(t,s,l,d){l.isHidden(this.transform.zoom)||(l.type==="background"||l.type==="custom"||d.length)&&(this.id=l.id,this.gpuTimingStart(l),Cs[l.type](t,s,l,d,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;let l=this.gpuTimers[t.id];l||(l=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),l.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,l.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const s={};for(const l in t){const d=t[l],_=this.context.extTimerQuery,E=_.getQueryObjectEXT(d.query,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(d.query),s[l]=E}return s}translatePosMatrix(t,s,l,d,_){if(!l[0]&&!l[1])return t;const E=_?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(E){const P=Math.sin(E),R=Math.cos(E);l=[l[0]*R-l[1]*P,l[0]*P+l[1]*R]}const k=[_?l[0]:Vi(s,l[0],this.transform.zoom),_?l[1]:Vi(s,l[1],this.transform.zoom),0],z=new Float32Array(16);return a.translate(z,t,k),z}saveTileTexture(t){const s=this._tileTextures[t.size[0]];s?s.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const s=this._tileTextures[t];return s&&s.length>0?s.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const s=this.imageManager.getPattern(t.from.toString()),l=this.imageManager.getPattern(t.to.toString());return!s||!l}useProgram(t,s){this.cache=this.cache||{};const l=`${t}${s?s.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[l]||(this.cache[l]=new oc(this.context,t,Ga[t],s,Qa[t],this._showOverdrawInspector)),this.cache[l]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ee(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ma{constructor(t,s){this.points=t,this.planes=s}static fromInvProjectionMatrix(t,s,l){const d=Math.pow(2,l),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>a.transformMat4([],k,t)).map(k=>a.scale$1([],k,1/k[3]/s*d)),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const z=function(H,$){var W=$[0],Q=$[1],le=$[2],ce=W*W+Q*Q+le*le;return ce>0&&(ce=1/Math.sqrt(ce)),H[0]=$[0]*ce,H[1]=$[1]*ce,H[2]=$[2]*ce,H}([],function(H,$,W){var Q=$[0],le=$[1],ce=$[2],pe=W[0],he=W[1],Me=W[2];return H[0]=le*Me-ce*he,H[1]=ce*pe-Q*Me,H[2]=Q*he-le*pe,H}([],me([],_[k[0]],_[k[1]]),me([],_[k[2]],_[k[1]]))),P=-((R=z)[0]*(q=_[k[1]])[0]+R[1]*q[1]+R[2]*q[2]);var R,q;return z.concat(P)});return new ma(_,E)}}class ga{constructor(t,s){this.min=t,this.max=s,this.center=function(l,d,_){return l[0]=.5*d[0],l[1]=.5*d[1],l[2]=.5*d[2],l}([],function(l,d,_){return l[0]=d[0]+_[0],l[1]=d[1]+_[1],l[2]=d[2]+_[2],l}([],this.min,this.max))}quadrant(t){const s=[t%2==0,t<2],l=xe(this.min),d=xe(this.max);for(let _=0;_<s.length;_++)l[_]=s[_]?this.min[_]:this.center[_],d[_]=s[_]?this.center[_]:this.max[_];return d[2]=this.max[2],new ga(l,d)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let l=!0;for(let d=0;d<t.planes.length;d++){const _=t.planes[d];let E=0;for(let k=0;k<s.length;k++)a.dot(_,s[k])>=0&&E++;if(E===0)return 0;E!==s.length&&(l=!1)}if(l)return 2;for(let d=0;d<3;d++){let _=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let k=0;k<t.points.length;k++){const z=t.points[k][d]-this.min[d];_=Math.min(_,z),E=Math.max(E,z)}if(E<0||_>this.max[d]-this.min[d])return 0}return 1}}class cs{constructor(t=0,s=0,l=0,d=0){if(isNaN(t)||t<0||isNaN(s)||s<0||isNaN(l)||l<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=s,this.left=l,this.right=d}interpolate(t,s,l){return s.top!=null&&t.top!=null&&(this.top=a.number(t.top,s.top,l)),s.bottom!=null&&t.bottom!=null&&(this.bottom=a.number(t.bottom,s.bottom,l)),s.left!=null&&t.left!=null&&(this.left=a.number(t.left,s.left,l)),s.right!=null&&t.right!=null&&(this.right=a.number(t.right,s.right,l)),this}getCenter(t,s){const l=a.clamp((this.left+t-this.right)/2,0,t),d=a.clamp((this.top+s-this.bottom)/2,0,s);return new a.pointGeometry(l,d)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new cs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ms{constructor(t,s,l,d,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=t||0,this._maxZoom=s||22,this._minPitch=l==null?0:l,this._maxPitch=d==null?60:d,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new cs,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new Ms(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const s=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=function(){var l=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(l[1]=0,l[2]=0),l[0]=1,l[3]=1,l}(),function(l,d,_){var E=d[0],k=d[1],z=d[2],P=d[3],R=Math.sin(_),q=Math.cos(_);l[0]=E*q+z*R,l[1]=k*q+P*R,l[2]=E*-R+z*q,l[3]=k*-R+P*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const s=a.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const s=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,s,l){this._unmodified=!1,this._edgeInsets.interpolate(t,s,l),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const s=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(t){const s=[new a.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const l=this.pointCoordinate(new a.pointGeometry(0,0)),d=this.pointCoordinate(new a.pointGeometry(this.width,0)),_=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),E=this.pointCoordinate(new a.pointGeometry(0,this.height)),k=Math.floor(Math.min(l.x,d.x,_.x,E.x)),z=Math.floor(Math.max(l.x,d.x,_.x,E.x)),P=1;for(let R=k-P;R<=z+P;R++)R!==0&&s.push(new a.UnwrappedTileID(R,t))}return s}coveringTiles(t){let s=this.coveringZoomLevel(t);const l=s;if(t.minzoom!==void 0&&s<t.minzoom)return[];t.maxzoom!==void 0&&s>t.maxzoom&&(s=t.maxzoom);const d=a.MercatorCoordinate.fromLngLat(this.center),_=Math.pow(2,s),E=[_*d.x,_*d.y,0],k=ma.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s);let z=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(z=s);const P=W=>({aabb:new ga([W*_,0,0],[(W+1)*_,_,0]),zoom:0,x:0,y:0,wrap:W,fullyVisible:!1}),R=[],q=[],H=s,$=t.reparseOverscaled?l:s;if(this._renderWorldCopies)for(let W=1;W<=3;W++)R.push(P(-W)),R.push(P(W));for(R.push(P(0));R.length>0;){const W=R.pop(),Q=W.x,le=W.y;let ce=W.fullyVisible;if(!ce){const Ie=W.aabb.intersects(k);if(Ie===0)continue;ce=Ie===2}const pe=W.aabb.distanceX(E),he=W.aabb.distanceY(E),Me=Math.max(Math.abs(pe),Math.abs(he)),be=3+(1<<H-W.zoom)-2;if(W.zoom===H||Me>be&&W.zoom>=z)q.push({tileID:new a.OverscaledTileID(W.zoom===H?$:W.zoom,W.wrap,W.zoom,Q,le),distanceSq:Ve([E[0]-.5-Q,E[1]-.5-le])});else for(let Ie=0;Ie<4;Ie++){const je=(Q<<1)+Ie%2,it=(le<<1)+(Ie>>1);R.push({aabb:W.aabb.quadrant(Ie),zoom:W.zoom+1,x:je,y:it,wrap:W.wrap,fullyVisible:ce})}}return q.sort((W,Q)=>W.distanceSq-Q.distanceSq).map(W=>W.tileID)}resize(t,s){this.width=t,this.height=s,this.pixelsToGLUnits=[2/t,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const s=a.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.pointGeometry(a.mercatorXfromLng(t.lng)*this.worldSize,a.mercatorYfromLat(s)*this.worldSize)}unproject(t){return new a.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(t,s){const l=this.pointCoordinate(s),d=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(t),E=new a.MercatorCoordinate(_.x-(l.x-d.x),_.y-(l.y-d.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}locationCoordinate(t){return a.MercatorCoordinate.fromLngLat(t)}coordinateLocation(t){return t.toLngLat()}pointCoordinate(t){const s=[t.x,t.y,0,1],l=[t.x,t.y,1,1];a.transformMat4(s,s,this.pixelMatrixInverse),a.transformMat4(l,l,this.pixelMatrixInverse);const d=s[3],_=l[3],E=s[1]/d,k=l[1]/_,z=s[2]/d,P=l[2]/_,R=z===P?0:(0-z)/(P-z);return new a.MercatorCoordinate(a.number(s[0]/d,l[0]/_,R)/this.worldSize,a.number(E,k,R)/this.worldSize)}coordinatePoint(t){const s=[t.x*this.worldSize,t.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix),new a.pointGeometry(s[0]/s[3],s[1]/s[3])}getBounds(){return new a.LngLatBounds().extend(this.pointLocation(new a.pointGeometry(0,0))).extend(this.pointLocation(new a.pointGeometry(this.width,0))).extend(this.pointLocation(new a.pointGeometry(this.width,this.height))).extend(this.pointLocation(new a.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,s=!1){const l=t.key,d=s?this._alignedPosMatrixCache:this._posMatrixCache;if(d[l])return d[l];const _=t.canonical,E=this.worldSize/this.zoomScale(_.z),k=_.x+Math.pow(2,_.z)*t.wrap,z=a.identity(new Float64Array(16));return a.translate(z,z,[k*E,_.y*E,0]),a.scale(z,z,[E/a.EXTENT,E/a.EXTENT,1]),a.multiply(z,s?this.alignedProjMatrix:this.projMatrix,z),d[l]=new Float32Array(z),d[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,s,l,d,_=-90,E=90,k=-180,z=180;const P=this.size,R=this._unmodified;if(this.latRange){const $=this.latRange;_=a.mercatorYfromLat($[1])*this.worldSize,E=a.mercatorYfromLat($[0])*this.worldSize,t=E-_<P.y?P.y/(E-_):0}if(this.lngRange){const $=this.lngRange;k=a.mercatorXfromLng($[0])*this.worldSize,z=a.mercatorXfromLng($[1])*this.worldSize,s=z-k<P.x?P.x/(z-k):0}const q=this.point,H=Math.max(s||0,t||0);if(H)return this.center=this.unproject(new a.pointGeometry(s?(z+k)/2:q.x,t?(E+_)/2:q.y)),this.zoom+=this.scaleZoom(H),this._unmodified=R,void(this._constraining=!1);if(this.latRange){const $=q.y,W=P.y/2;$-W<_&&(d=_+W),$+W>E&&(d=E-W)}if(this.lngRange){const $=q.x,W=P.x/2;$-W<k&&(l=k+W),$+W>z&&(l=z-W)}l===void 0&&d===void 0||(this.center=this.unproject(new a.pointGeometry(l!==void 0?l:q.x,d!==void 0?d:q.y))),this._unmodified=R,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const s=Math.PI/2+this._pitch,l=this._fov*(.5+t.y/this.height),d=Math.sin(l)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-s-l,.01,Math.PI-.01)),_=this.point,E=_.x,k=_.y,z=1.01*(Math.cos(Math.PI/2-this._pitch)*d+this.cameraToCenterDistance),P=this.height/50;let R=new Float64Array(16);a.perspective(R,this._fov,this.width/this.height,P,z),R[8]=2*-t.x/this.width,R[9]=2*t.y/this.height,a.scale(R,R,[1,-1,1]),a.translate(R,R,[0,0,-this.cameraToCenterDistance]),a.rotateX(R,R,this._pitch),a.rotateZ(R,R,this.angle),a.translate(R,R,[-E,-k,0]),this.mercatorMatrix=a.scale([],R,[this.worldSize,this.worldSize,this.worldSize]),a.scale(R,R,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=R,this.invProjMatrix=a.invert([],this.projMatrix);const q=this.width%2/2,H=this.height%2/2,$=Math.cos(this.angle),W=Math.sin(this.angle),Q=E-Math.round(E)+$*q+W*H,le=k-Math.round(k)+$*H+W*q,ce=new Float64Array(R);if(a.translate(ce,ce,[Q>.5?Q-1:Q,le>.5?le-1:le,0]),this.alignedProjMatrix=ce,R=a.create(),a.scale(R,R,[this.width/2,-this.height/2,1]),a.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=a.create(),a.scale(R,R,[1,-1,1]),a.translate(R,R,[-1,-1,0]),a.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),R=a.invert(new Float64Array(16),this.pixelMatrix),!R)throw new Error("failed to invert matrix");this.pixelMatrixInverse=R,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new a.pointGeometry(0,0)),s=[t.x*this.worldSize,t.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,t))}getCameraQueryGeometry(t){const s=this.getCameraPoint();if(t.length===1)return[t[0],s];{let l=s.x,d=s.y,_=s.x,E=s.y;for(const k of t)l=Math.min(l,k.x),d=Math.min(d,k.y),_=Math.max(_,k.x),E=Math.max(E,k.y);return[new a.pointGeometry(l,d),new a.pointGeometry(_,d),new a.pointGeometry(_,E),new a.pointGeometry(l,E),new a.pointGeometry(l,d)]}}}class gl{constructor(t){this._hashName=t&&encodeURIComponent(t),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(s,l){let d=!1,_=null;const E=()=>{_=null,d&&(s(),_=setTimeout(E,300),d=!1)};return()=>(d=!0,_||E(),_)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const s=this._map.getCenter(),l=Math.round(100*this._map.getZoom())/100,d=Math.ceil((l*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,d),E=Math.round(s.lng*_)/_,k=Math.round(s.lat*_)/_,z=this._map.getBearing(),P=this._map.getPitch();let R="";if(R+=t?`/${E}/${k}/${l}`:`${l}/${k}/${E}`,(z||P)&&(R+="/"+Math.round(10*z)/10),P&&(R+=`/${Math.round(P)}`),this._hashName){const q=this._hashName;let H=!1;const $=window.location.hash.slice(1).split("&").map(W=>{const Q=W.split("=")[0];return Q===q?(H=!0,`${Q}=${R}`):W}).filter(W=>W);return H||$.push(`${q}=${R}`),`#${$.join("&")}`}return`#${R}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let s;return t.split("&").map(l=>l.split("=")).forEach(l=>{l[0]===this._hashName&&(s=l)}),(s&&s[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some(s=>isNaN(s))){const s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:s,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch{}}}const Ps={linearity:.3,easing:a.bezier(0,0,.3,1)},_l=a.extend({deceleration:2500,maxSpeed:1400},Ps),yl=a.extend({deceleration:20,maxSpeed:1400},Ps),vl=a.extend({deceleration:1e3,maxSpeed:360},Ps),us=a.extend({deceleration:1e3,maxSpeed:90},Ps);class xl{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,s=a.exported.now();for(;t.length>0&&s-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)s.zoom+=_.zoomDelta||0,s.bearing+=_.bearingDelta||0,s.pitch+=_.pitchDelta||0,_.panDelta&&s.pan._add(_.panDelta),_.around&&(s.around=_.around),_.pinchAround&&(s.pinchAround=_.pinchAround);const l=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(s.pan.mag()){const _=Ds(s.pan.mag(),l,a.extend({},_l,t||{}));d.offset=s.pan.mult(_.amount/s.pan.mag()),d.center=this._map.transform.center,Ls(d,_)}if(s.zoom){const _=Ds(s.zoom,l,yl);d.zoom=this._map.transform.zoom+_.amount,Ls(d,_)}if(s.bearing){const _=Ds(s.bearing,l,vl);d.bearing=this._map.transform.bearing+a.clamp(_.amount,-179,179),Ls(d,_)}if(s.pitch){const _=Ds(s.pitch,l,us);d.pitch=this._map.transform.pitch+_.amount,Ls(d,_)}if(d.zoom||d.bearing){const _=s.pinchAround===void 0?s.around:s.pinchAround;d.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),a.extend(d,{noMoveStart:!0})}}function Ls(h,t){(!h.duration||h.duration<t.duration)&&(h.duration=t.duration,h.easing=t.easing)}function Ds(h,t,s){const{maxSpeed:l,linearity:d,deceleration:_}=s,E=a.clamp(h*d/(t/1e3),-l,l),k=Math.abs(E)/(_*d);return{easing:s.easing,duration:1e3*k,amount:E*(k/2)}}class On extends a.Event{constructor(t,s,l,d={}){const _=F.mousePos(s.getCanvasContainer(),l),E=s.unproject(_);super(t,a.extend({point:_,lngLat:E,originalEvent:l},d)),this._defaultPrevented=!1,this.target=s}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class zn extends a.Event{constructor(t,s,l){const d=t==="touchend"?l.changedTouches:l.touches,_=F.touchPos(s.getCanvasContainer(),d),E=_.map(z=>s.unproject(z)),k=_.reduce((z,P,R,q)=>z.add(P.div(q.length)),new a.pointGeometry(0,0));super(t,{points:_,point:k,lngLats:E,lngLat:s.unproject(k),originalEvent:l}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class yc extends a.Event{constructor(t,s,l){super(t,{originalEvent:l}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class qr{constructor(t,s){this._map=t,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new yc(t.type,this._map,t))}mousedown(t,s){return this._mousedownPos=s,this._firePreventable(new On(t.type,this._map,t))}mouseup(t){this._map.fire(new On(t.type,this._map,t))}click(t,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new On(t.type,this._map,t))}dblclick(t){return this._firePreventable(new On(t.type,this._map,t))}mouseover(t){this._map.fire(new On(t.type,this._map,t))}mouseout(t){this._map.fire(new On(t.type,this._map,t))}touchstart(t){return this._firePreventable(new zn(t.type,this._map,t))}touchmove(t){this._map.fire(new zn(t.type,this._map,t))}touchend(t){this._map.fire(new zn(t.type,this._map,t))}touchcancel(t){this._map.fire(new zn(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bl{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new On(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new On("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new On(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hs{constructor(t,s){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,s){this.isEnabled()&&t.shiftKey&&t.button===0&&(F.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(t,s){if(!this._active)return;const l=s;if(this._lastPos.equals(l)||!this._box&&l.dist(this._startPos)<this._clickTolerance)return;const d=this._startPos;this._lastPos=l,this._box||(this._box=F.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const _=Math.min(d.x,l.x),E=Math.max(d.x,l.x),k=Math.min(d.y,l.y),z=Math.max(d.y,l.y);F.setTransform(this._box,`translate(${_}px,${k}px)`),this._box.style.width=E-_+"px",this._box.style.height=z-k+"px"}mouseupWindow(t,s){if(!this._active||t.button!==0)return;const l=this._startPos,d=s;if(this.reset(),F.suppressClick(),l.x!==d.x||l.y!==d.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:_=>_.fitScreenCoordinates(l,d,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,s){return this._map.fire(new a.Event(t,{originalEvent:s}))}}function Gr(h,t){const s={};for(let l=0;l<h.length;l++)s[h[l].identifier]=t[l];return s}class vc{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,s,l){(this.centroid||l.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),l.length===this.numTouches&&(this.centroid=function(d){const _=new a.pointGeometry(0,0);for(const E of d)_._add(E);return _.div(d.length)}(s),this.touches=Gr(l,s)))}touchmove(t,s,l){if(this.aborted||!this.centroid)return;const d=Gr(l,s);for(const _ in this.touches){const E=this.touches[_],k=d[_];(!k||k.dist(E)>30)&&(this.aborted=!0)}}touchend(t,s,l){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),l.length===0){const d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class go{constructor(t){this.singleTap=new vc(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,s,l){this.singleTap.touchstart(t,s,l)}touchmove(t,s,l){this.singleTap.touchmove(t,s,l)}touchend(t,s,l){const d=this.singleTap.touchend(t,s,l);if(d){const _=t.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(d)<30;if(_&&E||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class xc{constructor(){this._zoomIn=new go({numTouches:1,numTaps:2}),this._zoomOut=new go({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,s,l){this._zoomIn.touchstart(t,s,l),this._zoomOut.touchstart(t,s,l)}touchmove(t,s,l){this._zoomIn.touchmove(t,s,l),this._zoomOut.touchmove(t,s,l)}touchend(t,s,l){const d=this._zoomIn.touchend(t,s,l),_=this._zoomOut.touchend(t,s,l);return d?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(d)},{originalEvent:t})}):_?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(_)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wl={0:1,2:2};class jr{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,s){return!1}_move(t,s){return{}}mousedown(t,s){if(this._lastPoint)return;const l=F.mouseButton(t);this._correctButton(t,l)&&(this._lastPoint=s,this._eventButton=l)}mousemoveWindow(t,s){const l=this._lastPoint;if(l){if(t.preventDefault(),function(d,_){const E=wl[_];return d.buttons===void 0||(d.buttons&E)!==E}(t,this._eventButton))this.reset();else if(this._moved||!(s.dist(l)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(l,s)}}mouseupWindow(t){this._lastPoint&&F.mouseButton(t)===this._eventButton&&(this._moved&&F.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ds extends jr{mousedown(t,s){super.mousedown(t,s),this._lastPoint&&(this._active=!0)}_correctButton(t,s){return s===0&&!t.ctrlKey}_move(t,s){return{around:s,panDelta:s.sub(t)}}}class dt extends jr{_correctButton(t,s){return s===0&&t.ctrlKey||s===2}_move(t,s){const l=.8*(s.x-t.x);if(l)return this._active=!0,{bearingDelta:l}}contextmenu(t){t.preventDefault()}}class _o extends jr{_correctButton(t,s){return s===0&&t.ctrlKey||s===2}_move(t,s){const l=-.5*(s.y-t.y);if(l)return this._active=!0,{pitchDelta:l}}contextmenu(t){t.preventDefault()}}class Bs{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0)}touchstart(t,s,l){return this._calculateTransform(t,s,l)}touchmove(t,s,l){if(this._active&&!(l.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,s,l)}touchend(t,s,l){this._calculateTransform(t,s,l),this._active&&l.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,s,l){l.length>0&&(this._active=!0);const d=Gr(l,s),_=new a.pointGeometry(0,0),E=new a.pointGeometry(0,0);let k=0;for(const P in d){const R=d[P],q=this._touches[P];q&&(_._add(R),E._add(R.sub(q)),k++,d[P]=R)}if(this._touches=d,k<this._minTouches||!E.mag())return;const z=E.div(k);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(k),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,s,l){return{}}touchstart(t,s,l){this._firstTwoTouches||l.length<2||(this._firstTwoTouches=[l[0].identifier,l[1].identifier],this._start([s[0],s[1]]))}touchmove(t,s,l){if(!this._firstTwoTouches)return;t.preventDefault();const[d,_]=this._firstTwoTouches,E=Rs(l,s,d),k=Rs(l,s,_);if(!E||!k)return;const z=this._aroundCenter?null:E.add(k).div(2);return this._move([E,k],z,t)}touchend(t,s,l){if(!this._firstTwoTouches)return;const[d,_]=this._firstTwoTouches,E=Rs(l,s,d),k=Rs(l,s,_);E&&k||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Rs(h,t,s){for(let l=0;l<h.length;l++)if(h[l].identifier===s)return t[l]}function at(h,t){return Math.log(h/t)/Math.LN2}class yo extends Zr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,s){const l=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(at(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:at(this._distance,l),pinchAround:s}}}function Sl(h,t){return 180*h.angleWith(t)/Math.PI}class bc extends Zr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,s){const l=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Sl(this._vector,l),pinchAround:s}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const s=25/(Math.PI*this._minDiameter)*360,l=Sl(t,this._startVector);return Math.abs(l)<s}}function Fs(h){return Math.abs(h.y)>Math.abs(h.x)}class Il extends Zr{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,Fs(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,s,l){const d=t[0].sub(this._lastPoints[0]),_=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(d,_,l.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(d.y+_.y)/2*-.5}}gestureBeginsVertically(t,s,l){if(this._valid!==void 0)return this._valid;const d=t.mag()>=2,_=s.mag()>=2;if(!d&&!_)return;if(!d||!_)return this._firstMove===void 0&&(this._firstMove=l),l-this._firstMove<100&&void 0;const E=t.y>0==s.y>0;return Fs(t)&&Fs(s)&&E}}const El={panStep:100,bearingStep:15,pitchStep:10};class wc{constructor(){const t=El;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let s=0,l=0,d=0,_=0,E=0;switch(t.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:t.shiftKey?l=-1:(t.preventDefault(),_=-1);break;case 39:t.shiftKey?l=1:(t.preventDefault(),_=1);break;case 38:t.shiftKey?d=1:(t.preventDefault(),E=-1);break;case 40:t.shiftKey?d=-1:(t.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(l=0,d=0),{cameraAnimation:k=>{const z=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:Sc,zoom:s?Math.round(z)+s*(t.shiftKey?2:1):z,bearing:k.getBearing()+l*this._bearingStep,pitch:k.getPitch()+d*this._pitchStep,offset:[-_*this._panStep,-E*this._panStep],center:k.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Sc(h){return h*(2-h)}const _a=4.000244140625;class vo{constructor(t,s){this._map=t,this._el=t.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;let s=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const l=a.exported.now(),d=l-(this._lastWheelEventTime||0);this._lastWheelEventTime=l,s!==0&&s%_a==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(d*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),t.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=t,this._delta-=s,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=F.mousePos(this._el,t);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._map.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>_a?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&z!==0&&(z=1/z);const P=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(P*z))),this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:t.zoom,l=this._startZoom,d=this._easing;let _,E=!1;if(this._type==="wheel"&&l&&d){const k=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),z=d(k);_=a.number(l,s,z),k<1?this._frameId||(this._frameId=!0):E=!0}else _=s,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:_-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let s=a.ease;if(this._prevEase){const l=this._prevEase,d=(a.exported.now()-l.start)/l.duration,_=l.easing(d+.01)-l.easing(d),E=.27/Math.sqrt(_*_+1e-4)*.01,k=Math.sqrt(.0729-E*E);s=a.bezier(E,k,.25,1)}return this._prevEase={start:a.exported.now(),duration:t,easing:s},s}reset(){this._active=!1}}class xo{constructor(t,s){this._clickZoom=t,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class bo{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,s){return t.preventDefault(),{cameraAnimation:l=>{l.easeTo({duration:300,zoom:l.getZoom()+(t.shiftKey?-1:1),around:l.unproject(s)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cn{constructor(){this._tap=new go({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,s,l){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?l.length>0&&(this._swipePoint=s[0],this._swipeTouch=l[0].identifier):this._tap.touchstart(t,s,l))}touchmove(t,s,l){if(this._tapTime){if(this._swipePoint){if(l[0].identifier!==this._swipeTouch)return;const d=s[0],_=d.y-this._swipePoint.y;return this._swipePoint=d,t.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(t,s,l)}touchend(t,s,l){this._tapTime?this._swipePoint&&l.length===0&&this.reset():this._tap.touchend(t,s,l)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pr{constructor(t,s,l){this._el=t,this._mousePan=s,this._touchPan=l}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Tl{constructor(t,s,l){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=s,this._mousePitch=l}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class wo{constructor(t,s,l,d){this._el=t,this._touchZoom=s,this._touchRotate=l,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fs=h=>h.zoom||h.drag||h.pitch||h.rotate;class So extends a.Event{}function ya(h){return h.panDelta&&h.panDelta.mag()||h.zoomDelta||h.bearingDelta||h.pitchDelta}class Xn{constructor(t,s){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xl(t),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),a.bindAll(["handleEvent","handleWindowEvent"],this);const l=this._el;this._listeners=[[l,"touchstart",{passive:!0}],[l,"touchmove",{passive:!1}],[l,"touchend",void 0],[l,"touchcancel",void 0],[l,"mousedown",void 0],[l,"mousemove",void 0],[l,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[l,"mouseover",void 0],[l,"mouseout",void 0],[l,"dblclick",void 0],[l,"click",void 0],[l,"keydown",{capture:!1}],[l,"keyup",void 0],[l,"wheel",{passive:!1}],[l,"contextmenu",void 0],[window,"blur",void 0]];for(const[d,_,E]of this._listeners)F.addEventListener(d,_,d===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[t,s,l]of this._listeners)F.removeEventListener(t,s,t===document?this.handleWindowEvent:this.handleEvent,l)}_addDefaultHandlers(t){const s=this._map,l=s.getCanvasContainer();this._add("mapEvent",new qr(s,t));const d=s.boxZoom=new hs(s,t);this._add("boxZoom",d);const _=new xc,E=new bo;s.doubleClickZoom=new xo(E,_),this._add("tapZoom",_),this._add("clickZoom",E);const k=new Cn;this._add("tapDragZoom",k);const z=s.touchPitch=new Il;this._add("touchPitch",z);const P=new dt(t),R=new _o(t);s.dragRotate=new Tl(t,P,R),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const q=new ds(t),H=new Bs(t);s.dragPan=new Pr(l,q,H),this._add("mousePan",q),this._add("touchPan",H,["touchZoom","touchRotate"]);const $=new bc,W=new yo;s.touchZoomRotate=new wo(l,W,$,k),this._add("touchRotate",$,["touchPan","touchZoom"]),this._add("touchZoom",W,["touchPan","touchRotate"]);const Q=s.scrollZoom=new vo(s,this);this._add("scrollZoom",Q,["mousePan"]);const le=s.keyboard=new wc;this._add("keyboard",le),this._add("blockableMapEvent",new bl(s));for(const ce of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[ce]&&s[ce].enable(t[ce])}_add(t,s,l){this._handlers.push({handlerName:t,handler:s,allowed:l}),this._handlersById[t]=s}stop(t){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(fs(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,s,l){for(const d in t)if(d!==l&&(!s||s.indexOf(d)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const s=[];for(const l of t)this._el.contains(l.target)&&s.push(l);return s}handleEvent(t,s){if(t.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const l=t.type==="renderFrame"?void 0:t,d={needsRenderFrame:!1},_={},E={},k=t.touches,z=k?this._getMapTouches(k):void 0,P=z?F.touchPos(this._el,z):F.mousePos(this._el,t);for(const{handlerName:H,handler:$,allowed:W}of this._handlers){if(!$.isEnabled())continue;let Q;this._blockedByActive(E,W,H)?$.reset():$[s||t.type]&&(Q=$[s||t.type](t,P,z),this.mergeHandlerResult(d,_,Q,H,l),Q&&Q.needsRenderFrame&&this._triggerRenderFrame()),(Q||$.isActive())&&(E[H]=$)}const R={};for(const H in this._previousActiveHandlers)E[H]||(R[H]=l);this._previousActiveHandlers=E,(Object.keys(R).length||ya(d))&&(this._changes.push([d,_,R]),this._triggerRenderFrame()),(Object.keys(E).length||ya(d))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=d;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(t,s,l,d,_){if(!l)return;a.extend(t,l);const E={handlerName:d,originalEvent:l.originalEvent||_};l.zoomDelta!==void 0&&(s.zoom=E),l.panDelta!==void 0&&(s.drag=E),l.pitchDelta!==void 0&&(s.pitch=E),l.bearingDelta!==void 0&&(s.rotate=E)}_applyChanges(){const t={},s={},l={};for(const[d,_,E]of this._changes)d.panDelta&&(t.panDelta=(t.panDelta||new a.pointGeometry(0,0))._add(d.panDelta)),d.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(t.around=d.around),d.pinchAround!==void 0&&(t.pinchAround=d.pinchAround),d.noInertia&&(t.noInertia=d.noInertia),a.extend(s,_),a.extend(l,E);this._updateMapTransform(t,s,l),this._changes=[]}_updateMapTransform(t,s,l){const d=this._map,_=d.transform;if(!ya(t))return this._fireEvents(s,l,!0);let{panDelta:E,zoomDelta:k,bearingDelta:z,pitchDelta:P,around:R,pinchAround:q}=t;q!==void 0&&(R=q),d._stop(!0),R=R||d.transform.centerPoint;const H=_.pointLocation(E?R.sub(E):R);z&&(_.bearing+=z),P&&(_.pitch+=P),k&&(_.zoom+=k),_.setLocationAtPoint(H,R),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(s,l,!0)}_fireEvents(t,s,l){const d=fs(this._eventsInProgress),_=fs(t),E={};for(const R in t){const{originalEvent:q}=t[R];this._eventsInProgress[R]||(E[`${R}start`]=q),this._eventsInProgress[R]=t[R]}!d&&_&&this._fireEvent("movestart",_.originalEvent);for(const R in E)this._fireEvent(R,E[R]);_&&this._fireEvent("move",_.originalEvent);for(const R in t){const{originalEvent:q}=t[R];this._fireEvent(R,q)}const k={};let z;for(const R in this._eventsInProgress){const{handlerName:q,originalEvent:H}=this._eventsInProgress[R];this._handlersById[q].isActive()||(delete this._eventsInProgress[R],z=s[q]||H,k[`${R}end`]=z)}for(const R in k)this._fireEvent(R,k[R]);const P=fs(this._eventsInProgress);if(l&&(d||_)&&!P){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=H=>H!==0&&-this._bearingSnap<H&&H<this._bearingSnap;R?(q(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:z})):(this._map.fire(new a.Event("moveend",{originalEvent:z})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,s){this._map.fire(new a.Event(t,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new So("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ki={extend:(h,...t)=>a.extend(h,...t),run(h){h()},logToElement(h,t=!1,s="log"){const l=window.document.getElementById(s);l&&(t&&(l.innerHTML=""),l.innerHTML+=`<br>${h}`)}};class va extends a.Evented{constructor(t,s){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=s.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,s){return this.jumpTo({center:t},s)}panBy(t,s,l){return t=a.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,a.extend({offset:t},s),l)}panTo(t,s,l){return this.easeTo(a.extend({center:t},s),l)}getZoom(){return this.transform.zoom}setZoom(t,s){return this.jumpTo({zoom:t},s),this}zoomTo(t,s,l){return this.easeTo(a.extend({zoom:t},s),l)}zoomIn(t,s){return this.zoomTo(this.getZoom()+1,t,s),this}zoomOut(t,s){return this.zoomTo(this.getZoom()-1,t,s),this}getBearing(){return this.transform.bearing}setBearing(t,s){return this.jumpTo({bearing:t},s),this}getPadding(){return this.transform.padding}setPadding(t,s){return this.jumpTo({padding:t},s),this}rotateTo(t,s,l){return this.easeTo(a.extend({bearing:t},s),l)}resetNorth(t,s){return this.rotateTo(0,a.extend({duration:1e3},t),s),this}resetNorthPitch(t,s){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},t),s),this}snapToNorth(t,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,s):this}getPitch(){return this.transform.pitch}setPitch(t,s){return this.jumpTo({pitch:t},s),this}cameraForBounds(t,s){t=a.LngLatBounds.convert(t);const l=s&&s.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),l,s)}_cameraForBoxAndBearing(t,s,l,d){const _={top:0,bottom:0,right:0,left:0};if(typeof(d=a.extend({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const be=d.padding;d.padding={top:be,bottom:be,right:be,left:be}}d.padding=a.extend(_,d.padding);const E=this.transform,k=E.padding,z=E.project(a.LngLat.convert(t)),P=E.project(a.LngLat.convert(s)),R=z.rotate(-l*Math.PI/180),q=P.rotate(-l*Math.PI/180),H=new a.pointGeometry(Math.max(R.x,q.x),Math.max(R.y,q.y)),$=new a.pointGeometry(Math.min(R.x,q.x),Math.min(R.y,q.y)),W=H.sub($),Q=(E.width-(k.left+k.right+d.padding.left+d.padding.right))/W.x,le=(E.height-(k.top+k.bottom+d.padding.top+d.padding.bottom))/W.y;if(le<0||Q<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ce=Math.min(E.scaleZoom(E.scale*Math.min(Q,le)),d.maxZoom),pe=a.pointGeometry.convert(d.offset),he=new a.pointGeometry((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(l*Math.PI/180),Me=pe.add(he).mult(E.scale/E.zoomScale(ce));return{center:E.unproject(z.add(P).div(2).sub(Me)),zoom:ce,bearing:l}}fitBounds(t,s,l){return this._fitInternal(this.cameraForBounds(t,s),s,l)}fitScreenCoordinates(t,s,l,d,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.pointGeometry.convert(t)),this.transform.pointLocation(a.pointGeometry.convert(s)),l,d),d,_)}_fitInternal(t,s,l){return t?(delete(s=a.extend(t,s)).padding,s.linear?this.easeTo(s,l):this.flyTo(s,l)):this}jumpTo(t,s){this.stop();const l=this.transform;let d=!1,_=!1,E=!1;return"zoom"in t&&l.zoom!==+t.zoom&&(d=!0,l.zoom=+t.zoom),t.center!==void 0&&(l.center=a.LngLat.convert(t.center)),"bearing"in t&&l.bearing!==+t.bearing&&(_=!0,l.bearing=+t.bearing),"pitch"in t&&l.pitch!==+t.pitch&&(E=!0,l.pitch=+t.pitch),t.padding==null||l.isPaddingEqual(t.padding)||(l.padding=t.padding),this.fire(new a.Event("movestart",s)).fire(new a.Event("move",s)),d&&this.fire(new a.Event("zoomstart",s)).fire(new a.Event("zoom",s)).fire(new a.Event("zoomend",s)),_&&this.fire(new a.Event("rotatestart",s)).fire(new a.Event("rotate",s)).fire(new a.Event("rotateend",s)),E&&this.fire(new a.Event("pitchstart",s)).fire(new a.Event("pitch",s)).fire(new a.Event("pitchend",s)),this.fire(new a.Event("moveend",s))}easeTo(t,s){this._stop(!1,t.easeId),((t=a.extend({offset:[0,0],duration:500,easing:a.ease},t)).animate===!1||!t.essential&&a.exported.prefersReducedMotion)&&(t.duration=0);const l=this.transform,d=this.getZoom(),_=this.getBearing(),E=this.getPitch(),k=this.getPadding(),z="zoom"in t?+t.zoom:d,P="bearing"in t?this._normalizeBearing(t.bearing,_):_,R="pitch"in t?+t.pitch:E,q="padding"in t?t.padding:l.padding,H=a.pointGeometry.convert(t.offset);let $=l.centerPoint.add(H);const W=l.pointLocation($),Q=a.LngLat.convert(t.center||W);this._normalizeCenter(Q);const le=l.project(W),ce=l.project(Q).sub(le),pe=l.zoomScale(z-d);let he,Me;t.around&&(he=a.LngLat.convert(t.around),Me=l.locationPoint(he));const be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||z!==d,this._rotating=this._rotating||_!==P,this._pitching=this._pitching||R!==E,this._padding=!l.isPaddingEqual(q),this._easeId=t.easeId,this._prepareEase(s,t.noMoveStart,be),this._ease(Ie=>{if(this._zooming&&(l.zoom=a.number(d,z,Ie)),this._rotating&&(l.bearing=a.number(_,P,Ie)),this._pitching&&(l.pitch=a.number(E,R,Ie)),this._padding&&(l.interpolatePadding(k,q,Ie),$=l.centerPoint.add(H)),he)l.setLocationAtPoint(he,Me);else{const je=l.zoomScale(l.zoom-d),it=z>d?Math.min(2,pe):Math.max(.5,pe),ze=Math.pow(it,1-Ie),gt=l.unproject(le.add(ce.mult(Ie*ze)).mult(je));l.setLocationAtPoint(l.renderWorldCopies?gt.wrap():gt,$)}this._fireMoveEvents(s)},Ie=>{this._afterEase(s,Ie)},t),this}_prepareEase(t,s,l={}){this._moving=!0,s||l.moving||this.fire(new a.Event("movestart",t)),this._zooming&&!l.zooming&&this.fire(new a.Event("zoomstart",t)),this._rotating&&!l.rotating&&this.fire(new a.Event("rotatestart",t)),this._pitching&&!l.pitching&&this.fire(new a.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new a.Event("move",t)),this._zooming&&this.fire(new a.Event("zoom",t)),this._rotating&&this.fire(new a.Event("rotate",t)),this._pitching&&this.fire(new a.Event("pitch",t))}_afterEase(t,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const l=this._zooming,d=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,l&&this.fire(new a.Event("zoomend",t)),d&&this.fire(new a.Event("rotateend",t)),_&&this.fire(new a.Event("pitchend",t)),this.fire(new a.Event("moveend",t))}flyTo(t,s){if(!t.essential&&a.exported.prefersReducedMotion){const Ht=a.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ht,s)}this.stop(),t=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},t);const l=this.transform,d=this.getZoom(),_=this.getBearing(),E=this.getPitch(),k=this.getPadding(),z="zoom"in t?a.clamp(+t.zoom,l.minZoom,l.maxZoom):d,P="bearing"in t?this._normalizeBearing(t.bearing,_):_,R="pitch"in t?+t.pitch:E,q="padding"in t?t.padding:l.padding,H=l.zoomScale(z-d),$=a.pointGeometry.convert(t.offset);let W=l.centerPoint.add($);const Q=l.pointLocation(W),le=a.LngLat.convert(t.center||Q);this._normalizeCenter(le);const ce=l.project(Q),pe=l.project(le).sub(ce);let he=t.curve;const Me=Math.max(l.width,l.height),be=Me/H,Ie=pe.mag();if("minZoom"in t){const Ht=a.clamp(Math.min(t.minZoom,d,z),l.minZoom,l.maxZoom),Ri=Me/l.zoomScale(Ht-d);he=Math.sqrt(Ri/Ie*2)}const je=he*he;function it(Ht){const Ri=(be*be-Me*Me+(Ht?-1:1)*je*je*Ie*Ie)/(2*(Ht?be:Me)*je*Ie);return Math.log(Math.sqrt(Ri*Ri+1)-Ri)}function ze(Ht){return(Math.exp(Ht)-Math.exp(-Ht))/2}function gt(Ht){return(Math.exp(Ht)+Math.exp(-Ht))/2}const ot=it(0);let zt=function(Ht){return gt(ot)/gt(ot+he*Ht)},Kt=function(Ht){return Me*((gt(ot)*(ze(Ri=ot+he*Ht)/gt(Ri))-ze(ot))/je)/Ie;var Ri},Ut=(it(1)-ot)/he;if(Math.abs(Ie)<1e-6||!isFinite(Ut)){if(Math.abs(Me-be)<1e-6)return this.easeTo(t,s);const Ht=be<Me?-1:1;Ut=Math.abs(Math.log(be/Me))/he,Kt=function(){return 0},zt=function(Ri){return Math.exp(Ht*he*Ri)}}return t.duration="duration"in t?+t.duration:1e3*Ut/("screenSpeed"in t?+t.screenSpeed/he:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=_!==P,this._pitching=R!==E,this._padding=!l.isPaddingEqual(q),this._prepareEase(s,!1),this._ease(Ht=>{const Ri=Ht*Ut,Mt=1/zt(Ri);l.zoom=Ht===1?z:d+l.scaleZoom(Mt),this._rotating&&(l.bearing=a.number(_,P,Ht)),this._pitching&&(l.pitch=a.number(E,R,Ht)),this._padding&&(l.interpolatePadding(k,q,Ht),W=l.centerPoint.add($));const $t=Ht===1?le:l.unproject(ce.add(pe.mult(Kt(Ri))).mult(Mt));l.setLocationAtPoint(l.renderWorldCopies?$t.wrap():$t,W),this._fireMoveEvents(s)},()=>this._afterEase(s),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,s){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const l=this._onEaseEnd;delete this._onEaseEnd,l.call(this,s)}if(!t){const l=this.handlers;l&&l.stop(!1)}return this}_ease(t,s,l){l.animate===!1||l.duration===0?(t(1),s()):(this._easeStart=a.exported.now(),this._easeOptions=l,this._onEaseFrame=t,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,s){t=a.wrap(t,-180,180);const l=Math.abs(t-s);return Math.abs(t-360-s)<l&&(t-=360),Math.abs(t+360-s)<l&&(t+=360),t}_normalizeCenter(t){const s=this.transform;if(!s.renderWorldCopies||s.lngRange)return;const l=t.lng-s.center.lng;t.lng+=l>180?-360:l<-180?360:0}}class xa{constructor(t={}){this.options=t,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,s){const l=this._map._getUIString(`AttributionControl.${s}`);t.title=l,t.setAttribute("aria-label",l)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||t.sourceDataType!=="metadata"&&t.sourceDataType!=="visibility"&&t.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}const s=this._map.style.sourceCaches;for(const d in s){const _=s[d];if(_.used){const E=_.getSource();E.attribution&&t.indexOf(E.attribution)<0&&t.push(E.attribution)}}t=t.filter(d=>String(d).trim()),t.sort((d,_)=>d.length-_.length),t=t.filter((d,_)=>{for(let E=_+1;E<t.length;E++)if(t[E].indexOf(d)>=0)return!1;return!0});const l=t.join(" | ");l!==this._attribHTML&&(this._attribHTML=l,t.length?(this._innerContainer.innerHTML=l,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Io{constructor(t={}){this.options=t,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl mapboxgl-ctrl");const s=F.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const s=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&s.classList.add("maplibregl-compact","mapboxgl-compact"):s.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class kl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const s=++this._id;return this._queue.push({callback:t,id:s,cancelled:!1}),s}remove(t){const s=this._currentlyRunning,l=s?this._queue.concat(s):this._queue;for(const d of l)if(d.id===t)return void(d.cancelled=!0)}run(t=0){const s=this._currentlyRunning=this._queue;this._queue=[];for(const l of s)if(!l.cancelled&&(l.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Al={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ic={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},cr={showCompass:!0,showZoom:!0,visualizePitch:!1};class ba{constructor(t,s,l=!1){this._clickTolerance=10,this.element=s,this.mouseRotate=new dt({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,l&&(this.mousePitch=new _o({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),F.addEventListener(s,"mousedown",this.mousedown),F.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(s,"touchmove",this.touchmove),F.addEventListener(s,"touchend",this.touchend),F.addEventListener(s,"touchcancel",this.reset)}down(t,s){this.mouseRotate.mousedown(t,s),this.mousePitch&&this.mousePitch.mousedown(t,s),F.disableDrag()}move(t,s){const l=this.map,d=this.mouseRotate.mousemoveWindow(t,s);if(d&&d.bearingDelta&&l.setBearing(l.getBearing()+d.bearingDelta),this.mousePitch){const _=this.mousePitch.mousemoveWindow(t,s);_&&_.pitchDelta&&l.setPitch(l.getPitch()+_.pitchDelta)}}off(){const t=this.element;F.removeEventListener(t,"mousedown",this.mousedown),F.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(t,"touchmove",this.touchmove),F.removeEventListener(t,"touchend",this.touchend),F.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup)}mousedown(t){this.down(a.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),F.mousePos(this.element,t)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,F.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){t.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){t.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){t.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function _t(h,t,s){if(h=new a.LngLat(h.lng,h.lat),t){const l=new a.LngLat(h.lng-360,h.lat),d=new a.LngLat(h.lng+360,h.lat),_=s.locationPoint(h).distSqr(t);s.locationPoint(l).distSqr(t)<_?h=l:s.locationPoint(d).distSqr(t)<_&&(h=d)}for(;Math.abs(h.lng-s.center.lng)>180;){const l=s.locationPoint(h);if(l.x>=0&&l.y>=0&&l.x<=s.width&&l.y<=s.height)break;h.lng>s.center.lng?h.lng-=360:h.lng+=360}return h}const wt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Os(h,t,s){const l=h.classList;for(const d in wt)l.remove(`maplibregl-${s}-anchor-${d}`,`mapboxgl-${s}-anchor-${d}`);l.add(`maplibregl-${s}-anchor-${t}`,`mapboxgl-${s}-anchor-${t}`)}class Vs extends a.Evented{constructor(t,s){if(super(),(t instanceof HTMLElement||s)&&(t=a.extend({element:t},s)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=a.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div"),this._element.setAttribute("aria-label","Map marker");const l=F.createNS("http://www.w3.org/2000/svg","svg"),d=41,_=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${_}px`),l.setAttributeNS(null,"viewBox",`0 0 ${_} ${d}`);const E=F.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");const k=F.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const z=F.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of P){const he=F.createNS("http://www.w3.org/2000/svg","ellipse");he.setAttributeNS(null,"opacity","0.04"),he.setAttributeNS(null,"cx","10.5"),he.setAttributeNS(null,"cy","5.80029008"),he.setAttributeNS(null,"rx",pe.rx),he.setAttributeNS(null,"ry",pe.ry),z.appendChild(he)}const R=F.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const q=F.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(q);const H=F.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const $=F.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild($);const W=F.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(6.0, 7.0)"),W.setAttributeNS(null,"fill","#FFFFFF");const Q=F.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const le=F.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");const ce=F.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#FFFFFF"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962"),Q.appendChild(le),Q.appendChild(ce),k.appendChild(z),k.appendChild(R),k.appendChild(H),k.appendChild(W),k.appendChild(Q),l.appendChild(k),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(l),this._offset=a.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Os(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=a.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const d=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const s=t.code,l=t.charCode||t.keyCode;s!=="Space"&&s!=="Enter"&&l!==32&&l!==13||this.togglePopup()}_onMapClick(t){const s=t.originalEvent.target,l=this._element;this._popup&&(s===l||l.contains(s))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=_t(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let s="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?s=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(s=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let l="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?l="rotateX(0deg)":this._pitchAlignment==="map"&&(l=`rotateX(${this._map.getPitch()}deg)`),t&&t.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${wt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${l} ${s}`)}getOffset(){return this._offset}setOffset(t){return this._offset=a.pointGeometry.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const s=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=s}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Eo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let nn,Hr=0,Mn=!1;const Ec={maxWidth:100,unit:"metric"};function Us(h,t,s){const l=s&&s.maxWidth||100,d=h._container.clientHeight/2,_=h.unproject([0,d]),E=h.unproject([l,d]),k=_.distanceTo(E);if(s&&s.unit==="imperial"){const z=3.2808*k;z>5280?wi(t,l,z/5280,h._getUIString("ScaleControl.Miles")):wi(t,l,z,h._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?wi(t,l,k/1852,h._getUIString("ScaleControl.NauticalMiles")):k>=1e3?wi(t,l,k/1e3,h._getUIString("ScaleControl.Kilometers")):wi(t,l,k,h._getUIString("ScaleControl.Meters"))}function wi(h,t,s,l){const d=function(_){const E=Math.pow(10,`${Math.floor(_)}`.length-1);let k=_/E;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(z){const P=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*P)/P}(k),E*k}(s);h.style.width=t*(d/s)+"px",h.innerHTML=`${d}&nbsp;${l}`}const rn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},zl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ps(h){if(h){if(typeof h=="number"){const t=Math.round(Math.sqrt(.5*Math.pow(h,2)));return{center:new a.pointGeometry(0,0),top:new a.pointGeometry(0,h),"top-left":new a.pointGeometry(t,t),"top-right":new a.pointGeometry(-t,t),bottom:new a.pointGeometry(0,-h),"bottom-left":new a.pointGeometry(t,-t),"bottom-right":new a.pointGeometry(-t,-t),left:new a.pointGeometry(h,0),right:new a.pointGeometry(-h,0)}}if(h instanceof a.pointGeometry||Array.isArray(h)){const t=a.pointGeometry.convert(h);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:a.pointGeometry.convert(h.center||[0,0]),top:a.pointGeometry.convert(h.top||[0,0]),"top-left":a.pointGeometry.convert(h["top-left"]||[0,0]),"top-right":a.pointGeometry.convert(h["top-right"]||[0,0]),bottom:a.pointGeometry.convert(h.bottom||[0,0]),"bottom-left":a.pointGeometry.convert(h["bottom-left"]||[0,0]),"bottom-right":a.pointGeometry.convert(h["bottom-right"]||[0,0]),left:a.pointGeometry.convert(h.left||[0,0]),right:a.pointGeometry.convert(h.right||[0,0])}}return ps(new a.pointGeometry(0,0))}const Ns={supported:A,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends va{constructor(h){var t;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(h=a.extend({},Ic,h)).minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ms(h.minZoom,h.maxZoom,h.minPitch,h.maxPitch,h.renderWorldCopies),{bearingSnap:h.bearingSnap}),this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._failIfMajorPerformanceCaveat=h.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=h.preserveDrawingBuffer,this._antialias=h.antialias,this._trackResize=h.trackResize,this._bearingSnap=h.bearingSnap,this._refreshExpiredTiles=h.refreshExpiredTiles,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=h.collectResourceTiming,this._renderTaskQueue=new kl,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Al,h.locale),this._clickTolerance=h.clickTolerance,this._pixelRatio=(t=h.pixelRatio)!==null&&t!==void 0?t:devicePixelRatio,this._requestManager=new ee(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Xn(this,h),this._hash=h.hash&&new gl(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,a.extend({},h.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=h.localIdeographFontFamily,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new xa({customAttribution:h.customAttribution})),h.maplibreLogo&&this.addControl(new Io,h.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new a.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new a.Event(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new a.Event("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(h,t){if(t===void 0&&(t=h.getDefaultPosition?h.getDefaultPosition():"top-right"),!h||!h.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=h.onAdd(this);this._controls.push(h);const l=this._controlPositions[t];return t.indexOf("bottom")!==-1?l.insertBefore(s,l.firstChild):l.appendChild(s),this}removeControl(h){if(!h||!h.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(h);return t>-1&&this._controls.splice(t,1),h.onRemove(this),this}hasControl(h){return this._controls.indexOf(h)>-1}resize(h){const t=this._containerDimensions(),s=t[0],l=t[1];this._resizeCanvas(s,l,this.getPixelRatio()),this.transform.resize(s,l),this.painter.resize(s,l,this.getPixelRatio());const d=!this._moving;return d&&(this.stop(),this.fire(new a.Event("movestart",h)).fire(new a.Event("move",h))),this.fire(new a.Event("resize",h)),d&&this.fire(new a.Event("moveend",h)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(h){const[t,s]=this._containerDimensions();this._pixelRatio=h,this._resizeCanvas(t,s,h),this.painter.resize(t,s,h)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(h){return this.transform.setMaxBounds(a.LngLatBounds.convert(h)),this._update()}setMinZoom(h){if((h=h==null?-2:h)>=-2&&h<=this.transform.maxZoom)return this.transform.minZoom=h,this._update(),this.getZoom()<h&&this.setZoom(h),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(h){if((h=h==null?22:h)>=this.transform.minZoom)return this.transform.maxZoom=h,this._update(),this.getZoom()>h&&this.setZoom(h),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(h){if((h=h==null?0:h)<0)throw new Error("minPitch must be greater than or equal to 0");if(h>=0&&h<=this.transform.maxPitch)return this.transform.minPitch=h,this._update(),this.getPitch()<h&&this.setPitch(h),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(h){if((h=h==null?60:h)>85)throw new Error("maxPitch must be less than or equal to 85");if(h>=this.transform.minPitch)return this.transform.maxPitch=h,this._update(),this.getPitch()>h&&this.setPitch(h),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(h){return this.transform.renderWorldCopies=h,this._update()}project(h){return this.transform.locationPoint(a.LngLat.convert(h))}unproject(h){return this.transform.pointLocation(a.pointGeometry.convert(h))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(h,t,s){if(h==="mouseenter"||h==="mouseover"){let l=!1;return{layer:t,listener:s,delegates:{mousemove:_=>{const E=this.getLayer(t)?this.queryRenderedFeatures(_.point,{layers:[t]}):[];E.length?l||(l=!0,s.call(this,new On(h,this,_.originalEvent,{features:E}))):l=!1},mouseout:()=>{l=!1}}}}if(h==="mouseleave"||h==="mouseout"){let l=!1;return{layer:t,listener:s,delegates:{mousemove:E=>{(this.getLayer(t)?this.queryRenderedFeatures(E.point,{layers:[t]}):[]).length?l=!0:l&&(l=!1,s.call(this,new On(h,this,E.originalEvent)))},mouseout:E=>{l&&(l=!1,s.call(this,new On(h,this,E.originalEvent)))}}}}{const l=d=>{const _=this.getLayer(t)?this.queryRenderedFeatures(d.point,{layers:[t]}):[];_.length&&(d.features=_,s.call(this,d),delete d.features)};return{layer:t,listener:s,delegates:{[h]:l}}}}on(h,t,s){if(s===void 0)return super.on(h,t);const l=this._createDelegatedListener(h,t,s);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[h]=this._delegatedListeners[h]||[],this._delegatedListeners[h].push(l);for(const d in l.delegates)this.on(d,l.delegates[d]);return this}once(h,t,s){if(s===void 0)return super.once(h,t);const l=this._createDelegatedListener(h,t,s);for(const d in l.delegates)this.once(d,l.delegates[d]);return this}off(h,t,s){return s===void 0?super.off(h,t):(this._delegatedListeners&&this._delegatedListeners[h]&&(l=>{const d=this._delegatedListeners[h];for(let _=0;_<d.length;_++){const E=d[_];if(E.layer===t&&E.listener===s){for(const k in E.delegates)this.off(k,E.delegates[k]);return d.splice(_,1),this}}})(),this)}queryRenderedFeatures(h,t){if(!this.style)return[];let s;if(t!==void 0||h===void 0||h instanceof a.pointGeometry||Array.isArray(h)||(t=h,h=void 0),t=t||{},(h=h||[[0,0],[this.transform.width,this.transform.height]])instanceof a.pointGeometry||typeof h[0]=="number")s=[a.pointGeometry.convert(h)];else{const l=a.pointGeometry.convert(h[0]),d=a.pointGeometry.convert(h[1]);s=[l,new a.pointGeometry(d.x,l.y),d,new a.pointGeometry(l.x,d.y),l]}return this.style.queryRenderedFeatures(s,t,this.transform)}querySourceFeatures(h,t){return this.style.querySourceFeatures(h,t)}setStyle(h,t){return(t=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&h?(this._diffStyle(h,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(h,t))}setTransformRequest(h){return this._requestManager.setTransformRequest(h),this}_getUIString(h){const t=this._locale[h];if(t==null)throw new Error(`Missing UI string '${h}'`);return t}_updateStyle(h,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),h?(this.style=new fn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof h=="string"?this.style.loadURL(h):this.style.loadJSON(h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new fn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(h,t){if(typeof h=="string"){const s=this._requestManager.transformRequest(h,a.ResourceType.Style);a.getJSON(s,(l,d)=>{l?this.fire(new a.ErrorEvent(l)):d&&this._updateDiff(d,t)})}else typeof h=="object"&&this._updateDiff(h,t)}_updateDiff(h,t){try{this.style.setState(h)&&this._update(!0)}catch(s){a.warnOnce(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(h,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(h,t){return this._lazyInitEmptyStyle(),this.style.addSource(h,t),this._update(!0)}isSourceLoaded(h){const t=this.style&&this.style.sourceCaches[h];if(t!==void 0)return t.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${h}'`)))}areTilesLoaded(){const h=this.style&&this.style.sourceCaches;for(const t in h){const s=h[t]._tiles;for(const l in s){const d=s[l];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}addSourceType(h,t,s){return this._lazyInitEmptyStyle(),this.style.addSourceType(h,t,s)}removeSource(h){return this.style.removeSource(h),this._update(!0)}getSource(h){return this.style.getSource(h)}addImage(h,t,{pixelRatio:s=1,sdf:l=!1,stretchX:d,stretchY:_,content:E}={}){if(this._lazyInitEmptyStyle(),t instanceof HTMLImageElement||a.isImageBitmap(t)){const{width:k,height:z,data:P}=a.exported.getImageData(t);this.style.addImage(h,{data:new a.RGBAImage({width:k,height:z},P),pixelRatio:s,stretchX:d,stretchY:_,content:E,sdf:l,version:0})}else{if(t.width===void 0||t.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:z,data:P}=t,R=t;this.style.addImage(h,{data:new a.RGBAImage({width:k,height:z},new Uint8Array(P)),pixelRatio:s,stretchX:d,stretchY:_,content:E,sdf:l,version:0,userImage:R}),R.onAdd&&R.onAdd(this,h)}}}updateImage(h,t){const s=this.style.getImage(h);if(!s)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const l=t instanceof HTMLImageElement||a.isImageBitmap(t)?a.exported.getImageData(t):t,{width:d,height:_,data:E}=l;if(d===void 0||_===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==s.data.width||_!==s.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(t instanceof HTMLImageElement||a.isImageBitmap(t));s.data.replace(E,k),this.style.updateImage(h,s)}hasImage(h){return h?!!this.style.getImage(h):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(h){this.style.removeImage(h)}loadImage(h,t){a.getImage(this._requestManager.transformRequest(h,a.ResourceType.Image),t)}listImages(){return this.style.listImages()}addLayer(h,t){return this._lazyInitEmptyStyle(),this.style.addLayer(h,t),this._update(!0)}moveLayer(h,t){return this.style.moveLayer(h,t),this._update(!0)}removeLayer(h){return this.style.removeLayer(h),this._update(!0)}getLayer(h){return this.style.getLayer(h)}setLayerZoomRange(h,t,s){return this.style.setLayerZoomRange(h,t,s),this._update(!0)}setFilter(h,t,s={}){return this.style.setFilter(h,t,s),this._update(!0)}getFilter(h){return this.style.getFilter(h)}setPaintProperty(h,t,s,l={}){return this.style.setPaintProperty(h,t,s,l),this._update(!0)}getPaintProperty(h,t){return this.style.getPaintProperty(h,t)}setLayoutProperty(h,t,s,l={}){return this.style.setLayoutProperty(h,t,s,l),this._update(!0)}getLayoutProperty(h,t){return this.style.getLayoutProperty(h,t)}setLight(h,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(h,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(h,t){return this.style.setFeatureState(h,t),this._update()}removeFeatureState(h,t){return this.style.removeFeatureState(h,t),this._update()}getFeatureState(h){return this.style.getFeatureState(h)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let h=0,t=0;return this._container&&(h=this._container.clientWidth||400,t=this._container.clientHeight||300),[h,t]}_setupContainer(){const h=this._container;h.classList.add("maplibregl-map","mapboxgl-map");const t=this._canvasContainer=F.create("div","maplibregl-canvas-container mapboxgl-canvas-container",h);this._interactive&&t.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const s=this._containerDimensions();this._resizeCanvas(s[0],s[1],this.getPixelRatio());const l=this._controlContainer=F.create("div","maplibregl-control-container mapboxgl-control-container",h),d=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{d[_]=F.create("div",`maplibregl-ctrl-${_} mapboxgl-ctrl-${_}`,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(h,t,s){this._canvas.width=s*h,this._canvas.height=s*t,this._canvas.style.width=`${h}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const h=a.extend({},A.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._canvas.getContext("webgl",h)||this._canvas.getContext("experimental-webgl",h);t?(this.painter=new mo(t,this.transform),a.exported$1.testSupport(t)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(h){h.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:h}))}_contextRestored(h){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:h}))}_onMapScroll(h){if(h.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(h){return this.style?(this._styleDirty=this._styleDirty||h,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(h){return this._update(),this._renderTaskQueue.add(h)}_cancelRenderFrame(h){this._renderTaskQueue.remove(h)}_render(h){let t,s=0;const l=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(t=l.createQueryEXT(),l.beginQueryEXT(l.TIME_ELAPSED_EXT,t),s=a.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(h),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const E=this.transform.zoom,k=a.exported.now();this.style.zoomHistory.update(E,k);const z=new a.EvaluationParameters(E,{now:k,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=z.crossFadingFactor();P===1&&P===this._crossFadingFactor||(d=!0,this._crossFadingFactor=P),this.style.update(z)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const E=a.exported.now()-s;l.endQueryEXT(l.TIME_ELAPSED_EXT,t),setTimeout(()=>{const k=l.getQueryObjectEXT(t,l.QUERY_RESULT_EXT)/1e6;l.deleteQueryEXT(t),this.fire(new a.Event("gpu-timing-frame",{cpuTime:E,gpuTime:k}))},50)}if(this.listens("gpu-timing-layer")){const E=this.painter.collectGpuTimers();setTimeout(()=>{const k=this.painter.queryGpuTimers(E);this.fire(new a.Event("gpu-timing-layer",{layerTimes:k}))},50)}const _=this._sourcesDirty||this._styleDirty||this._placementDirty;return _||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||_||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const h=this.painter.context.gl.getExtension("WEBGL_lose_context");h&&h.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(h=>{a.PerformanceUtils.frame(h),this._frame=null,this._render(h)}))}_onWindowOnline(){this._update()}_onWindowResize(h){this._trackResize&&this.resize({originalEvent:h})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(h){this._showTileBoundaries!==h&&(this._showTileBoundaries=h,this._update())}get showPadding(){return!!this._showPadding}set showPadding(h){this._showPadding!==h&&(this._showPadding=h,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(h){this._showCollisionBoxes!==h&&(this._showCollisionBoxes=h,h?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(h){this._showOverdrawInspector!==h&&(this._showOverdrawInspector=h,this._update())}get repaint(){return!!this._repaint}set repaint(h){this._repaint!==h&&(this._repaint=h,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(h){this._vertices=h,this._update()}_setCacheLimits(h,t){a.setCacheLimits(h,t)}},NavigationControl:class{constructor(h){this.options=a.extend({},cr,h),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const h=this._map.getZoom(),t=h===this._map.getMaxZoom(),s=h===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=s,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",s.toString())}_rotateCompassArrow(){const h=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=h}onAdd(h){return this._map=h,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ba(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(h,t){const s=F.create("button",h,this._container);return s.type="button",s.addEventListener("click",t),s}_setButtonTitle(h,t){const s=this._map._getUIString(`NavigationControl.${t}`);h.title=s,h.setAttribute("aria-label",s)}},GeolocateControl:class extends a.Evented{constructor(h){super(),this.options=a.extend({},Eo,h),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(h){var t;return this._map=h,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,nn!==void 0?t(nn):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(s=>{nn=s.state!=="denied",t(nn)}):(nn=!!window.navigator.geolocation,t(nn)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Hr=0,Mn=!1}_isOutOfMapMaxBounds(h){const t=this._map.getMaxBounds(),s=h.coords;return t&&(s.longitude<t.getWest()||s.longitude>t.getEast()||s.latitude<t.getSouth()||s.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(h){if(this._map){if(this._isOutOfMapMaxBounds(h))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",h)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=h,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(h),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(h),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",h)),this._finish()}}_updateCamera(h){const t=new a.LngLat(h.coords.longitude,h.coords.latitude),s=h.coords.accuracy,l=this._map.getBearing(),d=a.extend({bearing:l},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(s),d,{geolocateSource:!0})}_updateMarker(h){if(h){const t=new a.LngLat(h.coords.longitude,h.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=h.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const h=this._map._container.clientHeight/2,t=this._map.unproject([0,h]),s=this._map.unproject([1,h]),l=t.distanceTo(s),d=Math.ceil(2*this._accuracy/l);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(h){if(this._map){if(this.options.trackUserLocation)if(h.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(h.code===3&&Mn)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",h)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(h){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",h===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Vs(this._dotElement),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||this._watchState!=="ACTIVE_LOCK"||t.originalEvent&&t.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Hr--,Mn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let h;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Hr++,Hr>1?(h={maximumAge:6e5,timeout:0},Mn=!0):(h=this.options.positionOptions,Mn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,h)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:xa,LogoControl:Io,ScaleControl:class{constructor(h){this.options=a.extend({},Ec,h),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Us(this._map,this._container,this.options)}onAdd(h){return this._map=h,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",h.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(h){this.options.unit=h,Us(this._map,this._container,this.options)}},FullscreenControl:class{constructor(h){this._fullscreen=!1,h&&h.container&&(h.container instanceof HTMLElement?this._container=h.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(h){return this._map=h,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const h=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",h).setAttribute("aria-hidden","true"),h.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const h=this._getTitle();this._fullscreenButton.setAttribute("aria-label",h),this._fullscreenButton.title=h}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.Evented{constructor(h){super(),this.options=a.extend(Object.create(rn),h),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(h){return this._lngLat=a.LngLat.convert(h),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(h){return this.setDOMContent(document.createTextNode(h))}setHTML(h){const t=document.createDocumentFragment(),s=document.createElement("body");let l;for(s.innerHTML=h;l=s.firstChild,l;)t.appendChild(l);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(h){return this.options.maxWidth=h,this._update(),this}setDOMContent(h){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(h),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(h){this._container&&this._container.classList.add(h)}removeClassName(h){this._container&&this._container.classList.remove(h)}setOffset(h){return this.options.offset=h,this._update(),this}toggleClassName(h){if(this._container)return this._container.classList.toggle(h)}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(h){this._update(h.point)}_onMouseMove(h){this._update(h.point)}_onDrag(h){this._update(h.point)}_update(h){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=F.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(_=>this._container.classList.add(_)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=_t(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!h))return;const t=this._pos=this._trackPointer&&h?h:this._map.project(this._lngLat);let s=this.options.anchor;const l=ps(this.options.offset);if(!s){const _=this._container.offsetWidth,E=this._container.offsetHeight;let k;k=t.y+l.bottom.y<E?["top"]:t.y>this._map.transform.height-E?["bottom"]:[],t.x<_/2?k.push("left"):t.x>this._map.transform.width-_/2&&k.push("right"),s=k.length===0?"bottom":k.join("-")}const d=t.add(l[s]).round();F.setTransform(this._container,`${wt[s]} translate(${d.x}px,${d.y}px)`),Os(this._container,s,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const h=this._container.querySelector(zl);h&&h.focus()}_onClose(){this.remove()}},Marker:Vs,Style:fn,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:Yi,GeoJSONSource:Mi,ImageSource:Di,RasterDEMTileSource:gi,RasterTileSource:bi,VectorTileSource:li,VideoSource:Ii,prewarm:function(){vi().acquire(Dn)},clearPrewarmedResources:function(){const h=qe;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(Dn),qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return bn.workerCount},set workerCount(h){bn.workerCount=h},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(h){a.config.MAX_PARALLEL_IMAGE_REQUESTS=h},clearStorage(h){a.clearTileCache(h)},workerUrl:"",addProtocol(h,t){a.config.REGISTERED_PROTOCOLS[h]=t},removeProtocol(h){delete a.config.REGISTERED_PROTOCOLS[h]}};return ki.extend(Ns,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),Ns});var w=x;return w})})(Sd);const gu=Sd.exports;const{document:Xh}=yp;function Kh(v){let c;const f=v[17].default,y=Ir(f,v,v[16],null);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,S){y&&y.m(x,S),c=!0},p(x,S){y&&y.p&&(!c||S&65536)&&Er(y,f,x,x[16],c?kr(f,x[16],S,null):Tr(x[16]),null)},i(x){c||(Oe(y,x),c=!0)},o(x){Ke(y,x),c=!1},d(x){y&&y.d(x)}}}function mm(v){let c,f,y,x,S=v[2]&&Kh(v);return{c(){c=Ye("link"),f=Et(),y=Ye("div"),S&&S.c(),this.h()},l(w){const a=gd('[data-svelte="svelte-xhkxfm"]',Xh.head);c=Je(a,"LINK",{rel:!0,href:!0}),a.forEach(ae),f=Tt(w),y=Je(w,"DIV",{id:!0,class:!0});var A=$e(y);S&&S.l(A),A.forEach(ae),this.h()},h(){ue(c,"rel","stylesheet"),ue(c,"href","https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css"),ue(y,"id",v[0]),ue(y,"class","map svelte-1tna482")},m(w,a){Ne(Xh.head,c),Ge(w,f,a),Ge(w,y,a),S&&S.m(y,null),v[18](y),x=!0},p(w,[a]){w[2]?S?(S.p(w,a),a&4&&Oe(S,1)):(S=Kh(w),S.c(),Oe(S,1),S.m(y,null)):S&&(pi(),Ke(S,1,1,()=>{S=null}),mi()),(!x||a&1)&&ue(y,"id",w[0])},i(w){x||(Oe(S),x=!0)},o(w){Ke(S),x=!1},d(w){ae(c),w&&ae(f),w&&ae(y),S&&S.d(),v[18](null)}}}function gm(v=1e3){return new Promise(c=>setTimeout(c,v))}function _m(v,c,f){let{$$slots:y={},$$scope:x}=c;const S=Ua();let{map:w}=c,{id:a="map"}=c,{location:A={lng:15,lat:45,zoom:1}}=c,{style:O={version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"lightgrey"}}]}}=c,{options:N={}}=c,{minzoom:U=0}=c,{maxzoom:F=14}=c,{controls:ee=!1}=c,{locate:ge=!1}=c,{tabbable:xe=!1}=c,{zoom:et=null}=c,{center:me=null}=c,{interactive:Ve=!0}=c,{attribution:Ee=!0}=c,fe,Pe={},He=!1;ws("map",{getMap:()=>w}),A.bounds?Pe.bounds=A.bounds:typeof A.lng=="number"&&typeof A.lat=="number"&&(Pe.center=[A.lng,A.lat],typeof A.zoom=="number"&&(Pe.zoom=A.zoom)),Ee||(Pe.attributionControl=!1),Pe={...Pe,...N},Na(()=>{f(3,w=new gu.Map({container:fe,style:O,minZoom:U,maxZoom:F,interactive:Ve,...Pe})),ee&&w.addControl(new gu.NavigationControl({showCompass:!1})),ge&&w.addControl(new gu.GeolocateControl),w.on("load",ke=>{f(4,et=w.getZoom()),f(5,me=w.getCenter()),f(2,He=!0),!xe&&document.querySelector(`#${a} canvas`)&&(document.querySelector(`#${a} canvas`).tabIndex="-1"),S("load",{event:ke})}),w.on("moveend",()=>{f(4,et=w.getZoom()),f(5,me=w.getCenter())})}),Eu(async()=>{await gm(250),w&&w.remove(),f(3,w=null)});function Be(ke){w&&w.setStyle(ke),S("style",{style:ke})}function Qe(ke){Tn[ke?"unshift":"push"](()=>{fe=ke,f(1,fe)})}return v.$$set=ke=>{"map"in ke&&f(3,w=ke.map),"id"in ke&&f(0,a=ke.id),"location"in ke&&f(6,A=ke.location),"style"in ke&&f(7,O=ke.style),"options"in ke&&f(8,N=ke.options),"minzoom"in ke&&f(9,U=ke.minzoom),"maxzoom"in ke&&f(10,F=ke.maxzoom),"controls"in ke&&f(11,ee=ke.controls),"locate"in ke&&f(12,ge=ke.locate),"tabbable"in ke&&f(13,xe=ke.tabbable),"zoom"in ke&&f(4,et=ke.zoom),"center"in ke&&f(5,me=ke.center),"interactive"in ke&&f(14,Ve=ke.interactive),"attribution"in ke&&f(15,Ee=ke.attribution),"$$scope"in ke&&f(16,x=ke.$$scope)},v.$$.update=()=>{v.$$.dirty&128&&Be(O)},[a,fe,He,w,et,me,A,O,N,U,F,ee,ge,xe,Ve,Ee,x,y,Qe]}class ym extends Wi{constructor(c){super(),Xi(this,c,_m,mm,Ki,{map:3,id:0,location:6,style:7,options:8,minzoom:9,maxzoom:10,controls:11,locate:12,tabbable:13,zoom:4,center:5,interactive:14,attribution:15})}}function Yh(v){let c;const f=v[12].default,y=Ir(f,v,v[11],null);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,S){y&&y.m(x,S),c=!0},p(x,S){y&&y.p&&(!c||S&2048)&&Er(y,f,x,x[11],c?kr(f,x[11],S,null):Tr(x[11]),null)},i(x){c||(Oe(y,x),c=!0)},o(x){Ke(y,x),c=!1},d(x){y&&y.d(x)}}}function vm(v){let c,f,y=v[0]&&Yh(v);return{c(){y&&y.c(),c=ti()},l(x){y&&y.l(x),c=ti()},m(x,S){y&&y.m(x,S),Ge(x,c,S),f=!0},p(x,[S]){x[0]?y?(y.p(x,S),S&1&&Oe(y,1)):(y=Yh(x),y.c(),Oe(y,1),y.m(c.parentNode,c)):y&&(pi(),Ke(y,1,1,()=>{y=null}),mi())},i(x){f||(Oe(y),f=!0)},o(x){Ke(y),f=!1},d(x){y&&y.d(x),x&&ae(c)}}}function xm(v=1e3){return new Promise(c=>setTimeout(c,v))}function bm(v,c,f){let{$$slots:y={},$$scope:x}=c,{id:S}=c,{type:w}=c,{url:a=null}=c,{props:A={}}=c,{data:O=null}=c,{layer:N=null}=c,{promoteId:U=null}=c,{minzoom:F=null}=c,{maxzoom:ee=null}=c,{tilesize:ge=256}=c,xe=!1;const{getMap:et}=Fa("map"),me=et();ws("source",{source:S,layer:N,promoteId:U}),me.getSource(S)&&me.removeSource(S);async function Ve(){await xm(100),me.isSourceLoaded(S)?(f(0,xe=!0),console.log(S+" map source loaded!")):(console.log("..."),Ve())}F&&(A.minzoom=F),ee&&(A.maxzoom=ee),N&&U?(A.promoteId={},A.promoteId[N]=U):U&&(A.promoteId=U);function Ee(){console.log(S+" map source loading...");let Be;w=="geojson"?O?Be={type:w,data:O,...A}:a&&(Be={type:w,data:a,...A}):w=="vector"?Be={type:w,tiles:[a],...A}:w=="raster"&&(Be={type:w,tiles:[a],tileSize:ge,...A}),Be&&(me.addSource(S,Be),Ve())}Ee();function fe(Be){let Qe=me.getSource(S);Qe&&Qe.setData(Be)}function Pe(Be){let Qe=me.getSource(S);Qe&&Qe.setTiles([Be])}function He(Be){me.getSource(S).tiles=[Be],me.style.sourceCaches[S].clearTiles(),me.style.sourceCaches[S].update(me.transform),me.triggerRepaint()}return Eu(async()=>{me&&me.getSource(S)&&(me.getStyle().layers.filter(Qe=>Qe.source==S).forEach(Qe=>{me.removeLayer(Qe.id)}),me.removeSource(S))}),v.$$set=Be=>{"id"in Be&&f(2,S=Be.id),"type"in Be&&f(3,w=Be.type),"url"in Be&&f(4,a=Be.url),"props"in Be&&f(1,A=Be.props),"data"in Be&&f(5,O=Be.data),"layer"in Be&&f(6,N=Be.layer),"promoteId"in Be&&f(7,U=Be.promoteId),"minzoom"in Be&&f(8,F=Be.minzoom),"maxzoom"in Be&&f(9,ee=Be.maxzoom),"tilesize"in Be&&f(10,ge=Be.tilesize),"$$scope"in Be&&f(11,x=Be.$$scope)},v.$$.update=()=>{v.$$.dirty&41&&w=="geojson"&&xe&&fe(O),v.$$.dirty&25&&w=="vector"&&xe&&Pe(a),v.$$.dirty&25&&w=="raster"&&xe&&He(a)},[xe,A,S,w,a,O,N,U,F,ee,ge,x,y]}class wm extends Wi{constructor(c){super(),Xi(this,c,bm,vm,Ki,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9,tilesize:10})}}const Sm=v=>({hovered:v[0]&1}),Jh=v=>({hovered:v[0]});function Im(v){let c;const f=v[30].default,y=Ir(f,v,v[29],Jh);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,S){y&&y.m(x,S),c=!0},p(x,S){y&&y.p&&(!c||S[0]&536870913)&&Er(y,f,x,x[29],c?kr(f,x[29],S,Sm):Tr(x[29]),Jh)},i(x){c||(Oe(y,x),c=!0)},o(x){Ke(y,x),c=!1},d(x){y&&y.d(x)}}}function Em(v,c,f){let y,{$$slots:x={},$$scope:S}=c;const w=Ua();let{id:a}=c,{type:A}=c,{filter:O=null}=c,{layout:N={}}=c,{paint:U={}}=c,{data:F=null}=c,{colorKey:ee="color"}=c,{nameKey:ge=null}=c,{valueKey:xe=null}=c,{idKey:et=null}=c,{select:me=!1}=c,{clickIgnore:Ve=!1}=c,{clickCenter:Ee=!1}=c,{selected:fe=null}=c,{hover:Pe=!1}=c,{hovered:He=null}=c,{highlight:Be=!1}=c,{highlightKey:Qe="highlighted"}=c,{highlighted:ke=[]}=c,{order:Xe=null}=c,{maxzoom:It=null}=c,{minzoom:vt=null}=c,{sourceLayer:pt=null}=c,{visible:bt=!0}=c;const{source:De,layer:Ae,promoteId:li}=Fa("source"),{getMap:bi}=Fa("map"),kt=bi();ws("layer",{layer:a});const gi=fd({id:null,feature:null,event:null});wu(v,gi,Ce=>f(32,y=Ce)),ws("hover",gi),et=et||li,pt=pt||Ae;let Mi=null,hi=null,Di=[];N.visibility=bt?"visible":"none";let Ii={id:a,type:A,source:De,paint:U,layout:N};O&&(Ii.filter=O),pt&&(Ii["source-layer"]=pt),It&&(Ii.maxzoom=It),vt&&(Ii.minzoom=vt),kt.getLayer(a)&&kt.removeLayer(a),kt.addLayer(Ii,Xe);function Yi(Ce,Zt=ee){if(console.log("updating colors..."),ge||xe)for(const Bi of Ce)kt.setFeatureState({source:De,sourceLayer:pt,id:Bi[et]},{color:Zt?Bi[Zt]:null,name:ge?Bi[ge]:null,value:xe?Bi[xe]:null});else for(const Bi of Ce)kt.setFeatureState({source:De,sourceLayer:pt,id:Bi[et]},{color:Bi[Zt]})}function Ei(Ce){kt.getLayer(a)&&kt.setFilter(a,Ce)}function ji(Ce){if(kt.getLayer(a))for(const Zt in Ce)kt.setPaintProperty(a,Zt,Ce[Zt])}function Ze(Ce){kt.getLayer(a)&&kt.setLayoutProperty(a,"visibility",Ce?"visible":"none")}return me&&kt.on("click",a,Ce=>{if(Ce.features.length>0&&!Ve){let Zt=Ce.features[0];if(f(2,fe=Zt.id),w("select",{id:fe,feature:Zt,event:Ce}),Mi&&kt.setFeatureState({source:De,sourceLayer:pt,id:Mi},{selected:!1}),kt.setFeatureState({source:De,sourceLayer:pt,id:fe},{selected:!0}),Ee){let Bi=centroid(Ce.features[0].toJSON().geometry);kt.flyTo({center:Bi.geometry.coordinates})}f(26,Mi=fe)}}),Pe&&(kt.on("mousemove",a,Ce=>{if(Ce.features.length>0){He&&kt.setFeatureState({source:De,sourceLayer:pt,id:He},{hovered:!1});let Zt=Ce.features[0];f(0,He=f(27,hi=Zt.id)),gi.set({id:He,feature:Zt,event:Ce}),w("hover",y),kt.setFeatureState({source:De,sourceLayer:pt,id:He},{hovered:!0}),kt.getCanvas().style.cursor="pointer"}}),kt.on("mouseleave",a,Ce=>{He&&kt.setFeatureState({source:De,sourceLayer:pt,id:He},{hovered:!1}),f(0,He=f(27,hi=null)),gi.set({id:null,feature:null,event:Ce}),w("hover",y),kt.getCanvas().style.cursor=""})),Eu(async()=>{kt&&kt.getLayer(a)&&kt.removeLayer(a)}),v.$$set=Ce=>{"id"in Ce&&f(6,a=Ce.id),"type"in Ce&&f(7,A=Ce.type),"filter"in Ce&&f(8,O=Ce.filter),"layout"in Ce&&f(4,N=Ce.layout),"paint"in Ce&&f(9,U=Ce.paint),"data"in Ce&&f(10,F=Ce.data),"colorKey"in Ce&&f(11,ee=Ce.colorKey),"nameKey"in Ce&&f(12,ge=Ce.nameKey),"valueKey"in Ce&&f(13,xe=Ce.valueKey),"idKey"in Ce&&f(5,et=Ce.idKey),"select"in Ce&&f(14,me=Ce.select),"clickIgnore"in Ce&&f(15,Ve=Ce.clickIgnore),"clickCenter"in Ce&&f(16,Ee=Ce.clickCenter),"selected"in Ce&&f(2,fe=Ce.selected),"hover"in Ce&&f(17,Pe=Ce.hover),"hovered"in Ce&&f(0,He=Ce.hovered),"highlight"in Ce&&f(18,Be=Ce.highlight),"highlightKey"in Ce&&f(19,Qe=Ce.highlightKey),"highlighted"in Ce&&f(20,ke=Ce.highlighted),"order"in Ce&&f(21,Xe=Ce.order),"maxzoom"in Ce&&f(22,It=Ce.maxzoom),"minzoom"in Ce&&f(23,vt=Ce.minzoom),"sourceLayer"in Ce&&f(3,pt=Ce.sourceLayer),"visible"in Ce&&f(24,bt=Ce.visible),"$$scope"in Ce&&f(29,S=Ce.$$scope)},v.$$.update=()=>{if(v.$$.dirty[0]&3072&&F&&Yi(F,ee),v.$$.dirty[0]&256&&Ei(O),v.$$.dirty[0]&512&&ji(U),v.$$.dirty[0]&16777216&&Ze(bt),v.$$.dirty[0]&270270472&&Be&&ke!=Di){if(Di[0])for(const Ce of Di){let Zt={};Zt[Qe]=!1,kt.setFeatureState({source:De,sourceLayer:pt,id:Ce},Zt)}if(f(28,Di=ke),ke[0])for(const Ce of ke){let Zt={};Zt[Qe]=!0,kt.setFeatureState({source:De,sourceLayer:pt,id:Ce},Zt)}}v.$$.dirty[0]&67125260&&me&&fe!=Mi&&(Mi&&kt.setFeatureState({source:De,sourceLayer:pt,id:Mi},{selected:!1}),fe&&kt.setFeatureState({source:De,sourceLayer:pt,id:fe},{selected:!0}),f(26,Mi=fe)),v.$$.dirty[0]&134348809&&Pe&&He!=hi&&(hi&&kt.setFeatureState({source:De,sourceLayer:pt,id:hi},{hovered:!1}),He&&kt.setFeatureState({source:De,sourceLayer:pt,id:He},{hovered:!0}),f(27,hi=He))},[He,gi,fe,pt,N,et,a,A,O,U,F,ee,ge,xe,me,Ve,Ee,Pe,Be,Qe,ke,Xe,It,vt,bt,Yi,Mi,hi,Di,S,x]}class _u extends Wi{constructor(c){super(),Xi(this,c,Em,Im,Ki,{id:6,type:7,filter:8,layout:4,paint:9,data:10,colorKey:11,nameKey:12,valueKey:13,idKey:5,select:14,clickIgnore:15,clickCenter:16,selected:2,hover:17,hovered:0,highlight:18,highlightKey:19,highlighted:20,order:21,maxzoom:22,minzoom:23,sourceLayer:3,visible:24,updateColors:25},null,[-1,-1])}get updateColors(){return this.$$.ctx[25]}}function Tm(v){let c,f,y,x,S,w,a,A,O,N,U,F=`span ${v[0]==1?1:v[0]>v[6]?v[6]:v[0]}`,ee=`span ${v[1]}`;return{c(){c=Ye("article"),f=Ye("div"),y=Ye("img"),S=Et(),w=Ye("h2"),a=Ye("a"),A=Yt(v[2]),O=Et(),N=Ye("p"),U=Yt(v[4]),this.h()},l(ge){c=Je(ge,"ARTICLE",{class:!0});var xe=$e(c);f=Je(xe,"DIV",{class:!0});var et=$e(f);y=Je(et,"IMG",{class:!0,src:!0,alt:!0}),et.forEach(ae),S=Tt(xe),w=Je(xe,"H2",{class:!0});var me=$e(w);a=Je(me,"A",{class:!0,href:!0,"data-gtm-group":!0,"data-gtm-group-position":!0});var Ve=$e(a);A=Jt(Ve,v[2]),Ve.forEach(ae),me.forEach(ae),O=Tt(xe),N=Je(xe,"P",{class:!0});var Ee=$e(N);U=Jt(Ee,v[4]),Ee.forEach(ae),xe.forEach(ae),this.h()},h(){ue(y,"class","tile__highlighted-content-image"),$1(y.src,x=v[5])||ue(y,"src",x),ue(y,"alt",""),ue(f,"class","tile__highlighted-content-image-container"),ue(a,"class","margin-left--0 tile__link tile__link--highlighted-content-title font-size--24"),ue(a,"href",v[3]),ue(a,"data-gtm-group","in-focus"),ue(a,"data-gtm-group-position","1"),ue(w,"class","margin-top--0 margin-bottom--0"),ue(N,"class","tile__text-description margin-top--0 margin-bottom--0"),ue(c,"class","tile tile__highlighted-content svelte-1krn9ab"),Gi(c,"grid-column",F,!1),Gi(c,"grid-row",ee,!1)},m(ge,xe){Ge(ge,c,xe),Ne(c,f),Ne(f,y),Ne(c,S),Ne(c,w),Ne(w,a),Ne(a,A),Ne(c,O),Ne(c,N),Ne(N,U)},p(ge,[xe]){xe&32&&!$1(y.src,x=ge[5])&&ue(y,"src",x),xe&4&&xi(A,ge[2]),xe&8&&ue(a,"href",ge[3]),xe&16&&xi(U,ge[4]),xe&65&&F!==(F=`span ${ge[0]==1?1:ge[0]>ge[6]?ge[6]:ge[0]}`)&&Gi(c,"grid-column",F,!1),xe&2&&ee!==(ee=`span ${ge[1]}`)&&Gi(c,"grid-row",ee,!1)},i:Si,o:Si,d(ge){ge&&ae(c)}}}function km(v,c,f){let y,{colspan:x=1}=c,{rowspan:S=1}=c,{title:w="Local statistics"}=c,{url:a="https://www.ons.gov.uk/help/localstatistics"}=c,{description:A="Where to find statistics covering specific areas"}=c,{image:O="https://static.ons.gov.uk/images/cf4ffa0c-d7ea-43a9-85a4-03ea05bbaaaf/original/local-statistics.png"}=c;const{cols:N}=Fa("tiles");return wu(v,N,U=>f(6,y=U)),v.$$set=U=>{"colspan"in U&&f(0,x=U.colspan),"rowspan"in U&&f(1,S=U.rowspan),"title"in U&&f(2,w=U.title),"url"in U&&f(3,a=U.url),"description"in U&&f(4,A=U.description),"image"in U&&f(5,O=U.image)},[x,S,w,a,A,O,y,N]}class Va extends Wi{constructor(c){super(),Xi(this,c,km,Tm,Ki,{colspan:0,rowspan:1,title:2,url:3,description:4,image:5})}}function Qh(v,c,f){const y=v.slice();return y[18]=c[f],y[20]=f,y}function $h(v,c,f){const y=v.slice();return y[6]=c[f],y}function ed(v,c,f){const y=v.slice();return y[23]=c[f],y[20]=f,y}function td(v,c,f){const y=v.slice();return y[25]=c[f],y}function Am(v){let c,f;return c=new _d({props:{$$slots:{default:[Cm]},$$scope:{ctx:v}}}),{c(){Nt(c.$$.fragment)},l(y){ni(c.$$.fragment,y)},m(y,x){qt(c,y,x),f=!0},p(y,x){const S={};x&536870912&&(S.$$scope={dirty:x,ctx:y}),c.$set(S)},i(y){f||(Oe(c.$$.fragment,y),f=!0)},o(y){Ke(c.$$.fragment,y),f=!1},d(y){Gt(c,y)}}}function zm(v){let c,f,y,x;return c=new Wp({props:{background:"none",breadcrumb:[{label:"Area hub",url:`${gr}/`},...[...v[1].parents].reverse().map(v[12]),{label:Qt(v[1])}],$$slots:{default:[Pm]},$$scope:{ctx:v}}}),y=new _d({props:{$$slots:{default:[Wm]},$$scope:{ctx:v}}}),{c(){Nt(c.$$.fragment),f=Et(),Nt(y.$$.fragment)},l(S){ni(c.$$.fragment,S),f=Tt(S),ni(y.$$.fragment,S)},m(S,w){qt(c,S,w),Ge(S,f,w),qt(y,S,w),x=!0},p(S,w){const a={};w&2&&(a.breadcrumb=[{label:"Area hub",url:`${gr}/`},...[...S[1].parents].reverse().map(S[12]),{label:Qt(S[1])}]),w&536870963&&(a.$$scope={dirty:w,ctx:S}),c.$set(a);const A={};w&536870990&&(A.$$scope={dirty:w,ctx:S}),y.$set(A)},i(S){x||(Oe(c.$$.fragment,S),Oe(y.$$.fragment,S),x=!0)},o(S){Ke(c.$$.fragment,S),Ke(y.$$.fragment,S),x=!1},d(S){Gt(c,S),S&&ae(f),Gt(y,S)}}}function Cm(v){let c,f;return{c(){c=Ye("a"),f=Yt("Loading England and Wales..."),this.h()},l(y){c=Je(y,"A",{class:!0,href:!0});var x=$e(c);f=Jt(x,"Loading England and Wales..."),x.forEach(ae),this.h()},h(){ue(c,"class","redirect svelte-amrd5n"),ue(c,"href",gr+"/K04000001/")},m(y,x){Ge(y,c,x),Ne(c,f)},p:Si,d(y){y&&ae(c)}}}function Mm(v){let c=Qt(v[1])+"",f;return{c(){f=Yt(c)},l(y){f=Jt(y,c)},m(y,x){Ge(y,f,x)},p(y,x){x&2&&c!==(c=Qt(y[1])+"")&&xi(f,c)},d(y){y&&ae(f)}}}function id(v){let c,f=Oa(Qt(v[1],"text"))+"",y,x,S,w,a=v[1].areacd+"",A,O,N,U=v[1].typenm+"",F,ee,ge=Qt(v[1].parents[0],"in")+"",xe,et;return{c(){c=Ye("strong"),y=Yt(f),x=Et(),S=Ye("small"),w=Yt("("),A=Yt(a),O=Yt(")"),N=Yt(" is a "),F=Yt(U),ee=Et(),xe=Yt(ge),et=Yt(".")},l(me){c=Je(me,"STRONG",{});var Ve=$e(c);y=Jt(Ve,f),Ve.forEach(ae),x=Tt(me),S=Je(me,"SMALL",{});var Ee=$e(S);w=Jt(Ee,"("),A=Jt(Ee,a),O=Jt(Ee,")"),Ee.forEach(ae),N=Jt(me," is a "),F=Jt(me,U),ee=Tt(me),xe=Jt(me,ge),et=Jt(me,".")},m(me,Ve){Ge(me,c,Ve),Ne(c,y),Ge(me,x,Ve),Ge(me,S,Ve),Ne(S,w),Ne(S,A),Ne(S,O),Ge(me,N,Ve),Ge(me,F,Ve),Ge(me,ee,Ve),Ge(me,xe,Ve),Ge(me,et,Ve)},p(me,Ve){Ve&2&&f!==(f=Oa(Qt(me[1],"text"))+"")&&xi(y,f),Ve&2&&a!==(a=me[1].areacd+"")&&xi(A,a),Ve&2&&U!==(U=me[1].typenm+"")&&xi(F,U),Ve&2&&ge!==(ge=Qt(me[1].parents[0],"in")+"")&&xi(xe,ge)},d(me){me&&ae(c),me&&ae(x),me&&ae(S),me&&ae(N),me&&ae(F),me&&ae(ee),me&&ae(xe),me&&ae(et)}}}function Pm(v){let c,f,y,x,S,w,a;c=new Yp({props:{$$slots:{default:[Mm]},$$scope:{ctx:v}}});function A(U){v[11](U)}let O={items:v[0],mode:"search",idKey:"areacd",labelKey:"areanm",groupKey:"group",placeholder:v[4],loadOptions:v[7],autoClear:!0};v[5]!==void 0&&(O.filterText=v[5]),y=new hm({props:O}),Tn.push(()=>Br(y,"filterText",A)),y.$on("select",v[8]);let N=v[1].areacd!="K04000001"&&id(v);return{c(){Nt(c.$$.fragment),f=Et(),Nt(y.$$.fragment),S=Et(),w=Ye("p"),N&&N.c(),this.h()},l(U){ni(c.$$.fragment,U),f=Tt(U),ni(y.$$.fragment,U),S=Tt(U),w=Je(U,"P",{class:!0});var F=$e(w);N&&N.l(F),F.forEach(ae),this.h()},h(){ue(w,"class","subtitle svelte-amrd5n")},m(U,F){qt(c,U,F),Ge(U,f,F),qt(y,U,F),Ge(U,S,F),Ge(U,w,F),N&&N.m(w,null),a=!0},p(U,F){const ee={};F&536870914&&(ee.$$scope={dirty:F,ctx:U}),c.$set(ee);const ge={};F&1&&(ge.items=U[0]),F&16&&(ge.placeholder=U[4]),!x&&F&32&&(x=!0,ge.filterText=U[5],is(()=>x=!1)),y.$set(ge),U[1].areacd!="K04000001"?N?N.p(U,F):(N=id(U),N.c(),N.m(w,null)):N&&(N.d(1),N=null)},i(U){a||(Oe(c.$$.fragment,U),Oe(y.$$.fragment,U),a=!0)},o(U){Ke(c.$$.fragment,U),Ke(y.$$.fragment,U),a=!1},d(U){Gt(c,U),U&&ae(f),Gt(y,U),U&&ae(S),U&&ae(w),N&&N.d()}}}function Lm(v){var A,O;let c,f,y,x,S,w,a;return c=new _u({props:{id:v[25].key+"-fill",type:"fill",paint:{"fill-color":v[25].key===v[6].key?["case",["==",["feature-state","selected"],!0],"rgb(17,140,123)","grey"]:"rgb(17,140,123)","fill-opacity":["case",["==",["feature-state","hovered"],!0],.3,.1]},visible:v[25].key===v[6].key||v[25].key==((A=v[2])==null?void 0:A.key),filter:v[2]?v[25].key===v[6].key?["!=","areacd",v[1].areacd]:["in","areacd",...v[1].children.map(ud)]:null,hover:!0,select:!0,selected:v[1].areacd}}),c.$on("select",v[9]),y=new _u({props:{id:v[25].key+"-line",type:"line",paint:{"line-color":v[25].key==v[6].key?"grey":"rgb(17,140,123)","line-width":1},visible:v[25].key===v[6].key||v[25].key==((O=v[2])==null?void 0:O.key),filter:v[25].key==v[6].key?["!=","areacd",v[1].areacd]:["in","areacd",...v[1].children.map(hd)]}}),S=new _u({props:{id:v[25].key+"-active",type:"line",paint:{"line-color":"rgb(17,140,123)","line-width":2},visible:v[25].key===v[6].key,filter:["==","areacd",v[1].areacd]}}),{c(){Nt(c.$$.fragment),f=Et(),Nt(y.$$.fragment),x=Et(),Nt(S.$$.fragment),w=Et()},l(N){ni(c.$$.fragment,N),f=Tt(N),ni(y.$$.fragment,N),x=Tt(N),ni(S.$$.fragment,N),w=Tt(N)},m(N,U){qt(c,N,U),Ge(N,f,U),qt(y,N,U),Ge(N,x,U),qt(S,N,U),Ge(N,w,U),a=!0},p(N,U){var xe,et;const F={};U&64&&(F.paint={"fill-color":N[25].key===N[6].key?["case",["==",["feature-state","selected"],!0],"rgb(17,140,123)","grey"]:"rgb(17,140,123)","fill-opacity":["case",["==",["feature-state","hovered"],!0],.3,.1]}),U&68&&(F.visible=N[25].key===N[6].key||N[25].key==((xe=N[2])==null?void 0:xe.key)),U&70&&(F.filter=N[2]?N[25].key===N[6].key?["!=","areacd",N[1].areacd]:["in","areacd",...N[1].children.map(ud)]:null),U&2&&(F.selected=N[1].areacd),c.$set(F);const ee={};U&64&&(ee.paint={"line-color":N[25].key==N[6].key?"grey":"rgb(17,140,123)","line-width":1}),U&68&&(ee.visible=N[25].key===N[6].key||N[25].key==((et=N[2])==null?void 0:et.key)),U&66&&(ee.filter=N[25].key==N[6].key?["!=","areacd",N[1].areacd]:["in","areacd",...N[1].children.map(hd)]),y.$set(ee);const ge={};U&64&&(ge.visible=N[25].key===N[6].key),U&2&&(ge.filter=["==","areacd",N[1].areacd]),S.$set(ge)},i(N){a||(Oe(c.$$.fragment,N),Oe(y.$$.fragment,N),Oe(S.$$.fragment,N),a=!0)},o(N){Ke(c.$$.fragment,N),Ke(y.$$.fragment,N),Ke(S.$$.fragment,N),a=!1},d(N){Gt(c,N),N&&ae(f),Gt(y,N),N&&ae(x),Gt(S,N),N&&ae(w)}}}function nd(v){let c=console.log(v[25].key)+"",f,y,x,S;return x=new wm({props:{id:v[25].key,type:v[25].source.type,url:v[25].source.type==="vector"?v[25].source.url:null,data:v[25].source.type==="geojson"?bp(kp,v[25].key):null,layer:v[25].source.type==="vector"?v[25].key:null,promoteId:v[25].source.promoteId,minzoom:v[25].source.minzoom?v[25].source.minzoom:0,maxzoom:12,props:v[25].source.type==="vector"?{bounds:[-6.3603,49.88234,1.76357,55.8112]}:{},$$slots:{default:[Lm]},$$scope:{ctx:v}}}),{c(){f=Yt(c),y=Et(),Nt(x.$$.fragment)},l(w){f=Jt(w,c),y=Tt(w),ni(x.$$.fragment,w)},m(w,a){Ge(w,f,a),Ge(w,y,a),qt(x,w,a),S=!0},p(w,a){const A={};a&536870982&&(A.$$scope={dirty:a,ctx:w}),x.$set(A)},i(w){S||(Oe(x.$$.fragment,w),S=!0)},o(w){Ke(x.$$.fragment,w),S=!1},d(w){w&&ae(f),w&&ae(y),Gt(x,w)}}}function Dm(v){let c,f,y=th,x=[];for(let w=0;w<y.length;w+=1)x[w]=nd(td(v,y,w));const S=w=>Ke(x[w],1,1,()=>{x[w]=null});return{c(){for(let w=0;w<x.length;w+=1)x[w].c();c=ti()},l(w){for(let a=0;a<x.length;a+=1)x[a].l(w);c=ti()},m(w,a){for(let A=0;A<x.length;A+=1)x[A].m(w,a);Ge(w,c,a),f=!0},p(w,a){if(a&582){y=th;let A;for(A=0;A<y.length;A+=1){const O=td(w,y,A);x[A]?(x[A].p(O,a),Oe(x[A],1)):(x[A]=nd(O),x[A].c(),Oe(x[A],1),x[A].m(c.parentNode,c))}for(pi(),A=y.length;A<x.length;A+=1)S(A);mi()}},i(w){if(!f){for(let a=0;a<y.length;a+=1)Oe(x[a]);f=!0}},o(w){x=x.filter(Boolean);for(let a=0;a<x.length;a+=1)Ke(x[a]);f=!1},d(w){Ar(x,w),w&&ae(c)}}}function Bm(v){let c,f,y,x;function S(a){v[13](a)}let w={style:gr+"/data/mapstyle.json",location:{bounds:v[1].bounds},options:{fitBoundsOptions:{padding:20},maxBounds:[-12,47,7,62]},controls:!0,$$slots:{default:[Dm]},$$scope:{ctx:v}};return v[3]!==void 0&&(w.map=v[3]),f=new ym({props:w}),Tn.push(()=>Br(f,"map",S)),{c(){c=Ye("div"),Nt(f.$$.fragment),this.h()},l(a){c=Je(a,"DIV",{});var A=$e(c);ni(f.$$.fragment,A),A.forEach(ae),this.h()},h(){Gi(c,"height","450px",!1)},m(a,A){Ge(a,c,A),qt(f,c,null),x=!0},p(a,A){const O={};A&2&&(O.location={bounds:a[1].bounds}),A&536870982&&(O.$$scope={dirty:A,ctx:a}),!y&&A&8&&(y=!0,O.map=a[3],is(()=>y=!1)),f.$set(O)},i(a){x||(Oe(f.$$.fragment,a),x=!0)},o(a){Ke(f.$$.fragment,a),x=!1},d(a){a&&ae(c),Gt(f)}}}function Rm(v){let c,f;return{c(){c=Ye("span"),f=Yt("No parent areas"),this.h()},l(y){c=Je(y,"SPAN",{class:!0});var x=$e(c);f=Jt(x,"No parent areas"),x.forEach(ae),this.h()},h(){ue(c,"class","muted svelte-amrd5n")},m(y,x){Ge(y,c,x),Ne(c,f)},p:Si,i:Si,o:Si,d(y){y&&ae(c)}}}function Fm(v){let c,f,y=[...v[1].parents].reverse(),x=[];for(let w=0;w<y.length;w+=1)x[w]=rd(ed(v,y,w));const S=w=>Ke(x[w],1,1,()=>{x[w]=null});return{c(){for(let w=0;w<x.length;w+=1)x[w].c();c=ti()},l(w){for(let a=0;a<x.length;a+=1)x[a].l(w);c=ti()},m(w,a){for(let A=0;A<x.length;A+=1)x[A].m(w,a);Ge(w,c,a),f=!0},p(w,a){if(a&2){y=[...w[1].parents].reverse();let A;for(A=0;A<y.length;A+=1){const O=ed(w,y,A);x[A]?(x[A].p(O,a),Oe(x[A],1)):(x[A]=rd(O),x[A].c(),Oe(x[A],1),x[A].m(c.parentNode,c))}for(pi(),A=y.length;A<x.length;A+=1)S(A);mi()}},i(w){if(!f){for(let a=0;a<y.length;a+=1)Oe(x[a]);f=!0}},o(w){x=x.filter(Boolean);for(let a=0;a<x.length;a+=1)Ke(x[a]);f=!1},d(w){Ar(x,w),w&&ae(c)}}}function Om(v){let c,f;return c=new pm({props:{type:"subdir"}}),{c(){Nt(c.$$.fragment)},l(y){ni(c.$$.fragment,y)},m(y,x){qt(c,y,x),f=!0},i(y){f||(Oe(c.$$.fragment,y),f=!0)},o(y){Ke(c.$$.fragment,y),f=!1},d(y){Gt(c,y)}}}function rd(v){let c,f,y,x=Qt(v[23])+"",S,w,a,A,O=v[20]!=0&&Om();return{c(){c=Ye("span"),O&&O.c(),f=Et(),y=Ye("a"),S=Yt(x),a=Et(),this.h()},l(N){c=Je(N,"SPAN",{class:!0});var U=$e(c);O&&O.l(U),f=Tt(U),y=Je(U,"A",{href:!0,"data-sveltekit-noscroll":!0,class:!0});var F=$e(y);S=Jt(F,x),F.forEach(ae),a=Tt(U),U.forEach(ae),this.h()},h(){ue(y,"href",w=gr+"/"+v[23].areacd+"/"),ue(y,"data-sveltekit-noscroll",""),ue(y,"class","svelte-amrd5n"),ue(c,"class","parent svelte-amrd5n"),Gi(c,"margin-left",v[20]==0?0:`${(v[20]-1)*20}px`,!1)},m(N,U){Ge(N,c,U),O&&O.m(c,null),Ne(c,f),Ne(c,y),Ne(y,S),Ne(c,a),A=!0},p(N,U){(!A||U&2)&&x!==(x=Qt(N[23])+"")&&xi(S,x),(!A||U&2&&w!==(w=gr+"/"+N[23].areacd+"/"))&&ue(y,"href",w)},i(N){A||(Oe(O),A=!0)},o(N){Ke(O),A=!1},d(N){N&&ae(c),O&&O.d()}}}function Vm(v){let c,f,y,x;const S=[Fm,Rm],w=[];function a(A,O){return A[1].parents[0]?0:1}return c=a(v),f=w[c]=S[c](v),{c(){f.c(),y=ti()},l(A){f.l(A),y=ti()},m(A,O){w[c].m(A,O),Ge(A,y,O),x=!0},p(A,O){let N=c;c=a(A),c===N?w[c].p(A,O):(pi(),Ke(w[N],1,1,()=>{w[N]=null}),mi(),f=w[c],f?f.p(A,O):(f=w[c]=S[c](A),f.c()),Oe(f,1),f.m(y.parentNode,y))},i(A){x||(Oe(f),x=!0)},o(A){Ke(f),x=!1},d(A){w[c].d(A),A&&ae(y)}}}function Um(v){let c,f,y=Qt(v[1])+"",x;return{c(){c=Ye("span"),f=Yt("No areas available within "),x=Yt(y),this.h()},l(S){c=Je(S,"SPAN",{class:!0});var w=$e(c);f=Jt(w,"No areas available within "),x=Jt(w,y),w.forEach(ae),this.h()},h(){ue(c,"class","muted svelte-amrd5n")},m(S,w){Ge(S,c,w),Ne(c,f),Ne(c,x)},p(S,w){w&2&&y!==(y=Qt(S[1])+"")&&xi(x,y)},d(S){S&&ae(c)}}}function Nm(v){let c,f;function y(A,O){return A[1].childTypes[1]?Gm:qm}let x=y(v),S=x(v),w=v[1].children.filter(v[15]),a=[];for(let A=0;A<w.length;A+=1)a[A]=ad(Qh(v,w,A));return{c(){S.c(),c=Et();for(let A=0;A<a.length;A+=1)a[A].c();f=ti()},l(A){S.l(A),c=Tt(A);for(let O=0;O<a.length;O+=1)a[O].l(A);f=ti()},m(A,O){S.m(A,O),Ge(A,c,O);for(let N=0;N<a.length;N+=1)a[N].m(A,O);Ge(A,f,O)},p(A,O){if(x===(x=y(A))&&S?S.p(A,O):(S.d(1),S=x(A),S&&(S.c(),S.m(c.parentNode,c))),O&6){w=A[1].children.filter(A[15]);let N;for(N=0;N<w.length;N+=1){const U=Qh(A,w,N);a[N]?a[N].p(U,O):(a[N]=ad(U),a[N].c(),a[N].m(f.parentNode,f))}for(;N<a.length;N+=1)a[N].d(1);a.length=w.length}},d(A){S.d(A),A&&ae(c),Ar(a,A),A&&ae(f)}}}function qm(v){let c,f=Oa(v[2].plural)+"",y,x;return{c(){c=Ye("span"),y=Yt(f),x=Ye("br"),this.h()},l(S){c=Je(S,"SPAN",{class:!0});var w=$e(c);y=Jt(w,f),w.forEach(ae),x=Je(S,"BR",{}),this.h()},h(){ue(c,"class","type-label svelte-amrd5n")},m(S,w){Ge(S,c,w),Ne(c,y),Ge(S,x,w)},p(S,w){w&4&&f!==(f=Oa(S[2].plural)+"")&&xi(y,f)},d(S){S&&ae(c),S&&ae(x)}}}function Gm(v){let c,f,y,x=v[1].childTypes,S=[];for(let w=0;w<x.length;w+=1)S[w]=sd($h(v,x,w));return{c(){c=Ye("select");for(let w=0;w<S.length;w+=1)S[w].c();this.h()},l(w){c=Je(w,"SELECT",{class:!0});var a=$e(c);for(let A=0;A<S.length;A+=1)S[A].l(a);a.forEach(ae),this.h()},h(){ue(c,"class","svelte-amrd5n"),v[2]===void 0&&bu(()=>v[14].call(c)),Gi(c,"display","block",!1)},m(w,a){Ge(w,c,a);for(let A=0;A<S.length;A+=1)S[A].m(c,null);eh(c,v[2]),f||(y=un(c,"change",v[14]),f=!0)},p(w,a){if(a&2){x=w[1].childTypes;let A;for(A=0;A<x.length;A+=1){const O=$h(w,x,A);S[A]?S[A].p(O,a):(S[A]=sd(O),S[A].c(),S[A].m(c,null))}for(;A<S.length;A+=1)S[A].d(1);S.length=x.length}a&6&&eh(c,w[2])},d(w){w&&ae(c),Ar(S,w),f=!1,y()}}}function sd(v){let c,f=Oa(v[6].plural)+"",y,x;return{c(){c=Ye("option"),y=Yt(f),this.h()},l(S){c=Je(S,"OPTION",{});var w=$e(c);y=Jt(w,f),w.forEach(ae),this.h()},h(){c.__value=x=v[6],c.value=c.__value},m(S,w){Ge(S,c,w),Ne(c,y)},p(S,w){w&2&&f!==(f=Oa(S[6].plural)+"")&&xi(y,f),w&2&&x!==(x=S[6])&&(c.__value=x,c.value=c.__value)},d(S){S&&ae(c)}}}function ad(v){let c,f=Qt(v[18])+"",y,x,S=v[20]==v[1].children.length-1?"":", ",w;return{c(){c=Ye("a"),y=Yt(f),w=Yt(S),this.h()},l(a){c=Je(a,"A",{href:!0,"data-sveltekit-noscroll":!0,class:!0});var A=$e(c);y=Jt(A,f),A.forEach(ae),w=Jt(a,S),this.h()},h(){ue(c,"href",x=gr+"/"+v[18].areacd+"/"),ue(c,"data-sveltekit-noscroll",""),ue(c,"class","svelte-amrd5n")},m(a,A){Ge(a,c,A),Ne(c,y),Ge(a,w,A)},p(a,A){A&6&&f!==(f=Qt(a[18])+"")&&xi(y,f),A&6&&x!==(x=gr+"/"+a[18].areacd+"/")&&ue(c,"href",x),A&2&&S!==(S=a[20]==a[1].children.length-1?"":", ")&&xi(w,S)},d(a){a&&ae(c),a&&ae(w)}}}function jm(v){let c;function f(S,w){return S[2]?Nm:Um}let y=f(v),x=y(v);return{c(){x.c(),c=ti()},l(S){x.l(S),c=ti()},m(S,w){x.m(S,w),Ge(S,c,w)},p(S,w){y===(y=f(S))&&x?x.p(S,w):(x.d(1),x=y(S),x&&(x.c(),x.m(c.parentNode,c)))},d(S){x.d(S),S&&ae(c)}}}function Zm(v){let c,f,y,x,S,w;return c=new fu({props:{colspan:2,rowspan:2,blank:!0,$$slots:{default:[Bm]},$$scope:{ctx:v}}}),y=new fu({props:{title:"Parent areas of "+Qt(v[1],"text"),$$slots:{default:[Vm]},$$scope:{ctx:v}}}),S=new fu({props:{title:"Areas "+Qt(v[1],"in"),$$slots:{default:[jm]},$$scope:{ctx:v}}}),{c(){Nt(c.$$.fragment),f=Et(),Nt(y.$$.fragment),x=Et(),Nt(S.$$.fragment)},l(a){ni(c.$$.fragment,a),f=Tt(a),ni(y.$$.fragment,a),x=Tt(a),ni(S.$$.fragment,a)},m(a,A){qt(c,a,A),Ge(a,f,A),qt(y,a,A),Ge(a,x,A),qt(S,a,A),w=!0},p(a,A){const O={};A&536870990&&(O.$$scope={dirty:A,ctx:a}),c.$set(O);const N={};A&2&&(N.title="Parent areas of "+Qt(a[1],"text")),A&536870914&&(N.$$scope={dirty:A,ctx:a}),y.$set(N);const U={};A&2&&(U.title="Areas "+Qt(a[1],"in")),A&536870918&&(U.$$scope={dirty:A,ctx:a}),S.$set(U)},i(a){w||(Oe(c.$$.fragment,a),Oe(y.$$.fragment,a),Oe(S.$$.fragment,a),w=!0)},o(a){Ke(c.$$.fragment,a),Ke(y.$$.fragment,a),Ke(S.$$.fragment,a),w=!1},d(a){Gt(c,a),a&&ae(f),Gt(y,a),a&&ae(x),Gt(S,a)}}}function od(v){let c,f;return c=new Va({props:{title:"Census maps",url:"https://www.ons.gov.uk/census/maps/?"+v[6].key+"="+v[1].areacd,description:"See how "+Qt(v[1],"text")+" compares to other areas",image:"https://www.ons.gov.uk/resource?uri=/peoplepopulationandcommunity/populationandmigration/populationestimates/articles/censusmaps/2022-11-02/b178c24d.png"}}),{c(){Nt(c.$$.fragment)},l(y){ni(c.$$.fragment,y)},m(y,x){qt(c,y,x),f=!0},p(y,x){const S={};x&66&&(S.url="https://www.ons.gov.uk/census/maps/?"+y[6].key+"="+y[1].areacd),x&2&&(S.description="See how "+Qt(y[1],"text")+" compares to other areas"),c.$set(S)},i(y){f||(Oe(c.$$.fragment,y),f=!0)},o(y){Ke(c.$$.fragment,y),f=!1},d(y){Gt(c,y)}}}function ld(v){let c,f;return c=new Va({props:{title:"Custom profiles",url:"https://stately-salamander-b9768e.netlify.app/build/#"+v[1].areacd,description:"Build a custom area profile for "+Qt(v[1],"text"),image:"https://www.ons.gov.uk/resource?uri=/peoplepopulationandcommunity/personalandhouseholdfinances/incomeandwealth/articles/mappingincomedeprivationatalocalauthoritylevel/2021-05-24/96c97858.png"}}),{c(){Nt(c.$$.fragment)},l(y){ni(c.$$.fragment,y)},m(y,x){qt(c,y,x),f=!0},p(y,x){const S={};x&2&&(S.url="https://stately-salamander-b9768e.netlify.app/build/#"+y[1].areacd),x&2&&(S.description="Build a custom area profile for "+Qt(y[1],"text")),c.$set(S)},i(y){f||(Oe(c.$$.fragment,y),f=!0)},o(y){Ke(c.$$.fragment,y),f=!1},d(y){Gt(c,y)}}}function cd(v){let c,f,y,x;return c=new Va({props:{title:"Area reports",url:"https://area-reports.netlify.app/"+v[1].areacd,description:"Read how "+Qt(v[1],"text")+" has changed since the 2011 Census",image:"https://www.ons.gov.uk/resource?uri=/peoplepopulationandcommunity/populationandmigration/populationestimates/articles/howthepopulationchangedwhereyoulivecensus2021/2022-06-28/fb1398a9.png"}}),y=new Va({props:{title:"Census quiz",url:"https://census-quiz.netlify.app/#"+v[1].areacd,description:"Build a custom area profile for "+Qt(v[1],"text"),image:"https://www.ons.gov.uk/resource?uri=/peoplepopulationandcommunity/wellbeing/articles/areyoungpeopledetachedfromtheirneighbourhoods/2019-07-24/d083b77e.png"}}),{c(){Nt(c.$$.fragment),f=Et(),Nt(y.$$.fragment)},l(S){ni(c.$$.fragment,S),f=Tt(S),ni(y.$$.fragment,S)},m(S,w){qt(c,S,w),Ge(S,f,w),qt(y,S,w),x=!0},p(S,w){const a={};w&2&&(a.url="https://area-reports.netlify.app/"+S[1].areacd),w&2&&(a.description="Read how "+Qt(S[1],"text")+" has changed since the 2011 Census"),c.$set(a);const A={};w&2&&(A.url="https://census-quiz.netlify.app/#"+S[1].areacd),w&2&&(A.description="Build a custom area profile for "+Qt(S[1],"text")),y.$set(A)},i(S){x||(Oe(c.$$.fragment,S),Oe(y.$$.fragment,S),x=!0)},o(S){Ke(c.$$.fragment,S),Ke(y.$$.fragment,S),x=!1},d(S){Gt(c,S),S&&ae(f),Gt(y,S)}}}function Hm(v){let c=["ew","lad","msoa","oa"].includes(v[6].key),f,y=!["ew","ctry","rgn"].includes(v[6].key),x,S,w,a,A,O,N=c&&od(v),U=y&&ld(v),F=v[6].key==="lad"&&cd(v);return w=new Va({props:{title:"Census map game",url:"https://www.ons.gov.uk/peoplepopulationandcommunity/populationandmigration/populationestimates/articles/playthecensus2021populationmapgame/2022-06-28",description:"Play the higher-or-lower map game with census data",image:"https://www.ons.gov.uk/resource?uri=/peoplepopulationandcommunity/populationandmigration/populationestimates/articles/playthecensus2021populationmapgame/2022-06-28/cb85ea78.png"}}),A=new Va({props:{title:"Story of the census",url:"https://www.ons.gov.uk/visualisations/storyofthecensus/",description:"A history of the census, from 1801 to 2021",image:"https://www.ons.gov.uk/resource?uri=/peoplepopulationandcommunity/populationandmigration/populationestimates/articles/historyofthecensus1801to2021/2022-06-20/e8d29221.png"}}),{c(){N&&N.c(),f=Et(),U&&U.c(),x=Et(),F&&F.c(),S=Et(),Nt(w.$$.fragment),a=Et(),Nt(A.$$.fragment)},l(ee){N&&N.l(ee),f=Tt(ee),U&&U.l(ee),x=Tt(ee),F&&F.l(ee),S=Tt(ee),ni(w.$$.fragment,ee),a=Tt(ee),ni(A.$$.fragment,ee)},m(ee,ge){N&&N.m(ee,ge),Ge(ee,f,ge),U&&U.m(ee,ge),Ge(ee,x,ge),F&&F.m(ee,ge),Ge(ee,S,ge),qt(w,ee,ge),Ge(ee,a,ge),qt(A,ee,ge),O=!0},p(ee,ge){ge&64&&(c=["ew","lad","msoa","oa"].includes(ee[6].key)),c?N?(N.p(ee,ge),ge&64&&Oe(N,1)):(N=od(ee),N.c(),Oe(N,1),N.m(f.parentNode,f)):N&&(pi(),Ke(N,1,1,()=>{N=null}),mi()),ge&64&&(y=!["ew","ctry","rgn"].includes(ee[6].key)),y?U?(U.p(ee,ge),ge&64&&Oe(U,1)):(U=ld(ee),U.c(),Oe(U,1),U.m(x.parentNode,x)):U&&(pi(),Ke(U,1,1,()=>{U=null}),mi()),ee[6].key==="lad"?F?(F.p(ee,ge),ge&64&&Oe(F,1)):(F=cd(ee),F.c(),Oe(F,1),F.m(S.parentNode,S)):F&&(pi(),Ke(F,1,1,()=>{F=null}),mi())},i(ee){O||(Oe(N),Oe(U),Oe(F),Oe(w.$$.fragment,ee),Oe(A.$$.fragment,ee),O=!0)},o(ee){Ke(N),Ke(U),Ke(F),Ke(w.$$.fragment,ee),Ke(A.$$.fragment,ee),O=!1},d(ee){N&&N.d(ee),ee&&ae(f),U&&U.d(ee),ee&&ae(x),F&&F.d(ee),ee&&ae(S),Gt(w,ee),ee&&ae(a),Gt(A,ee)}}}function Wm(v){let c,f,y,x;return c=new yh({props:{title:"Explore related areas",$$slots:{default:[Zm]},$$scope:{ctx:v}}}),y=new yh({props:{title:"Interactive content for "+Qt(v[1],"text"),$$slots:{default:[Hm]},$$scope:{ctx:v}}}),{c(){Nt(c.$$.fragment),f=Et(),Nt(y.$$.fragment)},l(S){ni(c.$$.fragment,S),f=Tt(S),ni(y.$$.fragment,S)},m(S,w){qt(c,S,w),Ge(S,f,w),qt(y,S,w),x=!0},p(S,w){const a={};w&536870990&&(a.$$scope={dirty:w,ctx:S}),c.$set(a);const A={};w&2&&(A.title="Interactive content for "+Qt(S[1],"text")),w&536870978&&(A.$$scope={dirty:w,ctx:S}),y.$set(A)},i(S){x||(Oe(c.$$.fragment,S),Oe(y.$$.fragment,S),x=!0)},o(S){Ke(c.$$.fragment,S),Ke(y.$$.fragment,S),x=!1},d(S){Gt(c,S),S&&ae(f),Gt(y,S)}}}function Xm(v){let c,f,y,x,S,w,a,A,O,N,U,F,ee,ge,xe,et,me,Ve;document.title=c=v[1]?`${Qt(v[1])} - ONS Area hub`:"ONS Area hub";const Ee=[zm,Am],fe=[];function Pe(He,Be){return He[1]?0:He[1]?-1:1}return~(xe=Pe(v))&&(et=fe[xe]=Ee[xe](v)),{c(){f=Ye("link"),y=Ye("meta"),S=Ye("meta"),w=Ye("meta"),A=Ye("meta"),O=Ye("meta"),N=Ye("meta"),F=Ye("meta"),ge=Et(),et&&et.c(),me=ti(),this.h()},l(He){const Be=gd('[data-svelte="svelte-1tze292"]',document.head);f=Je(Be,"LINK",{rel:!0,href:!0}),y=Je(Be,"META",{property:!0,content:!0}),S=Je(Be,"META",{property:!0,content:!0}),w=Je(Be,"META",{property:!0,content:!0}),A=Je(Be,"META",{property:!0,content:!0}),O=Je(Be,"META",{property:!0,content:!0}),N=Je(Be,"META",{name:!0,content:!0}),F=Je(Be,"META",{property:!0,content:!0}),Be.forEach(ae),ge=Tt(He),et&&et.l(He),me=ti(),this.h()},h(){ue(f,"rel","icon"),ue(f,"href",Ba+"/favicon.ico"),ue(y,"property","og:title"),ue(y,"content",x=v[1]?`${Qt(v[1])} - ONS Area hub`:"ONS Area hub"),ue(S,"property","og:type"),ue(S,"content","website"),ue(w,"property","og:url"),ue(w,"content",a=v[1]?`${Ba}/${v[1].areacd}/`:`${Ba}/`),ue(A,"property","og:image"),ue(A,"content",Ba+"/img/og.png"),ue(O,"property","og:image:type"),ue(O,"content","image/png"),ue(N,"name","description"),ue(N,"content",U=v[1]?`Explore content for ${Qt(v[1])} from the ONS`:"Explore content for England and Wales from the ONS"),ue(F,"property","og:description"),ue(F,"content",ee=v[1]?`Explore content for ${Qt(v[1])} from the ONS`:"Explore content for England and Wales from the ONS")},m(He,Be){Ne(document.head,f),Ne(document.head,y),Ne(document.head,S),Ne(document.head,w),Ne(document.head,A),Ne(document.head,O),Ne(document.head,N),Ne(document.head,F),Ge(He,ge,Be),~xe&&fe[xe].m(He,Be),Ge(He,me,Be),Ve=!0},p(He,[Be]){(!Ve||Be&2)&&c!==(c=He[1]?`${Qt(He[1])} - ONS Area hub`:"ONS Area hub")&&(document.title=c),(!Ve||Be&2&&x!==(x=He[1]?`${Qt(He[1])} - ONS Area hub`:"ONS Area hub"))&&ue(y,"content",x),(!Ve||Be&2&&a!==(a=He[1]?`${Ba}/${He[1].areacd}/`:`${Ba}/`))&&ue(w,"content",a),(!Ve||Be&2&&U!==(U=He[1]?`Explore content for ${Qt(He[1])} from the ONS`:"Explore content for England and Wales from the ONS"))&&ue(N,"content",U),(!Ve||Be&2&&ee!==(ee=He[1]?`Explore content for ${Qt(He[1])} from the ONS`:"Explore content for England and Wales from the ONS"))&&ue(F,"content",ee);let Qe=xe;xe=Pe(He),xe===Qe?~xe&&fe[xe].p(He,Be):(et&&(pi(),Ke(fe[Qe],1,1,()=>{fe[Qe]=null}),mi()),~xe?(et=fe[xe],et?et.p(He,Be):(et=fe[xe]=Ee[xe](He),et.c()),Oe(et,1),et.m(me.parentNode,me)):et=null)},i(He){Ve||(Oe(et),Ve=!0)},o(He){Ke(et),Ve=!1},d(He){ae(f),ae(y),ae(S),ae(w),ae(A),ae(O),ae(N),ae(F),He&&ae(ge),~xe&&fe[xe].d(He),He&&ae(me)}}}const Ba="https://onsvisual.github.io/geo-hub";let Km="light";const ud=v=>v.areacd,hd=v=>v.areacd;function Ym(v,c,f){let{data:y}=c,{places:x,lookup:S,place:w,type:a}=y,A;Na(()=>{w?w.childTypes[0]?f(2,A=w.childTypes[0]):f(2,A=null):du(`${gr}/K04000001/`)}),wp(()=>{w?w.childTypes[0]?f(2,A=w.childTypes[0]):f(2,A=null):du(`${gr}/K04000001/`),O&&O.fitBounds(w.bounds,{padding:20})}),ws("theme",xp[Km]);let O=null;function N(Pe){Pe&&Pe!=w.areacd&&du(`${gr}/${Pe}/`,{noScroll:!0})}let U="Type a place name or postcode",F="";async function ee(Pe){return Pe.length>2&&/\d/.test(Pe)?(await(await fetch(`https://api.postcodes.io/postcodes/${Pe}/autocomplete`)).json()).result.map(Qe=>({areacd:Qe,areanm:Qe,postcode:!0})):Pe.length>2?x.filter(He=>He.areanm.toLowerCase().slice(0,Pe.length)==Pe.toLowerCase()):[]}async function ge(Pe){if(Pe.detail.postcode){let Be=await(await fetch(`https://api.postcodes.io/postcodes/${Pe.detail.areacd}`)).json();if(Be.result){let Qe=x.find(ke=>ke.areacd==Be.result.codes.admin_district);Qe?(window.dataLayer&&window.dataLayer.push({event:"postcodeSelect",name:Qe.areanm,code:Qe.areacd}),f(4,U="Type a place name or postcode"),N(Qe.areacd)):f(4,U="Postcode must be in England or Wales")}}else window.dataLayer&&window.dataLayer.push({event:"nameSelect",name:Pe.detail.areanm,code:Pe.detail.areacd}),N(Pe.detail.areacd),f(4,U="Type a place name or postcode")}function xe(Pe){window.dataLayer&&Pe.detail.feature&&window.dataLayer.push({event:"nameSelect",name:Pe.detail.feature.properties.areanm,code:Pe.detail.id}),N(Pe.detail.id)}function et(Pe){F=Pe,f(5,F)}const me=Pe=>({label:Qt(Pe),url:`${gr}/${Pe.areacd}/`});function Ve(Pe){O=Pe,f(3,O)}function Ee(){A=vp(this),f(2,A),f(1,w),f(10,y)}const fe=Pe=>A.codes.includes(Pe.areacd.slice(0,3));return v.$$set=Pe=>{"data"in Pe&&f(10,y=Pe.data)},v.$$.update=()=>{v.$$.dirty&1024&&f(0,{places:x,lookup:S,place:w,type:a}=y,x,(f(1,w),f(10,y)),(f(6,a),f(10,y)))},[x,w,A,O,U,F,a,ee,ge,xe,y,et,me,Ve,Ee,fe]}class e0 extends Wi{constructor(c){super(),Xi(this,c,Ym,Xm,Ki,{data:10})}}export{e0 as default};
